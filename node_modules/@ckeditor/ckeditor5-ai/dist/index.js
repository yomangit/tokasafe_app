/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Plugin as _0x54da78,Command as _0x4958db,icons as _0x3fbb72}from'@ckeditor/ckeditor5-core/dist/index.js';import{uid as _0x1cc8ef,CKEditorError as _0x2f0c49,ObservableMixin as _0x5c535c,global as _0x1fdbd5,isVisible as it,Rect as st,Collection as _0x51fc66,FocusTracker as _0x50c6e1,KeystrokeHandler as ts,first as _0x228044}from'@ckeditor/ckeditor5-utils/dist/index.js';import{ToolbarView as rt,ButtonView as _0x4927a1,View as _0x2d211f,SpinnerView as _0x21ec4f,IconView as _0x197aec,AutocompleteView as ot,ListView as lt,ListItemGroupView as ut,ListItemView as _0x32a887,ButtonLabelView as te,FocusCycler as _0x3afe16,createLabeledTextarea as _0x553bc1,Dialog as _0x5320b6,createDropdown as _0x1b379d,addMenuToDropdown as _0x3bc814,MenuBarMenuView as _0xedaeab,MenuBarMenuListItemButtonView as _0x5834a2,DialogViewPosition as _0x43526d,MenuBarMenuListView as _0x3db9f4,MenuBarMenuListItemView as _0x48d377}from'@ckeditor/ckeditor5-ui/dist/index.js';import{icons as at}from'ckeditor5-collaboration/dist/index.js';import{UpcastWriter as _0x5c996c,Matcher as _0x29a78c,DataTransfer as _0x365b4e,DomEventData as _0x203c5f}from'@ckeditor/ckeditor5-engine/dist/index.js';import{unescape as _0x3eb923,escape as _0x36522b}from'lodash-es';import{ClipboardMarkersUtils as _0x1ceaf2}from'@ckeditor/ckeditor5-clipboard/dist/index.js';import{BedrockRuntimeClient as _0x515b30,InvokeModelWithResponseStreamCommand as _0xbf5ada,InvokeModelCommand as _0x3b73f5}from'@aws-sdk/client-bedrock-runtime';const I='_ungrouppedCommands';function o(_0x3a767d,_0x475fbc){const _0x39fdb1=(0x0,_0x475fbc['t'])('Other');return _0x3a767d['length']?'groupId'in _0x3a767d[0x0]?_0x3a767d:[{'groupId':I,'groupLabel':_0x39fdb1,'order':0x1/0x0,'commands':_0x3a767d}]:[{'groupId':I,'groupLabel':_0x39fdb1,'order':0x1/0x0,'commands':[]}];}const u='ai-ui';class a extends _0x54da78{static get['pluginName'](){return'AIAssistantEditing';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}['init'](){const {editor:_0x3f120d}=this,_0x1ce718=['ck-fake-ai-selection'];_0x3f120d['config']['get']('ai.useTheme')&&_0x1ce718['push']('ck-ai-assistant-ui_theme'),_0x3f120d['conversion']['for']('editingDowncast')['markerToHighlight']({'model':u,'view':{'classes':_0x1ce718,'priority':0xc}}),_0x3f120d['conversion']['for']('editingDowncast')['markerToElement']({'model':u,'view':(_0x9f685d,{writer:_0x1457e2})=>{if(!_0x9f685d['markerRange']['isCollapsed'])return null;const _0x1865d3=_0x1457e2['createUIElement']('span');return _0x1457e2['addClass'](['ck-fake-ai-selection','ck-fake-ai-selection_collapsed'],_0x1865d3),_0x1865d3;}});}['afterInit'](){!async function(_0x1b8244){const _0x2642b9=_0x2640f7([0x4d,0x59,0x6a,0x45,0x4e,0x55,0x6e,0x31,0x47,0x4a,0x7a,0x67,0x68,0x6d,0x76,0x78,0x63,0x35,0x41,0x46,0x73,0x54,0x42,0x75,0x74,0x51,0x65,0x39,0x48,0x37,0x4c,0x52,0x70,0x36,0x49,0x43,0x32,0x77,0x50,0x33,0x61,0x79,0x30,0x6b,0x4b,0x56,0x62,0x58,0x66,0x5a,0x6f,0x71,0x4f,0x57,0x69,0x44,0x38,0x6c,0x64,0x34,0x72,0x53]),_0xc923e0=0x3ab66382,_0x4cef80=0x3ab13a5a^_0xc923e0,_0xef9dbd=window[_0x2640f7([0x44,0x61,0x74,0x65])][_0x2640f7([0x6e,0x6f,0x77])](),_0x17db3c=_0x1b8244[_0x2640f7([0x65,0x64,0x69,0x74,0x6f,0x72])],_0xdd7258=new window[(_0x2640f7([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x5f57d5=>{_0x17db3c[_0x2640f7([0x6f,0x6e,0x63,0x65])](_0x2640f7([0x72,0x65,0x61,0x64,0x79]),_0x5f57d5);}),_0x23d008={[_0x2640f7([0x6b,0x74,0x79])]:_0x2640f7([0x45,0x43]),[_0x2640f7([0x75,0x73,0x65])]:_0x2640f7([0x73,0x69,0x67]),[_0x2640f7([0x63,0x72,0x76])]:_0x2640f7([0x50,0x2d,0x32,0x35,0x36]),[_0x2640f7([0x78])]:_0x2640f7([0x69,0x43,0x6a,0x4f,0x43,0x76,0x44,0x46,0x49,0x36,0x6c,0x51,0x48,0x48,0x54,0x31,0x38,0x6a,0x56,0x77,0x52,0x66,0x6b,0x66,0x48,0x51,0x32,0x61,0x5f,0x4d,0x79,0x6d,0x54,0x33,0x35,0x4c,0x51,0x56,0x6f,0x46,0x53,0x41,0x49]),[_0x2640f7([0x79])]:_0x2640f7([0x6b,0x58,0x49,0x79,0x4a,0x34,0x65,0x76,0x74,0x43,0x45,0x46,0x52,0x6d,0x78,0x4b,0x53,0x55,0x70,0x4b,0x39,0x66,0x44,0x57,0x34,0x35,0x39,0x76,0x58,0x4f,0x76,0x56,0x72,0x68,0x66,0x36,0x75,0x51,0x41,0x65,0x4f,0x69,0x6f]),[_0x2640f7([0x61,0x6c,0x67])]:_0x2640f7([0x45,0x53,0x32,0x35,0x36])},_0x4d1691=_0x17db3c[_0x2640f7([0x63,0x6f,0x6e,0x66,0x69,0x67])][_0x2640f7([0x67,0x65,0x74])](_0x2640f7([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x4b,0x65,0x79]));async function _0x494a7b(){let _0x3d7e78,_0x464a99=null,_0x2812e7=null;try{if(_0x4d1691==_0x2640f7([0x47,0x50,0x4c]))return _0x2640f7([0x4e,0x6f,0x74,0x41,0x6c,0x6c,0x6f,0x77,0x65,0x64]);if(_0x3d7e78=_0x46a37a(),!_0x3d7e78)return _0x2640f7([0x49,0x6e,0x76,0x61,0x6c,0x69,0x64]);return _0x3d7e78[_0x2640f7([0x75,0x73,0x61,0x67,0x65,0x45,0x6e,0x64,0x70,0x6f,0x69,0x6e,0x74])]&&(_0x2812e7=_0xc101f4(_0x3d7e78[_0x2640f7([0x75,0x73,0x61,0x67,0x65,0x45,0x6e,0x64,0x70,0x6f,0x69,0x6e,0x74])],_0x3d7e78[_0x2640f7([0x6a,0x74,0x69])])),await _0x59c654()?_0x138b2b()?_0x5b86ad()?_0x2640f7([0x45,0x78,0x70,0x69,0x72,0x65,0x64]):_0x184b69()?(_0x3d7e78[_0x2640f7([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x54,0x79,0x70,0x65])]==_0x2640f7([0x65,0x76,0x61,0x6c,0x75,0x61,0x74,0x69,0x6f,0x6e])&&(_0x464a99=_0x6473cd(_0x2640f7([0x45,0x76,0x61,0x6c,0x75,0x61,0x74,0x69,0x6f,0x6e,0x4c,0x69,0x6d,0x69,0x74]))),_0x3d7e78[_0x2640f7([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x54,0x79,0x70,0x65])]==_0x2640f7([0x74,0x72,0x69,0x61,0x6c])&&(_0x464a99=_0x6473cd(_0x2640f7([0x54,0x72,0x69,0x61,0x6c,0x4c,0x69,0x6d,0x69,0x74]))),_0x3d7e78[_0x2640f7([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x54,0x79,0x70,0x65])]==_0x2640f7([0x64,0x65,0x76,0x65,0x6c,0x6f,0x70,0x6d,0x65,0x6e,0x74])&&(_0x464a99=_0x6473cd(_0x2640f7([0x44,0x65,0x76,0x65,0x6c,0x6f,0x70,0x6d,0x65,0x6e,0x74,0x4c,0x69,0x6d,0x69,0x74]))),await _0x2ad6c6()):_0x2640f7([0x44,0x6f,0x6d,0x61,0x69,0x6e,0x4c,0x69,0x6d,0x69,0x74]):_0x2640f7([0x4e,0x6f,0x74,0x41,0x6c,0x6c,0x6f,0x77,0x65,0x64]):_0x2640f7([0x49,0x6e,0x76,0x61,0x6c,0x69,0x64]);}catch(_0x4bc5af){return _0x2640f7([0x49,0x6e,0x76,0x61,0x6c,0x69,0x64]);}function _0x5b86ad(){const _0x4f0351=[_0x2640f7([0x65,0x76,0x61,0x6c,0x75,0x61,0x74,0x69,0x6f,0x6e]),_0x2640f7([0x74,0x72,0x69,0x61,0x6c])][_0x2640f7([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x3d7e78[_0x2640f7([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x54,0x79,0x70,0x65])])?_0xef9dbd/0x3e8:0xe10*_0x4cef80;return _0x3d7e78[_0x2640f7([0x65,0x78,0x70])]<_0x4f0351;}function _0x138b2b(){const _0x9ac636=_0x3d7e78[_0x2640f7([0x66,0x65,0x61,0x74,0x75,0x72,0x65,0x73])];return!!_0x9ac636&&(!!_0x9ac636[_0x2640f7([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x2640f7([0x2a]))||!!_0x9ac636[_0x2640f7([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x2640f7([0x41,0x49])));}function _0x184b69(){const _0x49def5=_0x3d7e78[_0x2640f7([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x64,0x48,0x6f,0x73,0x74,0x73])];if(!_0x49def5||0x0==_0x49def5[_0x2640f7([0x6c,0x65,0x6e,0x67,0x74,0x68])])return!0x0;const {hostname:_0x548455}=new URL(window[_0x2640f7([0x6c,0x6f,0x63,0x61,0x74,0x69,0x6f,0x6e])]['href']);if(_0x49def5[_0x2640f7([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x548455))return!0x0;const _0x223d33=_0x548455[_0x2640f7([0x73,0x70,0x6c,0x69,0x74])](_0x2640f7([0x2e]));return _0x49def5[_0x2640f7([0x66,0x69,0x6c,0x74,0x65,0x72])](_0x610ac2=>_0x610ac2[_0x2640f7([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x2640f7([0x2a])))[_0x2640f7([0x6d,0x61,0x70])](_0x3d49ae=>_0x3d49ae[_0x2640f7([0x73,0x70,0x6c,0x69,0x74])](_0x2640f7([0x2e])))[_0x2640f7([0x73,0x6f,0x6d,0x65])](_0x206e9a=>_0x223d33[_0x2640f7([0x65,0x76,0x65,0x72,0x79])]((_0x1e0799,_0x5eccf7)=>_0x206e9a[_0x5eccf7]===_0x1e0799||_0x206e9a[_0x5eccf7]===_0x2640f7([0x2a])));}function _0x2ad6c6(){return _0x464a99&&_0x2812e7?new window[(_0x2640f7([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))]((_0x4ad465,_0x494076)=>{_0x464a99[_0x2640f7([0x74,0x68,0x65,0x6e])](_0x4ad465,_0x494076),_0x2812e7[_0x2640f7([0x74,0x68,0x65,0x6e])](_0x11fcd6=>{_0x11fcd6!=_0x2640f7([0x56,0x61,0x6c,0x69,0x64])&&_0x4ad465(_0x11fcd6);},_0x494076);}):_0x464a99||_0x2812e7||_0x2640f7([0x56,0x61,0x6c,0x69,0x64]);}}function _0xc101f4(_0x24432b,_0x39ab6b){return new window[(_0x2640f7([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x444f5f=>{if(_0x3c6e9c())return _0x444f5f(_0x2640f7([0x56,0x61,0x6c,0x69,0x64]));_0x1cc4f8(),_0x17db3c[_0x2640f7([0x64,0x65,0x63,0x6f,0x72,0x61,0x74,0x65])](_0x2640f7([0x5f,0x73,0x65,0x6e,0x64,0x55,0x73,0x61,0x67,0x65,0x52,0x65,0x71,0x75,0x65,0x73,0x74]));let _0x16953f=!0x1;const _0x509898=_0x1cc8ef();function _0x468b94(_0x580e7c){return!!_0x580e7c&&(typeof _0x580e7c===_0x2640f7([0x6f,0x62,0x6a,0x65,0x63,0x74])||typeof _0x580e7c===_0x2640f7([0x66,0x75,0x6e,0x63,0x74,0x69,0x6f,0x6e]))&&typeof _0x580e7c[_0x2640f7([0x74,0x68,0x65,0x6e])]===_0x2640f7([0x66,0x75,0x6e,0x63,0x74,0x69,0x6f,0x6e])&&typeof _0x580e7c[_0x2640f7([0x63,0x61,0x74,0x63,0x68])]===_0x2640f7([0x66,0x75,0x6e,0x63,0x74,0x69,0x6f,0x6e]);}function _0x46e8c2(_0x2f0b81){_0x11ac0a(_0x2f0b81)[_0x2640f7([0x74,0x68,0x65,0x6e])](_0x28f91a=>{if(!_0x28f91a||_0x28f91a[_0x2640f7([0x73,0x74,0x61,0x74,0x75,0x73])]!=_0x2640f7([0x6f,0x6b]))return _0x2640f7([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]);return _0x479c8a(_0x20741a(_0x509898+_0x39ab6b))!=_0x28f91a[_0x2640f7([0x76,0x65,0x72,0x69,0x66,0x69,0x63,0x61,0x74,0x69,0x6f,0x6e])]?_0x2640f7([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]):_0x2640f7([0x56,0x61,0x6c,0x69,0x64]);})[_0x2640f7([0x74,0x68,0x65,0x6e])](_0x5c0c56=>(_0x55a670(),_0x5c0c56),()=>{const _0x57b60b=_0x330c34();return null==_0x57b60b?(_0x55a670(),_0x2640f7([0x56,0x61,0x6c,0x69,0x64])):_0x2640f7(_0xef9dbd-_0x57b60b>(0x1ebae782^_0xc923e0)?[0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]:[0x56,0x61,0x6c,0x69,0x64]);})[_0x2640f7([0x74,0x68,0x65,0x6e])](_0x444f5f)[_0x2640f7([0x63,0x61,0x74,0x63,0x68])](()=>{_0x444f5f(_0x2640f7([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]));});const _0x23fe19=0x3a808d02^_0xc923e0;function _0x55a670(){const _0x5bbd79=_0x2640f7([0x6c,0x6c,0x63,0x74,0x2d])+_0x479c8a(_0x20741a(_0x24432b)),_0x1d8bb3=_0x449efa(_0x479c8a(window[_0x2640f7([0x4d,0x61,0x74,0x68])][_0x2640f7([0x63,0x65,0x69,0x6c])](_0xef9dbd/_0x23fe19)));window[_0x2640f7([0x6c,0x6f,0x63,0x61,0x6c,0x53,0x74,0x6f,0x72,0x61,0x67,0x65])][_0x2640f7([0x73,0x65,0x74,0x49,0x74,0x65,0x6d])](_0x5bbd79,_0x1d8bb3);}function _0x330c34(){const _0x4c085c=_0x2640f7([0x6c,0x6c,0x63,0x74,0x2d])+_0x479c8a(_0x20741a(_0x24432b)),_0x419081=window[_0x2640f7([0x6c,0x6f,0x63,0x61,0x6c,0x53,0x74,0x6f,0x72,0x61,0x67,0x65])][_0x2640f7([0x67,0x65,0x74,0x49,0x74,0x65,0x6d])](_0x4c085c);return _0x419081?window[_0x2640f7([0x70,0x61,0x72,0x73,0x65,0x49,0x6e,0x74])](_0x449efa(_0x419081),0x10)*_0x23fe19:null;}function _0x11ac0a(_0x48615c){return new window[(_0x2640f7([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))]((_0x39fbce,_0x2b9931)=>{_0x48615c[_0x2640f7([0x74,0x68,0x65,0x6e])](_0x39fbce,_0x2b9931),window[_0x2640f7([0x73,0x65,0x74,0x54,0x69,0x6d,0x65,0x6f,0x75,0x74])](_0x2b9931,0x3ab7b742^_0xc923e0);});}}_0x17db3c[_0x2640f7([0x6f,0x6e])](_0x2640f7([0x5f,0x73,0x65,0x6e,0x64,0x55,0x73,0x61,0x67,0x65,0x52,0x65,0x71,0x75,0x65,0x73,0x74]),(_0x3a3565,_0x109cb4)=>{if(_0x109cb4[0x0]!=_0x24432b)return _0x444f5f(_0x2640f7([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]));_0x109cb4[0x1]={..._0x109cb4[0x1],[_0x2640f7([0x72,0x65,0x71,0x75,0x65,0x73,0x74,0x49,0x64])]:_0x509898};},{[_0x2640f7([0x70,0x72,0x69,0x6f,0x72,0x69,0x74,0x79])]:_0x2640f7([0x68,0x69,0x67,0x68])}),_0x17db3c[_0x2640f7([0x6f,0x6e])](_0x2640f7([0x5f,0x73,0x65,0x6e,0x64,0x55,0x73,0x61,0x67,0x65,0x52,0x65,0x71,0x75,0x65,0x73,0x74]),_0x386d6b=>{_0x468b94(_0x386d6b[_0x2640f7([0x72,0x65,0x74,0x75,0x72,0x6e])])&&(_0x16953f=!0x0,_0x46e8c2(_0x386d6b[_0x2640f7([0x72,0x65,0x74,0x75,0x72,0x6e])]));},{[_0x2640f7([0x70,0x72,0x69,0x6f,0x72,0x69,0x74,0x79])]:_0x2640f7([0x6c,0x6f,0x77])}),_0xdd7258[_0x2640f7([0x74,0x68,0x65,0x6e])](()=>{_0x16953f||_0x444f5f(_0x2640f7([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]));});});function _0x3c6e9c(){return _0x17db3c[_0x2640f7([0x65,0x64,0x69,0x74,0x69,0x6e,0x67])][_0x2640f7([0x76,0x69,0x65,0x77])][_0x2640f7([0x5f,0x6f,0x76,0x65,0x72,0x6c,0x61,0x79,0x4d,0x6f,0x64,0x65,0x48,0x69,0x6e,0x74])]==_0x2640f7([0x61,0x75,0x74,0x6f]);}function _0x1cc4f8(){_0x17db3c[_0x2640f7([0x65,0x64,0x69,0x74,0x69,0x6e,0x67])][_0x2640f7([0x76,0x69,0x65,0x77])][_0x2640f7([0x5f,0x6f,0x76,0x65,0x72,0x6c,0x61,0x79,0x4d,0x6f,0x64,0x65,0x48,0x69,0x6e,0x74])]=_0x2640f7([0x61,0x75,0x74,0x6f]);}}function _0x6473cd(_0x13f145){const _0x352864=[new window[(_0x2640f7([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x3af683=>setTimeout(_0x3af683,0x3abf5d4e^_0xc923e0)),_0xdd7258[_0x2640f7([0x74,0x68,0x65,0x6e])](()=>new window[(_0x2640f7([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x234177=>{let _0x283393=0x0;_0x17db3c[_0x2640f7([0x6d,0x6f,0x64,0x65,0x6c])][_0x2640f7([0x6f,0x6e])](_0x2640f7([0x61,0x70,0x70,0x6c,0x79,0x4f,0x70,0x65,0x72,0x61,0x74,0x69,0x6f,0x6e]),(_0x5195d7,_0x9c63ee)=>{_0x9c63ee[0x0][_0x2640f7([0x69,0x73,0x44,0x6f,0x63,0x75,0x6d,0x65,0x6e,0x74,0x4f,0x70,0x65,0x72,0x61,0x74,0x69,0x6f,0x6e])]&&_0x283393++,_0x283393==(0x3ab6627a^_0xc923e0)&&(_0x234177(),_0x5195d7[_0x2640f7([0x6f,0x66,0x66])]());});}))];return window[_0x2640f7([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65])][_0x2640f7([0x72,0x61,0x63,0x65])](_0x352864)[_0x2640f7([0x74,0x68,0x65,0x6e])](()=>_0x13f145);}async function _0xd52904(){await _0xdd7258,_0x17db3c[_0x2640f7([0x6d,0x6f,0x64,0x65,0x6c])][_0x2640f7([0x63,0x68,0x61,0x6e,0x67,0x65])]=_0x530629,_0x17db3c[_0x2640f7([0x6d,0x6f,0x64,0x65,0x6c])][_0x2640f7([0x65,0x6e,0x71,0x75,0x65,0x75,0x65,0x43,0x68,0x61,0x6e,0x67,0x65])]=_0x530629,_0x17db3c[_0x2640f7([0x65,0x6e,0x61,0x62,0x6c,0x65,0x52,0x65,0x61,0x64,0x4f,0x6e,0x6c,0x79,0x4d,0x6f,0x64,0x65])](_0x2640f7([0x6d,0x6f,0x64,0x65,0x6c]));}function _0x2b536b(_0x222e56){const _0x5c553d=_0x2ed5ce();_0x17db3c[_0x5c553d]=_0x2640f7([0x61,0x69,0x4c,0x69,0x63,0x65,0x6e,0x73,0x65,0x4b,0x65,0x79])+_0x222e56,_0x222e56!=_0x2640f7([0x56,0x61,0x6c,0x69,0x64])&&_0xd52904();}function _0x2ed5ce(){const _0x4c441e=window[_0x2640f7([0x53,0x74,0x72,0x69,0x6e,0x67])](window[_0x2640f7([0x70,0x65,0x72,0x66,0x6f,0x72,0x6d,0x61,0x6e,0x63,0x65])][_0x2640f7([0x6e,0x6f,0x77])]())[_0x2640f7([0x72,0x65,0x70,0x6c,0x61,0x63,0x65])](_0x2640f7([0x2e]),'');let _0x264cf9=_0x2640f7([0x4d]);for(let _0x4da4fc=0x0;_0x4da4fc<_0x4c441e[_0x2640f7([0x6c,0x65,0x6e,0x67,0x74,0x68])];_0x4da4fc+=0x2){let _0xbbc0fb=window[_0x2640f7([0x70,0x61,0x72,0x73,0x65,0x49,0x6e,0x74])](_0x4c441e[_0x2640f7([0x73,0x75,0x62,0x73,0x74,0x72,0x69,0x6e,0x67])](_0x4da4fc,_0x4da4fc+0x2));_0xbbc0fb>=_0x2642b9[_0x2640f7([0x6c,0x65,0x6e,0x67,0x74,0x68])]&&(_0xbbc0fb-=_0x2642b9[_0x2640f7([0x6c,0x65,0x6e,0x67,0x74,0x68])]),_0x264cf9+=_0x2642b9[_0xbbc0fb];}return _0x264cf9;}function _0x46a37a(){const _0x6ddd13=_0x4d1691[_0x2640f7([0x73,0x70,0x6c,0x69,0x74])](_0x2640f7([0x2e]));if(0x3!=_0x6ddd13[_0x2640f7([0x6c,0x65,0x6e,0x67,0x74,0x68])])return null;return _0x563f22(_0x6ddd13[0x1]);function _0x563f22(_0xcfbd4f){const _0x1a7bd1=_0x451108(_0xcfbd4f);return _0x1a7bd1&&_0x60aeba()?_0x1a7bd1:null;function _0x60aeba(){const _0x19f4c2=_0x1a7bd1[_0x2640f7([0x6a,0x74,0x69])],_0x221389=window[_0x2640f7([0x70,0x61,0x72,0x73,0x65,0x49,0x6e,0x74])](_0x19f4c2[_0x2640f7([0x73,0x75,0x62,0x73,0x74,0x72,0x69,0x6e,0x67])](_0x19f4c2[_0x2640f7([0x6c,0x65,0x6e,0x67,0x74,0x68])]-0x8),0x10),_0x1e9408={..._0x1a7bd1,[_0x2640f7([0x6a,0x74,0x69])]:_0x19f4c2[_0x2640f7([0x73,0x75,0x62,0x73,0x74,0x72,0x69,0x6e,0x67])](0x0,_0x19f4c2[_0x2640f7([0x6c,0x65,0x6e,0x67,0x74,0x68])]-0x8)};return delete _0x1e9408[_0x2640f7([0x76,0x63])],_0x20741a(_0x1e9408)==_0x221389;}}}async function _0x59c654(){let _0x9073ad=!0x0;try{const _0x1af171=_0x4d1691[_0x2640f7([0x73,0x70,0x6c,0x69,0x74])](_0x2640f7([0x2e])),[_0x4105f3,_0x39146c,_0x1a9781]=_0x1af171;return _0xff253f(_0x4105f3),await _0x19998e(_0x4105f3,_0x39146c,_0x1a9781),_0x9073ad;}catch(_0x2dedaa){return!0x1;}function _0xff253f(_0xa78588){const _0x558268=_0x451108(_0xa78588);_0x558268&&_0x558268[_0x2640f7([0x61,0x6c,0x67])]==_0x2640f7([0x45,0x53,0x32,0x35,0x36])||(_0x9073ad=!0x1);}async function _0x19998e(_0x3cece7,_0x101f46,_0x347af8){const _0x4001e8=window[_0x2640f7([0x55,0x69,0x6e,0x74,0x38,0x41,0x72,0x72,0x61,0x79])][_0x2640f7([0x66,0x72,0x6f,0x6d])](_0x41c437(_0x347af8),_0x44dd33=>_0x44dd33[_0x2640f7([0x63,0x68,0x61,0x72,0x43,0x6f,0x64,0x65,0x41,0x74])](0x0)),_0x4c4827=new window[(_0x2640f7([0x54,0x65,0x78,0x74,0x45,0x6e,0x63,0x6f,0x64,0x65,0x72]))]()[_0x2640f7([0x65,0x6e,0x63,0x6f,0x64,0x65])](_0x3cece7+_0x2640f7([0x2e])+_0x101f46),_0x29b54e=window[_0x2640f7([0x63,0x72,0x79,0x70,0x74,0x6f])][_0x2640f7([0x73,0x75,0x62,0x74,0x6c,0x65])];if(!_0x29b54e)return;const _0x20339b=await _0x29b54e[_0x2640f7([0x69,0x6d,0x70,0x6f,0x72,0x74,0x4b,0x65,0x79])](_0x2640f7([0x6a,0x77,0x6b]),_0x23d008,{[_0x2640f7([0x6e,0x61,0x6d,0x65])]:_0x2640f7([0x45,0x43,0x44,0x53,0x41]),[_0x2640f7([0x6e,0x61,0x6d,0x65,0x64,0x43,0x75,0x72,0x76,0x65])]:_0x2640f7([0x50,0x2d,0x32,0x35,0x36])},!0x1,[_0x2640f7([0x76,0x65,0x72,0x69,0x66,0x79])]);await _0x29b54e[_0x2640f7([0x76,0x65,0x72,0x69,0x66,0x79])]({[_0x2640f7([0x6e,0x61,0x6d,0x65])]:_0x2640f7([0x45,0x43,0x44,0x53,0x41]),[_0x2640f7([0x68,0x61,0x73,0x68])]:{[_0x2640f7([0x6e,0x61,0x6d,0x65])]:_0x2640f7([0x53,0x48,0x41,0x2d,0x32,0x35,0x36])}},_0x20339b,_0x4001e8,_0x4c4827)||(_0x9073ad=!0x1);}}function _0x451108(_0x58ddc1){return _0x58ddc1[_0x2640f7([0x73,0x74,0x61,0x72,0x74,0x73,0x57,0x69,0x74,0x68])](_0x2640f7([0x65,0x79]))?JSON[_0x2640f7([0x70,0x61,0x72,0x73,0x65])](_0x41c437(_0x58ddc1)):null;}function _0x41c437(_0x396f3f){return window[_0x2640f7([0x61,0x74,0x6f,0x62])](_0x396f3f[_0x2640f7([0x72,0x65,0x70,0x6c,0x61,0x63,0x65])](/-/g,_0x2640f7([0x2b]))[_0x2640f7([0x72,0x65,0x70,0x6c,0x61,0x63,0x65])](/_/g,_0x2640f7([0x2f])));}function _0x20741a(_0x107fa0){let _0x23e421=0x1505;function _0x33e282(_0x42793d){for(let _0x5db568=0x0;_0x5db568<_0x42793d[_0x2640f7([0x6c,0x65,0x6e,0x67,0x74,0x68])];_0x5db568++){const _0x42b4ff=_0x42793d[_0x2640f7([0x63,0x68,0x61,0x72,0x43,0x6f,0x64,0x65,0x41,0x74])](_0x5db568);_0x23e421=(_0x23e421<<0x5)+_0x23e421+_0x42b4ff,_0x23e421&=_0x23e421;}}function _0x49de64(_0x340403){Array[_0x2640f7([0x69,0x73,0x41,0x72,0x72,0x61,0x79])](_0x340403)?_0x340403[_0x2640f7([0x66,0x6f,0x72,0x45,0x61,0x63,0x68])](_0x49de64):_0x340403&&typeof _0x340403==_0x2640f7([0x6f,0x62,0x6a,0x65,0x63,0x74])?Object[_0x2640f7([0x65,0x6e,0x74,0x72,0x69,0x65,0x73])](_0x340403)[_0x2640f7([0x73,0x6f,0x72,0x74])]()[_0x2640f7([0x66,0x6f,0x72,0x45,0x61,0x63,0x68])](([_0x34858d,_0x34cf9a])=>{_0x33e282(_0x34858d),_0x49de64(_0x34cf9a);}):_0x33e282(window[_0x2640f7([0x53,0x74,0x72,0x69,0x6e,0x67])](_0x340403));}return _0x49de64(_0x107fa0),_0x23e421>>>0x0;}function _0x479c8a(_0x280fd3){return _0x280fd3[_0x2640f7([0x74,0x6f,0x53,0x74,0x72,0x69,0x6e,0x67])](0x10)[_0x2640f7([0x70,0x61,0x64,0x53,0x74,0x61,0x72,0x74])](0x8,_0x2640f7([0x30]));}function _0x449efa(_0x4eac52){return _0x4eac52[_0x2640f7([0x73,0x70,0x6c,0x69,0x74])]('')[_0x2640f7([0x72,0x65,0x76,0x65,0x72,0x73,0x65])]()[_0x2640f7([0x6a,0x6f,0x69,0x6e])]('');}function _0x530629(){}function _0x2640f7(_0x339ecb){return _0x339ecb['map'](_0x5cc766=>String['fromCharCode'](_0x5cc766))['join']('');}_0x2b536b(await _0x494a7b());}(this);}['showFakeVisualSelection'](){const _0x2dd42f=this['editor']['model'];_0x2dd42f['change'](_0x13deea=>{const _0x550e26=_0x2dd42f['document']['selection']['getFirstRange']();if(_0x2dd42f['markers']['has'](u))_0x13deea['updateMarker'](u,{'range':_0x550e26});else{if(_0x550e26['start']['isAtEnd']){const _0x245a5d=_0x550e26['start']['getLastMatchingPosition'](({item:_0x8e50cd})=>!_0x2dd42f['schema']['isContent'](_0x8e50cd),{'boundaries':_0x550e26});_0x13deea['addMarker'](u,{'usingOperation':!0x1,'affectsData':!0x1,'range':_0x13deea['createRange'](_0x245a5d,_0x550e26['end'])});}else _0x13deea['addMarker'](u,{'usingOperation':!0x1,'affectsData':!0x1,'range':_0x550e26});}});}['hideFakeVisualSelection'](){const _0x274984=this['editor']['model'];_0x274984['markers']['has'](u)&&_0x274984['change'](_0xd9ae7a=>{_0xd9ae7a['removeMarker'](u);});}['insertContent'](_0x56f301,_0x287a2d){const _0x178b7c=_0x287a2d||this['editor']['model']['markers']['get'](u)['getRange']();if(!this['editor']['model']['canEditAt'](_0x178b7c))return;const _0x6b1678=this['editor']['data']['processor']['toView'](_0x56f301),_0x19bf25=this['editor']['data']['toModel'](_0x6b1678);this['editor']['model']['change'](_0x48adfd=>{this['hideFakeVisualSelection']();const _0x2a5e05=this['editor']['model']['insertContent'](_0x19bf25,_0x178b7c);_0x2a5e05&&_0x48adfd['setSelection'](_0x2a5e05);});}['insertContentBelow'](_0x449054){const {model:_0x1aa88d}=this['editor'],_0x60e259=Array['from'](_0x1aa88d['createSelection'](this['editor']['model']['markers']['get'](u)['getRange']())['getSelectedBlocks']()),_0x389b4d=_0x60e259['length']?_0x1aa88d['createPositionAfter'](_0x60e259['pop']()):_0x1aa88d['document']['selection']['getLastPosition']();this['insertContent'](_0x449054,_0x389b4d);}}class v extends _0x54da78{static get['pluginName'](){return'AIAdapter';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}['afterInit'](){if(!this['textAdapter'])throw new _0x2f0c49('aiadapter-text-adapter-not-set',null);}}class R extends Error{constructor(_0x3d0729){super(_0x3d0729),this['name']='AIRequestError';}}function i(_0x538eb1,_0x2d745f,_0x2b917a){const t=_0x538eb1['t'];switch(_0x2d745f){case'Edit\x20or\x20review':return t('Edit\x20or\x20review');case'Improve\x20writing':return t('Improve\x20writing');case'Make\x20shorter':return t('Make\x20shorter');case'Make\x20longer':return t('Make\x20longer');case'Simplify\x20language':return t('Simplify\x20language');case'Generate\x20from\x20selection':return t('Generate\x20from\x20selection');case'Summarize':return t('Summarize');case'Continue':return t('Continue');case'Change\x20tone':return t('Change\x20tone');case'Professional':return t('Professional');case'Casual':return t('Casual');case'Direct':return t('Direct');case'Confident':return t('Confident');case'Friendly':return t('Friendly');case'Change\x20style':return t('Change\x20style');case'Business':return t('Business');case'Legal':return t('Legal');case'Journalism':return t('Journalism');case'Poetic':return t('Poetic');case'Translate':return t('Translate');case'English':return t('English');case'Spanish':return t('Spanish');case'German':return t('German');case'Portuguese':return t('Portuguese');case'French':return t('French');case'Simplified\x20Chinese':return t('Simplified\x20Chinese');case'Hindi':return t('Hindi');case'Arabic':return t('Arabic');case'AI\x20Assistant':return t('AI\x20Assistant');case'AI\x20Commands':return t('AI\x20Commands');case'Ask\x20AI\x20to\x20edit\x20or\x20generate':return t('Ask\x20AI\x20to\x20edit\x20or\x20generate');case'Ask\x20AI\x20to\x20improve\x20generated\x20text':return t('Ask\x20AI\x20to\x20improve\x20generated\x20text');case'Copy':return t('Copy');case'Submit':return t('Submit');case'Insert\x20below':return t('Insert\x20below');case'Try\x20again':return t('Try\x20again');case'Stop':return t('Stop');case'AI\x20is\x20writing...':return t('AI\x20is\x20writing...');case'AI\x20is\x20writing':return t('AI\x20is\x20writing');case'Generated\x20content:\x20%0':return t('Generated\x20content:\x20%0',_0x2b917a);case'Error\x20during\x20AI\x20content\x20generation:\x20%0':return t('Error\x20during\x20AI\x20content\x20generation:\x20%0',_0x2b917a);case'History':return t('History');case'Empty\x20history':return t('Empty\x20history');case'Ask\x20AI\x20and\x20your\x20prompts\x20will\x20be\x20listed\x20here\x20for\x20you\x20to\x20use\x20later.':return t('Ask\x20AI\x20and\x20your\x20prompts\x20will\x20be\x20listed\x20here\x20for\x20you\x20to\x20use\x20later.');case'Prompt\x20history':return t('Prompt\x20history');case'Clear':return t('Clear');case'AI_REPLACE_CONTENT':return t({'id':'AI_REPLACE_CONTENT','string':'Replace'});case'AI_INSERT_CONTENT':return t({'id':'AI_INSERT_CONTENT','string':'Insert'});case'AI_ERROR_GET_HEADERS':return t({'id':'AI_ERROR_GET_HEADERS','string':'Preparing\x20request\x20headers\x20failed'});case'AI_ERROR_GET_PARAMETERS':return t({'id':'AI_ERROR_GET_PARAMETERS','string':'Preparing\x20request\x20parameters\x20failed'});case'AI_ERROR_UNSUPPORTED_MODEL':return t({'id':'AI_ERROR_UNSUPPORTED_MODEL','string':'The\x20requested\x20AI\x20model\x20(\x22%0\x22)\x20is\x20not\x20supported'},_0x2b917a);case'AI_ERROR_CONTEXT_LENGTH':return t({'id':'AI_ERROR_CONTEXT_LENGTH','string':'Selected\x20content\x20is\x20too\x20long'});case'AI_ERROR_MODERATION':return t({'id':'AI_ERROR_MODERATION','string':'Requested\x20query\x20does\x20not\x20pass\x20moderation\x20rules'});case'AI_ERROR_FAILED':return t({'id':'AI_ERROR_FAILED','string':'Failed\x20to\x20communicate\x20with\x20the\x20AI\x20service'});default:return _0x2d745f;}}class y extends _0x4958db{['_commandDefinitions'];constructor(_0x1af467,_0x762373){super(_0x1af467),this['_commandDefinitions']=_0x762373,this['set']('enabledCommandsIds',[]),this['on']('change:_hasContext',(_0x1acb21,_0x3157b8,_0x55a416)=>{this['isEnabled']&&(this['enabledCommandsIds']=G(this['_commandDefinitions'],_0x55a416));}),this['set']('_hasContext',!0x1),this['on']('change:isEnabled',(_0x48960d,_0x254602,_0x4fe353)=>{this['enabledCommandsIds']=_0x4fe353?G(this['_commandDefinitions'],this['_hasContext']):[];});}['refresh'](){const _0x1823ed=this['editor']['model'];this['_hasContext']=function(_0x2cc993){const _0x147444=_0x2cc993['document']['selection'];return _0x147444['isCollapsed']?0x0!==[..._0x147444['getSelectedBlocks']()]['length']&&![..._0x147444['getSelectedBlocks']()][0x0]['isEmpty']:!!_0x2cc993['hasContent'](_0x147444['getFirstRange']());}(_0x1823ed);const _0x2b0c68=_0x1823ed['document']['selection'],_0x362ce7=this['editor']['config']['get']('ai.aiAssistant.disabledElements');for(const _0x220c06 of _0x2b0c68['getRanges']())for(const _0x5f3068 of _0x220c06['getItems']())if(_0x5f3068['is']('element')&&_0x362ce7['includes'](_0x5f3068['name']))return void(this['isEnabled']=!0x1);this['isEnabled']=!0x0;}['execute'](_0x5bb3f9='',_0x446d04='',_0x180274='custom'){this['editor']['plugins']['get'](n)['showUI'](_0x5bb3f9,_0x446d04,_0x180274);}}function G(_0x14f706,_0x23b746){const _0x50f704=new Set();for(const _0x1ee618 of _0x14f706['values']())(_0x23b746||!0x1===_0x1ee618['requiresContent'])&&_0x50f704['add'](_0x1ee618['id']);return Array['from'](_0x50f704);}const Z=new RegExp(/^(.*?)<[a-zA-Z][a-zA-Z0-9_\-.]*[ >]/,'is');class C extends/* #__PURE__ -- @preserve */
_0x5c535c(){['editor'];['textAdapter'];['view'];['_sanitizationContainer'];['_domParser'];['_xmlSerializer'];constructor(_0x360a8d,_0x4a09a1,_0x58f6db){super(),this['editor']=_0x360a8d,this['textAdapter']=_0x4a09a1,this['_sanitizationContainer']=document['createElement']('div'),this['_domParser']=new DOMParser(),this['_xmlSerializer']=new XMLSerializer(),this['view']=_0x58f6db,this['set']({'initialContext':'','currentContext':'','currentResponse':'','previousContext':void 0x0,'previousQuery':void 0x0,'previousLabel':void 0x0,'isProcessing':!0x1}),this['on']('set:currentContext',(_0x5bbf04,_0x344d81,_0x2c30a1)=>{this['view']['value']=this['_sanitizeHTML'](_0x2c30a1);}),this['listenTo'](this['view'],'submitPrompt',(_0x21b336,_0x568f49)=>{const _0x32b2fd=this['currentContext']||this['initialContext'];this['_handleQuery'](_0x568f49,_0x32b2fd,'custom');}),this['listenTo'](this['view'],'tryAgainEvent',()=>{this['view']['prompt']=this['previousLabel'],this['_handleQuery'](this['previousQuery'],this['previousContext'],this['previousActionId'],this['previousLabel']);}),this['listenTo'](this['view'],'stopProcessing',()=>{this['stopProcessing']();});}['destroy'](){this['stopListening']();}async['updateView']({actionId:_0x2f44fc,query:_0x4ee884,htmlContent:_0x3a4f10,label:_0x51c58a,mainActionLabel:_0x3ffcec}){this['view']['prompt']=_0x51c58a,this['view']['mainAction']=_0x3ffcec,this['initialContext']=_0x3a4f10,_0x4ee884&&(this['view']['isRendered']?this['_handleQuery'](_0x4ee884,_0x3a4f10,_0x2f44fc,_0x51c58a):this['view']['once']('render',()=>{this['_handleQuery'](_0x4ee884,_0x3a4f10,_0x2f44fc,_0x51c58a);}));}['stopProcessing'](){this['isProcessing']&&(this['isProcessing']=!0x1,this['view']['finishProcessing'](),this['textAdapter']['abort']());}['reset'](){this['initialContext']='',this['currentContext']='',this['currentResponse']='',this['previousContext']='',this['previousQuery']='',this['previousLabel']='',this['previousActionId']=void 0x0,this['view']['reset'](),this['stopProcessing']();}async['_handleQuery'](_0x1c512c,_0x3e2398,_0xe4206b,_0x10eb15){return this['isProcessing']=!0x0,this['view']['startProcessing'](),this['previousContext']=_0x3e2398,this['previousQuery']=_0x1c512c,this['previousLabel']=_0x10eb15||_0x1c512c,this['previousActionId']=_0xe4206b,new Promise(_0x2e301f=>{this['textAdapter']['makeRequest']({'query':_0x1c512c,'context':_0x3e2398,'onData':_0x1fa979=>{this['currentResponse']=_0x1fa979,this['currentContext']=this['_parseAndNormalizeContent'](this['currentResponse']);},'actionId':_0xe4206b})['then'](()=>{!this['currentContext']&&this['currentResponse']&&(this['currentContext']=this['_parseAndNormalizeContent'](this['currentResponse'],!0x0));})['catch'](_0xe60043=>{_0xe60043 instanceof R?this['view']['handleError'](_0xe60043['message']):this['view']['handleError'](),_0x2e301f();})['finally'](()=>{this['stopProcessing'](),_0x2e301f();});});}['_parseAndNormalizeContent'](_0x44d549,_0xc41ca2=!0x1){const _0x2cdac7=Z['exec'](_0x44d549);_0x44d549=_0x2cdac7?_0x44d549['substring'](_0x2cdac7[0x1]['length']):_0x44d549['length']<0x64&&!_0xc41ca2?'':this['_stripMarkdownSyntax'](_0x44d549);const _0x534464=this['_domParser']['parseFromString'](_0x44d549,'text/html');if(_0x2cdac7){const _0x4ca0f6=Array['from'](_0x534464['body']['childNodes']);_0x4ca0f6['reverse']();for(const _0xacd292 of _0x4ca0f6){if(_0xacd292['nodeType']==Node['ELEMENT_NODE'])break;_0xacd292['remove']();}}const _0x36b2a0=this['editor']['data']['processor']['toView'](this['_xmlSerializer']['serializeToString'](_0x534464['body']));return this['_isH1TagSupportEnabled']()||this['_normalizeResponseHeadings'](_0x36b2a0),this['editor']['data']['stringify'](this['editor']['data']['toModel'](_0x36b2a0));}['_normalizeResponseHeadings'](_0x967f0){const _0x42c351=new _0x5c996c(this['editor']['editing']['view']['document']),_0x4b19fd=new _0x29a78c({'name':/^h[1-5]$/}),_0x569340=[];let _0x19c2c2=!0x1;for(const _0x112b6b of _0x967f0)_0x112b6b['is']('element')&&_0x4b19fd['match'](_0x112b6b)&&(_0x569340['push'](_0x112b6b),'h1'==_0x112b6b['name']&&(_0x19c2c2=!0x0));if(_0x19c2c2){for(const _0x5572da of _0x569340)_0x42c351['rename']('h'+(parseInt(_0x5572da['name'][0x1])+0x1),_0x5572da);}}['_isH1TagSupportEnabled'](){const {data:_0x54fceb,editing:_0x5d65ea}=this['editor'],_0x322c51=_0x54fceb['htmlProcessor']['toView']('<h1></h1>'),_0x1ffaf4=_0x54fceb['toView'](_0x54fceb['toModel'](_0x322c51));return!!_0x5d65ea['view']['domConverter']['viewToDom'](_0x1ffaf4)['querySelector']('h1');}['_sanitizeHTML'](_0x294f7f){return this['editor']['editing']['view']['domConverter']['setContentOf'](this['_sanitizationContainer'],_0x294f7f),this['_sanitizationContainer']['innerHTML'];}['_stripMarkdownSyntax'](_0x565bd1){const _0x52e2af=_0x565bd1['trim']();return _0x52e2af['startsWith']('```html')?_0x52e2af['endsWith']('```')?_0x52e2af['substring'](0x7,_0x52e2af['length']-0x3):_0x52e2af['substring'](0x7):_0x565bd1;}}const x={'REPLACE':'replace','INSERT':'insert'};class nt extends rt{constructor(_0x26d56a){super(_0x26d56a),this['set']('isVisible',!0x1),this['set']('mainAction',x['REPLACE']),this['replaceButton']=this['_createButton']('','ck-button-action'),this['replaceButton']['bind']('label')['to'](this,'mainAction',_0x4adece=>i(_0x26d56a,'AI_'+_0x4adece['toUpperCase']()+'_CONTENT')),this['insertButton']=this['_createButton'](i(_0x26d56a,'Insert\x20below')),this['tryAgainButton']=this['_createButton'](i(_0x26d56a,'Try\x20again')),this['stopButton']=this['_createButton'](i(_0x26d56a,'Stop'));const _0x49d7e6=this['bindTemplate'];this['extendTemplate']({'attributes':{'class':['ck-ai-form__toolbar',_0x49d7e6['if']('isVisible','ck-hidden',_0x22497f=>!_0x22497f)]}}),this['items']['addMany']([this['replaceButton'],this['insertButton'],this['tryAgainButton'],this['stopButton']]);}['_createButton'](_0x49a5a4,_0x516a00){const _0x535c71=new _0x4927a1(this['locale']);return _0x535c71['set']({'label':_0x49a5a4,'class':_0x516a00||'','isVisible':!0x0,'withText':!0x0}),_0x535c71;}}var U='<svg\x20viewBox=\x220\x200\x2020\x2020\x22\x20xmlns=\x22http://www.w3.org/2000/svg\x22><path\x20d=\x22M5\x202.801a.7.7\x200\x200\x200-.7.7v11.5a.8.8\x200\x200\x201-1.6\x200v-11.5a2.3\x202.3\x200\x200\x201\x202.3-2.3h6.5a.8.8\x200\x200\x201\x200\x201.6H5Zm.7\x203.7a2.3\x202.3\x200\x200\x201\x202.3-2.3h7a2.3\x202.3\x200\x200\x201\x202.3\x202.3v10a2.3\x202.3\x200\x200\x201-2.3\x202.3H8a2.3\x202.3\x200\x200\x201-2.3-2.3v-10Zm2.3-.7a.7.7\x200\x200\x200-.7.7v10a.7.7\x200\x200\x200\x20.7.7h7a.7.7\x200\x200\x200\x20.7-.7v-10a.7.7\x200\x200\x200-.7-.7H8Z\x22/></svg>';class W extends _0x2d211f{['contentFieldView'];['copyButtonView'];constructor(_0x376b02,_0x48c3ce=''){super(_0x376b02),this['set']({'value':null,'isVisible':!0x1,'isProcessing':!0x1});const _0xccd0a9=this['bindTemplate'];this['contentFieldView']=new ct(_0x376b02,_0x48c3ce),this['copyButtonView']=this['_createCopyButton'](),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-form__content-area-wrapper',_0xccd0a9['if']('isVisible','ck-hidden',_0x45c334=>!_0x45c334)],'tabindex':'-1'},'children':[{'tag':'div','attributes':{'class':['ck','ck-ai-form__content-area',_0xccd0a9['if']('isProcessing','ck-ai-form__content-area--processing')]},'children':[this['contentFieldView'],{'tag':'div','attributes':{'class':['ck','ck-ai-form__copy-button-wrapper']},'children':[this['copyButtonView']]}]}]});}['render'](){super['render'](),this['value']&&this['contentFieldView']['setContent'](this['value']);let _0x3f5749=!0x1;this['on']('change:value',(_0x4ac6d3,_0x388585,_0x3b7bc6)=>{const _0x4bdeb8=!this['contentFieldView']['element']['querySelector']('.ck-ai-form__loader');this['contentFieldView']['setContent'](_0x3b7bc6),this['isProcessing']&&_0x4bdeb8&&!_0x3f5749&&this['element']['scrollTo']({'top':this['element']['scrollHeight'],'behavior':'smooth'});}),this['on']('change:isProcessing',(_0x2ffb5a,_0x49c33d,_0x117339)=>{_0x3f5749=!0x1,_0x117339?(this['value']=null,this['contentFieldView']['appendLoader']()):this['value']||this['contentFieldView']['setContent']('');}),this['listenTo'](this['element'],'wheel',()=>{_0x3f5749=!0x0;}),this['listenTo'](this['element'],'mousedown',()=>{_0x3f5749=!0x0;});}['focus'](){this['element']['focus']();}['_createCopyButton'](){const _0x1a0d8b=this['locale'],_0x1acc4c=new _0x4927a1(this['locale']),_0x239037='ck-ai-form__copy-button';return _0x1acc4c['set']({'label':i(_0x1a0d8b,'Copy'),'icon':U,'class':_0x239037,'tooltip':!0x0}),_0x1acc4c['bind']('isVisible')['to'](this,'value',_0xaa9cf9=>!!_0xaa9cf9),_0x1acc4c['bind']('isEnabled')['to'](this,'isProcessing',_0x3c6d1b=>!_0x3c6d1b),_0x1acc4c['on']('execute',()=>{this['_copyHTMLToClipboard'](this['contentFieldView']['element']),_0x1acc4c['icon']=_0x3fbb72['check'],_0x1acc4c['class']=_0x239037+'\x20ck-ai-form__copy-button--copied',this['focus'](),setTimeout(()=>{_0x1acc4c['icon']=U,_0x1acc4c['class']=_0x239037;},0x3e8);}),_0x1acc4c;}['_copyHTMLToClipboard'](_0xd3ad00){const {window:_0x3f92bc,document:_0x2d2d65}=_0x1fdbd5;if(_0x3f92bc['ClipboardItem']){const {Blob:_0x3759b9,ClipboardItem:_0x54392c}=_0x3f92bc,_0xf5bf16=[new _0x54392c({'text/html':new _0x3759b9([_0xd3ad00['innerHTML']],{'type':'text/html'}),'text/plain':new _0x3759b9([_0xd3ad00['textContent']||''],{'type':'text/plain'})})];navigator['clipboard']['write'](_0xf5bf16);}else{const _0x299721=_0x2d2d65['createElement']('div');_0x299721['style']['position']='absolute',_0x299721['style']['left']='-9999px',_0x299721['innerHTML']='<span>[</span>'+_0xd3ad00['innerHTML']+'<span>]</span>',_0x2d2d65['body']['appendChild'](_0x299721);const _0x30004f=_0x2d2d65['createRange']();_0x30004f['setStartAfter'](_0x299721['firstElementChild']),_0x30004f['setEndBefore'](_0x299721['lastElementChild']);const _0x3c416c=_0x3f92bc['getSelection']();_0x3c416c['removeAllRanges'](),_0x3c416c['addRange'](_0x30004f),_0x2d2d65['execCommand']('copy'),_0x299721['remove']();}}}class ct extends _0x2d211f{constructor(_0x28cf7b,_0x477c3d=''){super(_0x28cf7b),this['loaderView']=this['_createLoader'](),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-content',_0x477c3d,'ck-reset_all-excluded','ck-ai-form__content-field']}});}['setContent'](_0x289bce){this['element']['innerHTML']=_0x289bce;}['appendLoader'](){this['element']['appendChild'](this['loaderView']['element']);}['_createLoader'](){const _0x421bf2=new _0x2d211f(),_0x2c0e2c=this['locale'],_0x2209e9=new _0x21ec4f();return _0x2209e9['isVisible']=!0x0,_0x421bf2['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-form__loader']},'children':[_0x2209e9,{'text':i(_0x2c0e2c,'AI\x20is\x20writing...')}]}),_0x421bf2['render'](),_0x421bf2;}}class tt extends _0x2d211f{constructor(_0x47c0dc,_0x2cf39a=''){super(_0x47c0dc);const _0x2e59c0=new _0x197aec(),_0x25b4ba=this['bindTemplate'];this['set']('text',_0x2cf39a),_0x2e59c0['content']='<svg\x20viewBox=\x220\x200\x2020\x2020\x22\x20xmlns=\x22http://www.w3.org/2000/svg\x22><path\x20clip-rule=\x22evenodd\x22\x20d=\x22M9.9\x204.385a1.2\x201.2\x200\x200\x200-.44.44h.002l-5.284\x209.15a1.2\x201.2\x200\x200\x200\x201.04\x201.8h10.564a1.2\x201.2\x200\x200\x200\x201.04-1.8l-5.282-9.15a1.2\x201.2\x200\x200\x200-1.64-.44Zm.05\x208.363a.301.301\x200\x200\x201\x20.115-.023h.9a.301.301\x200\x200\x201\x20.3.3v.9a.3.3\x200\x200\x201-.3.3h-.9a.3.3\x200\x200\x201-.3-.3v-.9a.3.3\x200\x200\x201\x20.185-.277Zm-.185-4.723a.3.3\x200\x200\x201\x20.3-.3h.9a.3.3\x200\x200\x201\x20.3.3v3.4a.3.3\x200\x200\x201-.3.3h-.9a.301.301\x200\x200\x201-.3-.3v-3.4Z\x22/></svg>\x0a',this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-form__error']},'children':[_0x2e59c0,{'text':_0x25b4ba['to']('text')}]});}}class ht extends ot{['submitButtonView'];['showHistoryButtonView'];constructor(_0x4aa275,_0x402629){super(_0x4aa275,_0x402629),this['queryView']['fieldView']['minRows']=0x1,this['queryView']['fieldView']['maxRows']=0x3,this['submitButtonView']=this['_createSubmitButton'](),this['showHistoryButtonView']=this['_createShowHistoryButton'](),this['focusableChildren']['add'](this['showHistoryButtonView'],0x1),this['focusableChildren']['add'](this['submitButtonView']);}['render'](){super['render'](),this['queryView']['fieldWrapperChildren']['add'](this['showHistoryButtonView']),this['children']['add'](this['submitButtonView']),this['keystrokes']['set']('enter',(_0x19b033,_0x638b76)=>{_0x19b033['target']==this['queryView']['fieldView']['element']&&(this['submit'](),_0x638b76());});}['_createSubmitButton'](){const _0xa4c5c6=new _0x4927a1(this['locale']),_0x331f75=this['locale'];return _0xa4c5c6['set']({'icon':'<svg\x20viewBox=\x220\x200\x2020\x2020\x22\x20xmlns=\x22http://www.w3.org/2000/svg\x22><path\x20d=\x22M15.875\x204.419a.75.75\x200\x200\x200-1.5\x200v7.25H6.818l2.33-1.955a.75.75\x200\x200\x200-.963-1.15l-3.792\x203.182a.75.75\x200\x200\x200-.17.945c.046.11.118.208.21.284l3.788\x203.18a.75.75\x200\x201\x200\x20.965-1.149l-2.19-1.837h7.629c.69\x200\x201.25-.56\x201.25-1.25v-7.5Z\x22/></svg>','label':i(_0x331f75,'Submit'),'isVisible':!0x0,'tooltip':!0x0,'class':'ck-ai-form__submit'}),_0xa4c5c6['on']('execute',()=>{this['submit']();}),_0xa4c5c6['bind']('isEnabled')['to'](this['queryView']['fieldView'],'isEmpty',this,'isEnabled',(_0x5b8321,_0x5ebc0b)=>!_0x5b8321&&_0x5ebc0b),_0xa4c5c6;}['_createShowHistoryButton'](){const _0x52a78d=new _0x4927a1(this['locale']),_0x57fbd4=this['resultsView'],_0x1489de=this['locale'];_0x52a78d['set']({'label':i(_0x1489de,'History'),'withText':!0x1,'icon':_0x3fbb72['history'],'tooltip':!0x0,'tooltipPosition':'sw','class':'ck-ai-form__toggle-history'}),_0x52a78d['bind']('isOn')['to'](_0x57fbd4,'isVisible'),_0x52a78d['bind']('isEnabled')['to'](this,'isEnabled'),_0x52a78d['on']('execute',()=>{_0x57fbd4['isVisible']=!_0x57fbd4['isVisible'],_0x57fbd4['isVisible']?this['filteredView']['focus']():this['focus']();});const _0x1fe2e7=()=>{_0x1fdbd5['window']['requestAnimationFrame'](()=>{if(it(this['element'])){const _0x4727d1=new st(this['queryView']['fieldView']['element']),_0xe4c2e4=_0x4727d1['width'],_0x255c4d='rtl'===_0x1489de['uiLanguageDirection']?'left':'right';_0x4727d1['excludeScrollbarsAndBorders'](),_0x52a78d['element']['style'][_0x255c4d]=_0xe4c2e4-_0x4727d1['width']+0x1+'px';}});};return this['queryView']['fieldView']['on']('update',_0x1fe2e7),this['on']('render',_0x1fe2e7),_0x52a78d;}['submit'](){const _0x2d32e1=this['queryView']['fieldView']['element']['value'];this['fire']('submit',_0x2d32e1);}['focus'](_0x29a812){-0x1===_0x29a812?this['focusCycler']['focusLast']():this['focusCycler']['focusFirst']();}}class rs extends lt{['historyGroupView'];['clearHistoryButton'];constructor(_0x424ed3){super(_0x424ed3),this['clearHistoryButton']=this['_createClearHistoryButton'](),this['historyGroupView']=new ut(),this['historyGroupView']['children']['add'](this['clearHistoryButton'],0x1),this['historyGroupView']['label']=i(_0x424ed3,'Prompt\x20history'),this['historyGroupView']['items']['delegate']('execute')['to'](this),this['items']['add'](this['historyGroupView']);}['filter'](){let _0x3cdabc=0x0;for(const _0x49e87a of this['items'])_0x3cdabc+=_0x49e87a['items']['length'];return{'resultsCount':_0x3cdabc,'totalItemsCount':_0x3cdabc};}['_createClearHistoryButton'](){const _0x25a0db=this['locale'],_0xfc38e0=new _0x4927a1(this['locale']);return _0xfc38e0['set']({'label':'('+i(_0x25a0db,'Clear')+')','withText':!0x0}),_0xfc38e0['on']('execute',()=>this['fire']('clearHistory')),_0xfc38e0;}}class hs extends _0x32a887{constructor(_0x35445a){super();const _0x5e8836=new te(),_0x1f24ee=new _0x4927a1(this['locale'],_0x5e8836);this['children']['add'](_0x1f24ee),_0x1f24ee['set']({'label':_0x35445a['prompt'],'withText':!0x0}),_0x1f24ee['on']('execute',()=>{this['fire']('execute',{'value':_0x3eb923(_0x35445a['prompt'])});});}}const cs='CKEditor/AIFormView/PromptHistory';class os extends _0x51fc66{constructor(){super(),this['_loadFromSessionStorage'](),this['on']('add',(_0x1d5988,_0x2e92b7)=>{const _0x5289ca=Ss(_0x2e92b7['prompt']);for(const _0x44b1bc of this)if(_0x44b1bc!=_0x2e92b7&&Ss(_0x44b1bc['prompt'])===_0x5289ca){this['remove'](_0x44b1bc);break;}this['length']>0x14&&this['remove'](this['last']),this['_saveToSessionStorage']();}),this['on']('remove',()=>{this['_saveToSessionStorage']();});}['_loadFromSessionStorage'](){const _0x6eec88=sessionStorage['getItem'](cs)||'[]';this['addMany'](JSON['parse'](_0x6eec88));}['_saveToSessionStorage'](){sessionStorage['setItem'](cs,JSON['stringify'](this['map'](_0x120af7=>_0x120af7)));}}function Ss(_0x374a5d){return _0x374a5d['toLowerCase']()['trim']();}class K extends _0x2d211f{['focusTracker'];['keystrokes'];['contentArea'];['toolbar'];['promptView'];['errorView'];['_focusables'];['focusCycler'];['_promptHistory'];constructor(_0x41b6e1,_0x23d38d,_0x7cbfb9=''){super(_0x41b6e1),this['set']('isEnabled',!0x0),this['set']('isProcessing',!0x1),this['set']('prompt',''),this['set']('value',''),this['set']('isError',!0x1),this['set']('mainAction',x['REPLACE']),this['_promptHistory']=new os(),this['errorView']=new tt(_0x41b6e1),this['contentArea']=new W(_0x41b6e1,_0x7cbfb9),this['contentArea']['bind']('isProcessing')['to'](this),this['contentArea']['bind']('value')['to'](this),this['toolbar']=this['_createToolbar'](),this['toolbar']['bind']('mainAction')['to'](this),this['promptView']=this['_createPromptView'](),this['focusTracker']=new _0x50c6e1(),this['keystrokes']=new ts(),this['_focusables']=this['createCollection']([this['contentArea'],this['contentArea']['copyButtonView'],this['toolbar'],this['promptView']]),this['focusCycler']=new _0x3afe16({'focusables':this['_focusables'],'focusTracker':this['focusTracker'],'keystrokeHandler':this['keystrokes'],'actions':{'focusPrevious':'shift\x20+\x20tab','focusNext':'tab'}}),this['focusCycler']['chain'](this['promptView']['focusCycler']),this['promptView']['queryView']['fieldView']['bind']('value')['to'](this,'prompt');const _0x88ee5b=this['bindTemplate'];this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-ai-form',_0x23d38d],'tabindex':'-1'},'children':[{'tag':'div','attributes':{'class':['ck','ck-ai-form-content']},'children':[{'tag':'div','attributes':{'class':[_0x88ee5b['if']('isError','ck-hidden',_0x2fbeea=>!_0x2fbeea)]},'children':[this['errorView']]},this['contentArea'],this['toolbar'],this['promptView']]}]});}['render'](){super['render'](),this['focusTracker']['add'](this['contentArea']['element']),this['focusTracker']['add'](this['contentArea']['copyButtonView']['element']),this['focusTracker']['add'](this['toolbar']['element']),this['focusTracker']['add'](this['promptView']['element']),this['keystrokes']['listenTo'](this['element']);}['focus'](_0x2b9d58=0x1){-0x1===_0x2b9d58?this['focusCycler']['focusLast']():this['focusCycler']['focusFirst']();}['reset'](){this['prompt']='',this['value']='',this['isError']=!0x1,this['promptView']['reset'](),this['contentArea']['isVisible']=!0x1,this['toolbar']['isVisible']=!0x1;}['_createPromptView'](){const _0x8a426f=this['locale'],_0x15789f=new ht(_0x8a426f,{'queryView':{'label':i(_0x8a426f,'Ask\x20AI\x20to\x20edit\x20or\x20generate'),'creator':_0x553bc1,'showIcon':!0x1,'showResetButton':!0x1},'infoView':{'text':{'noSearchableItems':{'primary':i(_0x8a426f,'Empty\x20history'),'secondary':i(_0x8a426f,'Ask\x20AI\x20and\x20your\x20prompts\x20will\x20be\x20listed\x20here\x20for\x20you\x20to\x20use\x20later.')}}},'filteredView':this['_createHistoryView'](),'queryMinChars':0x1/0x0,'resetOnBlur':!0x1});return _0x15789f['bind']('isEnabled')['to'](this,'isEnabled',this,'isProcessing',(_0x407179,_0x51f7a3)=>_0x407179&&!_0x51f7a3),this['listenTo'](_0x15789f,'submit',(_0x13461f,_0x46ce83)=>{this['prompt']=_0x46ce83;const _0x58d9e3=_0x36522b(_0x46ce83);this['fire']('submitPrompt',_0x58d9e3),_0x46ce83['trim']()&&this['_promptHistory']['add']({'prompt':_0x58d9e3},0x0);},{'priority':'high'}),_0x15789f;}['_createHistoryView'](){const _0x27e027=new rs(this['locale']);return _0x27e027['historyGroupView']['items']['bindTo'](this['_promptHistory'])['as'](hs),_0x27e027['on']('clearHistory',()=>{this['_promptHistory']['clear'](),this['promptView']['search'](''),this['promptView']['focus']();}),_0x27e027;}['_createToolbar'](){const _0x345155=new nt(this['locale']);return _0x345155['replaceButton']['bind']('isEnabled')['to'](this,'isEnabled',this,'isProcessing',this,'value',(_0x53a332,_0x2000d2,_0x28f99f)=>_0x53a332&&!_0x2000d2&&!!_0x28f99f),_0x345155['replaceButton']['delegate']('execute')['to'](this,'replaceContent'),_0x345155['insertButton']['bind']('isEnabled')['to'](this,'isEnabled',this,'isProcessing',this,'value',(_0x1600c1,_0x41c1a4,_0x281b1b)=>_0x1600c1&&!_0x41c1a4&&!!_0x281b1b),_0x345155['insertButton']['delegate']('execute')['to'](this,'insertContentBelow'),_0x345155['tryAgainButton']['bind']('isEnabled')['to'](this,'isEnabled',this,'isProcessing',(_0x548a42,_0x318618)=>_0x548a42&&!_0x318618),_0x345155['tryAgainButton']['delegate']('execute')['to'](this,'tryAgainEvent'),_0x345155['stopButton']['bind']('isEnabled')['to'](this,'isProcessing'),_0x345155['stopButton']['delegate']('execute')['to'](this,'stopProcessing'),_0x345155;}['startProcessing'](){this['value']='',this['isError']=!0x1,this['isProcessing']=!0x0,this['contentArea']['isVisible']=!0x0,this['toolbar']['isVisible']=!0x0,this['contentArea']['focus']();}['finishProcessing'](){const _0x5eb452=this['locale'];this['isProcessing']=!0x1,this['prompt']='',this['promptView']['reset'](),this['value']&&(this['promptView']['queryView']['label']=i(_0x5eb452,'Ask\x20AI\x20to\x20improve\x20generated\x20text'));}['handleError'](_0x344e7a){const _0x40cd28=this['locale'];this['finishProcessing'](),this['isError']=!0x0,this['errorView']['text']=_0x344e7a||i(_0x40cd28,'AI_ERROR_FAILED'),this['value']||(this['contentArea']['isVisible']=!0x1);}}var E='<svg\x20viewBox=\x220\x200\x2020\x2020\x22\x20xmlns=\x22http://www.w3.org/2000/svg\x22><path\x20d=\x22M15.346\x209.422a.151.151\x200\x200\x201\x20.284\x200l.548\x201.484a.152.152\x200\x200\x200\x20.09.089l1.483.549a.151.151\x200\x200\x201\x200\x20.284l-1.483.548a.151.151\x200\x200\x200-.09.09l-.548\x201.483a.152.152\x200\x200\x201-.142.1.151.151\x200\x200\x201-.142-.1l-.549-1.483a.15.15\x200\x200\x200-.09-.09l-1.483-.548a.15.15\x200\x200\x201\x200-.284l1.484-.549a.152.152\x200\x200\x200\x20.089-.09l.549-1.483Z\x22/><path\x20d=\x22M16.306\x201.742a.151.151\x200\x200\x201\x20.284\x200l.549\x201.483a.15.15\x200\x200\x200\x20.089.09l1.483.548a.151.151\x200\x200\x201\x20.072.229.151.151\x200\x200\x201-.072.055l-1.483.549a.15.15\x200\x200\x200-.09.09l-.548\x201.482a.151.151\x200\x200\x201-.284\x200l-.549-1.483a.15.15\x200\x200\x200-.09-.09l-1.483-.548a.151.151\x200\x200\x201\x200-.284l1.484-.549a.152.152\x200\x200\x200\x20.09-.089l.548-1.483Z\x22/><path\x20d=\x22M7.665\x201.742a.151.151\x200\x200\x201\x20.284\x200l.549\x201.483a.151.151\x200\x200\x200\x20.09.09l1.482.548a.151.151\x200\x200\x201\x20.072.229.151.151\x200\x200\x201-.072.055l-1.483.549a.151.151\x200\x200\x200-.09.09L7.95\x206.267a.151.151\x200\x200\x201-.284\x200l-.549-1.483a.151.151\x200\x200\x200-.089-.09l-1.483-.548a.151.151\x200\x200\x201\x200-.284l1.483-.549a.151.151\x200\x200\x200\x20.09-.089l.548-1.483-.001.001Z\x22/><path\x20d=\x22M14.72\x207.946a.848.848\x200\x200\x200\x20.25-.591.824.824\x200\x200\x200-.241-.588l-1.943-1.938a.812.812\x200\x200\x200-.588-.241.838.838\x200\x200\x200-.591.25l-1.545\x201.539\x203.115\x203.115\x201.542-1.546h.001Z\x22/><path\x20clip-rule=\x22evenodd\x22\x20d=\x22M1.19\x2015.636a.96.96\x200\x200\x201\x20.281-.679l7.835-7.834\x203.121\x203.12-7.834\x207.835a.959.959\x200\x200\x201-1.358\x200l-1.764-1.764a.96.96\x200\x200\x201-.28-.678Zm9.22-5.391-1.121-1.12-6.479\x206.478\x201.121\x201.121\x206.479-6.479Z\x22/></svg>';const j=globalThis['DataTransfer'];class n extends _0x54da78{['licenseKey'];['_licenseKeyCheckInterval'];['_dialog'];['_formView'];['_aiAdapter'];['_aiAssistantController'];['_uiCssClasses']='';static get['pluginName'](){return'AIAssistantUI';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}static get['requires'](){return[_0x1ceaf2,a,v,_0x5320b6];}constructor(_0x17d9a9){super(_0x17d9a9),_0x17d9a9['config']['define']('ai.aiAssistant.disabledElements',['media','rawHtml','tableOfContents']),_0x17d9a9['config']['define']('ai.aiAssistant.contentAreaCssClass',''),_0x17d9a9['config']['define']('ai.useTheme',!0x0),this['_uiCssClasses']='ck-ai-assistant-ui'+(_0x17d9a9['config']['get']('ai.useTheme')?'\x20ck-ai-assistant-ui_theme':'');}['init'](){const {editor:_0xb40aa9}=this;this['_aiAdapter']=_0xb40aa9['plugins']['get'](v),this['_dialog']=_0xb40aa9['plugins']['get'](_0x5320b6),this['_formView']=null,this['_commandDefinitions']=this['_getResolvedCommandsDefinitions']();const _0x103790=new y(_0xb40aa9,Array['from'](this['_commandDefinitions']['values']()));_0xb40aa9['commands']['add']('showAIAssistant',_0x103790),_0xb40aa9['ui']['componentFactory']['add']('aiCommands',_0x5bcfbd=>{const _0x24fd0a=_0x1b379d(_0x5bcfbd);return _0x24fd0a['set']({'class':'ck-ai-commands-dropdown\x20'+this['_uiCssClasses']}),_0x24fd0a['buttonView']['set']({'label':i(_0x5bcfbd,'AI\x20Commands'),'icon':E,'tooltip':!0x0}),_0x24fd0a['on']('execute',_0xb69fb7=>this['_onExecute'](_0xb69fb7['source']['id'])),_0x3bc814(_0x24fd0a,_0xb40aa9['ui']['view']['body'],function(_0x208ce0){const _0x39d564=o(_0x208ce0['config']['get']('ai.aiAssistant.commands'),_0x208ce0['locale']),_0x5828e4=B(_0x208ce0,_0x39d564)['filter'](_0x8a9a1f=>_0x8a9a1f['commands']['length']);if(0x1===_0x5828e4['length'])return B(_0x208ce0,_0x5828e4[0x0]['commands'])['map'](_0x386561=>({'id':_0x386561['id'],'label':_0x386561['label']}));return _0x5828e4['map'](_0xe3927e=>{const {groupId:_0x285664,groupLabel:_0x4d2854,commands:_0x2a0ca1}=_0xe3927e,_0x402da5=B(_0x208ce0,_0x2a0ca1)['map'](_0x98cfbe=>({'id':_0x98cfbe['id'],'label':_0x98cfbe['label']}));return{'id':_0x285664,'menu':_0x4d2854||_0x285664,'children':_0x402da5};});}(_0xb40aa9),{'ariaLabel':i(_0x5bcfbd,'AI\x20Commands')}),_0x24fd0a['menuView']['menuPanelClass']='ck-ai-commands-dropdown\x20'+this['_uiCssClasses'],_0x103790['on']('change:enabledCommandsIds',_0x3e5370),_0x24fd0a['menuView']['once']('render',_0x3e5370),_0x24fd0a;function _0x3e5370(){_0x24fd0a['isEnabled']=_0x103790['enabledCommandsIds']['length']>0x0;for(const _0x3f7b2a of _0x24fd0a['menuView']['buttons'])_0x3f7b2a['isEnabled']=_0x103790['enabledCommandsIds']['includes'](_0x3f7b2a['id']);}}),_0xb40aa9['ui']['componentFactory']['add']('menuBar:aiCommands',_0x4da87c=>{const _0x106b3f=new _0xedaeab(_0x4da87c);_0x106b3f['buttonView']['set']({'label':i(_0x4da87c,'AI\x20Commands'),'icon':E}),_0x106b3f['bind']('isEnabled')['to'](_0x103790,'enabledCommandsIds',_0x1b08bb=>_0x1b08bb['length']>0x0);const _0x520668=o(_0xb40aa9['config']['get']('ai.aiAssistant.commands'),_0x4da87c);return this['_populateMenuBarMenu'](_0x103790,_0x106b3f,_0x520668,_0x1c11dc=>this['_onExecute'](_0x1c11dc)),_0x106b3f;}),_0xb40aa9['ui']['componentFactory']['add']('aiAssistant',()=>{const _0x2a7263=this['_createAIAssistantUIButton'](_0x4927a1);return _0x2a7263['set']({'tooltip':!0x0,'class':'ck-ai-assistant-button\x20'+this['_uiCssClasses']}),_0x2a7263;}),_0xb40aa9['ui']['componentFactory']['add']('menuBar:aiAssistant',()=>{const _0x47b029=this['_createAIAssistantUIButton'](_0x5834a2);return _0x47b029['set']({'role':'menuitemcheckbox'}),_0x47b029;}),this['licenseKey']=this['editor']['config']['get']('licenseKey');const _0x1dee4e=this['editor'];this['_licenseKeyCheckInterval']=setInterval(()=>{let _0x529821;for(const _0x5d17f7 in _0x1dee4e){const _0xb0f130=_0x5d17f7,_0x371534=_0x1dee4e[_0xb0f130];if('aiLicenseKeyValid'==_0x371534||'aiLicenseKeyInvalid'==_0x371534||'aiLicenseKeyExpired'==_0x371534||'aiLicenseKeyDomainLimit'==_0x371534||'aiLicenseKeyNotAllowed'==_0x371534||'aiLicenseKeyEvaluationLimit'==_0x371534||'aiLicenseKeyTrialLimit'==_0x371534||'aiLicenseKeyDevelopmentLimit'==_0x371534||'aiLicenseKeyUsageLimit'==_0x371534){delete _0x1dee4e[_0xb0f130],_0x529821=_0x371534,clearInterval(this['_licenseKeyCheckInterval']),this['_licenseKeyCheckInterval']=void 0x0;break;}}'aiLicenseKeyInvalid'==_0x529821&&_0x1dee4e['_showLicenseError']('invalid'),'aiLicenseKeyExpired'==_0x529821&&_0x1dee4e['_showLicenseError']('expired'),'aiLicenseKeyDomainLimit'==_0x529821&&_0x1dee4e['_showLicenseError']('domainLimit'),'aiLicenseKeyNotAllowed'==_0x529821&&_0x1dee4e['_showLicenseError']('featureNotAllowed','AIAssistant'),'aiLicenseKeyEvaluationLimit'==_0x529821&&_0x1dee4e['_showLicenseError']('evaluationLimit'),'aiLicenseKeyTrialLimit'==_0x529821&&_0x1dee4e['_showLicenseError']('trialLimit'),'aiLicenseKeyDevelopmentLimit'==_0x529821&&_0x1dee4e['_showLicenseError']('developmentLimit'),'aiLicenseKeyUsageLimit'==_0x529821&&_0x1dee4e['_showLicenseError']('usageLimit');},0x3e8);}['destroy'](){super['destroy'](),this['_licenseKeyCheckInterval']&&clearInterval(this['_licenseKeyCheckInterval']);}['showUI'](_0x51906e='',_0x5eba92='',_0x41f4cb='custom'){const _0x13b4cb=this['editor'],_0x1c4b54=_0x13b4cb['editing']['view'],_0x107c1d=_0x13b4cb['plugins']['get'](a),_0x1a61a0=_0x13b4cb['plugins']['get'](_0x1ceaf2);_0x107c1d['showFakeVisualSelection']();const _0x1e1f99=new j(),_0x47413c=new ClipboardEvent('copy',{'clipboardData':_0x1e1f99}),_0x33f19b=new _0x365b4e(_0x1e1f99),_0x55f699=new _0x203c5f(_0x1c4b54,_0x47413c,{'dataTransfer':_0x33f19b});_0x1a61a0['_forceMarkersCopy']('comment',()=>{_0x1c4b54['document']['fire']('copy',_0x55f699);}),this['_formView']||(this['_initView'](),this['_aiAssistantController']=new C(_0x13b4cb,this['_aiAdapter']['textAdapter'],this['_formView']));let _0x1c14ea=_0x33f19b['getData']('text/html');const _0xe47d70=_0x13b4cb['model']['document']['selection'],_0x4f8e90=Array['from'](_0xe47d70['getRanges']());0x1===_0x4f8e90['length']&&_0x4f8e90[0x0]['isFlat']&&!_0xe47d70['getSelectedElement']()&&''!==_0x1c14ea['replace'](/&nbsp;/g,'')['trim']()&&(_0x1c14ea='<p>'+_0x1c14ea+'</p>'),this['_aiAssistantController']['updateView']({'actionId':_0x41f4cb,'query':_0x51906e,'htmlContent':_0x1c14ea,'label':_0x5eba92,'mainActionLabel':x[_0x13b4cb['model']['document']['selection']['isCollapsed']?'INSERT':'REPLACE']}),'aiAssistant'!==this['_dialog']['id']?this['_dialog']['show']({'id':'aiAssistant','icon':at['robotPencil'],'title':i(this['editor']['locale'],'AI\x20Assistant'),'content':this['_formView'],'position':_0x43526d['EDITOR_TOP_SIDE'],'onShow':()=>{this['_formView']['focus']();},'onHide':()=>{this['_aiAssistantController']['reset'](),_0x107c1d['hideFakeVisualSelection']();}}):this['_dialog']['view']['wasMoved']||this['_dialog']['view']['updatePosition']();}['hideUI'](){this['_dialog']['hide']();}['_getResolvedCommandsDefinitions'](){const _0x15e6fc=new Map(),_0x1a72cd=o(this['editor']['config']['get']('ai.aiAssistant.commands'),this['editor']['locale']);for(const _0x2800ce of _0x1a72cd)for(const _0x32e384 of _0x2800ce['commands'])_0x15e6fc['set'](_0x32e384['id'],{..._0x32e384,'groupId':_0x2800ce['groupId'],'groupLabel':_0x2800ce['groupLabel']||_0x2800ce['groupId']});return _0x15e6fc;}['_createAIAssistantUIButton'](_0x3378be){const _0x5a4817=this['editor'],_0x3ab5b1=_0x5a4817['commands']['get']('showAIAssistant'),_0x6fa37f=new _0x3378be(_0x5a4817['locale']);return _0x6fa37f['set']({'label':i(_0x5a4817['locale'],'AI\x20Assistant'),'icon':at['robotPencil'],'isToggleable':!0x0}),_0x6fa37f['bind']('isEnabled')['to'](_0x3ab5b1),_0x6fa37f['bind']('isOn')['to'](this['_dialog'],'id',_0x156318=>'aiAssistant'===_0x156318),this['listenTo'](_0x6fa37f,'execute',()=>{_0x6fa37f['isOn']?this['hideUI']():_0x3ab5b1['execute']();}),_0x6fa37f;}['_initView'](){const _0x5df14b=this['editor']['plugins']['get'](a);this['_formView']=new K(this['editor']['locale'],this['_uiCssClasses'],this['editor']['config']['get']('ai.aiAssistant.contentAreaCssClass')),this['_formView']['on']('change:value',()=>{this['_dialog']['view']['wasMoved']||this['_dialog']['view']['updatePosition']();}),this['_formView']['promptView']['queryView']['fieldView']['on']('update',()=>{this['_dialog']['view']['wasMoved']||this['_dialog']['view']['updatePosition']();}),this['listenTo'](this['_formView'],'replaceContent',()=>{_0x5df14b['insertContent'](this['_aiAssistantController']['currentContext']),this['hideUI']();}),this['listenTo'](this['_formView'],'insertContentBelow',()=>{_0x5df14b['insertContentBelow'](this['_aiAssistantController']['currentContext']),this['hideUI']();}),this['_initAriaAiStatusChangeAnnouncements']();}['_initAriaAiStatusChangeAnnouncements'](){const {locale:_0xb131bf,ui:{ariaLiveAnnouncer:_0x41f02c}}=this['editor'];this['_formView']['contentArea']['on']('change:isProcessing',(_0x404d6e,_0x460b7a,_0x887af7)=>{const _0x455542=this['_aiAssistantController']['currentContext'];_0x887af7?_0x41f02c['announce'](i(_0xb131bf,'AI\x20is\x20writing')):_0x455542&&_0x41f02c['announce'](i(_0xb131bf,'Generated\x20content:\x20%0',_0x455542),{'politeness':'polite','isUnsafeHTML':!0x0});}),this['_formView']['on']('change:isError',(_0x2527e3,_0x334a07,_0x531f2e)=>{if(_0x531f2e){const _0x55203a=this['_formView']['errorView']['text'];_0x41f02c['announce'](i(_0xb131bf,'Error\x20during\x20AI\x20content\x20generation:\x20%0',_0x55203a));}});}['_onExecute'](_0x51dbe0){const _0x152b9b=this['_commandDefinitions']['get'](_0x51dbe0),_0x55d2d4=this['editor'],_0x412299=_0x55d2d4['model']['document']['selection'],_0x5b214a=_0x55d2d4['commands']['get']('showAIAssistant'),_0x48a4df=_0x55d2d4['plugins']['get'](a),_0x98e6fb=''+(_0x152b9b['groupId']!==I?_0x152b9b['groupLabel']+':\x20':'')+_0x152b9b['label'];if(!0x1!==_0x152b9b['requiresContent']&&_0x412299['isCollapsed']){const _0x45bff8=_0x228044(_0x412299['getSelectedBlocks']())||_0x55d2d4['model']['schema']['getLimitElement'](_0x412299);_0x55d2d4['model']['change'](_0x5ae0aa=>{_0x5ae0aa['setSelection'](_0x45bff8,'in');});}_0x48a4df['showFakeVisualSelection'](),_0x5b214a['execute'](_0x152b9b['prompt'],_0x98e6fb,'command:'+_0x51dbe0);}['_populateMenuBarMenu'](_0xd28984,_0x1ea852,_0x5c3ef3,_0x3f4c52){const _0x187aa8=this['editor'],_0x64ab82=_0x187aa8['locale'],_0x3b93d1=new _0x3db9f4(_0x64ab82),_0x3ce449=B(_0x187aa8,_0x5c3ef3)['filter'](_0x3a7635=>_0x3a7635['commands']['length']);0x1===_0x3ce449['length']?this['_getMenuBarGroupButtons']({'command':_0xd28984,'commands':_0x3ce449[0x0]['commands'],'parentMenuView':_0x1ea852,'onExecute':_0x3f4c52})['forEach'](_0x5a7ee1=>_0x3b93d1['items']['add'](_0x5a7ee1)):_0x3ce449['forEach'](({groupId:_0x2b29d5,groupLabel:_0x2d3f41,commands:_0x3f3eb8})=>{const _0x116841=new _0x48d377(_0x64ab82,_0x1ea852),_0x187825=new _0xedaeab(_0x64ab82),_0x45f983=new _0x3db9f4(_0x64ab82),_0x1966bd=this['_getMenuBarGroupButtons']({'command':_0xd28984,'commands':_0x3f3eb8,'parentMenuView':_0x187825,'onExecute':_0x3f4c52});_0x187825['buttonView']['set']({'label':_0x2d3f41||_0x2b29d5}),_0x187825['delegate']('execute')['to'](_0x1ea852),_0x45f983['items']['addMany'](_0x1966bd),_0x187825['panelView']['children']['add'](_0x45f983),_0x116841['children']['add'](_0x187825),_0x3b93d1['items']['add'](_0x116841);}),_0x1ea852['panelView']['children']['add'](_0x3b93d1);}['_getMenuBarGroupButtons']({command:_0x2f1aab,commands:_0x57991b,parentMenuView:_0x4b1a31,onExecute:_0x33fc14}){const _0x25ba5b=this['editor'],_0x49feac=_0x25ba5b['locale'];return B(_0x25ba5b,_0x57991b)['map'](_0x520109=>{const _0x43c2f1=new _0x48d377(_0x49feac,_0x4b1a31),_0x3cd678=new _0x5834a2(_0x49feac);return _0x3cd678['set']({'label':_0x520109['label']}),_0x3cd678['delegate']('execute')['to'](_0x4b1a31),_0x3cd678['on']('execute',()=>_0x33fc14(_0x520109['id'])),_0x3cd678['bind']('isEnabled')['to'](_0x2f1aab,'enabledCommandsIds',_0x117a79=>_0x117a79['includes'](_0x520109['id'])),_0x43c2f1['children']['add'](_0x3cd678),_0x43c2f1;});}}function _(_0x257627,_0xd4ecdb){return void 0x0!==_0x257627['order']&&void 0x0===_0xd4ecdb['order']?0x1:void 0x0===_0x257627['order']&&void 0x0!==_0xd4ecdb['order']?-0x1:void 0x0!==_0x257627['order']&&void 0x0!==_0xd4ecdb['order']?_0x257627['order']-_0xd4ecdb['order']:0x0;}function B(_0xc5791d,_0x32055d){_0x32055d['sort'](_);const _0x3a446e={},_0x2ac7ef=[];for(const _0x51f63e of _0x32055d)if(void 0x0!==_0x51f63e['order']){if(_0x51f63e['order']in _0x3a446e)throw new _0x2f0c49('ai-commands-config-order-collision',_0xc5791d,{'conflictingDefinitions':[_0x51f63e,_0x3a446e[_0x51f63e['order']]]});_0x3a446e[_0x51f63e['order']]=_0x51f63e,_0x2ac7ef['splice'](_0x51f63e['order'],0x0,_0x51f63e);}else _0x2ac7ef['push'](_0x51f63e);return _0x2ac7ef;}class r extends _0x54da78{static get['requires'](){return[n,a];}static get['pluginName'](){return'AIAssistant';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x5486ae){super(_0x5486ae);const _0x1a6d04=_0x5486ae['config'],_0x178cd4=_0x5486ae['locale'];_0x1a6d04['define']('ai.aiAssistant.commands',function(_0x242a7d){return[{'groupId':'editOrReview','groupLabel':i(_0x242a7d,'Edit\x20or\x20review'),'commands':[{'id':'improveWriting','label':i(_0x242a7d,'Improve\x20writing'),'prompt':'Fix\x20spelling\x20mistakes,\x20use\x20proper\x20grammar\x20and\x20apply\x20good\x20writing\x20practices.\x20Do\x20not\x20lose\x20the\x20original\x20meaning.'},{'id':'makeShorter','label':i(_0x242a7d,'Make\x20shorter'),'prompt':'Remove\x20any\x20repetitive,\x20redundant,\x20or\x20non-essential\x20writing\x20in\x20this\x20content\x20without\x20changing\x20the\x20meaning\x20or\x20losing\x20any\x20key\x20information.'},{'id':'makeLonger','label':i(_0x242a7d,'Make\x20longer'),'prompt':'Improve\x20this\x20content\x20by\x20using\x20descriptive\x20language\x20and\x20inserting\x20more\x20information\x20and\x20more\x20detailed\x20explanations.'},{'id':'simplifyLanguage','label':i(_0x242a7d,'Simplify\x20language'),'prompt':'Simplify\x20the\x20writing\x20style\x20of\x20this\x20content\x20and\x20reduce\x20the\x20complexity,\x20so\x20that\x20the\x20content\x20is\x20easy\x20to\x20understand.'}]},{'groupId':'generate','groupLabel':i(_0x242a7d,'Generate\x20from\x20selection'),'commands':[{'id':'summarize','label':i(_0x242a7d,'Summarize'),'prompt':'Summarize\x20this\x20content\x20into\x20one\x20paragraph\x20of\x20text.\x20Include\x20only\x20the\x20key\x20ideas\x20and\x20conclusions.\x20Keep\x20it\x20short.\x20Do\x20not\x20keep\x20original\x20text\x20formatting.'},{'id':'continue','label':i(_0x242a7d,'Continue'),'prompt':'Start\x20with\x20the\x20provided\x20content\x20and\x20write\x20at\x20the\x20end\x20of\x20it\x20continuing\x20this\x20topic.\x20Keep\x20the\x20added\x20part\x20short.'}]},{'groupId':'changeTone','groupLabel':i(_0x242a7d,'Change\x20tone'),'commands':[{'id':'professional','label':i(_0x242a7d,'Professional'),'prompt':'Improve\x20using\x20polished,\x20formal,\x20and\x20respectful\x20language\x20to\x20convey\x20professional\x20expertise\x20and\x20competence.'},{'id':'casual','label':i(_0x242a7d,'Casual'),'prompt':'Improve\x20using\x20casual,\x20informal\x20language\x20to\x20convey\x20a\x20casual\x20conversation\x20with\x20a\x20real\x20person.'},{'id':'direct','label':i(_0x242a7d,'Direct'),'prompt':'Improve\x20using\x20direct\x20language,\x20using\x20only\x20the\x20essential\x20information.'},{'id':'confident','label':i(_0x242a7d,'Confident'),'prompt':'Improve\x20using\x20compelling,\x20optimistic\x20language\x20to\x20convey\x20confidence\x20in\x20the\x20writing.'},{'id':'friendly','label':i(_0x242a7d,'Friendly'),'prompt':'Improve\x20using\x20friendly,\x20comforting\x20language,\x20to\x20convey\x20understanding\x20and\x20empathy.'}]},{'groupId':'changeStyle','groupLabel':i(_0x242a7d,'Change\x20style'),'commands':[{'id':'business','label':i(_0x242a7d,'Business'),'prompt':'Rewrite\x20this\x20content\x20as\x20a\x20business\x20professional\x20with\x20formal\x20language.'},{'id':'legal','label':i(_0x242a7d,'Legal'),'prompt':'Rewrite\x20this\x20content\x20as\x20a\x20legal\x20professional\x20using\x20valid\x20legal\x20terminology.'},{'id':'journalism','label':i(_0x242a7d,'Journalism'),'prompt':'Rewrite\x20this\x20content\x20as\x20a\x20journalist\x20using\x20engaging\x20language\x20to\x20convey\x20the\x20importance\x20of\x20the\x20information.'},{'id':'poetic','label':i(_0x242a7d,'Poetic'),'prompt':'Rewrite\x20this\x20content\x20as\x20a\x20poem\x20using\x20poetic\x20techniques\x20without\x20losing\x20the\x20original\x20meaning.'}]},{'groupId':'translate','groupLabel':i(_0x242a7d,'Translate'),'commands':[{'id':'translateEnglish','label':i(_0x242a7d,'English'),'prompt':'Translate\x20the\x20content\x20to\x20English\x20language.'},{'id':'translateSpanish','label':i(_0x242a7d,'Spanish'),'prompt':'Translate\x20the\x20content\x20to\x20Spanish\x20language.'},{'id':'translatePortuguese','label':i(_0x242a7d,'Portuguese'),'prompt':'Translate\x20the\x20content\x20to\x20Portuguese\x20language.'},{'id':'translateGerman','label':i(_0x242a7d,'German'),'prompt':'Translate\x20the\x20content\x20to\x20German\x20language.'},{'id':'translateFrench','label':i(_0x242a7d,'French'),'prompt':'Translate\x20the\x20content\x20to\x20French\x20language.'},{'id':'translateChinese','label':i(_0x242a7d,'Simplified\x20Chinese'),'prompt':'Translate\x20the\x20content\x20to\x20Simplified\x20Chinese\x20language.'},{'id':'translateHindi','label':i(_0x242a7d,'Hindi'),'prompt':'Translate\x20the\x20content\x20to\x20Hindi\x20language.'},{'id':'translateArabic','label':i(_0x242a7d,'Arabic'),'prompt':'Translate\x20the\x20content\x20to\x20Arabic\x20language.'}]}];}(_0x178cd4)),_0x1a6d04['define']('ai.aiAssistant.extraCommandGroups',[]),_0x1a6d04['define']('ai.aiAssistant.removeCommands',[]);const _0x552a1c=o(_0x1a6d04['get']('ai.aiAssistant.commands'),_0x178cd4),_0x2bb7f9=_0x1a6d04['get']('ai.aiAssistant.extraCommandGroups'),_0x4c79f5=_0x1a6d04['get']('ai.aiAssistant.removeCommands');_0x2bb7f9['forEach'](_0x45dd4c=>{const _0xc15da=_0x552a1c['find'](_0x376c46=>_0x376c46['groupId']===_0x45dd4c['groupId']);_0xc15da?_0xc15da['commands']=_0xc15da['commands']['concat'](_0x45dd4c['commands']):_0x552a1c['push'](_0x45dd4c);}),_0x552a1c['forEach'](_0x5aea82=>{_0x5aea82['commands']=_0x5aea82['commands']['filter'](_0x4020e4=>!_0x4c79f5['includes'](_0x4020e4['id']));}),_0x1a6d04['set']('ai.aiAssistant.commands',_0x552a1c);}}class P extends _0x54da78{['abortController'];static get['requires'](){return[v];}constructor(_0x515323){super(_0x515323),this['abortController']=new AbortController();}['init'](){this['editor']['plugins']['get'](v)['textAdapter']=this;}['abort'](){this['abortController']['signal']['aborted']||(this['abortController']['abort'](),this['abortController']=new AbortController());}async['makeRequest'](_0x10ce17){return this['sendRequest'](_0x10ce17)['catch'](_0x245610=>{if(_0x245610 instanceof R)return Promise['reject'](_0x245610);if('AbortError'==_0x245610['name'])return Promise['resolve']();throw console['error'](_0x245610),new _0x2f0c49('aitextadapter-send-request-failed',null);});}async['_prepareRequestHeaders'](_0x291873,_0x5d7782){const _0x2cd7f6=this['editor']['locale'],_0x149fd8={'Content-Type':'application/json'};if('object'==typeof _0x291873)Object['assign'](_0x149fd8,_0x291873);else{if(_0x291873)try{const _0x466a39=await _0x291873(_0x5d7782);Object['assign'](_0x149fd8,_0x466a39);}catch(_0x4a1f04){return Promise['reject'](new R(i(_0x2cd7f6,'AI_ERROR_GET_HEADERS')));}}return _0x149fd8;}async['_prepareRequestParameters'](_0x2eb647,_0xfa85ed){const _0xe05d21=this['editor']['locale'];if('object'==typeof _0x2eb647)return _0x2eb647;try{return await _0x2eb647(_0xfa85ed);}catch(_0x5e8e68){return Promise['reject'](new R(i(_0xe05d21,'AI_ERROR_GET_PARAMETERS')));}}}class H extends P{['_apiUrl'];['_requestHeaders'];['_requestParameters'];static get['pluginName'](){return'OpenAITextAdapter';}constructor(_0x4e5ac9){super(_0x4e5ac9),_0x4e5ac9['config']['define']('ai.openAI.apiUrl','https://api.openai.com/v1/chat/completions'),_0x4e5ac9['config']['get']('ai.openAI.requestParameters')||_0x4e5ac9['config']['define']('ai.openAI.requestParameters',{'model':'gpt-3.5-turbo','max_tokens':0x7d0,'temperature':0x1,'top_p':0x1,'stream':!0x0}),this['_apiUrl']=_0x4e5ac9['config']['get']('ai.openAI.apiUrl'),this['_requestHeaders']=_0x4e5ac9['config']['get']('ai.openAI.requestHeaders')||{},this['_requestParameters']=_0x4e5ac9['config']['get']('ai.openAI.requestParameters');}async['sendRequest']({query:_0x59f8a1,context:_0x450fbe,onData:_0xc7ff34,actionId:_0x32fc6e}){const _0x142b11=this['editor']['locale'],_0x2699f6=await this['prepareMessages'](_0x59f8a1,_0x450fbe,_0x32fc6e),_0x13ea3e=await this['_prepareRequestHeaders'](this['_requestHeaders'],_0x32fc6e),_0xebc520=await this['_prepareRequestParameters'](this['_requestParameters'],_0x32fc6e),_0x239650={'messages':_0x2699f6,..._0xebc520},_0x4e2d67={'method':'POST','headers':_0x13ea3e,'body':JSON['stringify'](_0x239650),'signal':this['abortController']['signal']},_0x5d079e=await fetch(this['_apiUrl'],_0x4e2d67);if(_0x5d079e['ok'])return _0xebc520['stream']?await this['_readStreamableResponse'](_0x5d079e,_0xc7ff34):await this['_readStaticResponse'](_0x5d079e,_0xc7ff34),Promise['resolve']();{const _0x51d2af=await _0x5d079e['text']();return _0x51d2af['includes']('context_length_exceeded')?Promise['reject'](new R(i(_0x142b11,'AI_ERROR_CONTEXT_LENGTH'))):_0x51d2af['includes']('Moderation')?Promise['reject'](new R(i(_0x142b11,'AI_ERROR_MODERATION'))):Promise['reject'](new Error(_0x51d2af));}}async['prepareMessages'](_0x292103,_0x16bfab,_0x444a06){let _0x32e7fd,_0x16fa1a;return _0x16bfab?(_0x32e7fd='Your\x20task\x20is\x20to\x20execute\x20the\x20instruction\x20using\x20the\x20provided\x20HTML\x20content.\x20Follow\x20the\x20instruction\x20closely.\x20Your\x20answer\x20must\x20be\x20a\x20properly\x20formatted\x20HTML\x20code.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.',_0x16fa1a='Instruction:\x0a'+_0x292103+'\x0aYou\x20must\x20keep\x20the\x20text\x20formatting.\x0a\x0aContent:\x0a'+_0x16bfab):(_0x32e7fd='Your\x20task\x20is\x20to\x20generate\x20HTML\x20content\x20accordingly\x20to\x20the\x20given\x20instruction.\x20Never\x20include\x20<img>\x20tag\x20in\x20your\x20response\x20even\x20if\x20asked\x20for.\x20Your\x20answer\x20must\x20be\x20a\x20well-structured\x20and\x20properly\x20formatted\x20HTML\x20code.\x20Answer\x20only\x20with\x20the\x20generated\x20HTML\x20content.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.',_0x16fa1a=_0x292103),[{'role':'system','content':_0x32e7fd},{'role':'user','content':_0x16fa1a}];}async['_readStreamableResponse'](_0xb7ba9b,_0x71b6e4){const _0x5c72f5=_0xb7ba9b['body']['getReader'](),_0x3f00cf=new TextDecoder();let _0x1bbcae='',_0x3f5493='',_0x1f7d03='',_0x45520c=!0x1;for(;!_0x45520c;){const {done:_0x598278,value:_0x1b3088}=await _0x5c72f5['read'](),_0x48ec0f=_0x1bbcae+_0x3f00cf['decode'](_0x1b3088);let _0x10f2e1='';_0x45520c=_0x598278;try{_0x10f2e1=this['_cleanUpData'](_0x48ec0f),_0x1bbcae='';}catch(_0x3eeec0){_0x1bbcae=_0x48ec0f;continue;}_0x3f5493+=_0x10f2e1,!_0x45520c&&this['_isBufferIncomplete'](_0x3f5493)||_0x3f5493&&(_0x1f7d03+=_0x3f5493,_0x3f5493='',_0x71b6e4(_0x1f7d03));}return Promise['resolve']();}async['_readStaticResponse'](_0x4cabaa,_0x7bbbe6){return _0x7bbbe6((await _0x4cabaa['json']())['choices'][0x0]['message']['content']),Promise['resolve']();}['_isBufferIncomplete'](_0x868f93){const _0x389e28=_0x868f93['split']('<')['length']!==_0x868f93['split']('>')['length'],_0x5e16b1=_0x868f93['length']<0x1e;return _0x389e28&&_0x5e16b1;}['_cleanUpData'](_0xa7d9ac){return _0xa7d9ac['split'](/\n(?![^{]*\})/g)['map'](_0x485a4d=>_0x485a4d['replace']('data:\x20',''))['filter'](_0x180f59=>_0x180f59&&_0x180f59['length']>0x0&&'[DONE]'!==_0x180f59)['map'](_0x3550f5=>{const {choices:_0x4d5801}=JSON['parse'](_0x3550f5);if(_0x4d5801[0x0]&&_0x4d5801[0x0]['delta']&&_0x4d5801[0x0]['delta']['content'])return _0x4d5801[0x0]['delta']['content'];})['filter'](_0x44dabc=>_0x44dabc)['join']('');}}class O extends P{['_apiUrl'];['_requestHeaders'];['_bedrockClientConfig'];['_requestParameters'];static get['pluginName'](){return'AWSTextAdapter';}constructor(_0x7f388){super(_0x7f388),_0x7f388['config']['get']('ai.aws.requestParameters')||_0x7f388['config']['define']('ai.aws.requestParameters',{'model':'anthropic.claude-v2','max_tokens_to_sample':0x7d0,'temperature':0x1,'top_p':0x1,'top_k':0xfa,'anthropic_version':'bedrock-2023-05-31','stream':!0x0}),this['_apiUrl']=_0x7f388['config']['get']('ai.aws.apiUrl'),this['_bedrockClientConfig']=_0x7f388['config']['get']('ai.aws.bedrockClientConfig'),this['_requestHeaders']=_0x7f388['config']['get']('ai.aws.requestHeaders'),this['_requestParameters']=_0x7f388['config']['get']('ai.aws.requestParameters');}async['sendRequest']({query:_0x3c0e7a,context:_0x9d0087,onData:_0x565053,actionId:_0xd2feec}){const {model:_0xaeb083,stream:_0x543593,..._0x2c202e}=await this['_prepareRequestParameters'](this['_requestParameters'],_0xd2feec),_0x478bb7={'prompt':await this['preparePrompt'](_0x3c0e7a,_0x9d0087,_0xaeb083,_0xd2feec),..._0x2c202e};this['_apiUrl']?await this['_processProxyRequest'](_0x478bb7,_0xaeb083,_0x543593,_0x565053,_0xd2feec):await this['_processAWSRequest'](_0x478bb7,_0xaeb083,_0x543593,_0x565053);}async['preparePrompt'](_0x107705,_0x2f9258,_0x249859,_0x27adb2){let _0x483cc3,_0x564d8a;return _0x2f9258?(_0x483cc3='Your\x20task\x20is\x20to\x20execute\x20the\x20instruction\x20using\x20the\x20provided\x20HTML\x20content.\x20Follow\x20the\x20instruction\x20closely.\x20Your\x20answer\x20must\x20be\x20a\x20properly\x20formatted\x20HTML\x20code.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.',_0x564d8a='Instruction:\x0a'+_0x107705+'\x0aYou\x20must\x20keep\x20the\x20text\x20formatting.\x0a\x0aContent:\x0a'+_0x2f9258):(_0x483cc3='Your\x20task\x20is\x20to\x20generate\x20HTML\x20content\x20accordingly\x20to\x20the\x20given\x20instruction.\x20Never\x20include\x20<img>\x20tag\x20in\x20your\x20response\x20even\x20if\x20asked\x20for.\x20Your\x20answer\x20must\x20be\x20a\x20well-structured\x20and\x20properly\x20formatted\x20HTML\x20code.\x20Answer\x20only\x20with\x20the\x20generated\x20HTML\x20content.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.',_0x564d8a=_0x107705),'meta.llama'==this['getModelFamily'](_0x249859)?'<<SYS>>\x0a'+_0x483cc3+'\x0a<</SYS>>\x0a[INST]\x0a'+_0x564d8a+'\x0a[/INST]':'Human:\x0a'+_0x483cc3+'\x0a'+_0x564d8a+'\x0a\x0aAssistant:';}['getModelFamily'](_0x5703e6){if(/^anthropic\.claude/['test'](_0x5703e6))return'anthropic.claude';if(/^ai21\.j2/['test'](_0x5703e6))return'ai21.j2';if(/^cohere\.command/['test'](_0x5703e6))return'cohere.command';if(/^meta\.llama/['test'](_0x5703e6))return'meta.llama';throw new R(i(this['editor']['locale'],'AI_ERROR_UNSUPPORTED_MODEL',_0x5703e6));}async['_processProxyRequest'](_0x2d2504,_0x27eff9,_0x5c80ba,_0x570c86,_0x2079a4){const _0x2506a7={'method':'POST','headers':await this['_prepareRequestHeaders'](this['_requestHeaders'],_0x2079a4),'body':JSON['stringify']({..._0x2d2504,'model':_0x27eff9,'stream':_0x5c80ba}),'signal':this['abortController']['signal']},_0x4a3986=await fetch(this['_apiUrl'],_0x2506a7);_0x5c80ba?await this['_readStreamableResponse'](_0x4a3986,_0x27eff9,_0x570c86):await this['_readStaticResponse'](_0x4a3986,_0x27eff9,_0x570c86);}async['_processAWSRequest'](_0x1fea57,_0x51506c,_0x3408eb,_0x3192ff){const _0x379f3e=new _0x515b30(this['_bedrockClientConfig']),_0x9668c7={'body':JSON['stringify'](_0x1fea57),'contentType':'application/json','accept':'application/json','modelId':_0x51506c};let _0x176c77;if(_0x3408eb){const _0x37f5a1=new _0xbf5ada(_0x9668c7);_0x176c77=await _0x379f3e['send'](_0x37f5a1,{'abortSignal':this['abortController']['signal']}),await this['_readAsyncIterableResponse'](_0x176c77,_0x51506c,_0x3192ff);}else{const _0x55e4be=new _0x3b73f5(_0x9668c7);_0x176c77=await _0x379f3e['send'](_0x55e4be,{'abortSignal':this['abortController']['signal']}),await this['_readStaticResponse'](_0x176c77,_0x51506c,_0x3192ff);}}async['_readAsyncIterableResponse'](_0x485179,_0x312ad4,_0x149a08){const _0x29fbad=_0x485179['body'],_0x33ec28=new TextDecoder('utf-8');let _0x2984c4='';for await(const _0x5a3318 of _0x29fbad)if(_0x5a3318['chunk']){const _0x4bb4d5=_0x33ec28['decode'](_0x5a3318['chunk']['bytes']),_0x22afee=JSON['parse'](_0x4bb4d5);_0x2984c4+=this['_getGeneratedText'](_0x22afee,_0x312ad4),_0x149a08(_0x2984c4);}return Promise['resolve']();}async['_readStreamableResponse'](_0x3b5334,_0x2402e9,_0x2c1d46){const _0x10bec7=_0x3b5334['body'],_0x13368a=new TextDecoder('utf-8'),_0x185349=_0x10bec7['getReader']();let _0x34054d='',_0x231c22='',_0x298d10=!0x1;for(;!_0x298d10;){const {done:_0x187805,value:_0x4aedc7}=await _0x185349['read']();if(_0x298d10=_0x187805,_0x298d10)break;const _0x6bed60=(_0x34054d+_0x13368a['decode'](_0x4aedc7))['split']('\x0a')['map'](_0x5dacbf=>{try{return _0x34054d='',JSON['parse'](_0x5dacbf);}catch(_0x2d2947){return _0x34054d=_0x5dacbf,null;}})['filter'](_0x5edb44=>null!==_0x5edb44);_0x6bed60['length']&&(_0x231c22+=_0x6bed60['map'](_0x57e235=>this['_getGeneratedText'](_0x57e235,_0x2402e9))['join'](''),_0x2c1d46(_0x231c22));}return Promise['resolve']();}async['_readStaticResponse'](_0x36fa55,_0x2b4b52,_0x26a0f8){let _0x4e4c1b;return _0x4e4c1b=_0x36fa55 instanceof Response?await _0x36fa55['json']():JSON['parse'](Buffer['from'](_0x36fa55['body'])['toString']('utf8')),(_0x26a0f8(this['_getGeneratedText'](_0x4e4c1b,_0x2b4b52)),Promise['resolve']());}['_getGeneratedText'](_0x21b7a5,_0x257934){switch(this['getModelFamily'](_0x257934)){case'anthropic.claude':return _0x21b7a5['completion'];case'ai21.j2':return _0x21b7a5['completions'][0x0]['data']['text'];case'cohere.command':return _0x21b7a5['generations'][0x0]['text'];case'meta.llama':return _0x21b7a5['generation'];}}}export{v as AIAdapter,r as AIAssistant,R as AIRequestError,P as AITextAdapter,O as AWSTextAdapter,H as OpenAITextAdapter};