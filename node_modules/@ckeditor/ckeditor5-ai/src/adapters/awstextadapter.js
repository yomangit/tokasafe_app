/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x2ce4e8=_0x3c15;(function(_0x3beb3a,_0x30f13b){const _0x2e2d1b=_0x3c15,_0x132056=_0x3beb3a();while(!![]){try{const _0x3145c6=parseInt(_0x2e2d1b(0xdc))/0x1*(-parseInt(_0x2e2d1b(0xe3))/0x2)+parseInt(_0x2e2d1b(0xf6))/0x3+parseInt(_0x2e2d1b(0xb5))/0x4+-parseInt(_0x2e2d1b(0xeb))/0x5+parseInt(_0x2e2d1b(0xc8))/0x6+-parseInt(_0x2e2d1b(0xd0))/0x7*(-parseInt(_0x2e2d1b(0xec))/0x8)+parseInt(_0x2e2d1b(0xf5))/0x9*(parseInt(_0x2e2d1b(0xd6))/0xa);if(_0x3145c6===_0x30f13b)break;else _0x132056['push'](_0x132056['shift']());}catch(_0x574da6){_0x132056['push'](_0x132056['shift']());}}}(_0x37ef,0x2eb28));function _0x37ef(){const _0x3d5062=['1lpgcKB','abortController','config','sendRequest','_bedrockClientConfig','test','generation','650006HXABcH','anthropic.claude','Instruction:\x0a','POST','length','meta.llama','_requestParameters','split','1565685Wezulr','859704ULYdLZ','_readStaticResponse','_requestHeaders','completion','ai21.j2','define','ai.aws.requestParameters','map','bytes','6624DewMdQ','350505AcMdNo','filter','_apiUrl','from','_prepareRequestParameters','read','send','generations','join','stringify','signal','decode','\x0aYou\x20must\x20keep\x20the\x20text\x20formatting.\x0a\x0aContent:\x0a','_prepareRequestHeaders','cohere.command','body','Your\x20task\x20is\x20to\x20generate\x20HTML\x20content\x20accordingly\x20to\x20the\x20given\x20instruction.\x20Never\x20include\x20<img>\x20tag\x20in\x20your\x20response\x20even\x20if\x20asked\x20for.\x20Your\x20answer\x20must\x20be\x20a\x20well-structured\x20and\x20properly\x20formatted\x20HTML\x20code.\x20Answer\x20only\x20with\x20the\x20generated\x20HTML\x20content.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.','<<SYS>>\x0a','552296UjTPsP','\x0a[/INST]','json','\x0a<</SYS>>\x0a[INST]\x0a','utf-8','_readAsyncIterableResponse','_processAWSRequest','getReader','ai.aws.apiUrl','editor','preparePrompt','Your\x20task\x20is\x20to\x20execute\x20the\x20instruction\x20using\x20the\x20provided\x20HTML\x20content.\x20Follow\x20the\x20instruction\x20closely.\x20Your\x20answer\x20must\x20be\x20a\x20properly\x20formatted\x20HTML\x20code.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.','utf8','pluginName','application/json','AWSTextAdapter','locale','ai.aws.bedrockClientConfig','bedrock-2023-05-31','1795350QWHPpu','anthropic.claude-v2','_processProxyRequest','getModelFamily','Human:\x0a','AI_ERROR_UNSUPPORTED_MODEL','resolve','chunk','14WCQNVn','toString','data','_readStreamableResponse','get','completions','820TdRpDg','text','parse','\x0a\x0aAssistant:','_getGeneratedText','ai.aws.requestHeaders'];_0x37ef=function(){return _0x3d5062;};return _0x37ef();}import{default as _0x3bf222}from'./aitextadapter.js';function _0x3c15(_0x523e8a,_0xdb8080){const _0x37effd=_0x37ef();return _0x3c15=function(_0x3c1549,_0x3e97bf){_0x3c1549=_0x3c1549-0xb3;let _0x539707=_0x37effd[_0x3c1549];return _0x539707;},_0x3c15(_0x523e8a,_0xdb8080);}import{AIRequestError as _0xe47021}from'./aiadapter.js';import{BedrockRuntimeClient as _0x2aaa7e,InvokeModelCommand as _0x1e9d54,InvokeModelWithResponseStreamCommand as _0xc0f610}from'@aws-sdk/client-bedrock-runtime';import{getTranslation as _0x405226}from'../utils/common-translations.js';export default class O extends _0x3bf222{static get[_0x2ce4e8(0xc2)](){const _0xdcb356=_0x2ce4e8;return _0xdcb356(0xc4);}constructor(_0x25b6ca){const _0x47a868=_0x2ce4e8;super(_0x25b6ca),_0x25b6ca[_0x47a868(0xde)][_0x47a868(0xd4)](_0x47a868(0xf2))||_0x25b6ca[_0x47a868(0xde)][_0x47a868(0xf1)](_0x47a868(0xf2),{'model':_0x47a868(0xc9),'max_tokens_to_sample':0x7d0,'temperature':0x1,'top_p':0x1,'top_k':0xfa,'anthropic_version':_0x47a868(0xc7),'stream':!0x0}),this[_0x47a868(0xf8)]=_0x25b6ca[_0x47a868(0xde)][_0x47a868(0xd4)](_0x47a868(0xbd)),this[_0x47a868(0xe0)]=_0x25b6ca[_0x47a868(0xde)][_0x47a868(0xd4)](_0x47a868(0xc6)),this[_0x47a868(0xee)]=_0x25b6ca[_0x47a868(0xde)][_0x47a868(0xd4)](_0x47a868(0xdb)),this[_0x47a868(0xe9)]=_0x25b6ca[_0x47a868(0xde)][_0x47a868(0xd4)](_0x47a868(0xf2));}async[_0x2ce4e8(0xdf)]({query:_0x370d84,context:_0x55b5a8,onData:_0xc1d99b,actionId:_0x54f5fb}){const _0x2f3960=_0x2ce4e8,{model:_0x3de5b3,stream:_0x543948,..._0x5b5303}=await this[_0x2f3960(0xfa)](this[_0x2f3960(0xe9)],_0x54f5fb),_0x5f5501={'prompt':await this[_0x2f3960(0xbf)](_0x370d84,_0x55b5a8,_0x3de5b3,_0x54f5fb),..._0x5b5303};this[_0x2f3960(0xf8)]?await this[_0x2f3960(0xca)](_0x5f5501,_0x3de5b3,_0x543948,_0xc1d99b,_0x54f5fb):await this[_0x2f3960(0xbb)](_0x5f5501,_0x3de5b3,_0x543948,_0xc1d99b);}async[_0x2ce4e8(0xbf)](_0x8d3bba,_0x2afa63,_0x3e42b5,_0x2f7b2a){const _0x24c147=_0x2ce4e8;let _0x177383,_0x1c2785;return _0x2afa63?(_0x177383=_0x24c147(0xc0),_0x1c2785=_0x24c147(0xe5)+_0x8d3bba+_0x24c147(0x102)+_0x2afa63):(_0x177383=_0x24c147(0xb3),_0x1c2785=_0x8d3bba),_0x24c147(0xe8)==this[_0x24c147(0xcb)](_0x3e42b5)?_0x24c147(0xb4)+_0x177383+_0x24c147(0xb8)+_0x1c2785+_0x24c147(0xb6):_0x24c147(0xcc)+_0x177383+'\x0a'+_0x1c2785+_0x24c147(0xd9);}[_0x2ce4e8(0xcb)](_0x1bd7f1){const _0x39ce8e=_0x2ce4e8;if(/^anthropic\.claude/[_0x39ce8e(0xe1)](_0x1bd7f1))return _0x39ce8e(0xe4);if(/^ai21\.j2/[_0x39ce8e(0xe1)](_0x1bd7f1))return _0x39ce8e(0xf0);if(/^cohere\.command/[_0x39ce8e(0xe1)](_0x1bd7f1))return _0x39ce8e(0x104);if(/^meta\.llama/[_0x39ce8e(0xe1)](_0x1bd7f1))return _0x39ce8e(0xe8);throw new _0xe47021(_0x405226(this[_0x39ce8e(0xbe)][_0x39ce8e(0xc5)],_0x39ce8e(0xcd),_0x1bd7f1));}async[_0x2ce4e8(0xca)](_0x523d5d,_0x297ac4,_0x1be76a,_0x2c1d97,_0x42f2de){const _0xda7f5b=_0x2ce4e8,_0x39fa7b={'method':_0xda7f5b(0xe6),'headers':await this[_0xda7f5b(0x103)](this[_0xda7f5b(0xee)],_0x42f2de),'body':JSON[_0xda7f5b(0xff)]({..._0x523d5d,'model':_0x297ac4,'stream':_0x1be76a}),'signal':this[_0xda7f5b(0xdd)][_0xda7f5b(0x100)]},_0x4c2dcd=await fetch(this[_0xda7f5b(0xf8)],_0x39fa7b);_0x1be76a?await this[_0xda7f5b(0xd3)](_0x4c2dcd,_0x297ac4,_0x2c1d97):await this[_0xda7f5b(0xed)](_0x4c2dcd,_0x297ac4,_0x2c1d97);}async[_0x2ce4e8(0xbb)](_0xf39cff,_0x4550ab,_0x3217ea,_0x1f34c6){const _0x370559=_0x2ce4e8,_0x1ec52f=new _0x2aaa7e(this[_0x370559(0xe0)]),_0x56f249={'body':JSON[_0x370559(0xff)](_0xf39cff),'contentType':_0x370559(0xc3),'accept':_0x370559(0xc3),'modelId':_0x4550ab};let _0x5ced45;if(_0x3217ea){const _0x6d89c9=new _0xc0f610(_0x56f249);_0x5ced45=await _0x1ec52f[_0x370559(0xfc)](_0x6d89c9,{'abortSignal':this[_0x370559(0xdd)][_0x370559(0x100)]}),await this[_0x370559(0xba)](_0x5ced45,_0x4550ab,_0x1f34c6);}else{const _0x4a5386=new _0x1e9d54(_0x56f249);_0x5ced45=await _0x1ec52f[_0x370559(0xfc)](_0x4a5386,{'abortSignal':this[_0x370559(0xdd)][_0x370559(0x100)]}),await this[_0x370559(0xed)](_0x5ced45,_0x4550ab,_0x1f34c6);}}async[_0x2ce4e8(0xba)](_0x2d4de3,_0x35f4d2,_0x41e63e){const _0x2f5ecb=_0x2ce4e8,_0x6bd68f=_0x2d4de3[_0x2f5ecb(0x105)],_0x2fff6b=new TextDecoder(_0x2f5ecb(0xb9));let _0x5ce4c4='';for await(const _0x1de4d0 of _0x6bd68f)if(_0x1de4d0[_0x2f5ecb(0xcf)]){const _0x3b7703=_0x2fff6b[_0x2f5ecb(0x101)](_0x1de4d0[_0x2f5ecb(0xcf)][_0x2f5ecb(0xf4)]),_0x4994d6=JSON[_0x2f5ecb(0xd8)](_0x3b7703);_0x5ce4c4+=this[_0x2f5ecb(0xda)](_0x4994d6,_0x35f4d2),_0x41e63e(_0x5ce4c4);}return Promise[_0x2f5ecb(0xce)]();}async[_0x2ce4e8(0xd3)](_0x2934af,_0x2e91b2,_0x5a3763){const _0x5a5ebf=_0x2ce4e8,_0x12d8fa=_0x2934af[_0x5a5ebf(0x105)],_0x59d397=new TextDecoder(_0x5a5ebf(0xb9)),_0xcb21db=_0x12d8fa[_0x5a5ebf(0xbc)]();let _0x4e287d='',_0x459ee1='',_0x16a631=!0x1;for(;!_0x16a631;){const {done:_0x3b07af,value:_0x3ba2ff}=await _0xcb21db[_0x5a5ebf(0xfb)]();if(_0x16a631=_0x3b07af,_0x16a631)break;const _0x29aec9=(_0x4e287d+_0x59d397[_0x5a5ebf(0x101)](_0x3ba2ff))[_0x5a5ebf(0xea)]('\x0a')[_0x5a5ebf(0xf3)](_0x42beb1=>{const _0x2e8e72=_0x5a5ebf;try{return _0x4e287d='',JSON[_0x2e8e72(0xd8)](_0x42beb1);}catch(_0x241ced){return _0x4e287d=_0x42beb1,null;}})[_0x5a5ebf(0xf7)](_0x296b5d=>null!==_0x296b5d);_0x29aec9[_0x5a5ebf(0xe7)]&&(_0x459ee1+=_0x29aec9[_0x5a5ebf(0xf3)](_0x291788=>this[_0x5a5ebf(0xda)](_0x291788,_0x2e91b2))[_0x5a5ebf(0xfe)](''),_0x5a3763(_0x459ee1));}return Promise[_0x5a5ebf(0xce)]();}async[_0x2ce4e8(0xed)](_0x18b3a4,_0x38d3e0,_0x297240){const _0x1552dd=_0x2ce4e8;let _0x44c970;return _0x44c970=_0x18b3a4 instanceof Response?await _0x18b3a4[_0x1552dd(0xb7)]():JSON[_0x1552dd(0xd8)](Buffer[_0x1552dd(0xf9)](_0x18b3a4[_0x1552dd(0x105)])[_0x1552dd(0xd1)](_0x1552dd(0xc1))),(_0x297240(this[_0x1552dd(0xda)](_0x44c970,_0x38d3e0)),Promise[_0x1552dd(0xce)]());}[_0x2ce4e8(0xda)](_0x1f1376,_0x55a101){const _0x63b929=_0x2ce4e8;switch(this[_0x63b929(0xcb)](_0x55a101)){case _0x63b929(0xe4):return _0x1f1376[_0x63b929(0xef)];case _0x63b929(0xf0):return _0x1f1376[_0x63b929(0xd5)][0x0][_0x63b929(0xd2)][_0x63b929(0xd7)];case _0x63b929(0x104):return _0x1f1376[_0x63b929(0xfd)][0x0][_0x63b929(0xd7)];case _0x63b929(0xe8):return _0x1f1376[_0x63b929(0xe2)];}}}