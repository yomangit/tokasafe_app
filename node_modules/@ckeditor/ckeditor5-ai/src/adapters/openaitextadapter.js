/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x487078=_0x5040;function _0x38c9(){const _0x56f171=['Your\x20task\x20is\x20to\x20generate\x20HTML\x20content\x20accordingly\x20to\x20the\x20given\x20instruction.\x20Never\x20include\x20<img>\x20tag\x20in\x20your\x20response\x20even\x20if\x20asked\x20for.\x20Your\x20answer\x20must\x20be\x20a\x20well-structured\x20and\x20properly\x20formatted\x20HTML\x20code.\x20Answer\x20only\x20with\x20the\x20generated\x20HTML\x20content.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.','read','get','ai.openAI.requestHeaders','body','data:\x20','2064UfyaRN','132xuolqB','abortController','signal','delta','OpenAITextAdapter','\x0aYou\x20must\x20keep\x20the\x20text\x20formatting.\x0a\x0aContent:\x0a','decode','_readStreamableResponse','getReader','editor','1699914QqYSCo','54458DQYIvw','_prepareRequestHeaders','_requestParameters','text','replace','json','_cleanUpData','length','gpt-3.5-turbo','stringify','filter','https://api.openai.com/v1/chat/completions','10VDoDdM','_requestHeaders','reject','split','_prepareRequestParameters','_apiUrl','AI_ERROR_MODERATION','22631EBPJoc','[DONE]','POST','message','prepareMessages','context_length_exceeded','23455MmcgJA','ai.openAI.apiUrl','includes','_readStaticResponse','3NWsPJG','ai.openAI.requestParameters','Your\x20task\x20is\x20to\x20execute\x20the\x20instruction\x20using\x20the\x20provided\x20HTML\x20content.\x20Follow\x20the\x20instruction\x20closely.\x20Your\x20answer\x20must\x20be\x20a\x20properly\x20formatted\x20HTML\x20code.\x20Do\x20not\x20add\x20any\x20additional\x20remarks\x20or\x20notes.\x20Do\x20not\x20act\x20like\x20a\x20chatbot\x20or\x20a\x20real\x20person.','stream','choices','config','sendRequest','99pipxwk','define','_isBufferIncomplete','locale','join','resolve','2957508igHqxg','AI_ERROR_CONTEXT_LENGTH','pluginName','content','3238244KLfxSb','user','parse','Instruction:\x0a','system','map','5351373YHnohh','Moderation'];_0x38c9=function(){return _0x56f171;};return _0x38c9();}(function(_0x1ea60c,_0x439e7b){const _0x5543f8=_0x5040,_0x22a500=_0x1ea60c();while(!![]){try{const _0x44f84e=-parseInt(_0x5543f8(0x1be))/0x1*(-parseInt(_0x5543f8(0x1e9))/0x2)+-parseInt(_0x5543f8(0x1e8))/0x3+-parseInt(_0x5543f8(0x1cf))/0x4+-parseInt(_0x5543f8(0x1ba))/0x5*(parseInt(_0x5543f8(0x1de))/0x6)+-parseInt(_0x5543f8(0x1b4))/0x7*(parseInt(_0x5543f8(0x1dd))/0x8)+-parseInt(_0x5543f8(0x1d5))/0x9*(-parseInt(_0x5543f8(0x1ad))/0xa)+-parseInt(_0x5543f8(0x1c5))/0xb*(-parseInt(_0x5543f8(0x1cb))/0xc);if(_0x44f84e===_0x439e7b)break;else _0x22a500['push'](_0x22a500['shift']());}catch(_0x49d4b9){_0x22a500['push'](_0x22a500['shift']());}}}(_0x38c9,0x8dd24));function _0x5040(_0x29dd7d,_0x382f6a){const _0x38c910=_0x38c9();return _0x5040=function(_0x504009,_0x176332){_0x504009=_0x504009-0x1ac;let _0xaafcdf=_0x38c910[_0x504009];return _0xaafcdf;},_0x5040(_0x29dd7d,_0x382f6a);}import{default as _0x4f5849}from'./aitextadapter.js';import{AIRequestError as _0x3b4b4a}from'./aiadapter.js';import{getTranslation as _0x2a6ac9}from'../utils/common-translations.js';export default class H extends _0x4f5849{static get[_0x487078(0x1cd)](){const _0x4195ed=_0x487078;return _0x4195ed(0x1e2);}constructor(_0x50de31){const _0x20d6a9=_0x487078;super(_0x50de31),_0x50de31[_0x20d6a9(0x1c3)][_0x20d6a9(0x1c6)](_0x20d6a9(0x1bb),_0x20d6a9(0x1ac)),_0x50de31[_0x20d6a9(0x1c3)][_0x20d6a9(0x1d9)](_0x20d6a9(0x1bf))||_0x50de31[_0x20d6a9(0x1c3)][_0x20d6a9(0x1c6)](_0x20d6a9(0x1bf),{'model':_0x20d6a9(0x1f1),'max_tokens':0x7d0,'temperature':0x1,'top_p':0x1,'stream':!0x0}),this[_0x20d6a9(0x1b2)]=_0x50de31[_0x20d6a9(0x1c3)][_0x20d6a9(0x1d9)](_0x20d6a9(0x1bb)),this[_0x20d6a9(0x1ae)]=_0x50de31[_0x20d6a9(0x1c3)][_0x20d6a9(0x1d9)](_0x20d6a9(0x1da))||{},this[_0x20d6a9(0x1eb)]=_0x50de31[_0x20d6a9(0x1c3)][_0x20d6a9(0x1d9)](_0x20d6a9(0x1bf));}async[_0x487078(0x1c4)]({query:_0x2b2887,context:_0x1c0d03,onData:_0x3f1293,actionId:_0x420bb9}){const _0x32c1bd=_0x487078,_0x441b88=this[_0x32c1bd(0x1e7)][_0x32c1bd(0x1c8)],_0x54127b=await this[_0x32c1bd(0x1b8)](_0x2b2887,_0x1c0d03,_0x420bb9),_0x52ce86=await this[_0x32c1bd(0x1ea)](this[_0x32c1bd(0x1ae)],_0x420bb9),_0x163c89=await this[_0x32c1bd(0x1b1)](this[_0x32c1bd(0x1eb)],_0x420bb9),_0x5a167b={'messages':_0x54127b,..._0x163c89},_0x2f4cb4={'method':_0x32c1bd(0x1b6),'headers':_0x52ce86,'body':JSON[_0x32c1bd(0x1f2)](_0x5a167b),'signal':this[_0x32c1bd(0x1df)][_0x32c1bd(0x1e0)]},_0x4d75ee=await fetch(this[_0x32c1bd(0x1b2)],_0x2f4cb4);if(_0x4d75ee['ok'])return _0x163c89[_0x32c1bd(0x1c1)]?await this[_0x32c1bd(0x1e5)](_0x4d75ee,_0x3f1293):await this[_0x32c1bd(0x1bd)](_0x4d75ee,_0x3f1293),Promise[_0x32c1bd(0x1ca)]();{const _0x4c7f0f=await _0x4d75ee[_0x32c1bd(0x1ec)]();return _0x4c7f0f[_0x32c1bd(0x1bc)](_0x32c1bd(0x1b9))?Promise[_0x32c1bd(0x1af)](new _0x3b4b4a(_0x2a6ac9(_0x441b88,_0x32c1bd(0x1cc)))):_0x4c7f0f[_0x32c1bd(0x1bc)](_0x32c1bd(0x1d6))?Promise[_0x32c1bd(0x1af)](new _0x3b4b4a(_0x2a6ac9(_0x441b88,_0x32c1bd(0x1b3)))):Promise[_0x32c1bd(0x1af)](new Error(_0x4c7f0f));}}async[_0x487078(0x1b8)](_0x4ef194,_0x3e3050,_0x11af46){const _0x44734c=_0x487078;let _0x43a863,_0xdf5b13;return _0x3e3050?(_0x43a863=_0x44734c(0x1c0),_0xdf5b13=_0x44734c(0x1d2)+_0x4ef194+_0x44734c(0x1e3)+_0x3e3050):(_0x43a863=_0x44734c(0x1d7),_0xdf5b13=_0x4ef194),[{'role':_0x44734c(0x1d3),'content':_0x43a863},{'role':_0x44734c(0x1d0),'content':_0xdf5b13}];}async[_0x487078(0x1e5)](_0x191a53,_0x4df58d){const _0x5f0a01=_0x487078,_0x112b62=_0x191a53[_0x5f0a01(0x1db)][_0x5f0a01(0x1e6)](),_0x5b0b83=new TextDecoder();let _0x385116='',_0x3d7846='',_0xd939e4='',_0x112183=!0x1;for(;!_0x112183;){const {done:_0x57833b,value:_0x2ba7c1}=await _0x112b62[_0x5f0a01(0x1d8)](),_0x4b9bf6=_0x385116+_0x5b0b83[_0x5f0a01(0x1e4)](_0x2ba7c1);let _0x4ec747='';_0x112183=_0x57833b;try{_0x4ec747=this[_0x5f0a01(0x1ef)](_0x4b9bf6),_0x385116='';}catch(_0x282fa7){_0x385116=_0x4b9bf6;continue;}_0x3d7846+=_0x4ec747,!_0x112183&&this[_0x5f0a01(0x1c7)](_0x3d7846)||_0x3d7846&&(_0xd939e4+=_0x3d7846,_0x3d7846='',_0x4df58d(_0xd939e4));}return Promise[_0x5f0a01(0x1ca)]();}async[_0x487078(0x1bd)](_0x3f7d65,_0x4aed26){const _0x4fa45b=_0x487078;return _0x4aed26((await _0x3f7d65[_0x4fa45b(0x1ee)]())[_0x4fa45b(0x1c2)][0x0][_0x4fa45b(0x1b7)][_0x4fa45b(0x1ce)]),Promise[_0x4fa45b(0x1ca)]();}[_0x487078(0x1c7)](_0x48198e){const _0x3f42ac=_0x487078,_0x4795c7=_0x48198e[_0x3f42ac(0x1b0)]('<')[_0x3f42ac(0x1f0)]!==_0x48198e[_0x3f42ac(0x1b0)]('>')[_0x3f42ac(0x1f0)],_0x4f8a2f=_0x48198e[_0x3f42ac(0x1f0)]<0x1e;return _0x4795c7&&_0x4f8a2f;}[_0x487078(0x1ef)](_0x59ed1c){const _0x4aeffe=_0x487078;return _0x59ed1c[_0x4aeffe(0x1b0)](/\n(?![^{]*\})/g)[_0x4aeffe(0x1d4)](_0x1de48e=>_0x1de48e[_0x4aeffe(0x1ed)](_0x4aeffe(0x1dc),''))[_0x4aeffe(0x1f3)](_0x4fb831=>_0x4fb831&&_0x4fb831[_0x4aeffe(0x1f0)]>0x0&&_0x4aeffe(0x1b5)!==_0x4fb831)[_0x4aeffe(0x1d4)](_0x1abd70=>{const _0x1d8398=_0x4aeffe,{choices:_0x8f91ca}=JSON[_0x1d8398(0x1d1)](_0x1abd70);if(_0x8f91ca[0x0]&&_0x8f91ca[0x0][_0x1d8398(0x1e1)]&&_0x8f91ca[0x0][_0x1d8398(0x1e1)][_0x1d8398(0x1ce)])return _0x8f91ca[0x0][_0x1d8398(0x1e1)][_0x1d8398(0x1ce)];})[_0x4aeffe(0x1f3)](_0x1c02c9=>_0x1c02c9)[_0x4aeffe(0x1c9)]('');}}