/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x1deaa1=_0x476c;function _0x476c(_0x58019f,_0x4d100e){const _0x407fff=_0x407f();return _0x476c=function(_0x476cf7,_0x23b611){_0x476cf7=_0x476cf7-0x6b;let _0x401cba=_0x407fff[_0x476cf7];return _0x401cba;},_0x476c(_0x58019f,_0x4d100e);}(function(_0x12e878,_0x5aa4e1){const _0x2a48ae=_0x476c,_0x367d15=_0x12e878();while(!![]){try{const _0x52bde4=-parseInt(_0x2a48ae(0x89))/0x1*(-parseInt(_0x2a48ae(0xc1))/0x2)+-parseInt(_0x2a48ae(0xa0))/0x3*(parseInt(_0x2a48ae(0x86))/0x4)+parseInt(_0x2a48ae(0xbf))/0x5+parseInt(_0x2a48ae(0x99))/0x6*(-parseInt(_0x2a48ae(0x82))/0x7)+-parseInt(_0x2a48ae(0xb5))/0x8+parseInt(_0x2a48ae(0x7a))/0x9*(-parseInt(_0x2a48ae(0x72))/0xa)+parseInt(_0x2a48ae(0xb9))/0xb*(parseInt(_0x2a48ae(0xb3))/0xc);if(_0x52bde4===_0x5aa4e1)break;else _0x367d15['push'](_0x367d15['shift']());}catch(_0x36e107){_0x367d15['push'](_0x367d15['shift']());}}}(_0x407f,0x7088a));import{ObservableMixin as _0x2ceacf}from'ckeditor5/src/utils.js';import{AIRequestError as _0x1503fe}from'../adapters/aiadapter.js';import{Matcher as _0x3f6f90,UpcastWriter as _0x449017}from'ckeditor5/src/engine.js';const Z=new RegExp(/^(.*?)<[a-zA-Z][a-zA-Z0-9_\-.]*[ >]/,'is');export default class C extends/* #__PURE__ -- @preserve */
_0x2ceacf(){constructor(_0x5efdb2,_0x5d832c,_0xdc82eb){const _0x315e4d=_0x476c;super(),this[_0x315e4d(0x9e)]=_0x5efdb2,this[_0x315e4d(0xae)]=_0x5d832c,this[_0x315e4d(0x78)]=document[_0x315e4d(0xc5)](_0x315e4d(0xb7)),this[_0x315e4d(0xa1)]=new DOMParser(),this[_0x315e4d(0xca)]=new XMLSerializer(),this[_0x315e4d(0x79)]=_0xdc82eb,this[_0x315e4d(0xbe)]({'initialContext':'','currentContext':'','currentResponse':'','previousContext':void 0x0,'previousQuery':void 0x0,'previousLabel':void 0x0,'isProcessing':!0x1}),this['on'](_0x315e4d(0xad),(_0x3064ee,_0x23aaaf,_0x110010)=>{const _0x23b4d7=_0x315e4d;this[_0x23b4d7(0x79)][_0x23b4d7(0xa6)]=this[_0x23b4d7(0xc3)](_0x110010);}),this[_0x315e4d(0x92)](this[_0x315e4d(0x79)],_0x315e4d(0x9c),(_0x5e2446,_0x199d16)=>{const _0x122e8c=_0x315e4d,_0x56ce2f=this[_0x122e8c(0x73)]||this[_0x122e8c(0xa8)];this[_0x122e8c(0x9f)](_0x199d16,_0x56ce2f,_0x122e8c(0x97));}),this[_0x315e4d(0x92)](this[_0x315e4d(0x79)],_0x315e4d(0xc0),()=>{const _0x5b0682=_0x315e4d;this[_0x5b0682(0x79)][_0x5b0682(0xaa)]=this[_0x5b0682(0xa9)],this[_0x5b0682(0x9f)](this[_0x5b0682(0xbb)],this[_0x5b0682(0xa4)],this[_0x5b0682(0x83)],this[_0x5b0682(0xa9)]);}),this[_0x315e4d(0x92)](this[_0x315e4d(0x79)],_0x315e4d(0x95),()=>{const _0x1b2bab=_0x315e4d;this[_0x1b2bab(0x95)]();});}[_0x1deaa1(0x8b)](){const _0x1e6a6f=_0x1deaa1;this[_0x1e6a6f(0x70)]();}async[_0x1deaa1(0x94)]({actionId:_0x5a17fc,query:_0x58601b,htmlContent:_0x58ad80,label:_0xb4aa05,mainActionLabel:_0x4c8b1e}){const _0x332126=_0x1deaa1;this[_0x332126(0x79)][_0x332126(0xaa)]=_0xb4aa05,this[_0x332126(0x79)][_0x332126(0xb6)]=_0x4c8b1e,this[_0x332126(0xa8)]=_0x58ad80,_0x58601b&&(this[_0x332126(0x79)][_0x332126(0xa7)]?this[_0x332126(0x9f)](_0x58601b,_0x58ad80,_0x5a17fc,_0xb4aa05):this[_0x332126(0x79)][_0x332126(0x77)](_0x332126(0x85),()=>{const _0x3decd7=_0x332126;this[_0x3decd7(0x9f)](_0x58601b,_0x58ad80,_0x5a17fc,_0xb4aa05);}));}[_0x1deaa1(0x95)](){const _0x12e363=_0x1deaa1;this[_0x12e363(0x7c)]&&(this[_0x12e363(0x7c)]=!0x1,this[_0x12e363(0x79)][_0x12e363(0xb4)](),this[_0x12e363(0xae)][_0x12e363(0x87)]());}[_0x1deaa1(0x6e)](){const _0x4b7d1e=_0x1deaa1;this[_0x4b7d1e(0xa8)]='',this[_0x4b7d1e(0x73)]='',this[_0x4b7d1e(0x9b)]='',this[_0x4b7d1e(0xa4)]='',this[_0x4b7d1e(0xbb)]='',this[_0x4b7d1e(0xa9)]='',this[_0x4b7d1e(0x83)]=void 0x0,this[_0x4b7d1e(0x79)][_0x4b7d1e(0x6e)](),this[_0x4b7d1e(0x95)]();}async[_0x1deaa1(0x9f)](_0x34b27f,_0x4453bb,_0x77b53,_0x1ac585){const _0xb65f7e=_0x1deaa1;return this[_0xb65f7e(0x7c)]=!0x0,this[_0xb65f7e(0x79)][_0xb65f7e(0xb8)](),this[_0xb65f7e(0xa4)]=_0x4453bb,this[_0xb65f7e(0xbb)]=_0x34b27f,this[_0xb65f7e(0xa9)]=_0x1ac585||_0x34b27f,this[_0xb65f7e(0x83)]=_0x77b53,new Promise(_0x4e7728=>{const _0x4e5dec=_0xb65f7e;this[_0x4e5dec(0xae)][_0x4e5dec(0xcb)]({'query':_0x34b27f,'context':_0x4453bb,'onData':_0x51f5ee=>{const _0x29960a=_0x4e5dec;this[_0x29960a(0x9b)]=_0x51f5ee,this[_0x29960a(0x73)]=this[_0x29960a(0x7d)](this[_0x29960a(0x9b)]);},'actionId':_0x77b53})[_0x4e5dec(0x6f)](()=>{const _0x468e12=_0x4e5dec;!this[_0x468e12(0x73)]&&this[_0x468e12(0x9b)]&&(this[_0x468e12(0x73)]=this[_0x468e12(0x7d)](this[_0x468e12(0x9b)],!0x0));})[_0x4e5dec(0x9d)](_0x3a161c=>{const _0x2478e2=_0x4e5dec;_0x3a161c instanceof _0x1503fe?this[_0x2478e2(0x79)][_0x2478e2(0x6b)](_0x3a161c[_0x2478e2(0x81)]):this[_0x2478e2(0x79)][_0x2478e2(0x6b)](),_0x4e7728();})[_0x4e5dec(0xa3)](()=>{const _0x581d08=_0x4e5dec;this[_0x581d08(0x95)](),_0x4e7728();});});}[_0x1deaa1(0x7d)](_0x424bb3,_0x49b1f5=!0x1){const _0x4a07bf=_0x1deaa1,_0x1a3cf0=Z[_0x4a07bf(0x6d)](_0x424bb3);_0x424bb3=_0x1a3cf0?_0x424bb3[_0x4a07bf(0x8c)](_0x1a3cf0[0x1][_0x4a07bf(0xc8)]):_0x424bb3[_0x4a07bf(0xc8)]<0x64&&!_0x49b1f5?'':this[_0x4a07bf(0x8f)](_0x424bb3);const _0x26c745=this[_0x4a07bf(0xa1)][_0x4a07bf(0x93)](_0x424bb3,_0x4a07bf(0xa2));if(_0x1a3cf0){const _0x41073f=Array[_0x4a07bf(0x96)](_0x26c745[_0x4a07bf(0xc6)][_0x4a07bf(0x6c)]);_0x41073f[_0x4a07bf(0x8e)]();for(const _0x2c8b8c of _0x41073f){if(_0x2c8b8c[_0x4a07bf(0x8a)]==Node[_0x4a07bf(0x7b)])break;_0x2c8b8c[_0x4a07bf(0xab)]();}}const _0x1b6315=this[_0x4a07bf(0x9e)][_0x4a07bf(0xb2)][_0x4a07bf(0x74)][_0x4a07bf(0x75)](this[_0x4a07bf(0xca)][_0x4a07bf(0x98)](_0x26c745[_0x4a07bf(0xc6)]));return this[_0x4a07bf(0xb1)]()||this[_0x4a07bf(0xac)](_0x1b6315),this[_0x4a07bf(0x9e)][_0x4a07bf(0xb2)][_0x4a07bf(0xbd)](this[_0x4a07bf(0x9e)][_0x4a07bf(0xb2)][_0x4a07bf(0x76)](_0x1b6315));}[_0x1deaa1(0xac)](_0x437b60){const _0x403a52=_0x1deaa1,_0x3f3b77=new _0x449017(this[_0x403a52(0x9e)][_0x403a52(0xb0)][_0x403a52(0x79)][_0x403a52(0xa5)]),_0x5defba=new _0x3f6f90({'name':/^h[1-5]$/}),_0x1b459c=[];let _0x3940f5=!0x1;for(const _0x3a4498 of _0x437b60)_0x3a4498['is'](_0x403a52(0x80))&&_0x5defba[_0x403a52(0x90)](_0x3a4498)&&(_0x1b459c[_0x403a52(0x84)](_0x3a4498),'h1'==_0x3a4498[_0x403a52(0xc9)]&&(_0x3940f5=!0x0));if(_0x3940f5){for(const _0x452cd1 of _0x1b459c)_0x3f3b77[_0x403a52(0x9a)]('h'+(parseInt(_0x452cd1[_0x403a52(0xc9)][0x1])+0x1),_0x452cd1);}}[_0x1deaa1(0xb1)](){const _0x415e4d=_0x1deaa1,{data:_0x517f44,editing:_0x361377}=this[_0x415e4d(0x9e)],_0x16f387=_0x517f44[_0x415e4d(0xc4)][_0x415e4d(0x75)](_0x415e4d(0x71)),_0x53531a=_0x517f44[_0x415e4d(0x75)](_0x517f44[_0x415e4d(0x76)](_0x16f387));return!!_0x361377[_0x415e4d(0x79)][_0x415e4d(0xc7)][_0x415e4d(0xbc)](_0x53531a)[_0x415e4d(0x8d)]('h1');}[_0x1deaa1(0xc3)](_0xbac438){const _0x4dc95d=_0x1deaa1;return this[_0x4dc95d(0x9e)][_0x4dc95d(0xb0)][_0x4dc95d(0x79)][_0x4dc95d(0xc7)][_0x4dc95d(0x7e)](this[_0x4dc95d(0x78)],_0xbac438),this[_0x4dc95d(0x78)][_0x4dc95d(0x7f)];}[_0x1deaa1(0x8f)](_0x2bc3c2){const _0x1b1cdd=_0x1deaa1,_0x1d1ee4=_0x2bc3c2[_0x1b1cdd(0x88)]();return _0x1d1ee4[_0x1b1cdd(0xba)](_0x1b1cdd(0xaf))?_0x1d1ee4[_0x1b1cdd(0xc2)](_0x1b1cdd(0x91))?_0x1d1ee4[_0x1b1cdd(0x8c)](0x7,_0x1d1ee4[_0x1b1cdd(0xc8)]-0x3):_0x1d1ee4[_0x1b1cdd(0x8c)](0x7):_0x2bc3c2;}}function _0x407f(){const _0x5143bc=['stopProcessing','from','custom','serializeToString','6aSNpvx','rename','currentResponse','submitPrompt','catch','editor','_handleQuery','2209881AjRiBH','_domParser','text/html','finally','previousContext','document','value','isRendered','initialContext','previousLabel','prompt','remove','_normalizeResponseHeadings','set:currentContext','textAdapter','```html','editing','_isH1TagSupportEnabled','data','136536qeIJmi','finishProcessing','4318280ofkZii','mainAction','div','startProcessing','429wwEzDC','startsWith','previousQuery','viewToDom','stringify','set','4182760dCsLaa','tryAgainEvent','304iRJqGr','endsWith','_sanitizeHTML','htmlProcessor','createElement','body','domConverter','length','name','_xmlSerializer','makeRequest','handleError','childNodes','exec','reset','then','stopListening','<h1></h1>','1162040PaxemC','currentContext','processor','toView','toModel','once','_sanitizationContainer','view','18RtywXc','ELEMENT_NODE','isProcessing','_parseAndNormalizeContent','setContentOf','innerHTML','element','message','1451352vBPfvy','previousActionId','push','render','4HSxBSP','abort','trim','5900uDBUiR','nodeType','destroy','substring','querySelector','reverse','_stripMarkdownSyntax','match','```','listenTo','parseFromString','updateView'];_0x407f=function(){return _0x5143bc;};return _0x407f();}