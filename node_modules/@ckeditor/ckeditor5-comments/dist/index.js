/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{Editor as _0xa87eb7,icons as _0x2b050d,ContextPlugin as _0x17f52f,PendingActions as ht,Command as _0x224b6f,Plugin as _0x2ad286,Context as _0x1dbc00}from'@ckeditor/ckeditor5-core/dist/index.js';import{ObservableMixin as _0x459611,uid as _0x29ee90,KeystrokeHandler as jt,FocusTracker as _0x5abdce,diff as _0x1bb6be,Collection as _0x3040b9,Rect as _0x16256,CKEditorError as _0x2f1633,first as _0x99b28,priorities as Wt,scrollViewportToShowTarget as rt,getEnvKeystrokeText as nt,toUnit as Ht,DomEmitterMixin as _0xcdccb0,keyCodes as _0x4832b0}from'@ckeditor/ckeditor5-utils/dist/index.js';import{UserView as _0x1dd170,AriaDescriptionView as ts,setupThreadKeyboardNavigation as _0x5c179e,ConfirmMixin as ti,LateFocusButtonView as _0x3ac435,trimHtml as _0x1c656b,LateFocusDropdownButtonView as _0x50be63,Users as it,getDateTimeFormatter as lt,hashObject as pt,getAllMarkersDomElementsSorted as et,surroundingMarkersDetector as ot,FOCUS_ANNOTATION_KEYSTROKE as _0x3a6c48}from'ckeditor5-collaboration/dist/index.js';import{throttle as Dt,isEqual as wt,cloneDeep as It,set as At,unset as yt,debounce as _0x2ab14a}from'lodash-es';import{EditorUIView as Yt,InlineEditableUIView as $t,EditorUI as Vt,View as kt,FocusCycler as Ft,ButtonView as _0xdf0cec,ViewCollection as _0x3d3c53,createDropdown as _0x179f8f,ListView as _0x54dc4a,focusChildOnDropdownOpen as _0x40aa58,ListItemView as _0x103fb5,MenuBarMenuListItemButtonView as _0x2444af,BodyCollection as _0x14a569,BalloonPanelView as _0x39be82,ContextualBalloon as _0x2ea456,Dialog as _0x123aad,DialogViewPosition as _0x5aaf2f}from'@ckeditor/ckeditor5-ui/dist/index.js';import{disablePlaceholder as zt,enablePlaceholder as St,MouseObserver as _0x258d07}from'@ckeditor/ckeditor5-engine/dist/index.js';import{Clipboard as Bt,ClipboardMarkersUtils as Mt,ClipboardPipeline as Pt}from'@ckeditor/ckeditor5-clipboard/dist/index.js';import{Enter as Et,ShiftEnter as Gt}from'@ckeditor/ckeditor5-enter/dist/index.js';import{SelectAll as Jt}from'@ckeditor/ckeditor5-select-all/dist/index.js';import{Typing as Kt}from'@ckeditor/ckeditor5-typing/dist/index.js';import{Undo as Nt}from'@ckeditor/ckeditor5-undo/dist/index.js';import{Paragraph as Qt}from'@ckeditor/ckeditor5-paragraph/dist/index.js';import{FOCUS_ANNOTATION_KEYSTROKE as _0x3329b5}from'@ckeditor/ckeditor5-collaboration-core/dist/index.js';import{toWidget as _0xa5cd48}from'@ckeditor/ckeditor5-widget/dist/index.js';class Ct extends/* #__PURE__ -- @preserve */
_0x459611(){['model'];['view'];constructor(_0xc2798d,_0x4d8644){super(),this['model']=_0xc2798d,this['model']['_isAttached']=!0x0,this['view']=_0x4d8644,this['listenTo'](_0x4d8644,'submitCommentThread',()=>this['submit']()),this['listenTo'](_0x4d8644,'removeCommentThread',()=>this['remove']()),this['listenTo'](_0x4d8644,'resolveCommentThread',()=>this['resolve']()),this['listenTo'](_0x4d8644,'reopenCommentThread',()=>this['reopen']()),this['listenTo'](_0x4d8644,'addComment',(_0x43c316,_0x2ad5a9)=>this['addComment'](_0x2ad5a9)),this['listenTo'](_0x4d8644,'updateComment',(_0x307429,_0x204cbc,_0x43df33)=>this['updateComment'](_0x204cbc,_0x43df33)),this['listenTo'](_0x4d8644,'removeComment',(_0x23a586,_0x2369dd)=>this['removeComment'](_0x2369dd));}['submit'](){this['model']['submit']();}['remove'](){this['model']['remove']();}['resolve'](){this['model']['isResolved']||this['model']['resolve']();}['reopen'](){this['model']['isResolved']&&this['model']['reopen']();}['addComment'](_0x3151d3){this['model']['addComment']({'content':_0x3151d3,'authorId':this['view']['_localUser']['id']});}['updateComment'](_0x263608,_0x1686a8){this['model']['getComment'](_0x263608)['update']({'content':_0x1686a8});}['removeComment'](_0x596397){this['model']['getComment'](_0x596397)['remove']();}['destroy'](){this['stopListening'](),this['model']['_isAttached']=!0x1;}}function S(_0x290b9a,_0x333a7f,_0x49225b){const t=_0x290b9a['t'];switch(_0x333a7f){case'PENDING_ACTION_COMMENT_THREAD':return t({'string':'Unsaved\x20change\x20in\x20comment\x20thread.','id':'PENDING_ACTION_COMMENT_THREAD'});case'Comment':return t('Comment');case'Reply...':return t('Reply...');case'Reply\x20to\x20reopen\x20discussion...':return t('Reply\x20to\x20reopen\x20discussion...');case'Write\x20a\x20comment...':return t('Write\x20a\x20comment...');case'Comment\x20was\x20made\x20on\x20an\x20element':return t('Comment\x20was\x20made\x20on\x20an\x20element');case'Comment\x20editor':return t('Comment\x20editor');case'Delete\x20comment\x20thread?':return t('Delete\x20comment\x20thread?');case'Delete\x20comment?':return t('Delete\x20comment?');case'Marked\x20as\x20resolved':return t('Marked\x20as\x20resolved');case'Show\x20more\x20items':return t('Show\x20more\x20items');case'Cancel':return t('Cancel');case'Edit':return t('Edit');case'Resolve':return t('Resolve');case'Reopen':return t('Reopen');case'Remove':return t('Remove');case'Reply':return t('Reply');case'Save':return t('Save');case'Annotations\x20sidebar':return t('Annotations\x20sidebar');case'Annotations\x20list':return t('Annotations\x20list');case'Thread\x20comments':return t('Thread\x20comments');case'THREAD_CONTEXT_LABEL':return t({'string':'Thread\x20context:\x20%0','id':'THREAD_CONTEXT_LABEL'},_0x49225b);case'COMMENT_THREAD_LABEL':return t({'string':'Comment\x20thread\x20by\x20%1.\x20%1\x20reply.','plural':'Comment\x20thread\x20by\x20%1.\x20%0\x20replies.','id':'COMMENT_THREAD_LABEL'},_0x49225b);case'COMMENT_THREAD_DESCRIPTION':return t({'string':'Press\x20Enter\x20for\x20more\x20options.\x20Press\x20Escape\x20to\x20exit.','id':'COMMENT_THREAD_DESCRIPTION'});case'COMMENT_ARIA_LABEL':return t({'string':'Comment\x20by\x20%0.\x20Created\x20on\x20%1.\x20%2.\x20%3','id':'COMMENT_ARIA_LABEL'},_0x49225b);case'LEAVE_COMMENT_ANNOUNCEMENT':return t({'string':'Leaving\x20a\x20content\x20with\x20comments.','id':'LEAVE_COMMENT_ANNOUNCEMENT'});case'ENTER_COMMENT_ANNOUNCEMENT':return t({'string':'Entering\x20a\x20content\x20with\x20comments.\x20Press\x20%0\x20to\x20go\x20to\x20the\x20discussion.','id':'ENTER_COMMENT_ANNOUNCEMENT'},_0x49225b);case'NUMBER_OF_COMMENTS':return t({'string':'%0\x20Comment','plural':'%0\x20Comments','id':'NUMBER_OF_COMMENTS'},_0x49225b);case'TOO_LONG_COMMENT_ALERT':return t({'string':'Comment\x20content\x20is\x20too\x20long.\x20Your\x20comment\x20has\x20%0\x20characters\x20but\x20the\x20limit\x20is\x20%1\x20characters.','id':'TOO_LONG_COMMENT_ALERT'},_0x49225b);case'EXTERNAL_COMMENT':return t({'string':'This\x20comment\x20comes\x20from\x20an\x20external\x20source.','id':'EXTERNAL_COMMENT'});case'EXTERNAL_IMPORT_WORD_COMMENT':return t({'string':'This\x20comment\x20comes\x20from\x20an\x20imported\x20Word\x20file.','id':'EXTERNAL_IMPORT_WORD_COMMENT'});case'EXTERNAL_AVATAR':return t({'string':'Displayed\x20author\x20name\x20comes\x20from\x20external\x20source\x20(added\x20by\x20%0)','id':'EXTERNAL_AVATAR'},_0x49225b);case'EXTERNAL_IMPORT_WORD_AVATAR':return t({'string':'Displayed\x20author\x20name\x20comes\x20from\x20a\x20Word\x20document\x20imported\x20by\x20%0','id':'EXTERNAL_IMPORT_WORD_AVATAR'},_0x49225b);case'COMMENTS_ARCHIVE':return t({'string':'Comments\x20archive','id':'COMMENTS_ARCHIVE'});case'EMPTY_COMMENTS_ARCHIVE':return t({'string':'There\x20are\x20no\x20archived\x20comment\x20threads.','id':'EMPTY_COMMENTS_ARCHIVE'});case'COMMENTS_ARCHIVE_LIST_LABEL':return t({'string':'List\x20of\x20comments','id':'COMMENTS_ARCHIVE_LIST_LABEL'});case'ACCESSIBILITY_HELP_ANNOTATIONS_GROUP':return t({'string':'Keystrokes\x20for\x20interacting\x20with\x20annotation\x20threads\x20(e.g.\x20comments,\x20track\x20changes\x20suggestions)','id':'ACCESSIBILITY_HELP_ANNOTATIONS_GROUP'});case'ACCESSIBILITY_HELP_ANNOTATIONS_MOVE_TO':return t({'string':'Move\x20focus\x20to\x20the\x20thread\x20when\x20the\x20selection\x20is\x20anchored\x20in\x20its\x20marker','id':'ACCESSIBILITY_HELP_ANNOTATIONS_MOVE_TO'});case'ACCESSIBILITY_HELP_ANNOTATIONS_EXIT':return t({'string':'Exit\x20the\x20annotation\x20and\x20move\x20focus\x20back\x20to\x20the\x20edited\x20content','id':'ACCESSIBILITY_HELP_ANNOTATIONS_EXIT'});case'ACCESSIBILITY_HELP_ANNOTATIONS_ENTER':return t({'string':'Browse\x20the\x20focused\x20annotation\x20thread\x20or\x20thread\x20comment','id':'ACCESSIBILITY_HELP_ANNOTATIONS_ENTER'});case'ACCESSIBILITY_HELP_ANNOTATIONS_BROWSE_GROUPS':return t({'string':'Move\x20across\x20internals\x20of\x20the\x20annotation\x20thread','id':'ACCESSIBILITY_HELP_ANNOTATIONS_BROWSE_GROUPS'});case'ACCESSIBILITY_HELP_ANNOTATIONS_SUBMIT_COMMENT':return t({'string':'Submit\x20the\x20reply\x20while\x20writing\x20a\x20comment','id':'ACCESSIBILITY_HELP_ANNOTATIONS_SUBMIT_COMMENT'});case'ACCESSIBILITY_HELP_ANNOTATIONS_NAVIGATE_THREADS':return t({'string':'Move\x20to\x20the\x20previous\x20or\x20next\x20thread\x20in\x20the\x20annotations\x20sidebar\x20or\x20comments\x20archive','id':'ACCESSIBILITY_HELP_ANNOTATIONS_NAVIGATE_THREADS'});default:return'';}}class Xt extends Yt{['main'];['editable'];constructor(_0x5bfff5,_0x3215f2){super(_0x5bfff5);const _0x438c4a=_0x29ee90();this['main']=this['createCollection'](),this['editable']=new $t(_0x5bfff5,_0x3215f2,void 0x0,{'label':()=>S(_0x5bfff5,'Comment\x20editor')}),this['setTemplate']({'tag':'div','attributes':{'class':['ck-reset','ck-editor','ck-rounded-corners','ck-comment__input'],'dir':_0x5bfff5['uiLanguageDirection'],'lang':_0x5bfff5['uiLanguage'],'aria-labelledby':'cke-editor__aria-label_'+_0x438c4a},'children':[{'tag':'div','attributes':{'class':'ck-editor__main','role':'presentation'},'children':this['main']}]});}['render'](){super['render'](),this['main']['add'](this['editable']);}['focus'](){this['editable']['element']['focus']();}}class Ot extends Vt{['view'];constructor(_0x417455){super(_0x417455),this['view']=new Xt(_0x417455['locale'],_0x417455['editing']['view']);}get['element'](){return this['view']['element'];}['init'](){const _0xcf3eb3=this['editor']['editing']['view'],_0x3cab93=this['view']['editable'],_0x212138=_0xcf3eb3['document']['getRoot']();_0x3cab93['name']=_0x212138['rootName'],this['view']['render']();const _0x45bf48=_0x3cab93['element'];this['setEditableElement'](_0x3cab93['name'],_0x45bf48),this['view']['editable']['bind']('isFocused')['to'](this['focusTracker']),_0xcf3eb3['attachDomRoot'](_0x45bf48),this['fire']('ready');}['destroy'](){super['destroy'](),this['view']['destroy']();}}const Rt=[Bt,Et,Gt,Jt,Kt,Nt,Qt];class Ut extends/* #__PURE__ -- @preserve */
_0x459611(_0xa87eb7){static ['defaultPlugins']=/* #__PURE__ -- @preserve */
((()=>Rt)());constructor(_0x223c70={}){function _0x20b728(_0x2ee269){return _0x2ee269['map'](_0x2736da=>String['fromCharCode'](_0x2736da))['join']('');}(_0x223c70=Object['assign']({},_0x223c70))['plugins']||(_0x223c70['plugins']=Ut['defaultPlugins']),super(_0x223c70),this['ui']=new Ot(this),this['set']('placeholder',''),this['model']['document']['on']('change',()=>this['_updatePlaceholder'](),{'priority':'low'}),this['on']('change:placeholder',()=>this['_updatePlaceholder']()),this['model']['document']['createRoot'](),this[_0x20b728([0x65,0x64,0x69,0x74,0x69,0x6e,0x67])][_0x20b728([0x76,0x69,0x65,0x77])][_0x20b728([0x5f,0x6f,0x76,0x65,0x72,0x6c,0x61,0x79,0x4d,0x6f,0x64,0x65,0x48,0x69,0x6e,0x74])]=_0x20b728([0x61,0x75,0x74,0x6f]),this[_0x20b728([0x5f,0x73,0x65,0x6e,0x64,0x55,0x73,0x61,0x67,0x65,0x52,0x65,0x71,0x75,0x65,0x73,0x74])]=()=>window[_0x20b728([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65])][_0x20b728([0x72,0x65,0x73,0x6f,0x6c,0x76,0x65])]({[_0x20b728([0x73,0x74,0x61,0x74,0x75,0x73])]:_0x20b728([0x6f,0x6b])});}['create'](){const _0x17e872=this['config']['get']('initialData')||'';return this['initPlugins']()['then'](()=>this['ui']['init']())['then'](()=>this['data']['init'](_0x17e872))['then'](()=>this['fire']('ready'));}['destroy'](){return super['destroy']()['then'](()=>this['ui']['destroy']());}['focus'](){this['model']['change'](_0x30aa0c=>{const _0x339b54=this['model']['document']['getRoot'](),_0x560096=_0x339b54&&_0x339b54['getChild'](_0x339b54['childCount']-0x1);_0x30aa0c['setSelection'](_0x560096,'end'),this['editing']['view']['focus']();});}['_updatePlaceholder'](){const _0x252ce8=this['editing']['view'],_0x55ba3f=_0x252ce8['document']['getRoot'](),_0x3282e8=_0x55ba3f['getChild'](0x0);_0x55ba3f['childCount']>0x1||!_0x3282e8||'p'!=_0x3282e8['name']?this['placeholderElement']&&this['placeholderElement']['placeholder']&&(zt(_0x252ce8,this['placeholderElement']),this['placeholderElement']=void 0x0):(this['placeholder']&&(_0x3282e8['placeholder']=this['placeholder']),St({'view':_0x252ce8,'element':_0x3282e8,'keepOnFocus':!0x0}),this['placeholderElement']=_0x3282e8);}}class os extends kt{['keystrokes'];['focusTracker'];['focusables'];['focusCycler'];['submitButtonView'];['cancelButtonView'];['_editorConfig'];constructor(_0x3ae49c,_0x200dcf={}){super(_0x3ae49c),this['editor']=null,this['_editorConfig']=_0x200dcf,this['set']('value',_0x200dcf['initialData']||''),this['set']('disabledSubmit',!0x1),this['set']('showButtons',!0x0),this['set']('placeholder',S(_0x3ae49c,'Reply...')),this['set']('submitLabel',S(_0x3ae49c,'Reply')),this['submitButtonView']=this['_createSubmitButton'](),this['cancelButtonView']=this['_createCancelButton'](),this['focusables']=this['createCollection']([this['submitButtonView'],this['cancelButtonView']]),this['keystrokes']=new jt(),this['focusTracker']=new _0x5abdce(),this['focusCycler']=new Ft({'focusables':this['focusables'],'focusTracker':this['focusTracker'],'keystrokeHandler':this['keystrokes'],'actions':{'focusPrevious':'shift+tab','focusNext':'tab'}}),this['setTemplate']({'tag':'div','attributes':{'class':['ck-comment__input-wrapper']},'children':[{'tag':'div','attributes':{'class':['ck-comment__input-actions',this['bindTemplate']['if']('showButtons','ck-comment__input-actions--active')]},'children':[this['submitButtonView'],this['cancelButtonView']]}]}),this['keystrokes']['set']('Esc',(_0x139cc8,_0x3ffd22)=>{this['cancelButtonView']['fire']('execute'),_0x3ffd22();}),this['keystrokes']['set']('Ctrl+Enter',(_0x4b1f8f,_0x41d12e)=>{this['submitButtonView']['isEnabled']&&(this['submitButtonView']['fire']('execute'),_0x41d12e());}),this['on']('submit',(_0x14ddfd,_0x52e589)=>{_0x52e589['length']>0xfde8?(alert(S(_0x3ae49c,'TOO_LONG_COMMENT_ALERT',[_0x52e589['length'],0xfde8])),_0x14ddfd['stop']()):this['editor']['setData']('');},{'priority':'high'});}['render'](){super['render'](),this['_setupKeyboardNavigation']();}['createEditor'](){return this['editor']||(this['editor']=new Ut(this['_editorConfig']),this['_editorCreationPromise']=this['editor']['create']()['then'](()=>{if(this['_isDestroyed'])return;const _0x2e6c83=this['editor'];this['element']['insertBefore'](_0x2e6c83['ui']['element'],this['element']['firstChild']),_0x2e6c83['model']['document']['on']('change',()=>this['value']=_0x2e6c83['getData']()),_0x2e6c83['bind']('placeholder')['to'](this),this['focusables']['add'](_0x2e6c83['ui']['view'],0x0),this['fire']('editorReady',this['editor']);})),this['_editorCreationPromise'];}['focus'](_0x2b9f90){-0x1===_0x2b9f90?(this['focusCycler']['focusFirst'](),this['focusCycler']['focusLast']()):this['focusCycler']['focusFirst']();}async['destroy'](){this['_isDestroyed']||(this['_isDestroyed']=!0x0,this['editor']&&(await this['_editorCreationPromise'],await this['editor']['destroy'](),this['fire']('editorDestroyed',this['editor'])),await super['destroy']());}['_createSubmitButton'](){const {locale:_0x3fb398}=this,_0x3ff75a=new _0xdf0cec(_0x3fb398);return _0x3ff75a['extendTemplate']({'attributes':{'class':['ck-comment__input-actions--submit']}}),_0x3ff75a['withText']=!0x0,_0x3ff75a['bind']('label')['to'](this,'submitLabel'),_0x3ff75a['on']('execute',()=>{this['fire']('submit',this['value']);}),_0x3ff75a['bind']('isEnabled')['to'](this,'value',this,'disabledSubmit',(_0x147216,_0x3764de)=>!_0x3764de&&!!_0x147216['trim']()),_0x3ff75a;}['_createCancelButton'](){const {locale:_0xbf53ee}=this,_0xe0fabb=new _0xdf0cec(_0xbf53ee);return _0xe0fabb['extendTemplate']({'attributes':{'class':['ck-comment__input-actions--cancel']}}),_0xe0fabb['label']=S(_0xbf53ee,'Cancel'),_0xe0fabb['withText']=!0x0,_0xe0fabb['on']('execute',()=>{this['editor']['setData'](''),this['fire']('cancel');}),_0xe0fabb;}['_setupKeyboardNavigation'](){this['keystrokes']['listenTo'](this['element']),this['focusables']['forEach'](_0x1704b2=>{this['focusTracker']['add'](_0x1704b2['element']);}),this['focusables']['on']('change',(_0x1676e7,_0x37035a)=>{for(const _0x118441 of Array['from'](_0x37035a['added'])['reverse']())this['focusTracker']['add'](_0x118441['element']);});}}class ie extends kt{constructor(_0x3318ea,_0x2bc6d1,_0x4bf511){super(_0x3318ea),this['commentInputView']=new os(_0x3318ea,_0x4bf511),this['focusCycler']=this['commentInputView']['focusCycler'],this['commentInputView']['bind']('showButtons')['to'](this['commentInputView']['focusTracker'],'isFocused',this['commentInputView'],'value',(_0x33aa10,_0x4246ea)=>_0x33aa10||!!_0x4246ea),this['set']('showInput',!0x1),this['on']('change:showInput',()=>{this['showInput']&&!this['commentInputView']['editor']&&this['commentInputView']['createEditor']();}),this['commentInputView']['delegate']('editorReady')['to'](this),this['commentInputView']['delegate']('editorDestroyed')['to'](this),this['userView']=new _0x1dd170(_0x3318ea,_0x2bc6d1),this['userView']['extendTemplate']({'attributes':{'class':'ck-thread__user','aria-hidden':!0x0}}),this['commentInputView']['extendTemplate']({'attributes':{'class':'ck-thread__input'}}),this['setTemplate']({'tag':'div','attributes':{'class':['ck-comment__input-container',this['bindTemplate']['if']('showInput','ck-comment__input-container--active')]},'children':[this['userView'],this['commentInputView']]});}['render'](){super['render'](),this['_focusOnNonInteractiveMouseDown']();}['destroy'](){return this['commentInputView']['destroy']()['then'](()=>super['destroy']());}['focus'](_0x564c7e){this['commentInputView']['focus'](_0x564c7e);}['_focusOnNonInteractiveMouseDown'](){this['listenTo'](this['element'],'mousedown',(_0x1d8244,_0x5e3e65)=>{const {submitButtonView:_0x3a00bd,cancelButtonView:_0x37fc24,editor:_0x43c062}=this['commentInputView'];[_0x3a00bd['element'],_0x37fc24['element'],_0x43c062?_0x43c062['editing']['view']['getDomRoot']():null]['filter'](_0x50ea3f=>_0x50ea3f)['some'](_0x45fe25=>_0x45fe25['contains'](_0x5e3e65['target']))||(this['focus'](),_0x5e3e65['preventDefault']());});}}class cs extends kt{constructor(_0x501503){super(_0x501503);const _0x7d564d=this['bindTemplate'];this['set']('count',void 0x0),this['setTemplate']({'tag':'li','attributes':{'class':'ck-thread__comment-count'},'children':[{'text':_0x7d564d['to']('count',_0x13d7df=>S(_0x501503,'NUMBER_OF_COMMENTS',_0x13d7df))}]});}}class te extends kt{['commentViews'];['resolvedCommentView'];['focusTracker'];['keystrokes'];['focusCycler'];['_model'];['_config'];['_collapsedCommentsView'];constructor(_0x264589,_0x5d8db2,_0x45ab53){super(_0x264589);const _0x238d55=this['bindTemplate'];this['set']('hasDirtyComment',!0x1),this['set']('length',_0x5d8db2['comments']['length']),this['set']('isActive',!0x1),this['_model']=_0x5d8db2,this['_config']=_0x45ab53,this['commentViews']=this['createCollection'](),this['visibleViews']=this['createCollection'](),this['resolvedCommentView']=null,this['focusTracker']=new _0x5abdce(),this['keystrokes']=new jt(),this['focusCycler']=new Ft({'focusables':this['commentViews'],'focusTracker':this['focusTracker'],'keystrokeHandler':this['keystrokes'],'keystrokeHandlerOptions':{'filter':_0x57169d=>this['commentViews']['map'](_0x430d04=>_0x430d04['element'])['includes'](_0x57169d['target'])},'actions':{'focusPrevious':'arrowup','focusNext':'arrowdown'}}),this['_collapsedCommentsView']=new cs(_0x264589),this['_collapsedCommentsView']['bind']('count')['to'](this,'length',_0x4998f5=>_0x4998f5-this['_config']['maxCommentsWhenCollapsed']);for(const _0x4d8f04 of _0x5d8db2['comments'])this['_handleNewCommentModel'](_0x4d8f04);this['_handleInfoComment'](),this['listenTo'](_0x5d8db2['comments'],'add',(_0x25bd76,_0xaafc22)=>{const _0x21981e=this['_calculatePosition'](_0xaafc22);this['length']++,this['_handleNewCommentModel'](_0xaafc22,_0x21981e),this['refreshVisibleViews']();}),this['listenTo'](_0x5d8db2['comments'],'remove',(_0x5701b4,_0x583c53)=>{this['length']--,this['_handleRemoveCommentModel'](_0x583c53),this['refreshVisibleViews']();}),this['listenTo'](_0x5d8db2,'commentUpdated',()=>this['refreshVisibleViews']()),this['listenTo'](_0x5d8db2,'change:isResolved',()=>this['_handleInfoComment']()),this['on']('change:isActive',()=>this['refreshVisibleViews']()),this['on']('change:hasDirtyComment',()=>this['refreshVisibleViews']()),this['setTemplate']({'tag':'ul','attributes':{'class':['ck-thread__comments',_0x238d55['if']('length','ck-hidden',_0x2e99fc=>!_0x2e99fc)],'aria-label':S(_0x264589,'Thread\x20comments')},'children':this['visibleViews']});}get['_shouldCollapse'](){return this['_model']['weight']>this['_config']['maxThreadTotalWeight']&&!this['isActive']&&!this['hasDirtyComment'];}['render'](){super['render'](),this['refreshVisibleViews'](),this['_setupKeyboardNavigation']();}['focus'](_0xcee376){-0x1===_0xcee376?this['focusCycler']['focusLast']():this['focusCycler']['focusFirst']();}['destroy'](){this['_collapsedCommentsView']['destroy']();for(const _0xeca304 of this['commentViews'])_0xeca304['destroy']();super['destroy']();}['refreshVisibleViews'](){this['_shouldCollapse']?this['_rearrangeCollapse']():this['_rearrangeExpand']();}['_handleNewCommentModel'](_0x3a05b0,_0x4dd362){const _0x23b801=new this['_config']['CommentView'](this['locale'],_0x3a05b0,{'maxCommentCharsWhenCollapsed':this['_config']['maxCommentCharsWhenCollapsed'],'formatDateTime':this['_config']['formatDateTime'],'editorConfig':this['_config']['editorConfig']});_0x23b801['viewUid']=_0x3a05b0['id'],_0x23b801['delegate']('removeComment')['to'](this),_0x23b801['delegate']('updateComment')['to'](this),_0x23b801['delegate']('resolveCommentThread')['to'](this),_0x23b801['delegate']('editorReady')['to'](this),_0x23b801['delegate']('editorDestroyed')['to'](this),this['listenTo'](_0x23b801,'change:isEditMode',()=>this['_updateHasDirtyComment']()),this['commentViews']['add'](_0x23b801,_0x4dd362);}['_calculatePosition'](_0x479d0c){const _0x4b9e5e=this['_model']['_findOptimalIndex'](_0x479d0c);return this['resolvedCommentView']?this['resolvedCommentView']['authoredAt']>_0x479d0c['authoredAt']?_0x4b9e5e-0x1:_0x4b9e5e:_0x4b9e5e-0x1;}['_handleInfoComment'](){if(this['_model']['resolvedBy']&&this['_model']['resolvedAt']){const _0x2b8a64={'id':'resolved','author':this['_model']['resolvedBy'],'authoredAt':this['_model']['resolvedAt'],'content':S(this['locale'],'Marked\x20as\x20resolved'),'attributes':{}};this['resolvedCommentView']=new this['_config']['CommentView'](this['locale'],_0x2b8a64,{'maxCommentCharsWhenCollapsed':this['_config']['maxCommentCharsWhenCollapsed'],'formatDateTime':this['_config']['formatDateTime'],'editorConfig':this['_config']['editorConfig'],'isSystemComment':!0x0}),this['commentViews']['add'](this['resolvedCommentView'],this['_model']['_findOptimalIndex'](_0x2b8a64));}else this['resolvedCommentView']&&(this['commentViews']['remove'](this['resolvedCommentView']),this['resolvedCommentView']['destroy'](),this['resolvedCommentView']=null);this['refreshVisibleViews']();}['_handleRemoveCommentModel'](_0x28b171){const _0x7c1a81=this['commentViews']['remove'](_0x28b171['id']);this['stopListening'](_0x7c1a81),_0x7c1a81['isEditMode']&&this['_updateHasDirtyComment'](),_0x7c1a81['destroy']();}['_updateHasDirtyComment'](){this['hasDirtyComment']=Array['from'](this['commentViews'])['some'](_0x304fcc=>_0x304fcc['isEditMode']);}['_rearrangeCollapse'](){const _0x24ae76=function(_0x19e99c){const _0x24be7a=new _0x3040b9();for(const _0x1d0a91 of _0x19e99c)_0x24be7a['add'](_0x1d0a91);return _0x24be7a;}(this['commentViews']),_0x249195=this['_collapsedCommentsView']['count'];for(let _0x51b873=0x1;_0x51b873<=_0x249195;_0x51b873++)_0x24ae76['remove'](0x1);for(const _0x15c36f of _0x24ae76)_0x15c36f['collapse']();_0x249195>0x0&&_0x24ae76['add'](this['_collapsedCommentsView'],0x1),as(_0x1bb6be(Array['from'](this['visibleViews']),Array['from'](_0x24ae76)),this['visibleViews'],_0x24ae76);}['_rearrangeExpand'](){as(_0x1bb6be(Array['from'](this['visibleViews']),Array['from'](this['commentViews'])),this['visibleViews'],this['commentViews']);for(const _0x342838 of this['visibleViews'])_0x342838['expand']();}['_setupKeyboardNavigation'](){this['commentViews']['forEach'](_0x164d72=>{this['focusTracker']['add'](_0x164d72['element']),this['keystrokes']['listenTo'](_0x164d72['element']);}),this['commentViews']['on']('change',(_0x22106d,_0x3fce14)=>{for(const _0x192188 of _0x3fce14['removed'])this['focusTracker']['remove'](_0x192188['element']),this['keystrokes']['stopListening'](_0x192188['element']);for(const _0x5f021f of Array['from'](_0x3fce14['added'])['reverse']())this['focusTracker']['add'](_0x5f021f['element']),this['keystrokes']['listenTo'](_0x5f021f['element']);});}}function as(_0xaf67a8,_0x26b644,_0x590b95){let _0x12b265=0x0;for(const _0x3a7ad0 of _0xaf67a8)switch(_0x3a7ad0){case'insert':_0x26b644['add'](_0x590b95['get'](_0x12b265),_0x12b265),_0x12b265++;break;case'delete':_0x26b644['remove'](_0x12b265);break;case'equal':_0x12b265++;}}class ls extends kt{constructor(_0x34a5cd){super(_0x34a5cd);const _0x179a77=this['bindTemplate'];this['set']('contextValue',''),this['setTemplate']({'tag':'span','attributes':{'class':['ck','ck-context__value'],'aria-label':_0x179a77['to']('contextValue',_0x18264e=>S(_0x34a5cd,'THREAD_CONTEXT_LABEL',_0x18264e)),'tabindex':-0x1},'children':[{'text':_0x179a77['to']('contextValue')}]});}['focus'](){this['element']['focus']();}}class Zt extends kt{['_model'];['reopenButtonView'];['contextView'];['focusables'];['focusTracker'];['keystrokes'];['focusCycler'];constructor(_0x5550d6,_0x5f3d94){super(_0x5550d6);const _0x8eb39b=this['bindTemplate'];this['_model']=_0x5f3d94,this['reopenButtonView']=this['_createReopenButton'](),this['contextView']=this['_createContextView'](),this['focusables']=this['createCollection']([this['contextView'],this['reopenButtonView']]),this['focusTracker']=new _0x5abdce(),this['keystrokes']=new jt(),this['focusCycler']=new Ft({'focusables':this['focusables'],'focusTracker':this['focusTracker'],'keystrokeHandler':this['keystrokes'],'actions':{'focusPrevious':'shift+tab','focusNext':'tab'}}),this['bind']('hasContext')['to'](this['_model'],'context',_0xd2abcf=>!!_0xd2abcf),this['bind']('contextValue')['to'](this['_model'],'context',_0x69107d=>_0x69107d&&_0x69107d['value']?this['_trimContextValue'](_0x69107d['value']):S(this['locale'],'Comment\x20was\x20made\x20on\x20an\x20element')),this['setTemplate']({'tag':'div','attributes':{'class':['ck-thread__header']},'children':[{'tag':'div','attributes':{'class':['ck-context-wrapper']},'children':[{'tag':'div','attributes':{'class':['ck-context',_0x8eb39b['if']('hasContext','ck-context--quotes')]},'children':[this['contextView']]}]},{'tag':'div','attributes':{'class':['ck-annotation__actions']},'children':[this['reopenButtonView']]}]});}['render'](){super['render'](),this['_attachContextActions'](),this['_setupKeyboardNavigation']();}['focus'](){this['focusCycler']['focusFirst']();}['_createReopenButton'](){const _0x41e49c=new _0xdf0cec(this['locale']);return _0x41e49c['label']=S(this['locale'],'Reopen'),_0x41e49c['tooltip']=S(this['locale'],'Reopen'),_0x41e49c['icon']='<svg\x20viewBox=\x220\x200\x2020\x2020\x22\x20xmlns=\x22http://www.w3.org/2000/svg\x22><path\x20d=\x22m5.042\x209.367\x202.189\x201.837a.75.75\x200\x200\x201-.965\x201.149l-3.788-3.18a.747.747\x200\x200\x201-.21-.284.75.75\x200\x200\x201\x20.17-.945L6.23\x204.762a.75.75\x200\x201\x201\x20.964\x201.15L4.863\x207.866h8.917A.75.75\x200\x200\x201\x2014\x207.9a4\x204\x200\x201\x201-1.477\x207.718l.344-1.489a2.5\x202.5\x200\x201\x200\x201.094-4.73l.008-.032H5.042z\x22/></svg>',_0x41e49c['bind']('isEnabled')['to'](this['_model'],'isReadOnly',_0x3f8e74=>!_0x3f8e74),_0x41e49c['bind']('isVisible')['to'](this['_model'],'isResolvable',this['_model'],'isResolved',(_0x492fae,_0x39e7ae)=>_0x492fae&&_0x39e7ae),_0x41e49c['on']('execute',()=>{this['fire']('reopenCommentThread',this['_model']['id']);}),_0x41e49c;}['_trimContextValue'](_0xc6470f){if(_0xc6470f['length']<0x96)return _0xc6470f;const _0x4ac43b=_0xc6470f['lastIndexOf']('\x20',0x93);return _0xc6470f['substring'](0x0,_0x4ac43b>-0x1?_0x4ac43b:0x93)+'...';}['_attachContextActions'](){const _0x3e7f1f=this['element']['querySelector']('.ck-context'),_0x60313c=_0x3e7f1f['querySelector']('.ck-context__value');this['listenTo'](_0x3e7f1f,'mouseenter',()=>{_0x60313c['offsetWidth']<_0x60313c['scrollWidth']&&_0x3e7f1f['classList']['add']('overlay');}),this['listenTo'](_0x3e7f1f,'mouseleave',()=>{_0x3e7f1f['classList']['remove']('overlay');});}['_setupKeyboardNavigation'](){this['keystrokes']['listenTo'](this['element']);for(const _0x3a4a90 of this['focusables'])this['focusTracker']['add'](_0x3a4a90['element']),this['keystrokes']['listenTo'](_0x3a4a90['element']);}['_createContextView'](){const _0x30d85c=new ls(this['locale']);return _0x30d85c['bind']('contextValue')['to'](this),_0x30d85c;}}class is extends kt{['_model'];['_config'];['commentThreadHeaderView'];['commentThreadInputView'];['ariaDescriptionView'];['focusables'];['focusTracker'];['keystrokes'];['focusCycler'];constructor(_0x2a50cc,_0x47f86f,_0x31daf1,_0x440253){super(_0x2a50cc),this['set']('isActive',!0x1),this['set']('isDirty',!0x1),this['_model']=_0x47f86f,this['_localUser']=_0x31daf1,this['_config']=_0x440253,this['commentThreadHeaderView']=new Zt(_0x2a50cc,_0x47f86f),this['commentThreadHeaderView']['delegate']('reopenCommentThread')['to'](this),this['ariaDescriptionView']=new ts(_0x2a50cc,S(_0x2a50cc,'COMMENT_THREAD_DESCRIPTION')),this['listenTo'](this,'reopenCommentThread',()=>{this['focus']();}),this['commentsListView']=new te(_0x2a50cc,_0x47f86f,Object['assign']({'CommentView':this['_config']['CommentView']},_0x440253)),this['commentsListView']['delegate']('removeComment')['to'](this),this['commentsListView']['delegate']('updateComment')['to'](this),this['commentsListView']['delegate']('resolveCommentThread')['to'](this),this['commentsListView']['delegate']('editorReady')['to'](this),this['commentsListView']['delegate']('editorDestroyed')['to'](this),this['commentsListView']['bind']('isActive')['to'](this),this['listenTo'](this,'resolveCommentThread',()=>{this['focus']();}),this['set']('length',this['commentsListView']['length']),this['bind']('length')['to'](this['commentsListView'],'length'),this['commentThreadInputView']=this['_createCommentThreadInputView'](),this['commentThreadInputView']['delegate']('editorReady')['to'](this),this['commentThreadInputView']['delegate']('editorDestroyed')['to'](this),this['on']('removeComment',()=>this['focus']()),this['bind']('isDirty')['to'](this['commentsListView'],'hasDirtyComment',this['commentThreadInputView']['commentInputView'],'value',(_0x1290f4,_0x4a62d2)=>_0x1290f4||!!_0x4a62d2),this['bind']('isUnlinked')['to'](_0x47f86f,'unlinkedAt',_0x32b368=>!!_0x32b368),this['bind']('ariaLabel')['to'](this,'length',_0x2bb7da=>{const _0x35b7fd=this['_model']['comments']['first']?this['_model']['comments']['first']['author']['name']:this['_localUser']['name'];return S(this['locale'],'COMMENT_THREAD_LABEL',[_0x2bb7da,_0x35b7fd]);}),this['focusables']=this['createCollection']([this['commentsListView'],this['commentThreadInputView']]),this['focusTracker']=new _0x5abdce(),this['keystrokes']=new jt(),this['focusCycler']=new Ft({'focusables':this['focusables'],'focusTracker':this['focusTracker'],'keystrokeHandler':this['keystrokes'],'keystrokeHandlerOptions':{'filter':_0x4ed651=>_0x4ed651['target']!==this['element']},'actions':{'focusPrevious':'shift+tab','focusNext':'tab'}});}['focus'](){this['element']['focus']();}['render'](){super['render'](),_0x5c179e(this,this['focusables']);}async['destroy'](){this['isDirty']=!0x1,this['commentsListView']['destroy'](),await this['commentThreadInputView']['destroy'](),super['destroy']();}['_createCommentThreadInputView'](){const _0x1b9fb6=new ie(this['locale'],this['_localUser'],this['_config']['editorConfig']),_0x55c1bf=_0x1b9fb6['commentInputView'];return _0x1b9fb6['bind']('showInput')['to'](this,'isActive',this['_model'],'isReadOnly',this['_model'],'canComment',this['_model'],'archivedAt',_0x55c1bf,'value',(_0x38c5f7,_0x38aaba,_0xe36ec7,_0x517d1f,_0x40a2de)=>!!_0x40a2de||!!_0x517d1f&&_0xe36ec7&&!_0x38aaba||_0x38c5f7&&_0xe36ec7&&!_0x38aaba),_0x55c1bf['bind']('placeholder')['to'](this,'length',this['_model'],'isResolvable',this['_model'],'isResolved',(_0x54ded2,_0x4bf15c,_0x10fb41)=>{let _0x21174a;return _0x21174a=_0x10fb41&&_0x4bf15c?'Reply\x20to\x20reopen\x20discussion...':_0x54ded2?'Reply...':'Write\x20a\x20comment...',S(this['locale'],_0x21174a);}),_0x55c1bf['bind']('submitLabel')['to'](this,'length',_0x2e6763=>S(this['locale'],_0x2e6763?'Reply':'Comment')),_0x55c1bf['on']('submit',(_0x462050,_0x360c68)=>{this['fire']('addComment',_0x360c68),this['_model']['isResolved']&&this['_model']['isResolvable']&&this['fire']('reopenCommentThread',this['_model']['id']),this['_model']['isSubmitted']||this['fire']('submitCommentThread');}),_0x55c1bf['on']('cancel',()=>{this['focus']();}),_0x55c1bf['bind']('disabledSubmit')['to'](this['_model'],'isReadOnly'),_0x55c1bf['on']('cancel',_0x22023a=>{0x0==this['length']&&(this['fire']('removeCommentThread'),_0x22023a['stop']());}),this['on']('change:isActive',(_0x54c9dc,_0x29b190,_0x5cc2f4)=>{_0x5cc2f4||this['length']||_0x55c1bf['value']||this['fire']('removeCommentThread');}),_0x1b9fb6;}}class vt extends/* #__PURE__ -- @preserve */
ti(is){['commentThreadChildren'];['containerElement'];['resolveButton'];['_boundFirstCommentView'];constructor(_0x3ec29b,_0x1b75da,_0x19405f,_0x4cc8b0){super(_0x3ec29b,_0x1b75da,_0x19405f,_0x4cc8b0),this['commentThreadChildren']=this['createCollection']([this['commentsListView'],this['commentThreadInputView'],this['ariaDescriptionView']]),this['set']('actionIndicator',null),this['containerElement']=null,this['_boundFirstCommentView']=null,this['locale']=_0x3ec29b,this['resolveButton']=this['_createResolveButton'](),this['setTemplate'](this['getTemplate']()),this['on']('change:isActive',(_0x5b0f36,_0x217ea8,_0x506745)=>{_0x506745||this['_cancelAllConfirms']();}),this['listenTo'](this['_model'],'change:isReadOnly',(_0x2c50e6,_0x1650bf,_0x8e05b4)=>{_0x8e05b4&&this['_cancelAllConfirms']();}),this['length']>0x0&&this['_bindFirstCommentView'](),this['listenTo'](this['commentsListView']['commentViews'],'add',()=>{this['_bindFirstCommentView']();});}['getTemplate'](){const _0x40cd70=this['bindTemplate'];return{'tag':'div','attributes':{'class':['ck','ck-thread','ck-reset_all-excluded','ck-rounded-corners',_0x40cd70['if']('isActive','ck-thread--active'),_0x40cd70['if']('isUnlinked','ck-thread--unlinked'),_0x40cd70['if']('isConfirm','ck-thread--remove-confirmation'),_0x40cd70['to']('actionIndicator',_0x1f7539=>_0x1f7539?'ck-thread--'+_0x1f7539:'')],'data-thread-id':this['_model']['id'],'tabindex':0x0,'role':'listitem','aria-label':_0x40cd70['to']('ariaLabel'),'aria-describedby':this['ariaDescriptionView']['id']},'children':[{'tag':'div','attributes':{'class':'ck-thread__container'},'children':this['commentThreadChildren']}]};}['render'](){super['render'](),this['containerElement']=this['element']['querySelector']('.ck-thread__container'),this['_model']['on']('change:archivedAt',()=>{this['_updateArchivedThreadHeader']();}),this['_updateArchivedThreadHeader']();}['_cancelAllConfirms'](){this['cancelConfirm']();for(const _0xc1a654 of this['commentsListView']['commentViews'])_0xc1a654['cancelConfirm']();}['_bindFirstCommentView'](){const {locale:_0x305a0f}=this,_0x535d63=this['commentsListView']['commentViews']['get'](0x0);_0x535d63===this['_boundFirstCommentView']||_0x535d63['isSystemComment']||(this['_boundFirstCommentView']=_0x535d63,this['unbind']('actionIndicator'),this['bind']('actionIndicator')['to'](_0x535d63,'actionIndicator',_0x261e09=>'remove'===_0x261e09?'remove':null),_0x535d63['placeholder']=S(_0x305a0f,'Write\x20a\x20comment...'),_0x535d63['removeButton']['on']('execute',_0x353186=>{_0x353186['stop'](),this['showConfirm'](S(_0x305a0f,'Delete\x20comment\x20thread?'),this['containerElement'])['then'](()=>{this['fire']('removeCommentThread');});},{'priority':'high'}),this['on']('removeConfirm',()=>{_0x535d63['focus']();}),_0x535d63['actionBar']['add'](this['resolveButton'],0x0),_0x535d63['focusables']['add'](this['resolveButton'],0x0));}['_createResolveButton'](){const _0x586094=new _0x3ac435(this['locale']);return _0x586094['label']=S(this['locale'],'Resolve'),_0x586094['tooltip']=S(this['locale'],'Resolve'),_0x586094['icon']=_0x2b050d['check'],_0x586094['extendTemplate']({'attributes':{'class':'ck-comment--resolve'}}),_0x586094['bind']('isEnabled')['to'](this['_model'],'isReadOnly',_0x3cd008=>!_0x3cd008),_0x586094['bind']('isVisible')['to'](this['_model'],'isResolvable',this['_model'],'isResolved',(_0x40eaee,_0x8bf265)=>_0x40eaee&&!_0x8bf265),_0x586094['on']('execute',()=>{this['fire']('resolveCommentThread',this['_model']['id']);}),_0x586094;}['_updateArchivedThreadHeader'](){this['_model']['archivedAt']?this['commentThreadChildren']['has'](this['commentThreadHeaderView'])||(this['commentThreadChildren']['add'](this['commentThreadHeaderView'],0x0),this['focusables']['add'](this['commentThreadHeaderView'],0x0)):this['commentThreadChildren']['has'](this['commentThreadHeaderView'])&&(this['commentThreadChildren']['remove'](this['commentThreadHeaderView']),this['focusables']['remove'](this['commentThreadHeaderView']));}}class hs extends kt{constructor(_0x29366f){super(_0x29366f),this['set']('content',''),this['setTemplate']({'tag':'div','attributes':{'class':['ck-content','ck-comment__content','ck-annotation__content']}});}['render'](){super['render'](),this['on']('change:content',(_0x29942d,_0xf96cd8,_0x5bdccc)=>{this['element']['innerHTML']=_0x5bdccc;}),this['element']['innerHTML']=this['content'];}}class rs extends kt{['visibleView'];['ariaDescriptionView'];['focusables'];['focusTracker'];['keystrokes'];['focusCycler'];['_model'];['_config'];constructor(_0x2e0533,_0x46f7f4,_0x36ad34){super(_0x2e0533),this['_model']=_0x46f7f4,this['_config']=_0x36ad34,this['isSystemComment']=!!this['_config']['isSystemComment'],this['set']('isEditMode',!0x1),this['set']('isCollapsed',!0x0),this['bind']('ariaLabel')['to'](_0x46f7f4,'content',_0x46f7f4,'authoredAt',(_0x413451,_0x35d01b)=>S(_0x2e0533,'COMMENT_ARIA_LABEL',[_0x46f7f4['author']['name'],_0x36ad34['formatDateTime'](_0x35d01b),new DOMParser()['parseFromString'](_0x413451,'text/html')['body']['textContent'],_0x46f7f4['isExternal']?this['getExternalCommentNote']():''])),this['ariaDescriptionView']=new ts(_0x2e0533,S(_0x2e0533,'COMMENT_THREAD_DESCRIPTION')),this['visibleView']=this['createCollection'](),this['visibleView']['add'](this['_createCommentContentView']()),this['focusables']=new _0x3d3c53(),this['focusTracker']=new _0x5abdce(),this['keystrokes']=new jt(),this['focusCycler']=new Ft({'focusables':this['focusables'],'focusTracker':this['focusTracker'],'keystrokeHandler':this['keystrokes'],'keystrokeHandlerOptions':{'filter':_0x448e69=>_0x448e69['target']!==this['element']},'actions':{'focusPrevious':'shift+tab','focusNext':'tab'}});}['expand'](){this['isCollapsed']=!0x1;}['collapse'](){this['isEditMode']||(this['isCollapsed']=!0x0);}['focus'](){this['element']['focus']();}['render'](){super['render'](),this['_setupKeyboardNavigation']();}async['destroy'](){await this['visibleView']['get'](0x0)['destroy'](),super['destroy']();}['switchToEditMode'](){this['isEditMode']||(this['isEditMode']=!0x0,this['visibleView']['remove'](0x0)['destroy'](),this['visibleView']['add'](this['_createCommentInputView']()));}['switchToDisplayMode'](){this['isEditMode']&&(this['isEditMode']=!0x1,this['visibleView']['remove'](0x0)['destroy'](),this['visibleView']['add'](this['_createCommentContentView']()));}['getExternalCommentNote'](){return'importWord'===this['_model']['attributes']['@external']['source']?S(this['locale'],'EXTERNAL_IMPORT_WORD_COMMENT'):S(this['locale'],'EXTERNAL_COMMENT');}['getUserViewNotificationText'](){return this['_model']['isExternal']?'importWord'===this['_model']['attributes']['@external']['source']?S(this['locale'],'EXTERNAL_IMPORT_WORD_AVATAR',this['_model']['creator']['name']):S(this['locale'],'EXTERNAL_AVATAR',this['_model']['creator']['name']):null;}['_createCommentContentView'](){const _0x40c06c=new hs(this['locale']);return _0x40c06c['bind']('content')['to'](this['_model'],'content',this,'isCollapsed',(_0xa148fe,_0xd7b9a1)=>_0xd7b9a1?_0x1c656b(_0xa148fe,{'limit':this['_config']['maxCommentCharsWhenCollapsed']}):_0xa148fe),_0x40c06c;}['_createCommentInputView'](){this['_config']['editorConfig']||(this['_config']['editorConfig']={}),this['_config']['editorConfig']['initialData']=this['_model']['content'];const _0x2bfbf0=new os(this['locale'],this['_config']['editorConfig']);return _0x2bfbf0['value']=this['_model']['content'],_0x2bfbf0['bind']('disabledSubmit')['to'](this['_model'],'isReadOnly'),_0x2bfbf0['submitLabel']=S(this['locale'],'Save'),_0x2bfbf0['on']('submit',(_0x395c2e,_0x2d0629)=>{this['fire']('updateComment',this['_model']['id'],_0x2d0629),this['switchToDisplayMode'](),this['focus']();}),_0x2bfbf0['on']('cancel',()=>{this['switchToDisplayMode'](),this['focus']();}),_0x2bfbf0['once']('editorReady',()=>{_0x2bfbf0['focus']();}),_0x2bfbf0['createEditor'](),_0x2bfbf0['delegate']('editorReady')['to'](this),_0x2bfbf0['delegate']('editorDestroyed')['to'](this),_0x2bfbf0;}['_setupKeyboardNavigation'](){const _0x37bf50=this['element'];this['keystrokes']['listenTo'](_0x37bf50);for(const _0x2e74cf of this['focusables'])this['focusTracker']['add'](_0x2e74cf['element']),this['keystrokes']['listenTo'](_0x2e74cf['element']);this['focusables']['on']('change',(_0x1c6cc6,_0x18701c)=>{for(const _0x499ff6 of _0x18701c['removed'])this['focusTracker']['remove'](_0x499ff6['element']),this['keystrokes']['stopListening'](_0x499ff6['element']);for(const _0x530422 of _0x18701c['added'])this['focusTracker']['add'](_0x530422['element']),this['keystrokes']['listenTo'](_0x530422['element']);}),this['keystrokes']['set']('enter',(_0x2a1f7f,_0x4025e2)=>{_0x37bf50===_0x2a1f7f['target']&&(this['focusCycler']['focusFirst'](),_0x4025e2());}),this['keystrokes']['set']('esc',(_0x55e5d8,_0x17bf09)=>{_0x37bf50!==_0x55e5d8['target']&&(this['focus'](),_0x17bf09());});}}class gt extends/* #__PURE__ -- @preserve */
ti(rs){['actionBar'];['userView'];constructor(_0x19e810,_0x4052d1,_0x20d685){super(_0x19e810,_0x4052d1,_0x20d685),this['set']('actionIndicator',null),this['set']('placeholder',S(_0x19e810,'Reply...')),this['bind']('authoredAt')['to'](_0x4052d1),this['bind']('resolvedAt')['to'](_0x4052d1),this['actionBar']=this['createCollection'](),this['isSystemComment']||(this['editButton']=this['_createEditButton'](),this['removeButton']=this['_createRemoveButton'](),this['items']=this['createCollection'](),this['items']['addMany']([this['editButton'],this['removeButton']]),this['dropdown']=this['_createDropdown'](),this['actionBar']['add'](this['dropdown']),this['focusables']['add'](this['dropdown'])),this['userView']=new _0x1dd170(_0x19e810,_0x4052d1['author'],this['getUserViewNotificationText']()),this['userView']['extendTemplate']({'attributes':{'class':['ck-comment__user','ck-annotation__user'],'aria-hidden':!0x0}}),this['listenTo'](_0x4052d1,'change:isRemovable',()=>this['cancelConfirm']()),this['setTemplate'](this['getTemplate']());}['getTemplate'](){const _0x33c65f=this['bindTemplate'],_0x5dcbf2=[{'tag':'div','attributes':{'class':['ck-comment__info','ck-annotation__info']},'children':[{'tag':'span','children':[{'text':this['userView']['name']}],'attributes':{'class':['ck-comment__info-name','ck-annotation__info-name']}},{'tag':'time','attributes':{'datetime':_0x33c65f['to']('authoredAt'),'class':['ck-comment__info-time','ck-annotation__info-time']},'children':[{'text':_0x33c65f['to']('authoredAt',_0x5d9505=>this['_config']['formatDateTime'](_0x5d9505))}]}]},{'tag':'div','attributes':{'class':['ck-comment__actions','ck-annotation__actions',_0x33c65f['if']('isEditMode','ck-comment__actions--hidden'),_0x33c65f['if']('isEditMode','ck-annotation__actions--hidden')]},'children':this['actionBar']},{'tag':'div','attributes':{'class':['ck-annotation__content-wrapper']},'children':this['visibleView']},this['ariaDescriptionView']];return this['_model']['isExternal']&&_0x5dcbf2['push']({'tag':'div','attributes':{'class':['ck-comment__external']},'children':[{'text':this['getExternalCommentNote']()}]}),{'tag':'li','attributes':{'class':['ck-comment__wrapper',_0x33c65f['if']('isConfirm','ck-comment--remove-confirmation')],'tabindex':-0x1,'aria-label':_0x33c65f['to']('ariaLabel'),'aria-describedby':this['ariaDescriptionView']['id'],'role':'listitem'},'children':[{'tag':'div','attributes':{'class':['ck-comment','ck-annotation',_0x33c65f['if']('isEditMode','ck-comment--edit'),_0x33c65f['if']('isSystemComment','ck-comment--info'),_0x33c65f['to']('actionIndicator',_0x572e32=>_0x572e32?'ck-comment--'+_0x572e32:'')],'data-author-id':this['_model']['author']['id'],'data-comment-id':this['_model']['id'],'role':'group'},'children':[this['userView'],{'tag':'div','attributes':{'class':['ck-comment__main','ck-annotation__main']},'children':_0x5dcbf2}]}]};}['_createEditButton'](){const _0x38e85e=new _0xdf0cec(this['locale']);return _0x38e85e['label']=S(this['locale'],'Edit'),_0x38e85e['icon']=_0x2b050d['pencil'],_0x38e85e['withText']=!0x0,_0x38e85e['extendTemplate']({'attributes':{'class':'ck-comment--edit'}}),_0x38e85e['bind']('isEnabled')['to'](this['_model'],'isReadOnly',_0x5b7e14=>!_0x5b7e14),_0x38e85e['bind']('isVisible')['to'](this['_model'],'isEditable'),_0x38e85e['on']('execute',()=>this['switchToEditMode']()),_0x38e85e;}['_createRemoveButton'](){const _0x4da6e2=new _0xdf0cec(this['locale']);return _0x4da6e2['label']=S(this['locale'],'Remove'),_0x4da6e2['icon']='<!--\x0a\x0a\x20What\x20you\x27re\x20currently\x20looking\x20at\x20is\x20the\x20source\x20code\x20of\x20a\x20legally\x20protected,\x20proprietary\x20software.\x0a\x20CKEditor\x205\x20Collaboration\x20is\x20licensed\x20under\x20a\x20commercial\x20license\x20and\x20protected\x20by\x20copyright\x20law.\x20Where\x20not\x20otherwise\x20indicated,\x0a\x20all\x20CKEditor\x205\x20Collaboration\x20content\x20is\x20authored\x20by\x20CKSource\x20engineers\x20and\x20consists\x20of\x20CKSource-owned\x20intellectual\x20property.\x0a\x0a\x20Copyright\x20(c)\x202003-2024,\x20CKSource\x20Holding\x20sp.\x20z\x20o.o.\x20All\x20rights\x20reserved.\x0a\x0a!-->\x0a\x0a<svg\x20viewBox=\x220\x200\x2020\x2020\x22\x20xmlns=\x22http://www.w3.org/2000/svg\x22><path\x20d=\x22M5.2\x207h9.2c.6\x200\x201\x20.4\x201\x201v9.9c0\x20.5-.4\x201-1\x201H5.2a1\x201\x200\x200\x201-1-1V8c0-.6.4-1\x201-1zm1\x201.5c-.3\x200-.5.2-.5.5v8c0\x20.3.2.5.5.5h.5c.2\x200\x20.5-.2.5-.5V9c0-.3-.3-.5-.5-.5h-.5zm3.2\x200c-.2\x200-.5.2-.5.5v8c0\x20.3.3.5.5.5h.5c.3\x200\x20.5-.2.5-.5V9c0-.3-.2-.5-.5-.5h-.4zm3.5\x200c-.2\x200-.5.2-.5.5v8c0\x20.3.3.5.5.5h.5c.3\x200\x20.5-.2.5-.5V9c0-.3-.2-.5-.5-.5h-.5zm-1.4-7.1H8.3L6.5\x203.6H3.8c-.5\x200-.7.3-.7.8s.2.7.7.7h12c.6\x200\x20.9-.2.9-.7\x200-.5-.3-.8-1-.8h-2.4l-1.8-2.2z\x22/></svg>\x0a',_0x4da6e2['withText']=!0x0,_0x4da6e2['extendTemplate']({'attributes':{'class':'ck-comment--remove'}}),_0x4da6e2['bind']('isEnabled')['to'](this['_model'],'isReadOnly',_0x2ac343=>!_0x2ac343),_0x4da6e2['bind']('isVisible')['to'](this['_model'],'isRemovable'),_0x4da6e2['on']('execute',()=>{this['showConfirm'](S(this['locale'],'Delete\x20comment?'),this['element'])['then'](()=>{this['fire']('removeComment',this['_model']['id']);});}),_0x4da6e2;}['_createDropdown'](){const _0x35aac7=_0x179f8f(this['locale'],_0x50be63),_0x3e773e=_0x35aac7['panelView']['children'],_0x334609=new _0x54dc4a(this['locale']),_0x48858f=_0x35aac7['bindTemplate'];_0x40aa58(_0x35aac7,()=>this['items']['find'](_0x489f01=>_0x489f01['isVisible'])),_0x35aac7['extendTemplate']({'attributes':{'class':[_0x48858f['if']('isVisible','ck-hidden',_0x1973e4=>!_0x1973e4)]}});const _0x53b574=(_0xbfa1db,_0x1cf2e4=-0x1)=>{const _0x45e4cd=new _0x103fb5(this['locale']);_0x45e4cd['children']['add'](_0xbfa1db);const _0x37b6a8=_0x1cf2e4>-0x1?_0x1cf2e4:_0x334609['items']['length'];_0x334609['items']['add'](_0x45e4cd,_0x37b6a8);const _0x52fab0=Array['from'](this['items']);_0x35aac7['unbind']('isEnabled','isVisible'),_0x35aac7['bind']('isEnabled')['toMany'](_0x52fab0,'isEnabled',(..._0x501585)=>_0x501585['some'](_0x156aee=>_0x156aee)),_0x35aac7['bind']('isVisible')['toMany'](_0x52fab0,'isVisible',(..._0x37593a)=>_0x37593a['some'](_0x5050d7=>_0x5050d7));};_0x35aac7['panelPosition']='sw',_0x35aac7['buttonView']['set']({'label':S(this['locale'],'Show\x20more\x20items'),'icon':_0x2b050d['threeVerticalDots']});for(const _0x288f2c of this['items'])_0x53b574(_0x288f2c);return _0x3e773e['add'](_0x334609),_0x35aac7['listenTo'](this['items'],'add',(_0x5742c7,_0x4be54b,_0x1bd2f5)=>{_0x53b574(_0x4be54b,_0x1bd2f5);}),_0x35aac7['listenTo'](this['items'],'remove',(_0x138e8b,_0x24fa72,_0x51007a)=>{_0x334609['items']['remove'](_0x51007a);}),_0x35aac7;}['_attachActions'](_0x85d6aa,_0x30732d){const _0x4417af=_0x85d6aa&&_0x85d6aa['element'];_0x4417af&&(this['listenTo'](_0x4417af,'mouseenter',()=>this['actionIndicator']=_0x30732d),this['listenTo'](_0x4417af,'focus',()=>this['actionIndicator']=_0x30732d),this['listenTo'](_0x4417af,'mouseleave',()=>this['actionIndicator']=null),this['listenTo'](_0x4417af,'blur',()=>this['actionIndicator']=null));}['_createCommentInputView'](){const _0x30e9d6=super['_createCommentInputView']();return _0x30e9d6['bind']('placeholder')['to'](this),_0x30e9d6;}['render'](){super['render'](),this['_attachActions'](this['editButton'],'edit'),this['_attachActions'](this['removeButton'],'remove');}}function Lt(_0x474c96){const _0x10a0aa=Dt(_0x474c96,0x1e),_0xba16ec=new MutationObserver(_0x12e353=>{for(const _0x22b90f of _0x12e353)('attributes'==_0x22b90f['type']&&'class'==_0x22b90f['attributeName']||'childList'==_0x22b90f['type']||'characterData'==_0x22b90f['type'])&&_0x10a0aa();});return{'attach'(_0x4e5f94){_0xba16ec['observe'](_0x4e5f94,{'attributes':!0x0,'childList':!0x0,'subtree':!0x0,'characterData':!0x0});},'detach'(){_0xba16ec['disconnect'](),_0x10a0aa['cancel']();}};}class T extends kt{['focusTracker'];['id'];['keystrokes'];['content'];['mainView'];['_mutationObserver'];constructor(_0x2b87e7,_0x4f7423){super(_0x2b87e7),this['id']=_0x29ee90(),this['focusTracker']=new _0x5abdce(),this['keystrokes']=new jt(),this['keystrokes']['set']('Esc',(_0x4a4b94,_0x4b62fc)=>this['fire']('Esc',_0x4b62fc)),this['set']('targetRect',{'top':0x0,'right':0x0,'bottom':0x0,'left':0x0}),this['set']('height',0x0),this['set']('isActive',!0x1),this['set']('isDirty',!0x1),this['set']('length',0x0),this['set']('type',''),this['_mutationObserver']=Lt(()=>this['_updateHeight']()),this['content']=this['createCollection'](),this['content']['delegate']('arrowup','arrowdown')['to'](this),this['content']['add'](_0x4f7423),this['mainView']=_0x4f7423;const _0x2fbe3f=this['bindTemplate'];this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-annotation-wrapper','ck-rounded-corners',_0x2fbe3f['if']('isActive','ck-annotation-wrapper--active')],'role':'presentation'},'children':this['content']});}['render'](){super['render'](),this['focusTracker']['add'](this['element']),this['keystrokes']['listenTo'](this['element']),this['_mutationObserver']['attach'](this['element']);}['destroy'](){this['content']['clear'](),this['keystrokes']['destroy'](),this['focusTracker']['destroy'](),this['_mutationObserver']['detach'](),super['destroy']();}['focus'](){this['content']['first']&&this['content']['first']['focus']();}['_updateHeight'](){const _0x3b7cb3=this['element']['clientHeight'];_0x3b7cb3&&(this['height']=_0x3b7cb3);}}class d extends/* #__PURE__ -- @preserve */
_0x459611(){['view'];['focusableElements'];['_type'];['_target'];constructor({view:_0x484fc2,target:_0x517b19,type:_0x57a5a4,isVisible:_0x37d7cf=!0x0}){super(),this['view']=_0x484fc2,this['view']['element']||this['view']['render'](),this['_type']=_0x57a5a4,this['_target']=_0x517b19,d['_assertCorrectTarget'](this['_getNormalizedTarget']()),this['focusableElements']=new _0x3040b9([this['view']['element']],{'idProperty':'_id'}),this['focusableElements']['on']('add',(_0x296d03,_0x3c0e50)=>{this['view']['focusTracker']['add'](_0x3c0e50);}),this['focusableElements']['on']('remove',(_0x3b43ea,_0x454f7f)=>{this['view']['focusTracker']['remove'](_0x454f7f);}),this['set']('isVisible',_0x37d7cf);}get['type'](){return'function'==typeof this['_type']?this['_type']():this['_type'];}get['innerView'](){return this['view']['mainView'];}get['target'](){const _0x394a29=this['_getNormalizedTarget']();return d['_assertCorrectTarget'](_0x394a29),_0x394a29;}get['targetRect'](){const _0xb8dacc=this['target'];if(null===_0xb8dacc)return null;if(_0xb8dacc instanceof _0x16256)return _0xb8dacc;const _0x33b0e0=_0xb8dacc['filter'](_0x65873c=>function(_0x4c6a27){const _0x410b56=_0x4c6a27['offsetParent'];if(_0x410b56)return!0x0;const _0x180fe0=_0x4c6a27['getClientRects']()['item'](0x0);return!!_0x180fe0;}(_0x65873c));return 0x0===_0x33b0e0['length']?null:new _0x16256(_0x33b0e0[0x0]['getClientRects']()['item'](0x0));}get['isActive'](){return this['view']['isActive'];}set['isActive'](_0x294591){this['view']['isActive']=_0x294591,this['view']['mainView']['isActive']=_0x294591;}['updateTargetRect'](){this['view']['targetRect']=this['targetRect'];}['destroy'](){this['focusableElements']['stopListening'](),this['focusableElements']['clear'](),this['stopListening']();}['refreshVisibility'](){this['isVisible']=!!this['targetRect'];}static['_assertCorrectTarget'](_0x5a79f8){if(!(null===_0x5a79f8||_0x5a79f8 instanceof _0x16256||Array['isArray'](_0x5a79f8)&&_0x5a79f8['every'](_0x443e7d=>ne(_0x443e7d))))throw new _0x2f1633('annotation-invalid-target',null,{'target':_0x5a79f8});}['_getNormalizedTarget'](){const _0x409b2d='function'==typeof this['_target']?this['_target']():this['_target'];return ne(_0x409b2d)?[_0x409b2d]:_0x409b2d;}}function ne(_0xcba245){return null!==_0xcba245&&'object'==typeof _0xcba245&&'nodeType'in _0xcba245&&0x1===_0xcba245['nodeType'];}class x extends _0x3040b9{['_innerViewToAnnotation'];['_viewToAnnotation'];['_focusTracker'];constructor(_0x57f010=[]){super(),this['_innerViewToAnnotation']=new Map(),this['_viewToAnnotation']=new Map(),this['_focusTracker']=new _0x5abdce(),this['_focusTracker']['on']('change:isFocused',(_0x5a2ebf,_0x36e730,_0x3bbd66)=>{_0x3bbd66||this['fire']('blur');});for(const _0x57b168 of _0x57f010)this['add'](_0x57b168);}get['isFocused'](){return this['_focusTracker']['isFocused'];}['add'](_0x4494ca){if(this['has'](_0x4494ca))throw new _0x2f1633('annotationcollection-duplicated-item',null);this['_innerViewToAnnotation']['set'](_0x4494ca['innerView'],_0x4494ca),this['_viewToAnnotation']['set'](_0x4494ca['view'],_0x4494ca);for(const _0x5c2689 of _0x4494ca['focusableElements'])this['_focusTracker']['add'](_0x5c2689);this['listenTo'](_0x4494ca['focusableElements'],'add',(_0x2cb5eb,_0x3ddfac)=>{this['_focusTracker']['add'](_0x3ddfac);}),this['listenTo'](_0x4494ca['focusableElements'],'remove',(_0x58e814,_0x4515af)=>{this['_focusTracker']['remove'](_0x4515af);}),this['listenTo'](_0x4494ca['view']['focusTracker'],'change:isFocused',(_0xea0499,_0x24090f,_0x3dcf1d)=>{_0x3dcf1d&&this['fire']('focus',_0x4494ca);}),_0x4494ca['updateTargetRect']();const _0x7ecc2f=this['_getOrderInContent'](_0x4494ca['view']['targetRect']);return super['add'](_0x4494ca,_0x7ecc2f);}['remove'](_0x29428f){if(!this['has'](_0x29428f))throw new _0x2f1633('annotationcollection-not-existing-item',null);this['stopListening'](_0x29428f['view']['focusTracker']),this['stopListening'](_0x29428f['focusableElements']);for(const _0xfc9c0c of _0x29428f['focusableElements'])this['_focusTracker']['remove'](_0xfc9c0c);return this['_viewToAnnotation']['delete'](_0x29428f['view']),this['_innerViewToAnnotation']['delete'](_0x29428f['innerView']),super['remove'](_0x29428f);}['getByInnerView'](_0x1b81d0){return this['_innerViewToAnnotation']['get'](_0x1b81d0);}['getByView'](_0x5b61f9){return this['_viewToAnnotation']['get'](_0x5b61f9);}['destroy'](){super['clear'](),this['stopListening'](),this['_innerViewToAnnotation']['clear'](),this['_viewToAnnotation']['clear'](),this['_focusTracker']['destroy']();}['refreshPositioning'](){for(const _0x5c9a0c of this)_0x5c9a0c['updateTargetRect']();this['_sort']();}['_sort'](){const _0x29caf6=Array['from'](this)['sort']((_0x102d7d,_0x481290)=>v(_0x102d7d['view']['targetRect'],_0x481290['view']['targetRect']));for(let _0xcf4898=_0x29caf6['length']-0x1;_0xcf4898>0x0;_0xcf4898--){const _0x3bccae=_0x29caf6[_0xcf4898];_0xcf4898!==this['getIndex'](_0x3bccae)&&(this['remove'](_0x3bccae),this['add'](_0x3bccae));}}['_getOrderInContent'](_0x75cbdd){let _0x1a6b4b=0x0;if(!_0x75cbdd)return this['length'];for(const _0x1c3a7e of this){const _0x388d97=_0x1c3a7e['view']['targetRect'];if(_0x388d97){if(v(_0x75cbdd,_0x388d97)<0x0)return _0x1a6b4b;_0x1a6b4b++;}}return _0x1a6b4b;}}function v(_0x5c9d71,_0x7df72d){if(null===_0x5c9d71&&null===_0x7df72d)return 0x0;if(null===_0x5c9d71)return-0x1;if(null===_0x7df72d)return 0x1;const _0x3b66a7=_0x5c9d71['top']-_0x7df72d['top'];return 0x0==_0x3b66a7?_0x5c9d71['left']-_0x7df72d['left']:_0x3b66a7;}class N extends _0x17f52f{['collection'];['_visibleAnnotations'];static get['pluginName'](){return'Annotations';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x228bfc){if(super(_0x228bfc),this['collection']=new x(),this['_visibleAnnotations']=new x(),this['set']('activeAnnotations',new Set()),this['_bindAnnotationsToVisibleAnnotations'](),_0x228bfc instanceof _0xa87eb7){const _0xfffc25=_0x228bfc['locale'];_0x228bfc['accessibility']['addKeystrokeInfoGroup']({'id':'annotations','label':S(_0xfffc25,'ACCESSIBILITY_HELP_ANNOTATIONS_GROUP'),'keystrokes':[{'label':S(_0xfffc25,'ACCESSIBILITY_HELP_ANNOTATIONS_MOVE_TO'),'keystroke':'Ctrl+Shift+E'},{'label':S(_0xfffc25,'ACCESSIBILITY_HELP_ANNOTATIONS_EXIT'),'keystroke':'Esc'},{'label':S(_0xfffc25,'ACCESSIBILITY_HELP_ANNOTATIONS_ENTER'),'keystroke':'Enter'},{'label':S(_0xfffc25,'ACCESSIBILITY_HELP_ANNOTATIONS_BROWSE_GROUPS'),'keystroke':[['Tab'],['Shift+Tab']]},{'label':S(_0xfffc25,'ACCESSIBILITY_HELP_ANNOTATIONS_SUBMIT_COMMENT'),'keystroke':['Ctrl+Enter']},{'label':S(_0xfffc25,'ACCESSIBILITY_HELP_ANNOTATIONS_NAVIGATE_THREADS'),'keystroke':[['Arrowup'],['Arrowdown']]}]});}this['_setupEnterAnnotationKeystroke'](),this['_setupEscapeAnnotationHandling']();}['add'](_0x3f5b9f){this['collection']['add'](_0x3f5b9f);}['remove'](_0x35b01b){this['collection']['remove'](_0x35b01b),_0x35b01b['destroy']();}['refreshVisibility'](){for(const _0x68fe24 of this['collection'])_0x68fe24['refreshVisibility']();}['refreshPositioning'](){this['_visibleAnnotations']['refreshPositioning']();}['getByInnerView'](_0x4bf329){return this['collection']['getByInnerView'](_0x4bf329);}['deactivateAll'](){this['fire']('_deactivateAllAnnotations');}['destroy'](){for(const _0x2516ae of this['collection'])_0x2516ae['destroy']();this['_visibleAnnotations']['destroy'](),this['collection']['destroy'](),super['destroy']();}['activate'](_0xc172bf){this['fire']('_activateAnnotation',_0xc172bf);}['createAnnotation'](_0x18ef03){return new d(_0x18ef03);}['createAnnotationView'](_0x2ab2a4,_0x36d06a){return new T(_0x2ab2a4,_0x36d06a);}['_addActiveAnnotation'](_0x18cde7){const _0x58f55c=new Set(this['activeAnnotations']);_0x58f55c['add'](_0x18cde7),this['activeAnnotations']=_0x58f55c;}['_removeActiveAnnotation'](_0x32e54e){const _0x251077=new Set(this['activeAnnotations']);_0x251077['delete'](_0x32e54e),this['activeAnnotations']=_0x251077;}['_bindAnnotationsToVisibleAnnotations'](){const _0x55688d=this['collection'],_0x2b39e2=this['_visibleAnnotations'];function _0xf4fdc3(_0x101606){const _0x253cbd=_0x101606['source'];_0x253cbd['isVisible']&&!_0x2b39e2['has'](_0x253cbd)?_0x2b39e2['add'](_0x253cbd):!_0x253cbd['isVisible']&&_0x2b39e2['has'](_0x253cbd)&&_0x2b39e2['remove'](_0x253cbd),_0x253cbd['view']['focusTracker']['remove'](_0x253cbd['view']['element']),_0x253cbd['view']['focusTracker']['add'](_0x253cbd['view']['element']);}this['listenTo'](_0x55688d,'add',(_0xe21144,_0x31e584)=>{_0x31e584['isVisible']&&_0x2b39e2['add'](_0x31e584),this['listenTo'](_0x31e584,'change:isVisible',_0xf4fdc3);}),this['listenTo'](_0x55688d,'remove',(_0x4e1aa0,_0xf82a01)=>{_0x2b39e2['has'](_0xf82a01)&&_0x2b39e2['remove'](_0xf82a01),this['stopListening'](_0xf82a01,'change:isVisible',_0xf4fdc3);});}['_setupEnterAnnotationKeystroke'](){const _0x70ceeb=_0x5c2d67=>{_0x5c2d67['on']('ready',()=>{_0x5c2d67['keystrokes']['set'](_0x3329b5,(_0x18469e,_0x2f8744)=>{const _0x266a78=_0x99b28(this['activeAnnotations']['values']());_0x266a78&&(_0x266a78['view']['focus'](),_0x2f8744());});});};this['context']instanceof _0xa87eb7?_0x70ceeb(this['context']):this['context']['editors']&&this['context']['editors']['on']('add',(_0xb7c30d,_0x4d4426)=>{_0x70ceeb(_0x4d4426);});}['_setupEscapeAnnotationHandling'](){const _0x3dfe1b=_0x234b77=>{const _0x1e123c=_0x234b77['source'],_0x23b67d=[];let _0x18ea7c;if(Array['isArray'](_0x1e123c['target'])){_0x18ea7c=_0x1e123c['target'][0x0],this['context']instanceof _0xa87eb7?_0x23b67d['push'](this['context']):this['context']['editors']&&_0x23b67d['push'](...this['context']['editors']);for(const _0xcb6bf1 of _0x23b67d)for(const _0x5722a5 of _0xcb6bf1['editing']['view']['domRoots']['values']())if(_0x5722a5['contains'](_0x18ea7c))return void _0xcb6bf1['editing']['view']['focus']();_0x18ea7c['focus']();}};this['listenTo'](this['collection'],'add',(_0x5dbfc7,_0x2bcc76)=>{this['listenTo'](_0x2bcc76,'escape',_0x3dfe1b,{'priority':'low'});}),this['listenTo'](this['collection'],'remove',(_0x33b365,_0x148e1c)=>{this['stopListening'](_0x148e1c,'escape',_0x3dfe1b);});}}const Tt=Symbol('noChannel'),_t={'admin':!0x0,'modifyAll':!0x1,'write':!0x0,'resolve':!0x0};class o extends _0x17f52f{['_threads'];['_threadToController'];['_viewToController'];static get['requires'](){return[N,ht,it];}static get['pluginName'](){return'CommentsRepository';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x108b3e){super(_0x108b3e),this['_threads']=new Map(),this['_threadToController']=new Map(),this['_viewToController']=new Map(),this['set']('_readOnlyChannels',new Set()),this['set']('_permissions',new Map());const _0x595c1=this['context']['config'];_0x595c1['define']('comments.maxCommentsWhenCollapsed',0x2),_0x595c1['define']('comments.maxThreadTotalWeight',0x1f4),_0x595c1['define']('comments.maxCommentCharsWhenCollapsed',0x8c),_0x595c1['define']('comments.CommentThreadView',vt),_0x595c1['define']('comments.CommentView',gt),_0x595c1['get']('comments.editorConfig')||console['warn']('Missing\x20comments\x20editor\x20configuration\x20(`comments.editorConfig`).\x20Default\x20configuration\x20will\x20be\x20used\x20instead.');}['init'](){const _0x206903=this['context']['plugins']['get'](N);this['set']('activeCommentThread',null),this['on']('addCommentThread',(_0x3eac3d,_0x2a6f4d)=>this['_addCommentThread'](_0x2a6f4d)),this['on']('submitCommentThread',(_0x555e8d,_0x283a5d)=>this['_submitCommentThread'](_0x283a5d)),this['on']('resolveCommentThread',(_0x21cd75,_0x3ee40e)=>this['_resolveCommentThread'](_0x3ee40e)),this['on']('resolveCommentThread',(_0x532a23,_0x331641)=>this['_updateActiveAnnotation'](_0x331641),{'priority':'lowest'}),this['on']('reopenCommentThread',(_0xe661c,_0x83077b)=>this['_reopenCommentThread'](_0x83077b)),this['on']('reopenCommentThread',(_0xa025de,_0x3f0992)=>this['_updateActiveAnnotation'](_0x3f0992),{'priority':'lowest'}),this['on']('removeCommentThread',(_0x422460,_0x26b9ff)=>this['_removeCommentThread'](_0x26b9ff)),this['on']('updateCommentThread',(_0x436880,_0x3e667d)=>this['_updateCommentThread'](_0x3e667d)),this['on']('updateCommentThread',(_0x5ec052,_0x38a498)=>this['_updateActiveAnnotation'](_0x38a498),{'priority':'lowest'}),this['on']('addComment',(_0x16338a,_0xbebe8e)=>this['_addComment'](_0xbebe8e)),this['on']('updateComment',(_0xd81561,_0x1ffd80)=>this['_updateComment'](_0x1ffd80)),this['on']('removeComment',(_0x5759c3,_0x413e9a)=>this['_removeComment'](_0x413e9a)),this['on']('addComment',(_0x4d4693,{threadId:_0x546d1d,isFromAdapter:_0x11ca0b})=>{if(_0x11ca0b)return;const _0x191075=this['getCommentThread'](_0x546d1d),_0x5d5898=_0x191075&&this['_threadToController']['get'](_0x191075);_0x5d5898&&_0x5d5898['view']['commentsListView']['focus'](-0x1);},{'priority':'lowest'}),this['listenTo'](_0x206903,'change:activeAnnotations',(_0xb4a2aa,_0x48dc52,_0x3d1b92)=>{const _0x15042f=Array['from'](_0x3d1b92)['map'](_0x5a4ff3=>this['_viewToController']['get'](_0x5a4ff3['innerView']))['filter'](Boolean)[0x0];this['activeCommentThread']=_0x15042f?_0x15042f['model']:null;});}set['adapter'](_0x2a811e){if(this['_adapter'])throw new _0x2f1633('commentsrepository-adapter-already-set');this['_adapter']=_0x2a811e;}get['adapter'](){return this['_adapter'];}['addCommentThread']({channelId:_0x59088f=Tt,threadId:_0x4a27ca=_0x29ee90(),comments:_0x3dbf4b=[],unlinkedAt:_0x2abddc=null,resolvedAt:_0x5340fc=null,resolvedBy:_0x338ebd=null,target:_0x416377=null,context:_0x14939d=null,attributes:_0xa608b7={},isResolvable:_0x4d7311=!0x0,isSubmitted:_0x9d528f=!0x1,isFromAdapter:_0x343beb=!0x1}={}){return this['fire'](bt('addCommentThread',_0x59088f),{'channelId':_0x59088f,'threadId':_0x4a27ca,'comments':_0x3dbf4b,'unlinkedAt':_0x2abddc,'resolvedAt':_0x5340fc,'resolvedBy':_0x338ebd,'target':_0x416377,'context':_0x14939d,'attributes':_0xa608b7,'isFromAdapter':_0x343beb,'isResolvable':_0x4d7311,'isSubmitted':_0x9d528f}),this['getCommentThread'](_0x4a27ca);}['openNewCommentThread']({channelId:_0x58ad44=Tt,threadId:_0x4ca8a2=_0x29ee90(),target:_0x39c172,context:_0x38610a=null,isResolvable:_0x4c3c61=!0x0}){if(this['_readOnlyChannels']['has'](_0x58ad44)||this['_readOnlyChannels']['has'](void 0x0))return null;if(!_0x39c172)throw new _0x2f1633('commentsrepository-missing-target');const _0xda4480=this['addCommentThread']({'channelId':_0x58ad44,'threadId':_0x4ca8a2,'target':_0x39c172,'context':_0x38610a,'isResolvable':_0x4c3c61});if(!_0xda4480)return null;const _0x4afd71=this['_threadToController']['get'](_0xda4480),_0x5fe19e=_0x4afd71['view']['commentThreadInputView']['commentInputView'],_0xdcc826=this['context']['plugins']['get'](N),_0x19269d=_0xdcc826['getByInnerView'](_0x4afd71['view']);return _0xdcc826['activate'](_0x19269d),_0x5fe19e['once']('editorReady',()=>_0x5fe19e['focus']()),_0xda4480;}['hasCommentThread'](_0x282d63){if('string'!=typeof _0x282d63)throw new _0x2f1633('commentsrepository-invalid-comment-thread-id');return this['_threads']['has'](_0x282d63);}['updateCommentThread']({channelId:_0x643924=Tt,threadId:_0x1178fb,context:_0xac7a01,unlinkedAt:_0x4a99df,attributes:_0x123821,isFromAdapter:_0xb237eb=!0x1}){return this['fire'](bt('updateCommentThread',_0x643924),{'channelId':_0x643924,'threadId':_0x1178fb,'context':_0xac7a01,'unlinkedAt':_0x4a99df,'attributes':_0x123821,'isFromAdapter':_0xb237eb}),this['getCommentThread'](_0x1178fb);}['getCommentThread'](_0x536110){if('string'!=typeof _0x536110)throw new _0x2f1633('commentsrepository-invalid-comment-thread-id');return this['_threads']['get'](_0x536110);}['fetchCommentThread']({channelId:_0x48c159,threadId:_0x544269}={}){const _0xb220c9=this['getCommentThread'](_0x544269);if(_0xb220c9)return Promise['resolve'](_0xb220c9);if(!this['adapter'])return Promise['resolve'](void 0x0);if('function'!=typeof this['adapter']['getCommentThread'])throw new _0x2f1633('commentsrepository-missing-thread-and-adapter-method',this['context']);return this['adapter']['getCommentThread']({'channelId':_0x48c159,'threadId':_0x544269})['then'](_0x515a7c=>this['hasCommentThread'](_0x544269)?this['getCommentThread'](_0x544269):_0x515a7c?this['addCommentThread'](Object['assign']({'isFromAdapter':!0x0,'channelId':_0x48c159},_0x515a7c)):void 0x0)['catch'](_0x21d9a3=>{throw console['error'](_0x21d9a3),new _0x2f1633('commentsrepository-fetch-comment-thread',this['context']);});}['getCommentThreads']({channelId:_0x3da74d,skipNotAttached:_0x4f3ada=!0x1,skipEmpty:_0x5a996f=!0x1,toJSON:_0x1c29b0=!0x1}={}){const _0x3338f4=[];for(const _0x4d9c1c of this['_threads']['values']())_0x3da74d&&_0x4d9c1c['channelId']!==_0x3da74d||_0x4f3ada&&!_0x4d9c1c['isAttached']||_0x5a996f&&0x0===_0x4d9c1c['length']||_0x3338f4['push'](_0x4d9c1c);return _0x1c29b0?_0x3338f4['map'](_0x1b2009=>_0x1b2009['toJSON']()):_0x3338f4;}['setActiveCommentThread'](_0x3e5504){const _0x44856e=this['context']['plugins']['get'](N);if(!_0x3e5504)return void(this['activeCommentThread']&&_0x44856e['deactivateAll']());const _0x5c77a8=this['getCommentThread'](_0x3e5504);if(!_0x5c77a8)throw new _0x2f1633('commentsrepository-active-missing-comment-thread',null,{'threadId':_0x3e5504});if(!this['_threadToController']['has'](_0x5c77a8))throw new _0x2f1633('commentsrepository-active-not-attached',null,{'threadId':_0x3e5504});const _0x30a97a=_0x44856e['getByInnerView'](this['_threadToController']['get'](_0x5c77a8)['view']);_0x44856e['activate'](_0x30a97a);}['switchReadOnly'](_0x324e9a,_0x16eba7){_0x324e9a?this['_readOnlyChannels']['add'](_0x16eba7):this['_readOnlyChannels']['delete'](_0x16eba7),this['fire']('change:_readOnlyChannels','_readOnlyChannels',this['_readOnlyChannels'],this['_readOnlyChannels']);}['isReadOnly'](_0x4e986f){return this['_readOnlyChannels']['has'](_0x4e986f)||this['_readOnlyChannels']['has'](void 0x0);}['createCommentThreadController'](_0x45392c,_0x2e6999){return new Ct(_0x45392c,_0x2e6999);}['setPermissions'](_0x37b14a,_0x37c637=Tt){this['_permissions']['set'](_0x37c637,_0x37b14a),this['fire']('change:_permissions','_permissions',this['_permissions'],this['_permissions']);}['getPermissions'](_0x39e0b2=Tt){return this['_permissions']['has'](_0x39e0b2)?this['_permissions']['get'](_0x39e0b2):_t;}['_addCommentThread']({channelId:_0x151ec4,threadId:_0x2b3bb4,comments:_0x53fa4d,unlinkedAt:_0x185a88,resolvedAt:_0x9e8951,resolvedBy:_0x587f33,target:_0x3a47d7,context:_0x552340,attributes:_0x21caf5,isFromAdapter:_0x5b33d5,isResolvable:_0x9ae0d,isSubmitted:_0x539ce5}){if('string'!=typeof _0x2b3bb4)throw new _0x2f1633('commentsrepository-invalid-comment-thread-id',null,{'threadId':_0x2b3bb4});if(this['hasCommentThread'](_0x2b3bb4))throw new _0x2f1633('commentsrepository-duplicated-comment-thread-id',null,{'threadId':_0x2b3bb4});const _0x30e2b2=new oe(this,{'channelId':_0x151ec4,'id':_0x2b3bb4,'context':_0x552340,'attributes':_0x21caf5,'unlinkedAt':_0x185a88,'resolvedAt':_0x9e8951,'resolvedBy':_0x587f33?this['context']['plugins']['get'](it)['getUser'](_0x587f33):null,'isResolvable':_0x9ae0d,'isSubmitted':_0x539ce5||_0x5b33d5});this['_threads']['set'](_0x2b3bb4,_0x30e2b2);for(const _0x30288a of _0x53fa4d)_0x30e2b2['_add'](this['_createNewComment']({'threadId':_0x2b3bb4,..._0x30288a}));return _0x3a47d7&&_0x30e2b2['attachTo'](_0x3a47d7),_0x5b33d5||!_0x30e2b2['length']?Promise['resolve']():this['_submitCommentThread']({'channelId':_0x151ec4,'threadId':_0x2b3bb4});}['_submitCommentThread']({channelId:_0x2aa5cd,threadId:_0x2c2133}){if(!this['hasCommentThread'](_0x2c2133))throw new _0x2f1633('commentsrepository-missing-comment-thread',this);const _0x5bc75f=this['getCommentThread'](_0x2c2133);if(_0x5bc75f['_isSubmitted']=!0x0,!this['adapter']||'function'!=typeof this['adapter']['addCommentThread'])return Promise['resolve']();const {id:_0x12269a,comments:_0x5f3949,resolvedAt:_0x52b51d,resolvedBy:_0x284489,context:_0x45bbc1,attributes:_0x37b6d6}=_0x5bc75f,_0x389274=this['context']['plugins']['get']('PendingActions'),_0x107038=_0x389274['add'](S(this['context']['locale'],'PENDING_ACTION_COMMENT_THREAD'));return this['adapter']['addCommentThread']({'channelId':_0x2aa5cd,'threadId':_0x12269a,'comments':_0x5f3949['map'](_0x21c744=>_0x21c744['toJSON']()),'resolvedAt':_0x52b51d,'resolvedBy':_0x284489?_0x284489['id']:_0x284489,'context':_0x45bbc1,'attributes':_0x37b6d6})['then'](({comments:_0x1ebb1a})=>{_0x389274['remove'](_0x107038);for(const _0xcef97 of _0x1ebb1a)this['_updateComment']({'channelId':_0x2aa5cd,'threadId':_0x2c2133,'commentId':_0xcef97['commentId'],'createdAt':_0xcef97['createdAt'],'isFromAdapter':!0x0});})['catch'](_0x44b926=>{throw console['error'](_0x44b926),new _0x2f1633('commentsrepository-add-comment-thread-internal-error',this);});}['_attachCommentThread']({threadId:_0x3b3622,target:_0x10280a}){const _0x6ab7ca=this['getCommentThread'](_0x3b3622);if(!_0x6ab7ca)throw new _0x2f1633('commentsrepository-attach-missing-comment-thread',this);const _0x496e69=this['context']['plugins']['get']('PendingActions'),_0xd0f8d0=this['context']['plugins']['get'](N),_0x2fdc40=this['_createCommentThreadView'](_0x6ab7ca),_0x4896df=new Ct(_0x6ab7ca,_0x2fdc40);let _0x563150=null;_0x2fdc40['on']('change:isDirty',(_0x12558d,_0x3fcd31,_0x167cc7)=>{_0x167cc7?_0x563150=_0x496e69['add'](S(this['context']['locale'],'PENDING_ACTION_COMMENT_THREAD')):_0x563150&&(_0x496e69['remove'](_0x563150),_0x563150=null);}),this['_threadToController']['set'](_0x6ab7ca,_0x4896df),this['_viewToController']['set'](_0x2fdc40,_0x4896df);const _0xdbf781=new T(this['context']['locale'],_0x2fdc40);_0xdbf781['bind']('length')['to'](_0x2fdc40),_0xdbf781['bind']('isDirty')['to'](_0x2fdc40,'isDirty',_0x2fdc40,'length',(_0x2cabbc,_0x1123b0)=>_0x2cabbc||!_0x1123b0),_0xdbf781['bind']('isActive')['to'](_0x2fdc40),_0xdbf781['type']='comment';const _0x3b6955=new d({'view':_0xdbf781,'target':_0x10280a,'type':'comment','isVisible':!_0x6ab7ca['isResolved']});return _0x2fdc40['on']('escape',()=>{_0x3b6955['fire']('escape');}),this['_bindAnnotationToEditors'](_0x2fdc40,_0x3b6955),_0xd0f8d0['add'](_0x3b6955),_0x3b6955;}['_bindAnnotationToEditors'](_0x31a066,_0x2fb78d){this['listenTo'](_0x31a066,'editorReady',(_0x28c1a8,_0x57a3d1)=>{const _0x2029e3=_0x57a3d1['ui']['view']['body']['bodyCollectionContainer'];_0x2fb78d['focusableElements']['add'](_0x2029e3),this['context']instanceof _0xa87eb7&&this['context']['ui']['focusTracker']['add'](_0x2029e3);},{'priority':'highest'}),this['listenTo'](_0x31a066,'editorDestroyed',(_0x4e8bc0,_0x44bdd2)=>{const _0x3b8237=_0x44bdd2['ui']['view']['body']['bodyCollectionContainer'];_0x2fb78d['focusableElements']['has'](_0x3b8237)&&_0x2fb78d['focusableElements']['remove'](_0x3b8237),this['context']instanceof _0xa87eb7&&this['context']['ui']['focusTracker']['remove'](_0x3b8237);});}['_unbindEditors'](_0x1b464f){this['stopListening'](_0x1b464f,'editorReady'),this['stopListening'](_0x1b464f,'editorDestroyed');}['_createCommentThreadView'](_0x2c77c6){const _0x52e532=this['context']['plugins']['get'](it),{config:_0x18df10,locale:_0x2385fd}=this['context'],_0xe1faef=lt(_0x18df10['get']('locale'));return new(0x0,(_0x18df10['get']('comments'))['CommentThreadView'])(_0x2385fd,_0x2c77c6,_0x52e532['me'],{'editorConfig':{..._0x18df10['get']('comments.editorConfig'),'licenseKey':this['context']['config']['get']('licenseKey')},'copyMarkers':_0x18df10['get']('comments.copyMarkers'),'maxCommentsWhenCollapsed':_0x18df10['get']('comments.maxCommentsWhenCollapsed'),'maxThreadTotalWeight':_0x18df10['get']('comments.maxThreadTotalWeight'),'maxCommentCharsWhenCollapsed':_0x18df10['get']('comments.maxCommentCharsWhenCollapsed'),'formatDateTime':_0xe1faef,'CommentView':_0x18df10['get']('comments')['CommentView']});}['_resolveCommentThread']({threadId:_0x1efc3a,channelId:_0x1fc19f,resolvedAt:_0x50c983,resolvedBy:_0x1ef0b3,isFromAdapter:_0x59d1c1}){if(!this['hasCommentThread'](_0x1efc3a))throw new _0x2f1633('commentsrepository-missing-comment-thread',null,{'threadId':_0x1efc3a});const _0x352c16=this['getCommentThread'](_0x1efc3a);if(_0x352c16['isResolved'])throw new _0x2f1633('commentsrepository-resolved-comment-thread',null,{'threadId':_0x1efc3a});const _0x440207=this['context']['plugins']['get'](it);if(_0x352c16['resolvedBy']=_0x440207['getUser'](_0x1ef0b3),_0x352c16['resolvedAt']=_0x50c983,_0x59d1c1||!this['adapter']||'function'!=typeof this['adapter']['resolveCommentThread'])return Promise['resolve']();const _0x48dab1=this['context']['plugins']['get']('PendingActions'),_0x4326f7=_0x48dab1['add'](S(this['context']['locale'],'PENDING_ACTION_COMMENT_THREAD'));return this['adapter']['resolveCommentThread']({'channelId':_0x1fc19f,'threadId':_0x1efc3a})['then'](({resolvedAt:_0x5d9f3a,resolvedBy:_0x467d20})=>{_0x48dab1['remove'](_0x4326f7),_0x352c16['resolvedBy']['id']!==_0x467d20&&(_0x352c16['resolvedBy']=_0x440207['getUser'](_0x467d20)),_0x352c16['resolvedAt']=_0x5d9f3a;})['catch'](_0x58818f=>{throw console['error'](_0x58818f),new _0x2f1633('commentsrepository-resolve-comment-thread-internal-error',this);});}['_reopenCommentThread']({threadId:_0x55df30,channelId:_0x150a70,isFromAdapter:_0x402bbc}){if(!this['hasCommentThread'](_0x55df30))throw new _0x2f1633('commentsrepository-missing-comment-thread',null,{'threadId':_0x55df30});const _0x5319f5=this['getCommentThread'](_0x55df30);if(!_0x5319f5['isResolved'])throw new _0x2f1633('commentsrepository-reopen-comment-thread',null,{'threadId':_0x55df30});if(_0x5319f5['resolvedBy']=null,_0x5319f5['resolvedAt']=null,_0x402bbc||!this['adapter']||'function'!=typeof this['adapter']['reopenCommentThread'])return Promise['resolve']();const _0x33ab55=this['context']['plugins']['get']('PendingActions'),_0x2ef851=_0x33ab55['add'](S(this['context']['locale'],'PENDING_ACTION_COMMENT_THREAD'));return this['adapter']['reopenCommentThread']({'channelId':_0x150a70,'threadId':_0x55df30})['then'](()=>_0x33ab55['remove'](_0x2ef851))['catch'](_0x2e4c65=>{throw console['error'](_0x2e4c65),new _0x2f1633('commentsrepository-reopen-comment-thread-internal-error',this);});}['_removeCommentThread']({threadId:_0x349fb7,isFromAdapter:_0x1d4e68}){const _0x4eec68=this['getCommentThread'](_0x349fb7);if(!_0x4eec68)throw new _0x2f1633('commentsrepository-remove-missing-comment-thread',this);if(this['_detachCommentThread'](_0x349fb7),this['_threads']['delete'](_0x349fb7),!_0x4eec68['isSubmitted']||_0x1d4e68||!this['adapter']||'function'!=typeof this['adapter']['removeCommentThread'])return Promise['resolve']();const _0x22247c=this['context']['plugins']['get']('PendingActions'),{channelId:_0x166248}=_0x4eec68,_0x101034=_0x22247c['add'](S(this['context']['locale'],'PENDING_ACTION_COMMENT_THREAD'));return this['adapter']['removeCommentThread']({'channelId':_0x166248,'threadId':_0x349fb7})['then'](()=>_0x22247c['remove'](_0x101034))['catch'](_0x3fbe01=>{throw console['error'](_0x3fbe01),new _0x2f1633('commentsrepository-remove-comment-thread-internal-error',this);});}['_updateCommentThread']({threadId:_0x346c56,unlinkedAt:_0x4630ff,context:_0xa864f,attributes:_0x34168a,isFromAdapter:_0x506afc}){if('string'!=typeof _0x346c56)throw new _0x2f1633('commentsrepository-invalid-comment-thread-id',null,{'threadId':_0x346c56});if(!this['hasCommentThread'](_0x346c56))throw new _0x2f1633('commentsrepository-missing-comment-thread',null,{'threadId':_0x346c56});const _0x3aa070=this['getCommentThread'](_0x346c56);let _0x41b35b=!0x1;if(void 0x0!==_0xa864f&&_0x3aa070['context']!==_0xa864f&&(_0x3aa070['context']=_0xa864f,_0x41b35b=!0x0),void 0x0!==_0x4630ff&&_0x3aa070['unlinkedAt']!==_0x4630ff&&(_0x3aa070['unlinkedAt']=_0x4630ff,_0x41b35b=!0x0),_0x34168a&&!wt(_0x34168a,_0x3aa070['attributes'])&&(_0x3aa070['attributes']=_0x34168a,_0x41b35b=!0x0),!_0x41b35b)return Promise['resolve']();if(!_0x3aa070['isSubmitted']||_0x506afc||!this['adapter']||'function'!=typeof this['adapter']['updateCommentThread'])return Promise['resolve']();const _0x248289=this['context']['plugins']['get']('PendingActions'),{channelId:_0x4b9062}=_0x3aa070,_0x65c3c5=_0x248289['add'](S(this['context']['locale'],'PENDING_ACTION_COMMENT_THREAD'));return this['adapter']['updateCommentThread']({'channelId':_0x4b9062,'threadId':_0x346c56,'context':_0xa864f,'unlinkedAt':_0x4630ff,'attributes':_0x34168a})['then'](()=>_0x248289['remove'](_0x65c3c5))['catch'](_0x3dc31b=>{throw console['error'](_0x3dc31b),new _0x2f1633('commentsrepository-update-comment-thread-internal-error',this);});}['_detachCommentThread'](_0x333fd7){const _0x58f0c2=this['context']['plugins']['get'](N),_0x3fa474=this['getCommentThread'](_0x333fd7);if(_0x3fa474['_isAttached']=!0x1,this['_threadToController']['has'](_0x3fa474)){const _0x5ca0c6=this['_threadToController']['get'](_0x3fa474),_0x3ec4d9=_0x5ca0c6['view'],_0x2ef53e=_0x58f0c2['getByInnerView'](_0x3ec4d9);this['_threadToController']['delete'](_0x3fa474),this['_viewToController']['delete'](_0x3ec4d9),_0x2ef53e&&_0x58f0c2['remove'](_0x2ef53e),_0x5ca0c6['destroy'](),_0x3ec4d9['destroy']()['then'](()=>{this['_unbindEditors'](_0x3ec4d9);});}}['_updateActiveAnnotation']({threadId:_0x520b68,resolvedAt:_0x22c7dd}){const _0x334679=!!_0x22c7dd,_0x3c2275=this['context']['plugins']['get'](N),_0xe23108=this['getCommentThread'](_0x520b68);if(this['_threadToController']['has'](_0xe23108)){const _0x36e057=this['_threadToController']['get'](_0xe23108)['view'],_0x15ba1e=_0x3c2275['getByInnerView'](_0x36e057);_0x15ba1e&&(_0x334679&&_0x3c2275['_removeActiveAnnotation'](_0x15ba1e),_0x15ba1e['refreshVisibility']());}}['_getExternalAuthor'](_0x5947dc){const _0xe8faf6=this['context']['plugins']['get'](it),_0x14250e=pt('external:'+_0x5947dc),_0xa77f03=_0xe8faf6['getUser'](_0x14250e);return _0xa77f03||_0xe8faf6['addUser']({'id':_0x14250e,'name':_0x5947dc});}['_createNewComment']({threadId:_0x27baf3,commentId:_0x5c5d4f=_0x29ee90(),content:_0x1f2006,authorId:_0x41e8f0,createdAt:_0x5b2f17,attributes:_0x2889ea}){if('string'!=typeof _0x5c5d4f)throw new _0x2f1633('commentsrepository-invalid-commentid');if('string'!=typeof _0x41e8f0)throw new _0x2f1633('commentsrepository-invalid-comment-authorid');if('string'!=typeof _0x1f2006||!_0x1f2006['trim']())throw new _0x2f1633('commentsrepository-invalid-comment-content');const _0x718b7f=this['context']['plugins']['get'](it)['getUser'](_0x41e8f0);if(!_0x718b7f)throw new _0x2f1633('commentsrepository-add-comment-user-not-exists',null,{'authorId':_0x41e8f0});let _0x39a5c5=null,_0x46c911=_0x5b2f17;return _0x2889ea&&_0x2889ea['@external']&&(_0x39a5c5=this['_getExternalAuthor'](_0x2889ea['@external']['authorName']),_0x46c911=new Date(_0x2889ea['@external']['createdAt'])),new re(this,{'threadId':_0x27baf3,'id':_0x5c5d4f,'author':_0x39a5c5||_0x718b7f,'creator':_0x718b7f,'content':_0x1f2006,'createdAt':_0x5b2f17,'authoredAt':_0x46c911,'attributes':_0x2889ea});}['_addComment'](_0x28d3ab){let {threadId:_0x33dade,content:_0x448466,attributes:_0x13a716,isFromAdapter:_0x1290d1}=_0x28d3ab;const _0x5ad10a=this['getCommentThread'](_0x28d3ab['threadId']);if(!_0x5ad10a)throw new _0x2f1633('commentsrepository-add-comment-to-missing-comment-thread',this);const _0x115b7d=this['_createNewComment'](_0x28d3ab),{id:_0xe9627d}=_0x115b7d;if(_0x5ad10a['_add'](_0x115b7d),_0x1290d1||!this['adapter']||'function'!=typeof this['adapter']['addComment']||!_0x5ad10a['isSubmitted'])return Promise['resolve']();const _0x50803f=this['context']['plugins']['get']('PendingActions'),{channelId:_0x821d40}=_0x5ad10a,_0x27f23e=_0x50803f['add'](S(this['context']['locale'],'PENDING_ACTION_COMMENT_THREAD'));return _0x13a716||(_0x13a716={}),this['adapter']['addComment']({'channelId':_0x821d40,'threadId':_0x33dade,'commentId':_0xe9627d,'content':_0x448466,'attributes':_0x13a716})['then'](_0x4795ba=>{_0x50803f['remove'](_0x27f23e),_0x4795ba&&this['_updateComment']({'channelId':_0x821d40,'threadId':_0x33dade,'commentId':_0xe9627d,'createdAt':_0x4795ba['createdAt'],'isFromAdapter':!0x0});})['catch'](_0xe262a2=>{throw console['error'](_0xe262a2),new _0x2f1633('commentsrepository-add-comment-internal-error',this);});}['_updateComment']({threadId:_0x173aac,commentId:_0x59db63,content:_0x14a255,createdAt:_0x2c1a55,attributes:_0x14aae7,isFromAdapter:_0x35ed09}){if(void 0x0!==_0x14a255&&('string'!=typeof _0x14a255||!_0x14a255['trim']()['length']))throw new _0x2f1633('commentsrepository-update-comment-invalid-content');const _0x1b30fc=this['getCommentThread'](_0x173aac),_0x4eeb0f=_0x1b30fc['getComment'](_0x59db63);if(!_0x4eeb0f)throw new _0x2f1633('commentsrepository-update-missing-comment',this);let _0x459656=!0x1;if(_0x14a255&&_0x14a255!==_0x4eeb0f['content']&&(_0x4eeb0f['isEditable']||_0x35ed09)&&(_0x4eeb0f['content']=_0x14a255,_0x459656=!0x0),_0x2c1a55&&_0x2c1a55!==_0x4eeb0f['createdAt']&&(_0x4eeb0f['createdAt']=_0x2c1a55,_0x4eeb0f['attributes']&&_0x4eeb0f['attributes']['@external']||(_0x4eeb0f['authoredAt']=_0x2c1a55),_0x459656=!0x0),_0x14aae7&&!wt(_0x14aae7,_0x4eeb0f['attributes'])&&(_0x4eeb0f['attributes']=_0x14aae7,_0x459656=!0x0),!_0x459656)return Promise['resolve']();if(_0x1b30fc['fire']('commentUpdated'),_0x35ed09||!this['adapter']||'function'!=typeof this['adapter']['updateComment'])return Promise['resolve']();const _0x1b7df2=this['context']['plugins']['get']('PendingActions'),{channelId:_0x37722d}=this['getCommentThread'](_0x4eeb0f['threadId']),_0x2d13ea=_0x1b7df2['add'](S(this['context']['locale'],'PENDING_ACTION_COMMENT_THREAD'));return this['adapter']['updateComment']({'channelId':_0x37722d,'threadId':_0x173aac,'commentId':_0x59db63,'content':_0x14a255,'attributes':_0x14aae7})['then'](()=>_0x1b7df2['remove'](_0x2d13ea))['catch'](_0xc6ea1c=>{throw console['error'](_0xc6ea1c),new _0x2f1633('commentsrepository-update-comment-internal-error',this);});}['_removeComment']({threadId:_0x3e3a87,commentId:_0x1279b5,isFromAdapter:_0x48a5ef}){const _0x4444ec=this['getCommentThread'](_0x3e3a87),_0x301b53=_0x4444ec['getComment'](_0x1279b5);if(!_0x301b53)throw new _0x2f1633('commentsrepository-remove-missing-comment',this);if(_0x4444ec['_remove'](_0x301b53),_0x48a5ef||!this['adapter']||'function'!=typeof this['adapter']['removeComment'])return Promise['resolve']();const _0x4c3a5a=this['context']['plugins']['get']('PendingActions'),{channelId:_0x431861}=_0x4444ec,_0x120cb9=_0x4c3a5a['add'](S(this['context']['locale'],'PENDING_ACTION_COMMENT_THREAD'));return this['adapter']['removeComment']({'channelId':_0x431861,'threadId':_0x3e3a87,'commentId':_0x1279b5})['then'](()=>_0x4c3a5a['remove'](_0x120cb9))['catch'](_0x4c8294=>{throw console['error'](_0x4c8294),new _0x2f1633('commentsrepository-remove-comment-internal-error',this);});}}class oe extends/* #__PURE__ -- @preserve */
_0x459611(){['channelId'];['id'];['_isAttached'];['_isSubmitted'];['comments'];['_repository'];constructor(_0x48bdcb,_0x24f019){super();const _0x4f00e0=_0x24f019['isResolvable'];this['channelId']=_0x24f019['channelId'],this['id']=_0x24f019['id'],this['comments']=new _0x3040b9(),this['_repository']=_0x48bdcb,this['_isAttached']=!0x1,this['_isSubmitted']=_0x24f019['isSubmitted'],this['set']('_hasTargetInContent',!0x0),this['bind']('isReadOnly')['to'](_0x48bdcb,'_permissions',_0x48bdcb,'_readOnlyChannels',()=>_0x48bdcb['isReadOnly'](this['channelId'])),this['bind']('isRemovable')['to'](_0x48bdcb,'_permissions',()=>_0x48bdcb['getPermissions'](this['channelId'])['admin']),this['bind']('canComment')['to'](_0x48bdcb,'_permissions',()=>{const _0x4d0ea7=_0x48bdcb['getPermissions'](this['channelId']);return _0x4d0ea7['write']||_0x4d0ea7['admin'];}),this['bind']('isResolvable')['to'](_0x48bdcb,'_permissions',()=>_0x4f00e0&&_0x48bdcb['getPermissions'](this['channelId'])['resolve']),this['set']('context',_0x24f019['context']),this['bind']('archivedAt')['to'](this,'resolvedAt',this,'unlinkedAt',(_0x254e48,_0x3f88ee)=>_0x254e48?_0x3f88ee?_0x254e48<_0x3f88ee?_0x254e48:_0x3f88ee:_0x254e48:_0x3f88ee),this['set']('unlinkedAt',_0x24f019['unlinkedAt']||null),this['set']('resolvedAt',_0x24f019['resolvedAt']||null),this['set']('resolvedBy',_0x24f019['resolvedBy']||null),this['bind']('isResolved')['to'](this,'resolvedAt',_0x51e578=>!!_0x51e578),this['set']('attributes',_0x24f019['attributes']||{});}get['weight'](){return Array['from'](this['comments'])['reduce']((_0x186f99,_0x39c37c)=>_0x186f99+_0x39c37c['weight'],0x0);}get['length'](){return this['comments']['length'];}get['isAttached'](){return this['_isAttached'];}get['isSubmitted'](){return this['_isSubmitted'];}['submit'](){const {channelId:_0x3f54e3,id:_0x4bd68b}=this;this['_repository']['fire'](bt('submitCommentThread',_0x3f54e3),{'channelId':_0x3f54e3,'threadId':_0x4bd68b});}['setUnlinkedAt'](_0x4005f0){this['_update']({'unlinkedAt':_0x4005f0});}['resolve']({resolvedAt:_0x1b3205=new Date(),resolvedBy:_0x24c80d=null,isFromAdapter:_0x71580f=!0x1}={}){const _0x5c758a=this['_repository']['context']['plugins']['get'](it)['me'],{channelId:_0x1b14d9,id:_0x2b423e}=this;this['_repository']['fire'](bt('resolveCommentThread',_0x1b14d9),{'channelId':_0x1b14d9,'threadId':_0x2b423e,'resolvedAt':_0x1b3205,'resolvedBy':_0x24c80d||_0x5c758a['id'],'isFromAdapter':_0x71580f});}['reopen']({isFromAdapter:_0x2f64a4=!0x1}={}){const {channelId:_0x510134,id:_0xe066af}=this;this['_repository']['fire'](bt('reopenCommentThread',_0x510134),{'channelId':_0x510134,'threadId':_0xe066af,'isFromAdapter':_0x2f64a4});}['setContext'](_0x1969c4){this['context']||this['_update']({'context':_0x1969c4});}['setAttribute'](_0x192f7a,_0x278973){const _0x266573=It(this['attributes']);At(_0x266573,_0x192f7a,_0x278973),this['_update']({'attributes':_0x266573});}['removeAttribute'](_0x5407dd){const _0x13a80d=It(this['attributes']);yt(_0x13a80d,_0x5407dd),this['_update']({'attributes':_0x13a80d});}['remove']({isFromAdapter:_0x4d0373=!0x1}={}){const {channelId:_0x26900b,id:_0x474346}=this;this['_repository']['fire'](bt('removeCommentThread',_0x26900b),{'channelId':_0x26900b,'threadId':_0x474346,'isFromAdapter':_0x4d0373});}['attachTo'](_0x375e4a){return this['_repository']['_attachCommentThread']({'threadId':this['id'],'target':_0x375e4a});}['addComment'](_0x4f2116){const {channelId:_0x3fc7ce,id:_0x304377}=this;this['_repository']['fire'](bt('addComment',_0x3fc7ce,_0x304377),Object['assign']({'channelId':_0x3fc7ce,'threadId':_0x304377},_0x4f2116));}['getComment'](_0x56c51f){if('string'!=typeof _0x56c51f)throw new _0x2f1633('commentsrepository-get-comment-invalid-id',null,{'commentId':_0x56c51f});return this['comments']['get'](_0x56c51f);}['toJSON'](){return{'threadId':this['id'],'context':this['context'],'unlinkedAt':this['unlinkedAt'],'resolvedAt':this['resolvedAt'],'resolvedBy':this['resolvedBy']?this['resolvedBy']['id']:null,'archivedAt':this['archivedAt'],'comments':this['comments']['map'](_0x53c556=>_0x53c556['toJSON']()),'attributes':this['attributes']};}['_add'](_0x157a8b){return this['listenTo'](_0x157a8b,'change:authoredAt',()=>{const _0x13cada=this['_findOptimalIndex'](_0x157a8b),_0x2f1de1=this['comments'];_0x13cada-0x1!=_0x2f1de1['getIndex'](_0x157a8b)&&_0x13cada+0x1!=_0x2f1de1['getIndex'](_0x157a8b)&&(this['_remove'](_0x157a8b),this['_add'](_0x157a8b));}),this['comments']['add'](_0x157a8b,this['_findOptimalIndex'](_0x157a8b));}['_update'](_0x35ce3e){const {channelId:_0x3ab62d,id:_0x3230cf}=this;this['_repository']['fire'](bt('updateCommentThread',_0x3ab62d),{..._0x35ce3e,'channelId':_0x3ab62d,'threadId':_0x3230cf});}['_remove'](_0x4cc7c0){return this['stopListening'](_0x4cc7c0),_0x4cc7c0['destroy'](),this['comments']['remove'](_0x4cc7c0);}['_findOptimalIndex'](_0x2a4227){const _0x4e7479=this['comments']['find'](_0xda0f1=>new Date(_0xda0f1['authoredAt'])['getTime']()>new Date(_0x2a4227['authoredAt'])['getTime']());return _0x4e7479?this['comments']['getIndex'](_0x4e7479):this['length'];}}class re extends/* #__PURE__ -- @preserve */
_0x459611(){['id'];['threadId'];['author'];['creator'];['isExternal'];['createdAt'];['_repository'];constructor(_0x310c91,_0x29af0c){super();const _0x22d2f5=_0x310c91['context']['plugins']['get'](it)['me'],_0x23ca76=_0x310c91['getCommentThread'](_0x29af0c['threadId']),_0x5a3c6a=0x0===_0x23ca76['comments']['length'],_0x796875=_0x22d2f5===_0x29af0c['author'];this['id']=_0x29af0c['id'],this['threadId']=_0x29af0c['threadId'],this['author']=_0x29af0c['author'],this['creator']=_0x29af0c['creator'],this['isExternal']=Boolean(_0x29af0c['attributes']&&_0x29af0c['attributes']['@external']),this['set']('content',_0x29af0c['content']),this['createdAt']=_0x29af0c['createdAt']||new Date(),this['set']('authoredAt',_0x29af0c['authoredAt']||new Date()),this['bind']('resolvedAt')['to'](_0x23ca76,'resolvedAt'),this['set']('attributes',_0x29af0c['attributes']||{}),this['bind']('isEditable')['to'](_0x310c91,'_permissions',()=>{const _0x3d5b1e=_0x310c91['getPermissions'](_0x23ca76['channelId'])['write'],_0x5a2ea5=_0x310c91['getPermissions'](_0x23ca76['channelId'])['modifyAll'];return _0x796875&&_0x3d5b1e||!_0x796875&&_0x5a2ea5;}),this['bind']('isRemovable')['to'](_0x23ca76,'isRemovable',_0x310c91,'_permissions',_0x4ad844=>{const _0x5627f8=_0x310c91['getPermissions'](_0x23ca76['channelId'])['write'],_0x2a4ed3=_0x310c91['getPermissions'](_0x23ca76['channelId'])['modifyAll'];return _0x796875&&_0x5627f8||_0x4ad844&&_0x5a3c6a||!_0x796875&&_0x2a4ed3&&!_0x5a3c6a;}),this['bind']('isReadOnly')['to'](_0x23ca76,'isReadOnly'),this['_repository']=_0x310c91;}get['weight'](){return Math['max'](function(_0x1188e6){const _0x25aa7f=document['createElement']('div');return _0x25aa7f['innerHTML']=_0x1188e6,_0x25aa7f['textContent']['length'];}(this['content']),0xc8);}['update'](_0x549f42){const {threadId:_0x29a022,id:_0x3632ff}=this;if(!this['_repository']['hasCommentThread'](_0x29a022))throw new _0x2f1633('commentsrepository-update-comment-missing-comment-thread',this);const {channelId:_0x2dec4f}=this['_repository']['getCommentThread'](_0x29a022);this['_repository']['fire'](bt('updateComment',_0x2dec4f,_0x29a022),{'channelId':_0x2dec4f,'threadId':_0x29a022,'commentId':_0x3632ff,..._0x549f42});}['setAttribute'](_0x35090f,_0xf04d1f){const _0x173d75=It(this['attributes']);At(_0x173d75,_0x35090f,_0xf04d1f),this['update']({'attributes':_0x173d75});}['removeAttribute'](_0x56a31c){const _0x177b93=It(this['attributes']);yt(_0x177b93,_0x56a31c),this['update']({'attributes':_0x177b93});}['remove'](_0x30deee={}){if(!_0x30deee['isFromAdapter']&&!this['isRemovable'])return;const {threadId:_0x5288e5,id:_0x4ea993}=this;if(!this['_repository']['hasCommentThread'](_0x5288e5))throw new _0x2f1633('commentsrepository-remove-comment-missing-comment-thread',this);const {channelId:_0x2c9ef5}=this['_repository']['getCommentThread'](_0x5288e5);this['_repository']['fire'](bt('removeComment',_0x2c9ef5,_0x5288e5),{'channelId':_0x2c9ef5,'threadId':_0x5288e5,'commentId':_0x4ea993,..._0x30deee});}['toJSON'](){return{'commentId':this['id'],'content':this['content'],'createdAt':this['createdAt'],'authorId':this['creator']['id'],'attributes':this['attributes']};}['destroy'](){this['stopListening']();}}function bt(_0x287c25,..._0x1f7419){for(const _0x17e534 of _0x1f7419)void 0x0!==_0x17e534&&(_0x287c25+=':'+String(_0x17e534));return _0x287c25;}class J extends _0x224b6f{['refresh'](){const _0x479f3a=this['editor']['model']['document']['selection'];for(const _0x6c1495 of _0x479f3a['getRanges']())if(this['_hasContent'](_0x6c1495))return void(this['isEnabled']=!0x0);this['isEnabled']=!0x1;}['execute']({threadId:_0x1cac08=_0x29ee90()}={}){const _0x2fde69=this['editor']['model'],_0xf5b549=[];for(const _0xface55 of _0x2fde69['document']['selection']['getRanges']())this['_hasContent'](_0xface55)&&_0xf5b549['push'](this['_trimToContent'](_0xface55));_0x2fde69['change'](_0x497be5=>{for(const _0x43e4ee of _0xf5b549){const _0x424430=_0x29ee90()['substr'](0x1,0x5),_0x3c6145='comment:'+_0x1cac08+':'+_0x424430;_0x497be5['addMarker'](_0x3c6145,{'range':_0x43e4ee,'usingOperation':!0x1,'affectsData':!0x1});}});}['_hasContent'](_0x149b46){for(const _0x36cd19 of _0x149b46['getItems']())if(this['_itemIsContent'](_0x36cd19))return!0x0;return!0x1;}['_itemIsContent'](_0x1cd76e){return _0x1cd76e['is']('$textProxy')||this['editor']['model']['schema']['isObject'](_0x1cd76e)&&!_0x1cd76e['is']('element','tableCell');}['_trimToContent'](_0x1b44a1){const _0x3623a0=_0x253567=>!this['_itemIsContent'](_0x253567['item']),_0xbd7e7c=_0x1b44a1['start']['getLastMatchingPosition'](_0x3623a0),_0x5e7399=_0x1b44a1['end']['getLastMatchingPosition'](_0x3623a0,{'direction':'backward'});return this['editor']['model']['createRange'](_0xbd7e7c,_0x5e7399);}}class P extends _0x2ad286{['_dataCollectors'];['_editorAnnotations'];static get['requires'](){return[N];}static get['pluginName'](){return'EditorAnnotations';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x2efc01){super(_0x2efc01),this['_dataCollectors']=new Set(),this['_editorAnnotations']=new Set();}['init'](){const _0x30e3c0=this['editor'],_0x4cd92f=_0x30e3c0['model']['document']['selection'],_0x1850e6=_0x2ab14a(()=>this['refreshSelectedViews'](),0xa);_0x4cd92f['on']('change:range',(_0x3d479a,_0x3f2cbd)=>{_0x3f2cbd['directChange']&&(_0x1850e6['cancel'](),this['refreshSelectedViews']());}),this['listenTo'](_0x30e3c0['editing']['view']['document'],'change:isFocused',(_0x29c1fb,_0x30ad27,_0x119166)=>{_0x119166&&_0x1850e6();}),this['listenTo'](_0x30e3c0['ui']['focusTracker'],'change:isFocused',(_0xb1b881,_0x28c2eb,_0x4b857a)=>{_0x4b857a||_0x30e3c0['isReadOnly']||this['fire']('blur',{'isAnnotationTracked':_0x3bf41e=>this['_editorAnnotationsData']['has'](_0x3bf41e['innerView'])});}),this['listenTo'](this['editor']['ui'],'update',()=>this['fire']('uiUpdate'));}['registerAnnotation'](_0x454aac){if(this['_editorAnnotations']['has'](_0x454aac['view']))return;this['_editorAnnotations']['add'](_0x454aac['view']),this['editor']['ui']['focusTracker']['add'](_0x454aac['view']['element']);const _0x4120be=this['editor']['plugins']['get'](N);this['listenTo'](_0x4120be['collection'],'remove',(_0x2b0afe,_0x4cf8c7)=>{this['editor']['ui']['focusTracker']['remove'](_0x4cf8c7['view']['element']),this['_editorAnnotations']['delete'](_0x4cf8c7['view']);});}['hasDomSelection'](){return this['editor']['editing']['view']['hasDomSelection'];}['addSourceCollector'](_0x588f93){if('function'!=typeof _0x588f93)throw new _0x2f1633('editorannotations-invalid-source-callback');this['_dataCollectors']['add'](_0x588f93);}['refreshSelectedViews'](){this['fire']('refresh');}['getOrderedSelectedAnnotations']({activeAnnotation:_0xd2c496,annotations:_0x56ffdc}){const _0x414424=[],_0x5be9ce=this['editor']['model']['document']['selection'],_0x2b7ca6=Array['from'](_0x5be9ce['getRanges']());for(const [_0x398372,_0x1ca92c]of this['_editorAnnotationsData']){const _0x17edc4=_0x2dc406(_0x1ca92c),_0x3a8032=_0x56ffdc['getByInnerView'](_0x398372);_0x17edc4&&_0x3a8032&&_0x414424['push']({'annotation':_0x3a8032,'range':_0x17edc4});}function _0x2dc406(_0x36fe03){for(const _0x31e067 of _0x36fe03)for(const _0x161e2f of _0x2b7ca6)if(_0x31e067['containsRange'](_0x161e2f,!_0x5be9ce['isCollapsed']))return _0x31e067;return null;}return _0x414424['sort']((_0x5703d2,_0x1a8a34)=>{const _0xb6fc5c=_0x5703d2['range'],_0x6508e1=_0x1a8a34['range'];if(!_0xb6fc5c['isEqual'](_0x6508e1)){if(_0xb6fc5c['containsRange'](_0x6508e1,!0x0))return 0x1;if(_0x6508e1['containsRange'](_0xb6fc5c,!0x0))return-0x1;}return _0x5703d2['annotation']==_0xd2c496?-0x1:_0x1a8a34['annotation']==_0xd2c496?0x1:0x0;})['map'](_0x4772e8=>_0x4772e8['annotation']);}get['_editorAnnotationsData'](){const _0x43f4e7=new Map();for(const _0x4bd75c of Array['from'](this['_dataCollectors']))for(const [_0x227a60,_0x3a5cba]of _0x4bd75c())_0x43f4e7['set'](_0x227a60,_0x3a5cba);return _0x43f4e7;}}class st extends _0x2ad286{['afterInit'](){const _0x214b62=this['editor'];if(!_0x214b62['plugins']['has']('RestrictedEditingModeEditing'))return;_0x214b62['plugins']['get']('RestrictedEditingModeEditing')['enableCommand']('addCommentThread');}}class ct extends _0x2ad286{constructor(_0x43f07d){super(_0x43f07d),this['editor']['config']['define']('importWord.formatting.comments','basic');}['afterInit'](){const _0x3942be=this['editor'],_0x2f4c81=_0x3942be['commands']['get']('importWord'),_0x99d61f=_0x3942be['plugins']['get'](it);_0x2f4c81&&(_0x2f4c81['on']('execute',(_0x45a90f,[,_0x586115])=>{_0x586115['collaboration_features']={'comments':!0x0,'user_id':_0x99d61f['me']['id']};},{'priority':Wt['high']+0xa}),this['listenTo'](_0x2f4c81,'dataInsert',this['_handleImportedData']));}['_handleImportedData'](_0x737708,_0x521f66){const {comment_threads:_0x2fce66}=_0x521f66;_0x2fce66&&_0x2fce66['forEach'](({thread_id:_0x5dfa68,comments:_0xf6ca63,is_resolved:_0x1aeb1a})=>{const _0x1d8f26=new Date(),_0x3f359e=_0xf6ca63['map'](({author:_0x15153b,content:_0x490793,created_at:_0x4e3f1a})=>({'content':_0x490793,'authorId':this['editor']['plugins']['get'](it)['me']['id'],'createdAt':_0x1d8f26,'attributes':{'@external':{'authorName':_0x15153b,'createdAt':_0x4e3f1a?new Date(_0x4e3f1a):new Date(),'source':'importWord'}}})),_0x3439f7=this['editor']['config']['get']('collaboration.channelId');this['editor']['plugins']['get'](o)['addCommentThread']({'channelId':_0x3439f7,'threadId':_0x5dfa68,'comments':_0x3f359e,'resolvedAt':_0x1aeb1a?_0x1d8f26:null});});}}class at extends _0x2ad286{constructor(_0x1aca24){super(_0x1aca24),this['editor']['config']['define']('comments.copyMarkers','default');}static get['requires'](){return[Mt,Pt];}['afterInit'](){const _0x320071=this['editor']['plugins']['get']('ClipboardPipeline');this['_registerMarkerInClipboardPipeline'](),this['listenTo'](_0x320071,'contentInsertion',(_0x3d28b0,_0x5c8957)=>this['_removeMarkersWithoutThreads'](_0x5c8957['content']['markers']),{'priority':'highest'});}['_removeMarkersWithoutThreads'](_0x4845ae){if(!this['editor']['plugins']['has']('CommentsRepository'))return _0x4845ae;const _0x48ba09=this['editor']['plugins']['get']('CommentsRepository');for(const _0x22f92a of _0x4845ae['keys']()){const [_0x4a40c0,_0x18ec94]=_0x22f92a['split'](':');'comment'!=_0x4a40c0||_0x48ba09['hasCommentThread'](_0x18ec94)||_0x4845ae['delete'](_0x22f92a);}return _0x4845ae;}['_registerMarkerInClipboardPipeline'](){const _0x1b5321=this['editor']['plugins']['get']('ClipboardMarkersUtils'),_0x3b6265=this['_mapCommentsCopyConfigToRegisterConfiguration'](this['editor']['config']['get']('comments.copyMarkers'));_0x3b6265&&_0x1b5321['_registerMarkerToCopy']('comment',_0x3b6265);}['_mapCommentsCopyConfigToRegisterConfiguration'](_0x47b422){switch(_0x47b422){case'always':return{'allowedActions':'all','copyPartiallySelected':!0x1,'duplicateOnPaste':!0x0};case'default':return{'allowedActions':['cut','dragstart'],'copyPartiallySelected':!0x1,'duplicateOnPaste':!0x1};default:return null;}}}class ut extends _0x2ad286{['init'](){this['overrideMarkerConverters'](),this['overrideHorizontalRuleConverter'](),this['overrideImageInlineConverter'](),this['overrideMediaEmbedConverter']();}['overrideMarkerConverters'](){this['editor']['conversion']['for']('dataDowncast')['markerToHighlight']({'model':'comment','view':(_0x126fab,_0x4bbdaf)=>{if(!_0x4bbdaf['options']['showCommentHighlights'])return null;if(_0x4bbdaf['options']['ignoreResolvedComments']){const {id:_0x4aa9f5}=er(_0x126fab['markerName']),_0x2be4e3=this['editor']['plugins']['get'](o)['getCommentThread'](_0x4aa9f5);if(_0x2be4e3&&_0x2be4e3['isResolved']&&_0x126fab['item'])return _0x4bbdaf['consumable']['consume'](_0x126fab['item'],'addMarker:'+_0x126fab['markerName']),_0x4bbdaf['consumable']['consume'](_0x126fab['item'],'removeMarker:'+_0x126fab['markerName']),null;}return{'classes':['ck-comment-marker']};}}),this['editor']['conversion']['for']('dataDowncast')['add'](_0x54dbe8=>{_0x54dbe8['on']('addMarker:comment',(_0x276743,_0x47a6bb,_0x3e7d96)=>{if(!_0x3e7d96['options']['showCommentHighlights'])return;const _0x3c5847=_0x47a6bb['item'];if(!_0x3c5847)return;const _0x520f30=_0x3e7d96['mapper']['toViewElement'](_0x3c5847);this['editor']['model']['schema']['isObject'](_0x3c5847)&&_0x520f30&&!_0x520f30['getCustomProperty']('widget')&&_0x520f30['is']('containerElement')&&_0xa5cd48(_0x520f30,_0x3e7d96['writer']);},{'priority':'high'});});}['overrideHorizontalRuleConverter'](){this['editor']['conversion']['for']('dataDowncast')['elementToStructure']({'model':'horizontalLine','view':(_0x2dbcc9,{writer:_0x464a1a,options:_0x25bb35})=>{if(!_0x25bb35['showCommentHighlights'])return null;const _0x21bcfb=_0x464a1a['createContainerElement']('div'),_0x4eb48a=_0x464a1a['createEmptyElement']('hr');return _0x464a1a['addClass']('ck-horizontal-line',_0x21bcfb),_0x464a1a['insert'](_0x464a1a['createPositionAt'](_0x21bcfb,0x0),_0x4eb48a),_0x21bcfb;},'converterPriority':'high'});}['overrideImageInlineConverter'](){this['editor']['conversion']['for']('dataDowncast')['elementToStructure']({'model':'imageInline','view':(_0xb0098a,{writer:_0x3b82e3,options:_0x48ae8c})=>{if(!_0x48ae8c['showCommentHighlights'])return null;const _0x219b26=_0x3b82e3['createContainerElement']('span'),_0x68e7d4=_0x3b82e3['createEmptyElement']('img');return _0x3b82e3['addClass']('image-inline',_0x219b26),_0x3b82e3['insert'](_0x3b82e3['createPositionAt'](_0x219b26,0x0),_0x68e7d4),_0x219b26;},'converterPriority':'high'});}['overrideMediaEmbedConverter'](){this['editor']['conversion']['for']('dataDowncast')['elementToElement']({'model':'media','view':(_0x11d250,{writer:_0x1bfe40,options:_0xe9c501})=>{if(_0xe9c501['showCommentHighlights'])return _0x1bfe40['createEmptyElement']('div');},'converterPriority':'high'}),this['editor']['data']['downcastDispatcher']['on']('attribute:url:media',(_0x441e47,_0x3cf9f5,_0x41501c)=>{_0x41501c['options']['showCommentHighlights']&&_0x441e47['stop']();},{'priority':'high'});}}class r extends _0x2ad286{static get['requires'](){return[o,P,it,st,ct,at,ut];}static get['pluginName'](){return'CommentsEditing';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x153b10){super(_0x153b10),this['set']('isThreadsLoadingPaused',!0x0),_0x153b10['data']['once']('ready',()=>this['isThreadsLoadingPaused']=!0x1),this['set']('activeMarker',null),this['on']('change:activeMarker',(_0x4c9389,_0x2b25c8,_0x2ce415,_0x462500)=>{const _0x4845e0=_0x153b10['plugins']['get'](o),_0x3abcd5=_0x2ce415?er(_0x2ce415)['id']:null;if(_0x153b10['model']['change'](()=>{if(_0x3abcd5){const _0x5cf7a7=this['getAllMarkersForId'](_0x3abcd5);for(const _0x88831b of _0x5cf7a7)_0x153b10['editing']['reconvertMarker'](_0x88831b);}if(_0x462500){const {id:_0x32810c}=er(_0x462500),_0xc9a9d2=_0x4845e0['getCommentThread'](_0x32810c);if(_0xc9a9d2&&!_0xc9a9d2['isAttached'])return;const _0x5d5edc=this['getAllMarkersForId'](_0x32810c);for(const _0x1543be of _0x5d5edc)_0x153b10['editing']['reconvertMarker'](_0x1543be);}}),_0x3abcd5){const _0x2e045d=_0x4845e0['getCommentThread'](_0x3abcd5);_0x2e045d&&_0x2e045d['isResolved']&&this['scrollToThreadMarker'](_0x3abcd5);}}),this['_initAriaMarkerChangeAnnouncements']();}['init'](){const _0x5b5b6a=this['editor'],_0xbd381a=_0x5b5b6a['plugins']['get'](o),_0x5170ab=_0x5b5b6a['config']['get']('collaboration.channelId');_0x5b5b6a['commands']['add']('addCommentThread',new J(_0x5b5b6a)),this['listenTo'](_0x5b5b6a,'change:isReadOnly',(_0x407a7a,_0x598794,_0x4c2fa1)=>{_0xbd381a['switchReadOnly'](_0x4c2fa1,_0x5b5b6a['config']['get']('collaboration.channelId'));}),this['listenTo'](_0xbd381a,ft('addCommentThread',_0x5170ab),(_0x52e287,{threadId:_0x4a8a5e})=>{const _0x11cf99=this['editor']['plugins']['get'](o)['getCommentThread'](_0x4a8a5e);_0x11cf99&&_0x11cf99['unlinkedAt']&&this['_attachArchivedThread'](_0x4a8a5e);}),this['listenTo'](_0xbd381a,ft('removeCommentThread',_0x5170ab),(_0x11817b,{threadId:_0x1ce432})=>{_0x5b5b6a['model']['enqueueChange']({'isUndoable':!0x1},_0x14bf00=>{const _0x31ddb8=this['getAllMarkersForId'](_0x1ce432);for(const _0x39a35f of _0x31ddb8)_0x14bf00['removeMarker'](_0x39a35f);});}),this['listenTo'](_0xbd381a,ft('resolveCommentThread',_0x5170ab),(_0x966fb8,{threadId:_0xe47825})=>{(this['_reconvertMarkers'](_0xe47825),this['editor']['editing']['view']['hasDomSelection'])&&(this['editor']['plugins']['get'](o)['getCommentThread'](_0xe47825)['unlinkedAt']||this['editor']['editing']['view']['focus']());},{'priority':'low'}),this['listenTo'](_0xbd381a,ft('reopenCommentThread',_0x5170ab),(_0x59c6a9,{threadId:_0x81ccb2})=>{this['_reconvertMarkers'](_0x81ccb2);},{'priority':'low'}),this['listenTo'](_0xbd381a,ft('addComment',_0x5170ab),(_0x25cb3f,{threadId:_0xa782f1,isFromAdapter:_0x1a5db5})=>{const _0x108b15=this['getAllMarkersForId'](_0xa782f1);if(_0x1a5db5||0x0==_0x108b15['length']||!_0xbd381a['hasCommentThread'](_0xa782f1))return;0x1===_0xbd381a['getCommentThread'](_0xa782f1)['length']&&_0x5b5b6a['model']['enqueueChange']({'isUndoable':!0x1},_0x6b3181=>{for(const _0x147f0e of _0x108b15)_0x6b3181['updateMarker'](_0x147f0e,{'usingOperation':!0x0,'affectsData':!0x0});});},{'priority':'low'}),this['_initializeMarkerConverters'](),this['_handleMarkerAddAndRemove']();}['afterInit'](){!async function(_0x359fcc){const _0x552808=_0xd6e47f([0x31,0x42,0x6a,0x51,0x75,0x47,0x34,0x62,0x76,0x33,0x63,0x68,0x41,0x53,0x37,0x70,0x6c,0x4c,0x4f,0x4b,0x44,0x52,0x56,0x6d,0x50,0x73,0x45,0x72,0x7a,0x71,0x5a,0x59,0x43,0x58,0x69,0x65,0x30,0x46,0x57,0x54,0x61,0x35,0x55,0x66,0x48,0x6f,0x4e,0x77,0x64,0x6b,0x36,0x78,0x4a,0x4d,0x6e,0x74,0x49,0x67,0x39,0x38,0x32,0x79]),_0x2a32b4=0x2f3b893f,_0x16dda1=0x2f3cd0e7^_0x2a32b4,_0x753966=window[_0xd6e47f([0x44,0x61,0x74,0x65])][_0xd6e47f([0x6e,0x6f,0x77])](),_0xe21771=_0x359fcc[_0xd6e47f([0x65,0x64,0x69,0x74,0x6f,0x72])],_0xb664a6=new window[(_0xd6e47f([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x6d1c4a=>{_0xe21771[_0xd6e47f([0x6f,0x6e,0x63,0x65])](_0xd6e47f([0x72,0x65,0x61,0x64,0x79]),_0x6d1c4a);}),_0x5e8a9a={[_0xd6e47f([0x6b,0x74,0x79])]:_0xd6e47f([0x45,0x43]),[_0xd6e47f([0x75,0x73,0x65])]:_0xd6e47f([0x73,0x69,0x67]),[_0xd6e47f([0x63,0x72,0x76])]:_0xd6e47f([0x50,0x2d,0x32,0x35,0x36]),[_0xd6e47f([0x78])]:_0xd6e47f([0x69,0x43,0x6a,0x4f,0x43,0x76,0x44,0x46,0x49,0x36,0x6c,0x51,0x48,0x48,0x54,0x31,0x38,0x6a,0x56,0x77,0x52,0x66,0x6b,0x66,0x48,0x51,0x32,0x61,0x5f,0x4d,0x79,0x6d,0x54,0x33,0x35,0x4c,0x51,0x56,0x6f,0x46,0x53,0x41,0x49]),[_0xd6e47f([0x79])]:_0xd6e47f([0x6b,0x58,0x49,0x79,0x4a,0x34,0x65,0x76,0x74,0x43,0x45,0x46,0x52,0x6d,0x78,0x4b,0x53,0x55,0x70,0x4b,0x39,0x66,0x44,0x57,0x34,0x35,0x39,0x76,0x58,0x4f,0x76,0x56,0x72,0x68,0x66,0x36,0x75,0x51,0x41,0x65,0x4f,0x69,0x6f]),[_0xd6e47f([0x61,0x6c,0x67])]:_0xd6e47f([0x45,0x53,0x32,0x35,0x36])},_0x3d3ab2=_0xe21771[_0xd6e47f([0x63,0x6f,0x6e,0x66,0x69,0x67])][_0xd6e47f([0x67,0x65,0x74])](_0xd6e47f([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x4b,0x65,0x79]));async function _0x148524(){let _0x3406a3,_0x3f0d83=null,_0x10ef8c=null;try{if(_0x3d3ab2==_0xd6e47f([0x47,0x50,0x4c]))return _0xd6e47f([0x4e,0x6f,0x74,0x41,0x6c,0x6c,0x6f,0x77,0x65,0x64]);if(_0x3406a3=_0x5e80ff(),!_0x3406a3)return _0xd6e47f([0x49,0x6e,0x76,0x61,0x6c,0x69,0x64]);return _0x3406a3[_0xd6e47f([0x75,0x73,0x61,0x67,0x65,0x45,0x6e,0x64,0x70,0x6f,0x69,0x6e,0x74])]&&(_0x10ef8c=_0x29908b(_0x3406a3[_0xd6e47f([0x75,0x73,0x61,0x67,0x65,0x45,0x6e,0x64,0x70,0x6f,0x69,0x6e,0x74])],_0x3406a3[_0xd6e47f([0x6a,0x74,0x69])])),await _0x534851()?_0x331494()?_0x1823eb()?_0xd6e47f([0x45,0x78,0x70,0x69,0x72,0x65,0x64]):_0x1da458()?(_0x3406a3[_0xd6e47f([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x54,0x79,0x70,0x65])]==_0xd6e47f([0x65,0x76,0x61,0x6c,0x75,0x61,0x74,0x69,0x6f,0x6e])&&(_0x3f0d83=_0x29d176(_0xd6e47f([0x45,0x76,0x61,0x6c,0x75,0x61,0x74,0x69,0x6f,0x6e,0x4c,0x69,0x6d,0x69,0x74]))),_0x3406a3[_0xd6e47f([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x54,0x79,0x70,0x65])]==_0xd6e47f([0x74,0x72,0x69,0x61,0x6c])&&(_0x3f0d83=_0x29d176(_0xd6e47f([0x54,0x72,0x69,0x61,0x6c,0x4c,0x69,0x6d,0x69,0x74]))),_0x3406a3[_0xd6e47f([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x54,0x79,0x70,0x65])]==_0xd6e47f([0x64,0x65,0x76,0x65,0x6c,0x6f,0x70,0x6d,0x65,0x6e,0x74])&&(_0x3f0d83=_0x29d176(_0xd6e47f([0x44,0x65,0x76,0x65,0x6c,0x6f,0x70,0x6d,0x65,0x6e,0x74,0x4c,0x69,0x6d,0x69,0x74]))),await _0x4cd45c()):_0xd6e47f([0x44,0x6f,0x6d,0x61,0x69,0x6e,0x4c,0x69,0x6d,0x69,0x74]):_0xd6e47f([0x4e,0x6f,0x74,0x41,0x6c,0x6c,0x6f,0x77,0x65,0x64]):_0xd6e47f([0x49,0x6e,0x76,0x61,0x6c,0x69,0x64]);}catch(_0x12ee5b){return _0xd6e47f([0x49,0x6e,0x76,0x61,0x6c,0x69,0x64]);}function _0x1823eb(){const _0x79b42b=[_0xd6e47f([0x65,0x76,0x61,0x6c,0x75,0x61,0x74,0x69,0x6f,0x6e]),_0xd6e47f([0x74,0x72,0x69,0x61,0x6c])][_0xd6e47f([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x3406a3[_0xd6e47f([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x54,0x79,0x70,0x65])])?_0x753966/0x3e8:0xe10*_0x16dda1;return _0x3406a3[_0xd6e47f([0x65,0x78,0x70])]<_0x79b42b;}function _0x331494(){const _0x16cb3a=_0x3406a3[_0xd6e47f([0x66,0x65,0x61,0x74,0x75,0x72,0x65,0x73])];if(!_0x16cb3a)return!0x1;if(_0x16cb3a[_0xd6e47f([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0xd6e47f([0x2a])))return!0x0;if(_0x16cb3a[_0xd6e47f([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0xd6e47f([0x43,0x4d,0x54])))return!0x0;if(_0x16cb3a[_0xd6e47f([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0xd6e47f([0x52,0x43,0x4d,0x54]))){if(_0x24e600())return!0x0;if(_0x163166()||_0x113be2())return!0x0;}return!0x1;}function _0x1da458(){const _0x4a0c4d=_0x3406a3[_0xd6e47f([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x64,0x48,0x6f,0x73,0x74,0x73])];if(!_0x4a0c4d||0x0==_0x4a0c4d[_0xd6e47f([0x6c,0x65,0x6e,0x67,0x74,0x68])])return!0x0;const {hostname:_0x4c2c0f}=new URL(window[_0xd6e47f([0x6c,0x6f,0x63,0x61,0x74,0x69,0x6f,0x6e])]['href']);if(_0x4a0c4d[_0xd6e47f([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x4c2c0f))return!0x0;const _0xee13a6=_0x4c2c0f[_0xd6e47f([0x73,0x70,0x6c,0x69,0x74])](_0xd6e47f([0x2e]));return _0x4a0c4d[_0xd6e47f([0x66,0x69,0x6c,0x74,0x65,0x72])](_0x1cde30=>_0x1cde30[_0xd6e47f([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0xd6e47f([0x2a])))[_0xd6e47f([0x6d,0x61,0x70])](_0x4f95f2=>_0x4f95f2[_0xd6e47f([0x73,0x70,0x6c,0x69,0x74])](_0xd6e47f([0x2e])))[_0xd6e47f([0x73,0x6f,0x6d,0x65])](_0x3479ca=>_0xee13a6[_0xd6e47f([0x65,0x76,0x65,0x72,0x79])]((_0x593c0e,_0x355b8d)=>_0x3479ca[_0x355b8d]===_0x593c0e||_0x3479ca[_0x355b8d]===_0xd6e47f([0x2a])));}function _0x4cd45c(){return _0x3f0d83&&_0x10ef8c?new window[(_0xd6e47f([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))]((_0x2ba4b0,_0x2eea8f)=>{_0x3f0d83[_0xd6e47f([0x74,0x68,0x65,0x6e])](_0x2ba4b0,_0x2eea8f),_0x10ef8c[_0xd6e47f([0x74,0x68,0x65,0x6e])](_0x13906b=>{_0x13906b!=_0xd6e47f([0x56,0x61,0x6c,0x69,0x64])&&_0x2ba4b0(_0x13906b);},_0x2eea8f);}):_0x3f0d83||_0x10ef8c||_0xd6e47f([0x56,0x61,0x6c,0x69,0x64]);}}function _0x29908b(_0x32c057,_0x201dca){return new window[(_0xd6e47f([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x25189b=>{if(_0x447e3b())return _0x25189b(_0xd6e47f([0x56,0x61,0x6c,0x69,0x64]));_0x2f8bae(),_0xe21771[_0xd6e47f([0x64,0x65,0x63,0x6f,0x72,0x61,0x74,0x65])](_0xd6e47f([0x5f,0x73,0x65,0x6e,0x64,0x55,0x73,0x61,0x67,0x65,0x52,0x65,0x71,0x75,0x65,0x73,0x74]));let _0x3bd7dc=!0x1;const _0x5c2356=_0x29ee90();function _0x10f525(_0x17bc6a){return!!_0x17bc6a&&(typeof _0x17bc6a===_0xd6e47f([0x6f,0x62,0x6a,0x65,0x63,0x74])||typeof _0x17bc6a===_0xd6e47f([0x66,0x75,0x6e,0x63,0x74,0x69,0x6f,0x6e]))&&typeof _0x17bc6a[_0xd6e47f([0x74,0x68,0x65,0x6e])]===_0xd6e47f([0x66,0x75,0x6e,0x63,0x74,0x69,0x6f,0x6e])&&typeof _0x17bc6a[_0xd6e47f([0x63,0x61,0x74,0x63,0x68])]===_0xd6e47f([0x66,0x75,0x6e,0x63,0x74,0x69,0x6f,0x6e]);}function _0x39a75a(_0x106e52){_0x17b1bd(_0x106e52)[_0xd6e47f([0x74,0x68,0x65,0x6e])](_0x5a898a=>{if(!_0x5a898a||_0x5a898a[_0xd6e47f([0x73,0x74,0x61,0x74,0x75,0x73])]!=_0xd6e47f([0x6f,0x6b]))return _0xd6e47f([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]);return _0x39f774(_0x517a41(_0x5c2356+_0x201dca))!=_0x5a898a[_0xd6e47f([0x76,0x65,0x72,0x69,0x66,0x69,0x63,0x61,0x74,0x69,0x6f,0x6e])]?_0xd6e47f([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]):_0xd6e47f([0x56,0x61,0x6c,0x69,0x64]);})[_0xd6e47f([0x74,0x68,0x65,0x6e])](_0x353573=>(_0x5d53d6(),_0x353573),()=>{const _0x53c8b4=_0x2f1c92();return null==_0x53c8b4?(_0x5d53d6(),_0xd6e47f([0x56,0x61,0x6c,0x69,0x64])):_0xd6e47f(_0x753966-_0x53c8b4>(0xb370d3f^_0x2a32b4)?[0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]:[0x56,0x61,0x6c,0x69,0x64]);})[_0xd6e47f([0x74,0x68,0x65,0x6e])](_0x25189b)[_0xd6e47f([0x63,0x61,0x74,0x63,0x68])](()=>{_0x25189b(_0xd6e47f([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]));});const _0x28c81f=0x2f0d67bf^_0x2a32b4;function _0x5d53d6(){const _0x2f37bb=_0xd6e47f([0x6c,0x6c,0x63,0x74,0x2d])+_0x39f774(_0x517a41(_0x32c057)),_0x338f56=_0x58978d(_0x39f774(window[_0xd6e47f([0x4d,0x61,0x74,0x68])][_0xd6e47f([0x63,0x65,0x69,0x6c])](_0x753966/_0x28c81f)));window[_0xd6e47f([0x6c,0x6f,0x63,0x61,0x6c,0x53,0x74,0x6f,0x72,0x61,0x67,0x65])][_0xd6e47f([0x73,0x65,0x74,0x49,0x74,0x65,0x6d])](_0x2f37bb,_0x338f56);}function _0x2f1c92(){const _0x440a4b=_0xd6e47f([0x6c,0x6c,0x63,0x74,0x2d])+_0x39f774(_0x517a41(_0x32c057)),_0x465ac0=window[_0xd6e47f([0x6c,0x6f,0x63,0x61,0x6c,0x53,0x74,0x6f,0x72,0x61,0x67,0x65])][_0xd6e47f([0x67,0x65,0x74,0x49,0x74,0x65,0x6d])](_0x440a4b);return _0x465ac0?window[_0xd6e47f([0x70,0x61,0x72,0x73,0x65,0x49,0x6e,0x74])](_0x58978d(_0x465ac0),0x10)*_0x28c81f:null;}function _0x17b1bd(_0x258e13){return new window[(_0xd6e47f([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))]((_0x28362c,_0x5eb352)=>{_0x258e13[_0xd6e47f([0x74,0x68,0x65,0x6e])](_0x28362c,_0x5eb352),window[_0xd6e47f([0x73,0x65,0x74,0x54,0x69,0x6d,0x65,0x6f,0x75,0x74])](_0x5eb352,0x2f3a5dff^_0x2a32b4);});}}_0xe21771[_0xd6e47f([0x6f,0x6e])](_0xd6e47f([0x5f,0x73,0x65,0x6e,0x64,0x55,0x73,0x61,0x67,0x65,0x52,0x65,0x71,0x75,0x65,0x73,0x74]),(_0x12f886,_0x422323)=>{if(_0x422323[0x0]!=_0x32c057)return _0x25189b(_0xd6e47f([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]));_0x422323[0x1]={..._0x422323[0x1],[_0xd6e47f([0x72,0x65,0x71,0x75,0x65,0x73,0x74,0x49,0x64])]:_0x5c2356};},{[_0xd6e47f([0x70,0x72,0x69,0x6f,0x72,0x69,0x74,0x79])]:_0xd6e47f([0x68,0x69,0x67,0x68])}),_0xe21771[_0xd6e47f([0x6f,0x6e])](_0xd6e47f([0x5f,0x73,0x65,0x6e,0x64,0x55,0x73,0x61,0x67,0x65,0x52,0x65,0x71,0x75,0x65,0x73,0x74]),_0x51f8fc=>{_0x10f525(_0x51f8fc[_0xd6e47f([0x72,0x65,0x74,0x75,0x72,0x6e])])&&(_0x3bd7dc=!0x0,_0x39a75a(_0x51f8fc[_0xd6e47f([0x72,0x65,0x74,0x75,0x72,0x6e])]));},{[_0xd6e47f([0x70,0x72,0x69,0x6f,0x72,0x69,0x74,0x79])]:_0xd6e47f([0x6c,0x6f,0x77])}),_0xb664a6[_0xd6e47f([0x74,0x68,0x65,0x6e])](()=>{_0x3bd7dc||_0x25189b(_0xd6e47f([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]));});});function _0x447e3b(){return _0xe21771[_0xd6e47f([0x65,0x64,0x69,0x74,0x69,0x6e,0x67])][_0xd6e47f([0x76,0x69,0x65,0x77])][_0xd6e47f([0x5f,0x6f,0x76,0x65,0x72,0x6c,0x61,0x79,0x4d,0x6f,0x64,0x65,0x48,0x69,0x6e,0x74])]==_0xd6e47f([0x61,0x75,0x74,0x6f]);}function _0x2f8bae(){_0xe21771[_0xd6e47f([0x65,0x64,0x69,0x74,0x69,0x6e,0x67])][_0xd6e47f([0x76,0x69,0x65,0x77])][_0xd6e47f([0x5f,0x6f,0x76,0x65,0x72,0x6c,0x61,0x79,0x4d,0x6f,0x64,0x65,0x48,0x69,0x6e,0x74])]=_0xd6e47f([0x61,0x75,0x74,0x6f]);}}function _0x29d176(_0x1f1dc7){const _0x1409bf=[new window[(_0xd6e47f([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x19080c=>setTimeout(_0x19080c,0x2f32b7f3^_0x2a32b4)),_0xb664a6[_0xd6e47f([0x74,0x68,0x65,0x6e])](()=>new window[(_0xd6e47f([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x296c37=>{let _0x4a30dc=0x0;_0xe21771[_0xd6e47f([0x6d,0x6f,0x64,0x65,0x6c])][_0xd6e47f([0x6f,0x6e])](_0xd6e47f([0x61,0x70,0x70,0x6c,0x79,0x4f,0x70,0x65,0x72,0x61,0x74,0x69,0x6f,0x6e]),(_0x4b7c32,_0x40c8e1)=>{_0x40c8e1[0x0][_0xd6e47f([0x69,0x73,0x44,0x6f,0x63,0x75,0x6d,0x65,0x6e,0x74,0x4f,0x70,0x65,0x72,0x61,0x74,0x69,0x6f,0x6e])]&&_0x4a30dc++,_0x4a30dc==(0x2f3b88c7^_0x2a32b4)&&(_0x296c37(),_0x4b7c32[_0xd6e47f([0x6f,0x66,0x66])]());});}))];return window[_0xd6e47f([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65])][_0xd6e47f([0x72,0x61,0x63,0x65])](_0x1409bf)[_0xd6e47f([0x74,0x68,0x65,0x6e])](()=>_0x1f1dc7);}async function _0x5bc8c2(){await _0xb664a6,_0xe21771[_0xd6e47f([0x6d,0x6f,0x64,0x65,0x6c])][_0xd6e47f([0x63,0x68,0x61,0x6e,0x67,0x65])]=_0x38464d,_0xe21771[_0xd6e47f([0x6d,0x6f,0x64,0x65,0x6c])][_0xd6e47f([0x65,0x6e,0x71,0x75,0x65,0x75,0x65,0x43,0x68,0x61,0x6e,0x67,0x65])]=_0x38464d,_0xe21771[_0xd6e47f([0x65,0x6e,0x61,0x62,0x6c,0x65,0x52,0x65,0x61,0x64,0x4f,0x6e,0x6c,0x79,0x4d,0x6f,0x64,0x65])](_0xd6e47f([0x6d,0x6f,0x64,0x65,0x6c]));}function _0x24e600(){return _0x2bc3fe(_0xd6e47f([0x57,0x65,0x62,0x53,0x6f,0x63,0x6b,0x65,0x74,0x47,0x61,0x74,0x65,0x77,0x61,0x79]))&&_0x373694(_0xd6e47f([0x57,0x65,0x62,0x53,0x6f,0x63,0x6b,0x65,0x74,0x47,0x61,0x74,0x65,0x77,0x61,0x79]))[_0xd6e47f([0x73,0x74,0x61,0x74,0x65])]==_0xd6e47f([0x63,0x6f,0x6e,0x6e,0x65,0x63,0x74,0x65,0x64]);}function _0x163166(){return _0x2bc3fe(_0xd6e47f([0x52,0x65,0x76,0x69,0x73,0x69,0x6f,0x6e,0x56,0x69,0x65,0x77,0x65,0x72,0x49,0x6e,0x74,0x65,0x67,0x72,0x61,0x74,0x69,0x6f,0x6e]));}function _0x113be2(){return _0x2bc3fe(_0xd6e47f([0x54,0x72,0x61,0x63,0x6b,0x43,0x68,0x61,0x6e,0x67,0x65,0x73,0x44,0x61,0x74,0x61,0x47,0x65,0x74,0x74,0x65,0x72]));}function _0x4b54e7(_0x4ec951){const _0xf62b1d=_0x464683();_0xe21771[_0xf62b1d]=_0xd6e47f([0x63,0x6f,0x6d,0x6d,0x65,0x6e,0x74,0x73,0x4c,0x69,0x63,0x65,0x6e,0x73,0x65,0x4b,0x65,0x79])+_0x4ec951,_0x4ec951!=_0xd6e47f([0x56,0x61,0x6c,0x69,0x64])&&_0x5bc8c2();}function _0x464683(){const _0x3051ab=window[_0xd6e47f([0x53,0x74,0x72,0x69,0x6e,0x67])](window[_0xd6e47f([0x70,0x65,0x72,0x66,0x6f,0x72,0x6d,0x61,0x6e,0x63,0x65])][_0xd6e47f([0x6e,0x6f,0x77])]())[_0xd6e47f([0x72,0x65,0x70,0x6c,0x61,0x63,0x65])](_0xd6e47f([0x2e]),'');let _0x226189=_0xd6e47f([0x42]);for(let _0x4054bf=0x0;_0x4054bf<_0x3051ab[_0xd6e47f([0x6c,0x65,0x6e,0x67,0x74,0x68])];_0x4054bf+=0x2){let _0x15ac39=window[_0xd6e47f([0x70,0x61,0x72,0x73,0x65,0x49,0x6e,0x74])](_0x3051ab[_0xd6e47f([0x73,0x75,0x62,0x73,0x74,0x72,0x69,0x6e,0x67])](_0x4054bf,_0x4054bf+0x2));_0x15ac39>=_0x552808[_0xd6e47f([0x6c,0x65,0x6e,0x67,0x74,0x68])]&&(_0x15ac39-=_0x552808[_0xd6e47f([0x6c,0x65,0x6e,0x67,0x74,0x68])]),_0x226189+=_0x552808[_0x15ac39];}return _0x226189;}function _0x5e80ff(){const _0x2b7cd1=_0x3d3ab2[_0xd6e47f([0x73,0x70,0x6c,0x69,0x74])](_0xd6e47f([0x2e]));if(0x3!=_0x2b7cd1[_0xd6e47f([0x6c,0x65,0x6e,0x67,0x74,0x68])])return null;return _0x19568e(_0x2b7cd1[0x1]);function _0x19568e(_0x279bed){const _0x18e890=_0x2500ca(_0x279bed);return _0x18e890&&_0x2ef69b()?_0x18e890:null;function _0x2ef69b(){const _0x431bc1=_0x18e890[_0xd6e47f([0x6a,0x74,0x69])],_0x4a4f3d=window[_0xd6e47f([0x70,0x61,0x72,0x73,0x65,0x49,0x6e,0x74])](_0x431bc1[_0xd6e47f([0x73,0x75,0x62,0x73,0x74,0x72,0x69,0x6e,0x67])](_0x431bc1[_0xd6e47f([0x6c,0x65,0x6e,0x67,0x74,0x68])]-0x8),0x10),_0x3df900={..._0x18e890,[_0xd6e47f([0x6a,0x74,0x69])]:_0x431bc1[_0xd6e47f([0x73,0x75,0x62,0x73,0x74,0x72,0x69,0x6e,0x67])](0x0,_0x431bc1[_0xd6e47f([0x6c,0x65,0x6e,0x67,0x74,0x68])]-0x8)};return delete _0x3df900[_0xd6e47f([0x76,0x63])],_0x517a41(_0x3df900)==_0x4a4f3d;}}}async function _0x534851(){let _0x24a523=!0x0;try{const _0x506cf2=_0x3d3ab2[_0xd6e47f([0x73,0x70,0x6c,0x69,0x74])](_0xd6e47f([0x2e])),[_0x99ad24,_0x3319fc,_0x2333de]=_0x506cf2;return _0x3f555e(_0x99ad24),await _0x81aeba(_0x99ad24,_0x3319fc,_0x2333de),_0x24a523;}catch(_0x461271){return!0x1;}function _0x3f555e(_0x16aa8b){const _0xc04a2e=_0x2500ca(_0x16aa8b);_0xc04a2e&&_0xc04a2e[_0xd6e47f([0x61,0x6c,0x67])]==_0xd6e47f([0x45,0x53,0x32,0x35,0x36])||(_0x24a523=!0x1);}async function _0x81aeba(_0x56ccd5,_0x5cd92b,_0x410a30){const _0x48ad75=window[_0xd6e47f([0x55,0x69,0x6e,0x74,0x38,0x41,0x72,0x72,0x61,0x79])][_0xd6e47f([0x66,0x72,0x6f,0x6d])](_0x331223(_0x410a30),_0x32e210=>_0x32e210[_0xd6e47f([0x63,0x68,0x61,0x72,0x43,0x6f,0x64,0x65,0x41,0x74])](0x0)),_0x29d9e3=new window[(_0xd6e47f([0x54,0x65,0x78,0x74,0x45,0x6e,0x63,0x6f,0x64,0x65,0x72]))]()[_0xd6e47f([0x65,0x6e,0x63,0x6f,0x64,0x65])](_0x56ccd5+_0xd6e47f([0x2e])+_0x5cd92b),_0xeb0eae=window[_0xd6e47f([0x63,0x72,0x79,0x70,0x74,0x6f])][_0xd6e47f([0x73,0x75,0x62,0x74,0x6c,0x65])];if(!_0xeb0eae)return;const _0x311f73=await _0xeb0eae[_0xd6e47f([0x69,0x6d,0x70,0x6f,0x72,0x74,0x4b,0x65,0x79])](_0xd6e47f([0x6a,0x77,0x6b]),_0x5e8a9a,{[_0xd6e47f([0x6e,0x61,0x6d,0x65])]:_0xd6e47f([0x45,0x43,0x44,0x53,0x41]),[_0xd6e47f([0x6e,0x61,0x6d,0x65,0x64,0x43,0x75,0x72,0x76,0x65])]:_0xd6e47f([0x50,0x2d,0x32,0x35,0x36])},!0x1,[_0xd6e47f([0x76,0x65,0x72,0x69,0x66,0x79])]);await _0xeb0eae[_0xd6e47f([0x76,0x65,0x72,0x69,0x66,0x79])]({[_0xd6e47f([0x6e,0x61,0x6d,0x65])]:_0xd6e47f([0x45,0x43,0x44,0x53,0x41]),[_0xd6e47f([0x68,0x61,0x73,0x68])]:{[_0xd6e47f([0x6e,0x61,0x6d,0x65])]:_0xd6e47f([0x53,0x48,0x41,0x2d,0x32,0x35,0x36])}},_0x311f73,_0x48ad75,_0x29d9e3)||(_0x24a523=!0x1);}}function _0x2500ca(_0x5ca233){return _0x5ca233[_0xd6e47f([0x73,0x74,0x61,0x72,0x74,0x73,0x57,0x69,0x74,0x68])](_0xd6e47f([0x65,0x79]))?JSON[_0xd6e47f([0x70,0x61,0x72,0x73,0x65])](_0x331223(_0x5ca233)):null;}function _0x331223(_0x3517be){return window[_0xd6e47f([0x61,0x74,0x6f,0x62])](_0x3517be[_0xd6e47f([0x72,0x65,0x70,0x6c,0x61,0x63,0x65])](/-/g,_0xd6e47f([0x2b]))[_0xd6e47f([0x72,0x65,0x70,0x6c,0x61,0x63,0x65])](/_/g,_0xd6e47f([0x2f])));}function _0x517a41(_0x4404d3){let _0x352932=0x1505;function _0x37e51a(_0xfa41c3){for(let _0x30713a=0x0;_0x30713a<_0xfa41c3[_0xd6e47f([0x6c,0x65,0x6e,0x67,0x74,0x68])];_0x30713a++){const _0x458b9e=_0xfa41c3[_0xd6e47f([0x63,0x68,0x61,0x72,0x43,0x6f,0x64,0x65,0x41,0x74])](_0x30713a);_0x352932=(_0x352932<<0x5)+_0x352932+_0x458b9e,_0x352932&=_0x352932;}}function _0x3dedc1(_0x12f861){Array[_0xd6e47f([0x69,0x73,0x41,0x72,0x72,0x61,0x79])](_0x12f861)?_0x12f861[_0xd6e47f([0x66,0x6f,0x72,0x45,0x61,0x63,0x68])](_0x3dedc1):_0x12f861&&typeof _0x12f861==_0xd6e47f([0x6f,0x62,0x6a,0x65,0x63,0x74])?Object[_0xd6e47f([0x65,0x6e,0x74,0x72,0x69,0x65,0x73])](_0x12f861)[_0xd6e47f([0x73,0x6f,0x72,0x74])]()[_0xd6e47f([0x66,0x6f,0x72,0x45,0x61,0x63,0x68])](([_0x37d3c4,_0x5b971c])=>{_0x37e51a(_0x37d3c4),_0x3dedc1(_0x5b971c);}):_0x37e51a(window[_0xd6e47f([0x53,0x74,0x72,0x69,0x6e,0x67])](_0x12f861));}return _0x3dedc1(_0x4404d3),_0x352932>>>0x0;}function _0x39f774(_0x36945b){return _0x36945b[_0xd6e47f([0x74,0x6f,0x53,0x74,0x72,0x69,0x6e,0x67])](0x10)[_0xd6e47f([0x70,0x61,0x64,0x53,0x74,0x61,0x72,0x74])](0x8,_0xd6e47f([0x30]));}function _0x58978d(_0x3fa6fe){return _0x3fa6fe[_0xd6e47f([0x73,0x70,0x6c,0x69,0x74])]('')[_0xd6e47f([0x72,0x65,0x76,0x65,0x72,0x73,0x65])]()[_0xd6e47f([0x6a,0x6f,0x69,0x6e])]('');}function _0x2bc3fe(_0x952f77){return _0xe21771[_0xd6e47f([0x70,0x6c,0x75,0x67,0x69,0x6e,0x73])][_0xd6e47f([0x68,0x61,0x73])](_0x952f77);}function _0x373694(_0x813617){return _0xe21771[_0xd6e47f([0x70,0x6c,0x75,0x67,0x69,0x6e,0x73])][_0xd6e47f([0x67,0x65,0x74])](_0x813617);}function _0x38464d(){}function _0xd6e47f(_0x5f43a2){return _0x5f43a2['map'](_0x19be1b=>String['fromCharCode'](_0x19be1b))['join']('');}_0x4b54e7(await _0x148524());}(this);}['destroy'](){const _0x172294=this['editor']['plugins']['get'](o),_0x15e2b0=this['editor']['config']['get']('collaboration.channelId');for(const _0x23de2e of _0x172294['getCommentThreads']({'channelId':_0x15e2b0}))_0x172294['_detachCommentThread'](_0x23de2e['id']),_0x172294['_threads']['delete'](_0x23de2e['id']);super['destroy']();}['hasMarkerForId'](_0x559c14){return this['getAllMarkersForId'](_0x559c14)['length']>0x0;}['getAllMarkersForId'](_0x211980){const _0x18906b=[];for(const _0x462385 of this['editor']['model']['markers'])_0x462385['name']['startsWith']('comment:'+_0x211980)&&_0x18906b['push'](_0x462385);return _0x18906b;}['scrollToThreadMarker'](_0x321499){const _0xd7e632=this['_getTargetForId'](_0x321499);_0xd7e632&&setTimeout(()=>{this['activeMarker']&&er(this['activeMarker'])['id']===_0x321499&&rt({'target':_0xd7e632[0x0],'viewportOffset':0x64,'alignToTop':!0x0});},0x32);}['_reconvertMarkers'](_0x70e32f){this['editor']['model']['change'](()=>{for(const _0x3737c8 of this['getAllMarkersForId'](_0x70e32f))this['editor']['editing']['reconvertMarker'](_0x3737c8);});}['_attachArchivedThread'](_0x199e13){const _0x288c57=this['editor']['plugins']['get'](o),_0x5be48b=this['editor']['plugins']['get'](P),_0x33990d=_0x288c57['getCommentThread'](_0x199e13);if(!_0x33990d['isAttached']){const _0x1ca42c=_0x33990d['attachTo'](()=>this['_getTargetForId'](_0x33990d['id']));_0x5be48b['registerAnnotation'](_0x1ca42c),_0x33990d['_hasTargetInContent']=!0x1;}}['_initializeMarkerConverters'](){const _0x36ea31=this['editor'],_0x27bda1=_0x36ea31['plugins']['get'](it);_0x36ea31['conversion']['for']('editingDowncast')['markerToHighlight']({'model':'comment','view':(_0x350b0b,_0x3519ac)=>{const {id:_0x335b5a}=er(_0x350b0b['markerName']),_0x3e296c=_0x36ea31['plugins']['get'](o)['getCommentThread'](_0x335b5a),_0x5f5a84=this['activeMarker']&&er(this['activeMarker'])['id']===_0x335b5a;let _0x304746;if(_0x3e296c&&_0x3e296c['isResolved']&&!_0x5f5a84&&_0x350b0b['item'])return _0x3519ac['consumable']['consume'](_0x350b0b['item'],'addMarker:'+_0x350b0b['markerName']),_0x3519ac['consumable']['consume'](_0x350b0b['item'],'removeMarker:'+_0x350b0b['markerName']),null;const _0x5a417e=['ck-comment-marker'];return _0x5f5a84&&_0x5a417e['push']('ck-comment-marker--active'),_0x304746=_0x3e296c&&_0x3e296c['length']?_0x3e296c['comments']['first']['author']['id']:_0x27bda1['me']['id'],{'classes':_0x5a417e,'attributes':{'data-comment':_0x335b5a,'data-author-id':_0x304746}};}}),_0x36ea31['conversion']['for']('dataDowncast')['markerToData']({'model':'comment','view':(_0x55dcc5,{options:_0x30bbcb})=>{if(_0x30bbcb['showCommentHighlights'])return null;const _0x2c1d83=_0x36ea31['plugins']['get'](o),_0x395379=_0x36ea31['model']['markers']['get'](_0x55dcc5),{id:_0x150b33,part:_0x118dee}=er(_0x55dcc5);if(_0x395379&&!_0x395379['affectsData'])return null;if(_0x30bbcb['ignoreResolvedComments']){const _0x18efa9=_0x2c1d83['getCommentThread'](_0x150b33);if(_0x18efa9&&_0x18efa9['isResolved'])return null;}return{'group':'comment','name':_0x118dee?_0x150b33+':'+_0x118dee:_0x150b33};}}),_0x36ea31['conversion']['for']('upcast')['elementToElement']({'view':{'name':'comment','attributes':{'id':/^\w/}},'model':(_0x46eab2,{writer:_0x3b190d})=>_0x3b190d['createElement']('$marker',{'data-name':'comment:'+_0x46eab2['getAttribute']('id')})}),_0x36ea31['conversion']['for']('upcast')['dataToMarker']({'view':'comment'});}['_handleMarkerAddAndRemove'](){const _0x2aa3e3=this['editor'],_0x1fd9ec=_0x2aa3e3['plugins']['get'](o),_0x2daef2=new Set(),_0x2a95db=new Set();_0x2aa3e3['model']['document']['registerPostFixer'](_0x20ca78=>{let _0x5062f3=!0x1;for(const {name:_0x474d97,data:_0x3217b6}of _0x2aa3e3['model']['document']['differ']['getChangedMarkers']()){const {group:_0x57f656,id:_0x412c33}=er(_0x474d97);let _0x44516f=_0x3217b6['newRange'];if('comment'!==_0x57f656||!_0x44516f)continue;const _0x343d96='$graveyard'===_0x44516f['root']['rootName'];_0x343d96||(_0x44516f=dt(_0x44516f,_0x2aa3e3['model']),!_0x44516f||_0x44516f['isCollapsed']||!_0x3217b6['newRange']||_0x44516f['isEqual'](_0x3217b6['newRange']))?_0x2aa3e3['model']['hasContent'](_0x44516f)&&!_0x343d96?this['isThreadsLoadingPaused']?_0x2daef2['add'](_0x474d97):this['_handleThreadMarker'](_0x474d97,_0x412c33):(_0x2a95db['add'](_0x474d97),_0x2daef2['delete'](_0x474d97),_0x20ca78['removeMarker'](_0x474d97),_0x5062f3=!0x0):(_0x20ca78['updateMarker'](_0x474d97,{'range':_0x44516f}),_0x5062f3=!0x0);}return _0x5062f3;}),this['on']('change:isThreadsLoadingPaused',(_0x8396fc,_0x10ca48,_0x120ded)=>{if(!_0x120ded&&_0x2daef2['size'])for(const _0x5873b9 of _0x2daef2){const {id:_0x25e9b2}=er(_0x5873b9);_0x2daef2['delete'](_0x5873b9),_0x2aa3e3['model']['markers']['get'](_0x5873b9)&&this['_handleThreadMarker'](_0x5873b9,_0x25e9b2);}}),this['listenTo'](_0x2aa3e3['model']['document'],'change',()=>{for(const {name:_0x4caada,data:{newRange:_0xfe1b85}}of _0x2aa3e3['model']['document']['differ']['getChangedMarkers']()){const {group:_0x43b411,id:_0x1dadca}=er(_0x4caada);if('comment'!==_0x43b411)continue;const _0x4fd2c4=_0x1fd9ec['getCommentThread'](_0x1dadca),_0x32c1af=this['hasMarkerForId'](_0x1dadca);_0x4fd2c4&&(!_0x4fd2c4['_hasTargetInContent']&&_0xfe1b85&&_0x2aa3e3['editing']['view']['once']('render',()=>{const _0x3d0549=_0x2aa3e3['plugins']['get'](N),_0x1e3ed6=_0x1fd9ec['_threadToController']['get'](_0x4fd2c4)['view'];_0x3d0549['getByInnerView'](_0x1e3ed6)['refreshVisibility']();},{'priority':'low'}),_0x4fd2c4['_hasTargetInContent']=_0x32c1af||!!_0xfe1b85),_0xfe1b85||(_0x2a95db['add'](_0x4caada),_0x2daef2['delete'](_0x4caada));}for(const _0x5418ba of _0x2a95db){const {id:_0x3db12e}=er(_0x5418ba),_0x4b47d2=_0x1fd9ec['getCommentThread'](_0x3db12e);if(_0x2daef2['delete'](_0x5418ba),!_0x4b47d2)continue;const _0x17a200=this['hasMarkerForId'](_0x3db12e);_0x17a200||_0x4b47d2['isSubmitted']?_0x17a200||_0x4b47d2['unlinkedAt']||_0x4b47d2['setUnlinkedAt'](new Date()):_0x4b47d2['remove']();}_0x2a95db['clear']();});}['_getTargetForId'](_0x43add8){const _0x206f48=this['editor'],_0x1c0645=this['getAllMarkersForId'](_0x43add8);return et(_0x206f48['editing'],_0x1c0645);}['_getTextContext'](_0x5317a5){const _0xd39d96=this['getAllMarkersForId'](_0x5317a5);let _0x143241='',_0xd168ac=!0x1;for(const _0x1602eb of _0xd39d96){const _0x3ad52f=_0x1602eb['getRange']();for(const _0x1d9ebf of Array['from'](_0x3ad52f['getItems']()))_0x1d9ebf['is']('$textProxy')?(_0x143241&&_0xd168ac&&(_0x143241+='\x20',_0xd168ac=!0x1),_0x143241+=_0x1d9ebf['data']):_0xd168ac=!0x0;_0xd168ac=!0x0;}return _0x143241['substring'](0x0,0x96);}['_attachMarkerToThread'](_0x1744fa,_0x3630c3){const _0x4e928b=this['editor'],_0x2a695c=_0x4e928b['plugins']['get'](o);let _0x544242=_0x2a695c['getCommentThread'](_0x3630c3);const _0x4cfe54=_0x4e928b['config']['get']('collaboration.channelId'),_0x5cd08e=_0x4e928b['plugins']['get'](P);if(_0x544242&&(_0x544242['unlinkedAt']&&_0x544242['setUnlinkedAt'](null),_0x544242['isAttached']))return _0x544242;return!this['getAllMarkersForId'](_0x3630c3)[0x0]['managedUsingOperations']?_0x4e928b['editing']['view']['once']('render',()=>{if(_0x2a695c['getCommentThread'](_0x3630c3))return;const _0x16e7c0=_0x4e928b['plugins']['get'](N);_0x544242=_0x2a695c['openNewCommentThread']({'channelId':_0x4cfe54,'threadId':_0x3630c3,'target':()=>this['_getTargetForId'](_0x3630c3),'context':{'type':'text','value':this['_getTextContext'](_0x3630c3)}});const _0x269a87=_0x2a695c['_threadToController']['get'](_0x544242)['view'],_0x561caf=_0x16e7c0['getByInnerView'](_0x269a87);_0x561caf&&_0x5cd08e['registerAnnotation'](_0x561caf);},{'priority':'low'}):_0x2a695c['fetchCommentThread']({'channelId':_0x4cfe54,'threadId':_0x3630c3})['then'](_0x1d8917=>{if('destroyed'!==_0x4e928b['state']){if(_0x544242=_0x1d8917,_0x544242&&!_0x544242['isAttached']){const _0x5dc094=_0x544242['attachTo'](()=>this['_getTargetForId'](_0x3630c3));_0x5cd08e['registerAnnotation'](_0x5dc094),_0x544242['isResolved']&&this['_reconvertMarkers'](_0x3630c3);}else{if(!_0x544242){const _0x42fcdf=this['getAllMarkersForId'](_0x3630c3);_0x4e928b['model']['change'](_0x53dd90=>{for(const _0x194920 of _0x42fcdf)_0x53dd90['removeMarker'](_0x194920);});}}}}),_0x544242;}['_handleThreadMarker'](_0x5b8d3,_0x3ef8f6){const _0x313a63=this['_attachMarkerToThread'](_0x5b8d3,_0x3ef8f6);_0x313a63&&!_0x313a63['context']&&_0x313a63['setContext']({'type':'text','value':this['_getTextContext'](_0x3ef8f6)});}['_initAriaMarkerChangeAnnouncements'](){const _0x5227c8=this['editor'];ot(_0x5227c8['model'],({left:_0xf3c347,entered:_0x5a62eb})=>{for(const _0x216df2 of _0xf3c347)if(mt(_0x216df2)){_0x5227c8['ui']['ariaLiveAnnouncer']['announce'](S(_0x5227c8['locale'],'LEAVE_COMMENT_ANNOUNCEMENT'));break;}for(const _0x46fc3c of _0x5a62eb)if(mt(_0x46fc3c)){_0x5227c8['ui']['ariaLiveAnnouncer']['announce'](S(_0x5227c8['locale'],'ENTER_COMMENT_ANNOUNCEMENT',nt(_0x3a6c48)));break;}});}}function ft(_0x3c9940,_0x2e41aa){return _0x2e41aa?_0x3c9940+':'+_0x2e41aa:_0x3c9940;}function er(_0x537d2f){const _0x3bb5f7=_0x537d2f['split'](':');return{'group':_0x3bb5f7[0x0],'id':_0x3bb5f7[0x1],'part':_0x3bb5f7[0x2]};}function dt(_0x1cb139,_0x7c3e8f){const _0x5e5825=_0x7c3e8f['schema'],_0x44be77=_0x7c3e8f['createRange'](_0x1cb139['start']);for(const _0x5dd405 of _0x1cb139['getWalker']()){const {type:_0x5118c3,item:_0x565676,nextPosition:_0x334d62}=_0x5dd405;if('text'===_0x5118c3||_0x5e5825['isObject'](_0x565676)){const _0x3e1397=_0x7c3e8f['createPositionBefore'](_0x565676);_0x44be77['isCollapsed']&&(_0x44be77['start']=_0x3e1397),_0x44be77['end']=_0x334d62;}}return _0x44be77;}function mt(_0x4c6993){return'comment'===er(_0x4c6993['name'])['group'];}var xt='<!--\x0a\x0a\x20What\x20you\x27re\x20currently\x20looking\x20at\x20is\x20the\x20source\x20code\x20of\x20a\x20legally\x20protected,\x20proprietary\x20software.\x0a\x20CKEditor\x205\x20Collaboration\x20is\x20licensed\x20under\x20a\x20commercial\x20license\x20and\x20protected\x20by\x20copyright\x20law.\x20Where\x20not\x20otherwise\x20indicated,\x0a\x20all\x20CKEditor\x205\x20Collaboration\x20content\x20is\x20authored\x20by\x20CKSource\x20engineers\x20and\x20consists\x20of\x20CKSource-owned\x20intellectual\x20property.\x0a\x0a\x20Copyright\x20(c)\x202003-2024,\x20CKSource\x20Holding\x20sp.\x20z\x20o.o.\x20All\x20rights\x20reserved.\x0a\x0a!-->\x0a\x0a<svg\x20viewBox=\x220\x200\x2020\x2020\x22\x20xmlns=\x22http://www.w3.org/2000/svg\x22><path\x20d=\x22M4\x201.5h12A3.5\x203.5\x200\x200\x201\x2019.5\x205v8l-.005.192a3.5\x203.5\x200\x200\x201-2.927\x203.262l-.062.008v1.813a1.5\x201.5\x200\x200\x201-2.193\x201.33l-.371-.193-.38-.212a13.452\x2013.452\x200\x200\x201-3.271-2.63l-.062-.07H4A3.5\x203.5\x200\x200\x201\x20.5\x2013V5A3.5\x203.5\x200\x200\x201\x204\x201.5ZM4\x203a2\x202\x200\x200\x200-2\x202v8a2\x202\x200\x200\x200\x202\x202h6.924a11.917\x2011.917\x200\x200\x200\x203.71\x203.081l.372.194v-3.268L14.962\x2015H16a2\x202\x200\x200\x200\x202-2V5a2\x202\x200\x200\x200-2-2H4Z\x22/><path\x20d=\x22M9.75\x205a.75.75\x200\x200\x200-.75.75v2.5H6.5a.75.75\x200\x200\x200\x200\x201.5H9v2.5a.75.75\x200\x200\x200\x201.5\x200v-2.5H13a.75.75\x200\x200\x200\x200-1.5h-2.5v-2.5A.75.75\x200\x200\x200\x209.75\x205Z\x22/></svg>\x0a';class i extends _0x2ad286{['licenseKey'];['_licenseKeyCheckInterval'];static get['pluginName'](){return'CommentsUI';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}static get['requires'](){return[o,r,P,N];}get['CommentsListView'](){return te;}get['CommentThreadInputView'](){return ie;}['init'](){const _0x543acb=this['editor'],_0xcb9890=_0x543acb['plugins']['get'](o),_0x59643a=_0x543acb['plugins']['get'](r),_0xf3cc2e=_0x543acb['plugins']['get'](N),_0x490727=_0x543acb['plugins']['get'](P);_0x543acb['ui']['componentFactory']['add']('comment',()=>{const _0x54aaa7=this['_createUIButton'](_0xdf0cec);return _0x54aaa7['tooltip']=!0x0,_0x54aaa7;}),_0x543acb['ui']['componentFactory']['add']('menuBar:comment',()=>this['_createUIButton'](_0x2444af)),_0x490727['addSourceCollector'](()=>{const _0x32c82d=[];for(const [_0x44e4a4,_0x7c76e7]of _0xcb9890['_threadToController']){const _0x530e5a=_0x59643a['getAllMarkersForId'](_0x44e4a4['id']),_0x557825=_0x530e5a['map'](_0x51b964=>_0x51b964['getRange']());_0x530e5a['length']>0x0&&_0x32c82d['push']([_0x7c76e7['view'],_0x557825]);}return _0x32c82d;}),this['listenTo'](_0xf3cc2e,'change:activeAnnotations',(_0x5e1cbc,_0x277228,_0x3f9a9a)=>{const _0x16fcd9=Array['from'](_0x3f9a9a)['map'](_0x5ea181=>_0x5ea181['innerView'])['find'](_0x56e702=>_0xcb9890['_viewToController']['has'](_0x56e702));if(!_0x16fcd9)return void(_0x59643a['activeMarker']=null);const _0x4444cf=_0xcb9890['_viewToController']['get'](_0x16fcd9)['model']['id'],_0x4336ef='comment:'+_0x4444cf;_0x4444cf&&_0x59643a['hasMarkerForId'](_0x4444cf)?_0x59643a['activeMarker']=_0x4336ef:_0x59643a['activeMarker']&&(_0x59643a['activeMarker']=null);}),this['listenTo'](_0xcb9890,'removeCommentThread',(_0x1c6410,{threadId:_0x40a666,isFromAdapter:_0x1f1aa9})=>{!_0x1f1aa9&&_0x543acb['ui']['focusTracker']['isFocused']&&_0x59643a['hasMarkerForId'](_0x40a666)&&_0x543acb['editing']['view']['focus']();},{'priority':'highest'}),this['listenTo'](_0xcb9890,'addComment',(_0x1f07c2,{threadId:_0x2b4855,isFromAdapter:_0x275e16})=>{if(_0x275e16||!_0x59643a['hasMarkerForId'](_0x2b4855)||!_0xcb9890['hasCommentThread'](_0x2b4855))return;0x1===_0xcb9890['getCommentThread'](_0x2b4855)['length']&&(_0x543acb['editing']['view']['focus'](),_0x1f07c2['stop']());},{'priority':'low'}),this['licenseKey']=this['editor']['config']['get']('licenseKey');const _0x724d2c=this['editor'];this['_licenseKeyCheckInterval']=setInterval(()=>{let _0x5613bf;for(const _0x314f2e in _0x724d2c){const _0xdab105=_0x314f2e,_0x284013=_0x724d2c[_0xdab105];if('commentsLicenseKeyValid'==_0x284013||'commentsLicenseKeyInvalid'==_0x284013||'commentsLicenseKeyExpired'==_0x284013||'commentsLicenseKeyDomainLimit'==_0x284013||'commentsLicenseKeyNotAllowed'==_0x284013||'commentsLicenseKeyEvaluationLimit'==_0x284013||'commentsLicenseKeyTrialLimit'==_0x284013||'commentsLicenseKeyDevelopmentLimit'==_0x284013||'commentsLicenseKeyUsageLimit'==_0x284013){delete _0x724d2c[_0xdab105],_0x5613bf=_0x284013,clearInterval(this['_licenseKeyCheckInterval']),this['_licenseKeyCheckInterval']=void 0x0;break;}}'commentsLicenseKeyInvalid'==_0x5613bf&&_0x724d2c['_showLicenseError']('invalid'),'commentsLicenseKeyExpired'==_0x5613bf&&_0x724d2c['_showLicenseError']('expired'),'commentsLicenseKeyDomainLimit'==_0x5613bf&&_0x724d2c['_showLicenseError']('domainLimit'),'commentsLicenseKeyNotAllowed'==_0x5613bf&&_0x724d2c['_showLicenseError']('featureNotAllowed','Comments'),'commentsLicenseKeyEvaluationLimit'==_0x5613bf&&_0x724d2c['_showLicenseError']('evaluationLimit'),'commentsLicenseKeyTrialLimit'==_0x5613bf&&_0x724d2c['_showLicenseError']('trialLimit'),'commentsLicenseKeyDevelopmentLimit'==_0x5613bf&&_0x724d2c['_showLicenseError']('developmentLimit'),'commentsLicenseKeyUsageLimit'==_0x5613bf&&_0x724d2c['_showLicenseError']('usageLimit');},0x3e8);}['destroy'](){super['destroy'](),this['_licenseKeyCheckInterval']&&clearInterval(this['_licenseKeyCheckInterval']);}['_createUIButton'](_0x5a1f56){const _0x54bcf8=this['editor'],_0xe31144=new _0x5a1f56(_0x54bcf8['locale']),_0x55f78c=_0x54bcf8['commands']['get']('addCommentThread');return _0xe31144['set']({'label':S(_0x54bcf8['locale'],'Comment'),'icon':xt}),_0xe31144['bind']('isEnabled')['to'](_0x55f78c),this['listenTo'](_0xe31144,'execute',()=>_0x55f78c['execute']()),_0xe31144;}}class s extends _0x2ad286{static get['pluginName'](){return'CommentsOnly';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}static get['requires'](){return[r];}constructor(_0x40e443){super(_0x40e443),this['set']('isEnabled',!0x1),this['on']('change:isEnabled',(_0x498595,_0xd00b22,_0x4ad15b)=>{_0x4ad15b?this['_enableCommentsOnlyMode']():this['_disableCommentsOnlyMode']();});}['afterInit'](){!this['isEnabled']&&this['editor']['config']['get']('commentsOnly')&&(this['isEnabled']=!0x0);}['_enableCommentsOnlyMode'](){for(const [_0xb9e9be,_0x33398d]of this['editor']['commands'])_0x33398d['affectsData']&&'addCommentThread'!==_0xb9e9be&&_0x33398d['forceDisabled']('commentsOnlyMode');this['editor']['plugins']['has']('DragDrop')&&this['editor']['plugins']['get']('DragDrop')['forceDisabled']('commentsOnlyMode');const _0x27c2dd=this['editor']['editing']['view']['document'];this['listenTo'](_0x27c2dd,'cut',_0x3c89f3=>_0x3c89f3['stop'](),{'priority':'highest'}),this['listenTo'](_0x27c2dd,'clipboardInput',_0x2a1f1e=>_0x2a1f1e['stop'](),{'priority':'highest'}),this['listenTo'](_0x27c2dd,'delete',_0x2c60f0=>_0x2c60f0['stop'](),{'priority':'highest'});}['_disableCommentsOnlyMode'](){for(const [_0x2e8caf,_0x523a8d]of this['editor']['commands'])_0x523a8d['affectsData']&&'addCommentThread'!==_0x2e8caf&&_0x523a8d['clearForceDisabled']('commentsOnlyMode');this['stopListening'](this['editor']['editing']['view']['document']);}}class M extends _0x17f52f{['activeUIs'];['_uis'];['_uisData'];static get['requires'](){return[N];}static get['pluginName'](){return'AnnotationsUIs';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x2f81ed){super(_0x2f81ed),this['activeUIs']=new Set(),this['_uis']=new Map(),this['_uisData']=new Map();}['init'](){const _0x4a4e28=this['context']['plugins']['get'](N);this['listenTo'](_0x4a4e28,'_activateAnnotation',(_0x4c3f52,_0x5b459a)=>{for(const _0x4668f3 of this['activeUIs']){const _0x1f7ba1=this['_uis']['get'](_0x4668f3);(0x0,this['_uisData']['get'](_0x4668f3)['filter'])(_0x5b459a)&&_0x1f7ba1['setActiveAnnotation'](_0x5b459a);}}),this['listenTo'](_0x4a4e28,'_deactivateAllAnnotations',()=>{for(const _0x4dc132 of this['activeUIs']){this['_uis']['get'](_0x4dc132)['setActiveAnnotation'](null);}}),this['listenTo'](_0x4a4e28['_visibleAnnotations'],'add',(_0x167a25,_0x10d77d)=>{this['_assertAnnotationDoesNotBelongToMultipleUIs'](_0x10d77d);});}['hasActive'](){return this['activeUIs']['size']>0x0;}['isActive'](_0x5580ce){return this['activeUIs']['has'](_0x5580ce);}['activate'](_0x239966,_0x45a38c=()=>!0x0){const _0x45abf0=this['context']['plugins']['get'](N);if(!this['_uis']['has'](_0x239966))throw new _0x2f1633('annotationsuis-missing-ui',this,{'uiName':_0x239966});this['isActive'](_0x239966)&&this['deactivate'](_0x239966),this['activeUIs']['add'](_0x239966);const _0x305a9e=new x();!function({source:_0x527dad,target:_0x5190e6,filter:_0x19ec96}){for(const _0x2b43e8 of _0x527dad)_0x19ec96(_0x2b43e8)&&_0x5190e6['add'](_0x2b43e8);_0x5190e6['listenTo'](_0x527dad,'add',(_0x3e54d0,_0x4b523e)=>{_0x19ec96(_0x4b523e)&&_0x5190e6['add'](_0x4b523e);}),_0x5190e6['listenTo'](_0x527dad,'remove',(_0x1e5bab,_0x2f3c98)=>{_0x5190e6['has'](_0x2f3c98)&&_0x5190e6['remove'](_0x2f3c98);});}({'source':_0x45abf0['_visibleAnnotations'],'target':_0x305a9e,'filter':_0x45a38c}),this['_uisData']['set'](_0x239966,{'collection':_0x305a9e,'filter':_0x45a38c});const _0x225725=this['_uis']['get'](_0x239966);_0x225725['attach'](_0x305a9e),this['listenTo'](_0x225725,'change:activeAnnotation',(_0x187346,_0x578918,_0xe8ae7,_0x533bfa)=>{_0x533bfa&&_0x45abf0['_removeActiveAnnotation'](_0x533bfa),_0xe8ae7&&_0x45abf0['_addActiveAnnotation'](_0xe8ae7);});}['deactivate'](_0x289f5f){if(this['activeUIs']['delete'](_0x289f5f),!this['_uis']['has'](_0x289f5f))throw new _0x2f1633('annotationsuis-missing-ui',this,{'uiName':_0x289f5f});const _0x4d3745=this['_uis']['get'](_0x289f5f);_0x4d3745['detach'](),this['stopListening'](_0x4d3745),this['_uisData']['get'](_0x289f5f)['collection']['destroy'](),this['_uisData']['delete'](_0x289f5f);}['switchTo'](_0x2b5441){if(!this['_uis']['has'](_0x2b5441))throw new _0x2f1633('annotationsuis-missing-ui',this,{'uiName':_0x2b5441});const _0x3c1f17=this['context']['plugins']['get'](N),_0x42e85e=Array['from'](_0x3c1f17['activeAnnotations'])[0x0]||null;this['deactivateAll'](),this['activate'](_0x2b5441);const _0x434d65=this['_uis']['get'](_0x2b5441);_0x434d65['setActiveAnnotation'](_0x42e85e),_0x434d65['_setSelectedAnnotations']&&_0x42e85e&&_0x434d65['_setSelectedAnnotations']([_0x42e85e]);}['deactivateAll'](){for(const _0x45317e of this['activeUIs'])this['deactivate'](_0x45317e);}['register'](_0x2d8af7,_0x4bbd7e){if(this['_uis']['has'](_0x2d8af7))throw new _0x2f1633('annotationsuis-register-already-registered');if('function'!=typeof _0x4bbd7e['attach']||'function'!=typeof _0x4bbd7e['detach']||'function'!=typeof _0x4bbd7e['setActiveAnnotation'])throw new _0x2f1633('annotationsuis-register-invalid-interface',null);this['_uis']['set'](_0x2d8af7,_0x4bbd7e);}['refilterAnnotations'](){const _0x46e9ab=this['context']['plugins']['get'](N)['collection'],_0x1a2fdc=new Map(),_0x28590b=Array['from'](this['activeUIs']);for(const _0xd55edf of this['activeUIs']){const _0x11febc=this['_uisData']['get'](_0xd55edf)['collection'];for(const _0x3a4ebf of _0x11febc)_0x1a2fdc['set'](_0x3a4ebf,_0xd55edf);}for(const _0x139c19 of _0x46e9ab){const _0x206ce6=_0x1a2fdc['get'](_0x139c19);this['_assertAnnotationDoesNotBelongToMultipleUIs'](_0x139c19);const _0x57813d=_0x28590b['find'](_0x40915c=>this['_uisData']['get'](_0x40915c)['filter'](_0x139c19));_0x206ce6!==_0x57813d&&(_0x206ce6&&this['_uisData']['get'](_0x206ce6)['collection']['remove'](_0x139c19),_0x57813d&&this['_uisData']['get'](_0x57813d)['collection']['add'](_0x139c19));}}['destroy'](){this['deactivateAll'](),super['destroy']();}['_assertAnnotationDoesNotBelongToMultipleUIs'](_0xe4a0a4){const _0x3fd349=[];for(const _0x5d526d of this['activeUIs']){(0x0,this['_uisData']['get'](_0x5d526d)['filter'])(_0xe4a0a4)&&_0x3fd349['push'](_0x5d526d);}if(_0x3fd349['length']>0x1)throw new _0x2f1633('annotationsuis-annotation-mismatch',null,{'matchedUIs':_0x3fd349,'annotationType':_0xe4a0a4['type']});}}const he=Ht('px');class V extends kt{['list'];['focusables'];['focusTracker'];['focusCycler'];constructor(_0x5066f3){super(_0x5066f3);const _0xdbb007=this['bindTemplate'];this['set']('minHeight',0x0),this['set']('class',''),this['list']=this['createCollection'](),this['focusables']=this['createCollection'](),this['list']['delegate']('arrowup','arrowdown')['to'](this),this['focusTracker']=new _0x5abdce(),this['focusCycler']=new Ft({'focusables':this['focusables'],'focusTracker':this['focusTracker']}),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-sidebar','ck-reset',_0xdbb007['to']('class')],'style':{'minHeight':_0xdbb007['to']('minHeight',_0x3fb074=>'number'==typeof _0x3fb074?he(_0x3fb074+0xa):null)},'dir':_0x5066f3['uiLanguageDirection'],'role':'application','aria-label':S(_0x5066f3,'Annotations\x20sidebar'),'tabindex':0x0},'children':[{'tag':'div','attributes':{'role':'list','aria-label':S(_0x5066f3,'Annotations\x20list')},'children':this['list']}]});}['render'](){super['render'](),this['_setupKeyboardNavigation']();}['focus'](){this['focusCycler']['focusFirst']();}['_setupKeyboardNavigation'](){this['list']['delegate']('change:top')['to'](this),this['on']('change:top',_0x3dabe1=>{this['_updateItemPositionInFocusables'](_0x3dabe1['source']);}),this['list']['forEach'](_0x1c3e2f=>{this['focusTracker']['add'](_0x1c3e2f['element']),this['_updateItemPositionInFocusables'](_0x1c3e2f);}),this['list']['on']('change',(_0x1f98b1,_0x49614c)=>{for(const _0x4abd8a of _0x49614c['removed'])this['focusTracker']['remove'](_0x4abd8a['element']),this['focusables']['remove'](_0x4abd8a);for(const _0x4b41c7 of _0x49614c['added'])this['focusTracker']['add'](_0x4b41c7['element']),this['_updateItemPositionInFocusables'](_0x4b41c7);}),this['on']('arrowup',()=>{this['focusCycler']['focusPrevious']();}),this['on']('arrowdown',()=>{this['focusCycler']['focusNext']();}),this['listenTo'](this['element'],'focus',()=>{this['focus']();});}['_updateItemPositionInFocusables'](_0x3a2298){const _0x27d708=this['focusables']['getIndex'](_0x3a2298);let _0x237f2e,_0x511aad;for(const _0x575a91 of this['focusables'])if(_0x3a2298['top']<_0x575a91['top']){_0x237f2e=_0x575a91;break;}if(_0x511aad=_0x237f2e?this['focusables']['getIndex'](_0x237f2e):this['focusables']['length'],-0x1!==_0x27d708){if(_0x27d708===_0x511aad-0x1)return;this['focusables']['remove'](_0x3a2298),_0x511aad=_0x237f2e?this['focusables']['getIndex'](_0x237f2e):this['focusables']['length'];}this['focusables']['add'](_0x3a2298,_0x511aad);}}const qt=Ht('px');class H extends kt{['content'];['_targetTop'];['_mutationObserver'];constructor(_0x241b96){super(_0x241b96),this['set']('top',0x0),this['set']('height',0x0),this['bind']('bottom')['to'](this,'top',this,'height',(_0x4393d7,_0x43ea52)=>_0x4393d7+_0x43ea52),this['set']('isAnimationDisabled',!0x1),this['_mutationObserver']=Lt(()=>this['updateHeight']()),this['_targetTop']=null,this['content']=this['createCollection'](),this['content']['delegate']('arrowup','arrowdown')['to'](this);const _0x3ae7ad=this['bindTemplate'];this['setTemplate']({'tag':'div','attributes':{'class':['ck-sidebar-item',_0x3ae7ad['to']('isAnimationDisabled',_0x264ac3=>_0x264ac3?'ck-sidebar-item--no-animation':'')],'style':{'top':_0x3ae7ad['to']('top',_0x16794f=>qt(_0x16794f))},'role':'presentation'},'children':this['content']});}['render'](){super['render'](),this['_mutationObserver']['attach'](this['element']);}['focus'](){this['content']['first']&&this['content']['first']['focus']();}['updateHeight'](){const _0xcf9a39=this['element']['clientHeight'];_0xcf9a39&&(this['height']=_0xcf9a39);}['destroy'](){this['content']['clear'](),this['_mutationObserver']['detach'](),super['destroy']();}}class z extends _0x17f52f{['view'];['_activeAnnotation'];['_annotations'];['_spaceBetweenItems'];['_sidebarItemViewToAnnotation'];['_annotationToSidebarItemView'];['_recalculateBuffer'];static get['pluginName'](){return'Sidebar';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x1f3d6d){super(_0x1f3d6d),this['set']('_lastItem',void 0x0),this['view']=this['_createSidebarView'](),this['set']('container',null),this['_spaceBetweenItems']=0x19,this['_sidebarItemViewToAnnotation']=new Map(),this['_annotationToSidebarItemView']=new Map(),this['context']['config']['define']('sidebar.preventScrollOutOfView',!0x1),this['_annotations']=null,this['_activeAnnotation']=null,this['_recalculateBuffer']=[];}['init'](){const _0x405e4e=this['context']['config']['get']('sidebar.container');_0x405e4e&&this['setContainer'](_0x405e4e);}['setContainer'](_0x391aeb){if(!y(_0x391aeb))throw new _0x2f1633('sidebar-setcontainer-invalid-element');this['container']=_0x391aeb;}['_attachToContainer']({viewClass:_0x1f3a60='',spaceBetweenItems:_0xcb9d31=0x19}={}){if(!y(this['container']))throw new _0x2f1633('sidebar-attachtocontainer-missing-container',this);this['container']['appendChild'](this['view']['element']),this['view']['class']=_0x1f3a60,this['_spaceBetweenItems']=_0xcb9d31;}['rearrange']({removedAnnotation:_0x71bf9b,previousAnnotation:_0x3328ba,nextAnnotation:_0x47605d}){const _0xbb9d15=this['getSidebarItemView'](_0x71bf9b);this['view']['list']['remove'](_0xbb9d15),this['_destroySidebarItemView'](_0x71bf9b),_0x3328ba&&this['_alignToTargetRect'](this['getSidebarItemView'](_0x3328ba)),_0x47605d&&this['_alignToTargetRect'](this['getSidebarItemView'](_0x47605d)),this['_updateLastItem']();}['refresh']({blurredAnnotation:_0x2ca405,activatedAnnotation:_0x1aba5d,disableAnimationOnActivatedAnnotation:_0x53d16f}){if(this['_activeAnnotation']=_0x1aba5d,_0x2ca405){_0x2ca405['isActive']=!0x1;const _0x1982dd=this['getSidebarItemView'](_0x2ca405);_0x1982dd&&_0x53d16f&&(_0x1982dd['isAnimationDisabled']=!0x1);}if(_0x1aba5d){const _0x2a8e9f=this['getSidebarItemView'](_0x1aba5d);_0x2a8e9f&&(_0x1aba5d['isActive']=!0x0,_0x53d16f&&(_0x2a8e9f['isAnimationDisabled']=!0x0,_0x2a8e9f['top']+=0x1),this['_alignToTargetRect'](_0x2a8e9f));}}['_detachFromContainer'](_0x176a17){if(this['view']['element']['remove'](),_0x176a17){for(const _0x3f91ac of _0x176a17)this['_destroySidebarItemView'](_0x3f91ac);}this['view']['list']['clear'](),this['view']['class']='',this['_lastItem']=null;}['addAnnotation'](_0x28792c,_0x52dd8f){_0x52dd8f||(_0x52dd8f=_0x28792c['view']);const _0x5a45e8=new H(this['context']['locale']);this['_sidebarItemViewToAnnotation']['set'](_0x5a45e8,_0x28792c),this['_annotationToSidebarItemView']['set'](_0x28792c,_0x5a45e8),_0x5a45e8['content']['add'](_0x52dd8f),this['listenTo'](_0x28792c['view'],'change:targetRect',(_0x2c5c4f,_0x5365f7,_0x644491)=>{const _0x4fa6f3=this['_getTargetTop'](_0x28792c,_0x644491);_0x5a45e8['_targetTop']!=_0x4fa6f3&&(_0x5a45e8['_targetTop']=_0x4fa6f3,this['_setItemTop'](_0x5a45e8,_0x4fa6f3));}),this['listenTo'](_0x5a45e8,'change:top',()=>{this['_recalculate'](_0x5a45e8,'top');}),this['listenTo'](_0x5a45e8,'change:bottom',()=>{this['_recalculate'](_0x5a45e8,'bottom');}),this['_alignToTargetRect'](_0x5a45e8);const _0x314a25=this['_getItemBefore'](_0x5a45e8);if(_0x314a25)this['_alignAfterItem'](_0x314a25,_0x5a45e8)||this['_alignToTargetRect'](_0x5a45e8);else this['_alignToTargetRect'](_0x5a45e8);return this['_updateLastItem'](),this['view']['list']['add'](_0x5a45e8),_0x5a45e8;}['_alignForTopChange'](_0x1d9c4a){if(!_0x1d9c4a['content']['length'])return;const _0x2078b2=this['_getItemBefore'](_0x1d9c4a);if(!_0x2078b2)return;const _0x2e4656=this['_sidebarItemViewToAnnotation']['get'](_0x2078b2),_0x2fc612=this['_activeAnnotation'];_0x2fc612&&_0x2fc612===_0x2e4656?this['_alignAfterItem'](_0x2078b2,_0x1d9c4a):this['_alignBeforeItem'](_0x1d9c4a,_0x2078b2);}['_alignForBottomChange'](_0x196a83){if(!_0x196a83['content']['length'])return;const _0x541644=this['_getItemAfter'](_0x196a83);if(!_0x541644)return;const _0x268723=this['_sidebarItemViewToAnnotation']['get'](_0x541644),_0x48b3e9=this['context']['config']['get']('sidebar.preventScrollOutOfView'),_0xb41b04=this['_activeAnnotation'];_0xb41b04&&_0xb41b04===_0x268723&&_0x48b3e9?(this['_alignBeforeItem'](_0x541644,_0x196a83),this['_alignAfterItem'](_0x196a83,_0x541644)):_0xb41b04&&_0xb41b04===_0x268723?this['_alignBeforeItem'](_0x541644,_0x196a83):this['_alignAfterItem'](_0x196a83,_0x541644);}['_recalculate'](_0xa6a657,_0x3fc43f){0x0===this['_recalculateBuffer']['length']&&setTimeout(()=>{for(const {sidebarItemView:_0x309058,changedProp:_0x248aa5}of this['_recalculateBuffer'])'top'===_0x248aa5?this['_alignForTopChange'](_0x309058):this['_alignForBottomChange'](_0x309058);this['_recalculateBuffer']=[];},0xa),this['_recalculateBuffer']['push']({'sidebarItemView':_0xa6a657,'changedProp':_0x3fc43f});}['getSidebarItemView'](_0x40d4f9){return this['_annotationToSidebarItemView']['get'](_0x40d4f9);}['destroy'](){this['stopListening'](),this['view']['destroy']();}['_destroySidebarItemView'](_0x5d9dd6){const _0x6f6877=this['getSidebarItemView'](_0x5d9dd6);this['stopListening'](_0x6f6877),this['stopListening'](_0x5d9dd6['view']),_0x6f6877['destroy'](),this['_annotationToSidebarItemView']['delete'](_0x5d9dd6),this['_sidebarItemViewToAnnotation']['delete'](_0x6f6877);}['_createSidebarView'](){const _0x38e890=new V(this['context']['locale']);return _0x38e890['render'](),this['on']('change:_lastItem',(_0x132ede,_0x5a9599,_0x5e2dc1,_0x137daf)=>{_0x137daf&&_0x38e890['unbind']('minHeight'),_0x5e2dc1?_0x38e890['bind']('minHeight')['to'](_0x5e2dc1,'bottom'):_0x38e890['minHeight']=null;}),_0x38e890;}['_updateLastItem'](){this['_lastItem']=this['_annotations']?.['last']?this['getSidebarItemView'](this['_annotations']['last']):null;}['_getItemBefore'](_0x30e05a){const _0x6f77=this['_sidebarItemViewToAnnotation']['get'](_0x30e05a),_0x3d51bf=_0x6f77&&this['_annotations']?.['get'](this['_annotations']['getIndex'](_0x6f77)-0x1);return _0x3d51bf&&this['getSidebarItemView'](_0x3d51bf)||null;}['_getItemAfter'](_0x34f2da){const _0x2d5edb=this['_sidebarItemViewToAnnotation']['get'](_0x34f2da),_0x2b9779=_0x2d5edb&&this['_annotations']?.['get'](this['_annotations']['getIndex'](_0x2d5edb)+0x1);return _0x2b9779&&this['getSidebarItemView'](_0x2b9779)||null;}['_alignBeforeItem'](_0x512401,_0x204232){_0x512401['updateHeight']();const _0x521998=R(_0x204232['bottom']+this['_spaceBetweenItems'],_0x512401['top']);return!!_0x521998&&(this['_setItemTop'](_0x204232,_0x204232['top']-_0x521998),!0x0);}['_alignAfterItem'](_0x3ea766,_0x4d95af){_0x3ea766['updateHeight']();const _0xd599b9=R(_0x3ea766['bottom']+this['_spaceBetweenItems'],_0x4d95af['top']);return!!_0xd599b9&&(this['_setItemTop'](_0x4d95af,_0x4d95af['top']+_0xd599b9,!0x1),!0x0);}['_alignToTargetRect'](_0x2b132e){const _0x4e9a64=this['_sidebarItemViewToAnnotation']['get'](_0x2b132e);if(!_0x4e9a64||!_0x4e9a64['target']||!_0x4e9a64['targetRect'])return;const _0x19f283=this['_getTargetTop'](_0x4e9a64,_0x4e9a64['targetRect']);this['_setItemTop'](_0x2b132e,_0x19f283);}['_getTargetTop'](_0x2b1099,_0x435881){if(null===_0x435881)return 0x0;if(_0x2b1099['target']instanceof _0x16256)return _0x435881['top'];{const _0x222881=new _0x16256(this['view']['element'])['top'];return _0x435881['top']-_0x222881;}}['_setItemTop'](_0x77a9d8,_0x2d95e1,_0x39b5f7=this['context']['config']['get']('sidebar.preventScrollOutOfView')){_0x39b5f7&&(_0x2d95e1=Math['max'](_0x2d95e1,this['_getMaxAvailableTop'](_0x77a9d8))),_0x77a9d8['top']=_0x2d95e1;}['_getMaxAvailableTop'](_0x453e76){let _0x814d9a=this['_getItemBefore'](_0x453e76),_0x355677=0x0;for(;_0x814d9a;)_0x814d9a['updateHeight'](),_0x355677+=this['_spaceBetweenItems']+_0x814d9a['height'],_0x814d9a=this['_getItemBefore'](_0x814d9a);return _0x355677;}}function R(_0x3be11e,_0x5e4919){return Math['max'](_0x3be11e-_0x5e4919,0x0);}function y(_0x4f3fa4){return null!==_0x4f3fa4&&'object'==typeof _0x4f3fa4&&0x1===_0x4f3fa4['nodeType'];}class e extends _0x17f52f{['isAttached'];['annotations'];['_editorAnnotations'];['_refreshPositioningDebounced'];static get['requires'](){return[z,M];}static get['pluginName'](){return'WideSidebar';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x3516d3){super(_0x3516d3),this['isAttached']=!0x1,this['set']('activeAnnotation',null),this['annotations']=null,this['_editorAnnotations']=new _0x3040b9(),this['_refreshPositioningDebounced']=_0x2ab14a(()=>{this['annotations']['refreshPositioning']();},0xfa,{'leading':!0x1});}['init'](){const _0x253914=this['context']['plugins']['get'](M),_0x4cab65=this['context']['plugins']['get'](z);_0x253914['register']('wideSidebar',this),_0x4cab65['container']&&_0x253914['switchTo']('wideSidebar');}['setActiveAnnotation'](_0x9cbe49){if(_0x9cbe49===this['activeAnnotation'])return;const _0x1ac2b4=this['context']['plugins']['get'](z);_0x1ac2b4['_activeAnnotation']=_0x9cbe49;const _0x1adc4f=this['activeAnnotation'];_0x1ac2b4['refresh']({'blurredAnnotation':_0x1adc4f,'activatedAnnotation':_0x9cbe49}),this['activeAnnotation']=_0x9cbe49;}['attach'](_0x2539d5){this['annotations']=_0x2539d5;const _0x3f9aac=this['context']['plugins']['get'](z);if(_0x3f9aac['_annotations']=_0x2539d5,this['isAttached'])throw new _0x2f1633('widesidebar-attach-already-attached',this);this['isAttached']=!0x0,this['listenTo'](_0x3f9aac,'set:container',()=>{this['detach'](),this['listenTo'](_0x3f9aac,'change:container',_0x501744=>{_0x501744['off'](),this['attach'](_0x2539d5);});}),_0x3f9aac['_attachToContainer']({'viewClass':'ck-sidebar--wide'});const _0x47ba15=_0x1414ee=>{_0x1414ee['updateTargetRect'](),_0x3f9aac['addAnnotation'](_0x1414ee);};for(const _0x2f2946 of _0x2539d5)_0x47ba15(_0x2f2946);this['listenTo'](_0x2539d5,'add',(_0x201738,_0x445f7e)=>{_0x47ba15(_0x445f7e);}),this['listenTo'](_0x2539d5,'remove',(_0x29f40f,_0x218ef4,_0x555f3b)=>{_0x3f9aac['rearrange']({'removedAnnotation':_0x218ef4,'previousAnnotation':_0x2539d5['get'](_0x555f3b-0x1),'nextAnnotation':_0x2539d5['get'](_0x555f3b+0x1)}),_0x218ef4===this['activeAnnotation']&&this['setActiveAnnotation'](null);},{'priority':'high'}),this['listenTo'](_0x2539d5,'focus',(_0x60d9c4,_0x16fc8f)=>{this['setActiveAnnotation'](_0x16fc8f);}),this['listenTo'](_0x2539d5,'blur',()=>{this['setActiveAnnotation'](null);});const _0x555be8=this['context']instanceof _0x1dbc00?this['context']['editors']:new _0x3040b9([this['context']]);for(const _0x287a4d of _0x555be8)this['_integrateWithEditorAnnotations'](_0x287a4d);this['listenTo'](_0x555be8,'add',(_0x99a88e,_0x3d6be9)=>{this['listenTo'](_0x3d6be9,'ready',()=>{this['_integrateWithEditorAnnotations'](_0x3d6be9);});}),this['listenTo'](_0x555be8,'remove',(_0x24c1a5,_0x262b7f)=>{_0x262b7f['plugins']['has']('EditorAnnotations')&&this['_destroyEditorAnnotationsIntegration'](_0x262b7f['plugins']['get']('EditorAnnotations'));}),window['addEventListener']('resize',this['_refreshPositioningDebounced']),this['annotations']['refreshPositioning']();}['detach'](){if(!this['isAttached'])throw new _0x2f1633('widesidebar-detach-not-attached',this);this['setActiveAnnotation'](null);const _0x57a8aa=this['context']['plugins']['get'](z);_0x57a8aa['_detachFromContainer'](this['annotations']),this['stopListening'](_0x57a8aa),this['stopListening'](this['annotations']),this['context']instanceof _0x1dbc00&&this['stopListening'](this['context']['editors']);for(const _0x1c2ee7 of Array['from'](this['_editorAnnotations']))this['_destroyEditorAnnotationsIntegration'](_0x1c2ee7);window['removeEventListener']('resize',this['_refreshPositioningDebounced']),this['_refreshPositioningDebounced']['cancel'](),this['activeAnnotation']=null,this['isAttached']=!0x1,this['annotations']=null;}['destroy'](){this['isAttached']&&this['detach']();}['_integrateWithEditorAnnotations'](_0x3fcab0){if(!_0x3fcab0['plugins']['has']('EditorAnnotations'))return;const _0x16872f=_0x3fcab0['plugins']['get']('EditorAnnotations'),_0x3b2cf7=()=>{const _0xdd69de=_0x16872f['getOrderedSelectedAnnotations']({'annotations':this['annotations'],'activeAnnotation':this['activeAnnotation']});this['setActiveAnnotation'](_0xdd69de[0x0]||null);};this['listenTo'](_0x16872f,'refresh',_0x3b2cf7),this['listenTo'](_0x16872f,'blur',(_0xad203a,{isAnnotationTracked:_0x68be1c})=>{this['activeAnnotation']&&_0x68be1c(this['activeAnnotation'])&&this['setActiveAnnotation'](null);}),this['listenTo'](_0x16872f,'uiUpdate',()=>{this['_refreshPositioningDebounced']();}),this['listenTo'](this['annotations'],'blur',_0x346339=>{_0x16872f['hasDomSelection']()&&(_0x3b2cf7(),_0x346339['stop']());},{'priority':'high'}),this['_editorAnnotations']['add'](_0x16872f);}['_destroyEditorAnnotationsIntegration'](_0x2de417){this['stopListening'](_0x2de417),this['_editorAnnotations']['remove'](_0x2de417);}}class D extends _0xdf0cec{['counterView'];constructor(_0x35576f){super(_0x35576f);const _0x5031b1=this['bindTemplate'];this['set']('isDirty',!0x1),this['set']('number',0x0),this['bind']('_badge')['to'](this,'isDirty',this,'number',(_0xd823e,_0xb1277e)=>_0xd823e?'...':_0xb1277e['toString']()),this['set']('annotationType',''),this['icon']=xt,this['extendTemplate']({'attributes':{'class':['ck-annotation-counter']}}),this['counterView']=new kt(),this['counterView']['setTemplate']({'tag':'span','attributes':{'class':['ck-annotation-counter__badge',_0x5031b1['to']('annotationType',_0x46c206=>'ck-annotation-counter__badge--'+_0x46c206),_0x5031b1['if']('isDirty','ck-annotation-counter__badge--edit-mode')]},'children':[{'text':_0x5031b1['to']('_badge')}]}),this['children']['add'](this['counterView']);}}class n extends _0x17f52f{['isAttached'];['annotations'];['_manuallyClosedAnnotationViews'];['_domEmitter'];['_annotationToNarrowView'];['_selectedAnnotations'];['_editorAnnotations'];['_refreshPositioningDebounced'];static get['requires'](){return[z,M];}static get['pluginName'](){return'NarrowSidebar';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x5aee32){super(_0x5aee32),this['isAttached']=!0x1,this['_manuallyClosedAnnotationViews']=new Set(),this['_domEmitter']=Object['create'](_0xcdccb0),this['_annotationToNarrowView']=new Map(),this['set']('activeAnnotation',null),this['annotations']=null,this['_selectedAnnotations']=[],this['_editorAnnotations']=new _0x3040b9(),this['_refreshPositioningDebounced']=_0x2ab14a(()=>{this['_refreshPositioning']();},0xfa,{'leading':!0x1});}['init'](){this['context']['plugins']['get'](M)['register']('narrowSidebar',this),this['bodyCollection']=new _0x14a569(this['context']['locale']),this['balloonPanelView']=new _0x39be82(this['context']['locale']),this['bodyCollection']['attachToDom'](),this['bodyCollection']['add'](this['balloonPanelView']);}['attach'](_0x4ac3a6){this['annotations']=_0x4ac3a6;const _0x14d6fd=this['context']['plugins']['get'](z),_0x3d4854=this['balloonPanelView'];if(_0x14d6fd['_annotations']=_0x4ac3a6,this['isAttached'])throw new _0x2f1633('narrowsidebar-attach-already-attached',this);this['isAttached']=!0x0,this['listenTo'](_0x14d6fd,'set:container',()=>{this['detach'](),this['listenTo'](_0x14d6fd,'change:container',_0x236ae6=>{_0x236ae6['off'](),this['attach'](_0x4ac3a6);});}),_0x14d6fd['_attachToContainer']({'viewClass':'ck-sidebar--narrow','spaceBetweenItems':0x5});const _0x55bab3=_0x255a43=>{const _0x6417f6=new D(this['context']['locale']);_0x14d6fd['addAnnotation'](_0x255a43,_0x6417f6),this['_annotationToNarrowView']['set'](_0x255a43,_0x6417f6),_0x6417f6['bind']('isDirty','annotationType','number')['to'](_0x255a43['view'],'isDirty','type','length'),_0x6417f6['on']('execute',()=>{this['_manuallyClosedAnnotationViews']['clear'](),_0x3d4854['content']['first']!==_0x255a43['view']?(this['_showBalloon'](_0x255a43),_0x255a43['view']['element']['focus'](),this['setActiveAnnotation'](_0x255a43)):this['setActiveAnnotation'](null);});};for(const _0xea8d7 of _0x4ac3a6)_0x55bab3(_0xea8d7);this['listenTo'](_0x4ac3a6,'add',(_0x3d5a6c,_0x1c3e55)=>{_0x55bab3(_0x1c3e55);}),this['listenTo'](_0x4ac3a6,'remove',(_0x215f0c,_0x50e28e,_0x19fff5)=>{this['_annotationToNarrowView']['get'](_0x50e28e)['destroy'](),this['_annotationToNarrowView']['delete'](_0x50e28e),_0x14d6fd['rearrange']({'removedAnnotation':_0x50e28e,'previousAnnotation':_0x4ac3a6['get'](_0x19fff5-0x1),'nextAnnotation':_0x4ac3a6['get'](_0x19fff5+0x1)}),_0x50e28e===this['activeAnnotation']&&this['setActiveAnnotation'](null);},{'priority':'low'}),this['listenTo'](_0x4ac3a6,'focus',(_0x57befe,_0x3ef459)=>{this['setActiveAnnotation'](_0x3ef459);}),this['listenTo'](_0x4ac3a6,'blur',()=>{this['setActiveAnnotation'](null);}),this['_domEmitter']['listenTo'](document,'keydown',(_0x118d3c,_0x11aafa)=>{_0x11aafa['keyCode']===_0x4832b0['esc']&&_0x3d4854['isVisible']&&(this['_manuallyClosedAnnotationViews']['add'](_0x3d4854['content']['first']),this['_hideBalloon'](),_0x11aafa['stopPropagation'](),_0x11aafa['preventDefault']());}),this['_domEmitter']['listenTo'](document,'mousedown',(_0x59a558,_0x2777a8)=>{const _0x25e287=_0x2777a8['target'];_0x3d4854['isVisible']&&_0x3d4854['element']['contains'](_0x25e287)||_0x14d6fd['view']['element']['contains'](_0x25e287)||_0x59a558['preventClosingBalloon']||this['activeAnnotation']&&this['activeAnnotation']['focusableElements']['find'](_0x1f9a81=>_0x1f9a81['contains'](_0x25e287))||(this['_manuallyClosedAnnotationViews']['clear'](),this['_hideBalloon'](),this['setActiveAnnotation'](null));});const _0x208f13=this['context']instanceof _0x1dbc00?this['context']['editors']:new _0x3040b9([this['context']]);for(const _0x467634 of _0x208f13)this['_integrateWithEditorAnnotations'](_0x467634);this['listenTo'](_0x208f13,'add',(_0x278def,_0x1f79ec)=>{this['listenTo'](_0x1f79ec,'ready',()=>{this['_integrateWithEditorAnnotations'](_0x1f79ec);});}),this['listenTo'](_0x208f13,'remove',(_0x481116,_0x3fad12)=>{_0x3fad12['plugins']['has']('EditorAnnotations')&&this['_destroyEditorAnnotationsIntegration'](_0x3fad12['plugins']['get']('EditorAnnotations'));}),window['addEventListener']('resize',this['_refreshPositioningDebounced']),this['_refreshPositioning']();}['setActiveAnnotation'](_0x101256){if(_0x101256===this['activeAnnotation'])return;const _0x446091=this['context']['plugins']['get'](z);if(_0x446091['refresh']({'blurredAnnotation':this['activeAnnotation'],'activatedAnnotation':_0x101256,'disableAnimationOnActivatedAnnotation':!0x0}),_0x101256)_0x446091['getSidebarItemView'](_0x101256)?this['_showBalloon'](_0x101256):this['_hideBalloon']();else this['_hideBalloon']();this['activeAnnotation']=_0x101256;}['detach'](){if(!this['isAttached'])throw new _0x2f1633('narrowsidebar-detach-not-attached',this);this['setActiveAnnotation'](null);const _0x2021e6=this['context']['plugins']['get'](z);this['_hideBalloon'](),Array['from'](this['_annotationToNarrowView']['values'](),_0x20ce52=>_0x20ce52['destroy']()),this['_annotationToNarrowView']['clear'](),_0x2021e6['_detachFromContainer'](this['annotations']),this['stopListening'](),this['_domEmitter']['stopListening'](),this['context']instanceof _0x1dbc00&&this['stopListening'](this['context']['editors']);for(const _0x368343 of Array['from'](this['_editorAnnotations']))this['_destroyEditorAnnotationsIntegration'](_0x368343);window['removeEventListener']('resize',this['_refreshPositioningDebounced']),this['_refreshPositioningDebounced']['cancel'](),this['_selectedAnnotations']=[],this['isAttached']=!0x1,this['annotations']=null;}['destroy'](){this['isAttached']&&this['detach'](),this['bodyCollection']['detachFromDom']();}['_integrateWithEditorAnnotations'](_0x368964){if(!_0x368964['plugins']['has']('EditorAnnotations'))return;const _0x588b2d=_0x368964['plugins']['get']('EditorAnnotations'),_0x30652a=this['context']['plugins']['get'](z),_0x29cbeb=this['annotations'],_0xc7ca77=this['balloonPanelView'],_0x5c679e=()=>{const _0x3f14b6=_0x588b2d['getOrderedSelectedAnnotations']({'annotations':this['annotations'],'activeAnnotation':this['activeAnnotation']});this['_setSelectedAnnotations'](_0x3f14b6),this['setActiveAnnotation'](_0x3f14b6[0x0]||null);};this['listenTo'](_0x588b2d,'refresh',_0x5c679e),this['listenTo'](_0x588b2d,'blur',(_0x225f68,{isAnnotationTracked:_0x54d685})=>{this['activeAnnotation']&&_0x54d685(this['activeAnnotation'])&&(this['_setSelectedAnnotations']([]),this['setActiveAnnotation'](null));}),this['listenTo'](_0x588b2d,'uiUpdate',()=>{this['_refreshPositioningDebounced']();}),this['listenTo'](_0x29cbeb,'blur',_0x45058d=>{_0x588b2d['hasDomSelection']()&&_0x45058d['stop']();},{'priority':'high'}),this['listenTo'](this['_domEmitter'],'mousedown',(_0x1c205b,_0x2cabaa)=>{const _0xec8531=_0x2cabaa['target'];_0xc7ca77['isVisible']&&_0xc7ca77['element']['contains'](_0xec8531)||_0x30652a['view']['element']['contains'](_0xec8531)||this['activeAnnotation']&&_0x588b2d['hasDomSelection']()&&(_0x5c679e(),_0x1c205b['preventClosingBalloon']=!0x0);},{'priority':'high'}),this['_editorAnnotations']['add'](_0x588b2d);}['_destroyEditorAnnotationsIntegration'](_0x1c5526){_0x1c5526&&(this['stopListening'](_0x1c5526),this['_editorAnnotations']['remove'](_0x1c5526));}['_setSelectedAnnotations'](_0x207950){for(const _0x13f269 of this['_selectedAnnotations'])_0x207950['includes'](_0x13f269)||this['_manuallyClosedAnnotationViews']['delete'](_0x13f269['view']);this['_selectedAnnotations']=_0x207950;}['_refreshPositioning'](){const _0x1d95f5=this['balloonPanelView'];this['annotations']['refreshPositioning'](),_0x1d95f5['isVisible']&&this['_updateBalloonPosition']();}['_showBalloon'](_0x2bc590){if(this['_manuallyClosedAnnotationViews']['has'](_0x2bc590['view']))return;const _0x24e57e=this['balloonPanelView']['content']['first'];_0x24e57e!==_0x2bc590['view']?(_0x24e57e&&this['_detachListeners'](_0x24e57e),this['_attachListeners'](_0x2bc590['view']),this['balloonPanelView']['content']['clear'](),this['balloonPanelView']['content']['add'](_0x2bc590['view']),this['_updateBalloonPosition']()):this['_updateBalloonPosition']();}['_updateBalloonPosition'](){const _0x5b6685=this['balloonPanelView']['content']['first'],_0x9bf786=_0x5b6685&&this['annotations']['getByView'](_0x5b6685);if(!_0x9bf786||!this['_annotationToNarrowView']['has'](_0x9bf786))return;const _0x208d71=this['_annotationToNarrowView']['get'](_0x9bf786)['element'],_0x308412=(function(){const _0x18d4a6=_0x39be82['defaultPositions'];return[_0x18d4a6['southArrowNorthEast'],_0x18d4a6['northArrowSouthEast'],_0x18d4a6['southArrowNorth'],_0x18d4a6['northArrowSouth'],_0x18d4a6['southArrowNorthWest'],_0x18d4a6['northArrowSouthWest']];}());this['balloonPanelView']['pin']({'target':_0x208d71,'positions':_0x308412});}['_hideBalloon'](){const _0x5835ad=this['balloonPanelView'],_0x161f69=_0x5835ad['content']['first'];_0x161f69&&(this['_detachListeners'](_0x161f69),_0x5835ad['unpin'](),_0x5835ad['content']['clear']());}['_attachListeners'](_0x5444ce){this['listenTo'](_0x5444ce,'change:height',()=>this['_updateBalloonPosition']()),this['listenTo'](_0x5444ce,'Esc',(_0x559c09,_0x4c09bb)=>{this['_manuallyClosedAnnotationViews']['add'](_0x5444ce),this['_hideBalloon'](),_0x4c09bb();});}['_detachListeners'](_0x3ede23){this['stopListening'](_0x3ede23);}}class c extends _0x2ad286{['isAttached'];['annotations'];['_manuallyClosed'];['_balloon'];['_addedAnnotations'];['_selectedAnnotations'];['_forceRefresh'];static get['requires'](){return[P,_0x2ea456,M];}static get['pluginName'](){return'InlineAnnotations';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x12bef8){super(_0x12bef8),_0x12bef8['editing']['view']['addObserver'](_0x258d07),this['isAttached']=!0x1,this['set']('activeAnnotation',null),this['annotations']=null,this['_manuallyClosed']=new Set(),this['_balloon']=_0x12bef8['plugins']['get'](_0x2ea456),this['_addedAnnotations']=new Set(),this['_selectedAnnotations']=[],this['_forceRefresh']=!0x1;}['init'](){const _0x2d1b36=this['editor']['plugins']['get'](M);_0x2d1b36['context']===this['editor']&&(_0x2d1b36['register']('inline',this),this['editor']['keystrokes']['set']('Esc',(_0x40d776,_0x3f1710)=>{const _0x2c56bc=this['_balloon'];if(this['isAttached']&&_0x2c56bc['visibleView']){const _0x44673e=this['annotations']['getByView'](_0x2c56bc['visibleView']);_0x44673e&&this['_closeAnnotation'](_0x44673e),_0x3f1710();}}));}['afterInit'](){const _0x38c92c=this['editor']['plugins']['get'](M);_0x38c92c['context']===this['editor']&&(_0x38c92c['hasActive']()||_0x38c92c['switchTo']('inline'));}['setActiveAnnotation'](_0x498d10){_0x498d10!==this['activeAnnotation']&&(this['activeAnnotation']&&(this['activeAnnotation']['isActive']=!0x1),_0x498d10&&this['editor']['ui']['focusTracker']['isFocused']&&(this['annotations']['has'](_0x498d10)&&this['_addAnnotationToBalloon'](_0x498d10,!0x0),_0x498d10['isActive']=!0x0),_0x498d10||this['_setSelectedAnnotations']([]),this['activeAnnotation']=_0x498d10);}['attach'](_0x397d33){this['annotations']=_0x397d33;const _0x2bd57a=this['editor']['plugins']['get'](M),_0x12335e=this['_balloon'];if(this['isAttached'])throw new _0x2f1633('inlineannotations-attach-already-attached',this);if(_0x2bd57a['context']!==this['editor'])throw new _0x2f1633('inlineannotations-not-allowed-with-context',this);const _0x562bf4=this['editor']['plugins']['get'](P);this['listenTo'](_0x562bf4,'refresh',()=>{const _0x38c6ec=_0x562bf4['getOrderedSelectedAnnotations']({'annotations':this['annotations'],'activeAnnotation':this['activeAnnotation']});var _0x37e104,_0x2932ab;!this['_forceRefresh']&&(_0x37e104=_0x38c6ec,_0x2932ab=this['_selectedAnnotations'],_0x37e104['length']===_0x2932ab['length']&&_0x37e104['every'](_0x5b06ae=>_0x2932ab['includes'](_0x5b06ae)))||(this['_forceRefresh']=!0x1,this['_setSelectedAnnotations'](_0x38c6ec),this['setActiveAnnotation'](_0x38c6ec[0x0]||null));}),this['listenTo'](_0x562bf4,'blur',(_0x206ad9,{isAnnotationTracked:_0x390a96})=>{this['activeAnnotation']&&_0x390a96(this['activeAnnotation'])&&(this['_setSelectedAnnotations']([]),this['setActiveAnnotation'](null));}),this['listenTo'](this['editor']['ui']['focusTracker'],'change:isFocused',(_0x257963,_0x2663eb,_0x4d6c6a)=>{_0x4d6c6a||this['setActiveAnnotation'](null);}),this['listenTo'](_0x397d33,'remove',(_0x8e48bf,_0x2c7af0)=>{this['_removeAnnotationFromBalloon'](_0x2c7af0),_0x2c7af0===this['activeAnnotation']&&this['setActiveAnnotation'](null);}),this['listenTo'](_0x12335e,'change:visibleView',(_0x4086f7,_0x1afd13,_0x5b66c6,_0x461b49)=>{_0x461b49&&this['stopListening'](_0x461b49);const _0xd7548e=_0x397d33['getByView'](_0x5b66c6);_0x5b66c6&&_0xd7548e&&(this['listenTo'](_0x5b66c6,'change:height',()=>{_0x12335e['updatePosition']();}),this['listenTo'](_0x5b66c6,'Esc',()=>{this['_closeAnnotation'](_0xd7548e),this['editor']['editing']['view']['focus']();}),this['activeAnnotation']!==_0xd7548e&&this['setActiveAnnotation'](_0xd7548e));}),this['listenTo'](this['editor']['ui'],'update',()=>{_0x12335e['visibleView']&&(_0x397d33['getByView'](_0x12335e['visibleView'])&&_0x12335e['updatePosition']());}),this['listenTo'](this['editor']['editing']['view']['document'],'mousedown',()=>{this['_forceRefresh']=!0x0,this['_manuallyClosed']['clear']();}),this['editor']['editing']['view']['document']['selection']['editableElement']&&this['editor']['editing']['view']['focus'](),this['isAttached']=!0x0;}['detach'](){if(!this['isAttached'])throw new _0x2f1633('inlineannotations-detach-not-attached',this);this['setActiveAnnotation'](null);for(const _0x1744cb of this['_addedAnnotations'])this['_removeAnnotationFromBalloon'](_0x1744cb);this['stopListening'](),this['isAttached']=!0x1,this['annotations']=null;}['destroy'](){this['isAttached']&&this['detach']();}['_setSelectedAnnotations'](_0x460628){for(const _0x329fe8 of this['_selectedAnnotations'])_0x460628['includes'](_0x329fe8)||this['_manuallyClosed']['delete'](_0x329fe8);for(const _0x57324a of this['annotations'])_0x460628['includes'](_0x57324a)||this['_removeAnnotationFromBalloon'](_0x57324a);if(this['editor']['ui']['focusTracker']['isFocused']){for(const _0xba704 of _0x460628)this['_addAnnotationToBalloon'](_0xba704);}this['_selectedAnnotations']=_0x460628;}['_addAnnotationToBalloon'](_0x7fa6ed,_0xb81683=!0x1){this['_manuallyClosed']['has'](_0x7fa6ed)||(this['_addedAnnotations']['has'](_0x7fa6ed)||this['_balloon']['hasView'](_0x7fa6ed['view'])||(this['_addedAnnotations']['add'](_0x7fa6ed),this['_balloon']['add']({'stackId':_0x7fa6ed['view']['id'],'view':_0x7fa6ed['view'],'position':{'target':()=>this['_getBalloonTargetForAnnotation'](_0x7fa6ed)}})),_0xb81683&&this['_balloon']['showStack'](_0x7fa6ed['view']['id']));}['_getBalloonTargetForAnnotation'](_0x114f40){const _0x35d09a=_0x114f40['target'],_0x45bd08=this['editor']['editing']['view'],_0x4ff3c5=_0x45bd08['document']['selection']['getFirstRange'](),_0x34342e=_0x45bd08['domConverter']['viewRangeToDom'](_0x4ff3c5);if(_0x34342e['collapse'](!0x0),_0x35d09a){if(_0x35d09a instanceof _0x16256)return _0x35d09a;let _0x143f03=[];for(const _0x2b6880 of _0x35d09a)_0x143f03['push'](...(_0x43be87=_0x2b6880['getClientRects'](),Array['from'](_0x43be87)['map'](DOMRect['fromRect'])));_0x143f03=function(_0x2a1407){const _0x19fdba=[];let _0x19fd37=_0x2a1407[0x0];for(let _0x1f7d10=0x1;_0x1f7d10<_0x2a1407['length'];_0x1f7d10++)b(_0x19fd37,_0x2a1407[_0x1f7d10])?_0x19fd37['width']+=_0x2a1407[_0x1f7d10]['width']:(_0x19fdba['push'](_0x19fd37),_0x19fd37=_0x2a1407[_0x1f7d10]);return _0x19fdba['push'](_0x19fd37),_0x19fdba;}(_0x143f03);const _0x1a33ec=_0x34342e['getBoundingClientRect']();return _0x143f03['find'](_0x58616c=>_0x58616c['top']<=_0x1a33ec['top']&&_0x58616c['bottom']>=_0x1a33ec['bottom']&&_0x58616c['left']<=_0x1a33ec['left']&&_0x58616c['right']>=_0x1a33ec['right'])||_0x143f03[0x0];}var _0x43be87;return _0x114f40['targetRect']||_0x34342e;}['_removeAnnotationFromBalloon'](_0x57902b){this['_addedAnnotations']['has'](_0x57902b)&&this['_balloon']['hasView'](_0x57902b['view'])&&(this['_addedAnnotations']['delete'](_0x57902b),this['_balloon']['remove'](_0x57902b['view']));}['_closeAnnotation'](_0x4ee702){this['_manuallyClosed']['add'](_0x4ee702),this['_removeAnnotationFromBalloon'](_0x4ee702);}}function b(_0x4c05af,_0x589032){return _0x4c05af['top']===_0x589032['top']&&_0x4c05af['bottom']===_0x589032['bottom']&&_0x4c05af['right']===_0x589032['left'];}var Z='<!--\x0a\x0a\x20What\x20you\x27re\x20currently\x20looking\x20at\x20is\x20the\x20source\x20code\x20of\x20a\x20legally\x20protected,\x20proprietary\x20software.\x0a\x20CKEditor\x205\x20Collaboration\x20is\x20licensed\x20under\x20a\x20commercial\x20license\x20and\x20protected\x20by\x20copyright\x20law.\x20Where\x20not\x20otherwise\x20indicated,\x0a\x20all\x20CKEditor\x205\x20Collaboration\x20content\x20is\x20authored\x20by\x20CKSource\x20engineers\x20and\x20consists\x20of\x20CKSource-owned\x20intellectual\x20property.\x0a\x0a\x20Copyright\x20(c)\x202003-2024,\x20CKSource\x20Holding\x20sp.\x20z\x20o.o.\x20All\x20rights\x20reserved.\x0a\x0a!-->\x0a\x0a<svg\x20viewBox=\x220\x200\x2020\x2020\x22\x20xmlns=\x22http://www.w3.org/2000/svg\x22><path\x20clip-rule=\x22evenodd\x22\x20d=\x22M14\x203.5A3.5\x203.5\x200\x200\x201\x2017.5\x207v6l-.005.192a3.501\x203.501\x200\x200\x201-2.927\x203.262l-.062.008v1.813a1.5\x201.5\x200\x200\x201-2.193\x201.33l-.37-.193-.38-.212a13.452\x2013.452\x200\x200\x201-3.272-2.63l-.062-.07-4.729-.046a3.5\x203.5\x200\x200\x201-3.5-3.5v-6a3.5\x203.5\x200\x200\x201\x203.5-3.5L14\x203.5ZM3.5\x204.954a2\x202\x200\x200\x200-2\x202v6a2\x202\x200\x200\x200\x202\x202L8.924\x2015a11.917\x2011.917\x200\x200\x200\x203.71\x203.081l.372.194v-3.268L12.962\x2015H14a2\x202\x200\x200\x200\x202-2V7a2\x202\x200\x200\x200-2-2L3.5\x204.954Z\x22/><path\x20d=\x22M16.5.5h-10a3.5\x203.5\x200\x200\x200-3.162\x202h1.84A2\x202\x200\x200\x201\x206.5\x202h10a2\x202\x200\x200\x201\x202\x202v8.873a3.502\x203.502\x200\x200\x200\x201.495-2.681L20\x2010V4A3.5\x203.5\x200\x200\x200\x2016.5.5Z\x22/><path\x20clip-rule=\x22evenodd\x22\x20d=\x22M12.013\x207.453a.75.75\x200\x200\x201\x20.034\x201.06l-3.75\x204a.75.75\x200\x200\x201-1.045.048l-2.25-2a.75.75\x200\x200\x201\x20.996-1.122l1.704\x201.515\x203.25-3.467a.75.75\x200\x200\x201\x201.061-.034Z\x22/></svg>\x0a';class tt extends kt{['focusTracker'];['focusCycler'];['_annotationViews'];constructor(_0x44e3e4,_0x5a8a17){super(_0x44e3e4),this['set']('isEmpty',!_0x5a8a17['length']),this['focusTracker']=new _0x5abdce(),this['_annotationViews']=_0x5a8a17,this['_annotationViews']['delegate']('arrowup','arrowdown')['to'](this),this['on']('arrowup',()=>{this['focusCycler']['focusPrevious']();}),this['on']('arrowdown',()=>{this['focusCycler']['focusNext']();}),this['focusCycler']=new Ft({'focusables':_0x5a8a17,'focusTracker':this['focusTracker']}),this['listenTo'](_0x5a8a17,'add',()=>{this['isEmpty']=!0x1;}),this['listenTo'](_0x5a8a17,'remove',(_0x53de8f,_0x673b28)=>{_0x673b28['isActive']&&this['focus'](),_0x5a8a17['length']||(this['isEmpty']=!0x0);});const _0x1147f9=this['bindTemplate'];this['setTemplate']({'tag':'div','attributes':{'dir':'auto','class':['ck','ck-comments-archive'],'tabindex':-0x1,'role':'list','aria-label':S(_0x44e3e4,'COMMENTS_ARCHIVE_LIST_LABEL')},'children':[{'tag':'div','attributes':{'class':['ck-comments-archive__content'],'role':'presentation'},'children':[{'tag':'div','attributes':{'role':'presentation'},'children':_0x5a8a17},{'tag':'p','attributes':{'class':['ck-comments-archive__info',_0x1147f9['if']('isEmpty','ck-hidden',_0x4fb058=>!_0x4fb058)]},'children':[{'text':S(_0x44e3e4,'EMPTY_COMMENTS_ARCHIVE')}]}]}]});}['render'](){super['render'](),this['_setupKeyboardNavigation']();}['destroy'](){super['destroy'](),this['focusTracker']['destroy']();}['focus'](){this['focusCycler']['first']?this['focusCycler']['focusFirst']():this['element']['focus']();}['_setupKeyboardNavigation'](){for(const _0x48dc19 of this['_annotationViews'])this['focusTracker']['add'](_0x48dc19['element']);this['_annotationViews']['on']('change',(_0xcea87e,{added:_0x429153,removed:_0xbe8df0})=>{for(const _0xc146ec of _0x429153)this['focusTracker']['add'](_0xc146ec['element']);for(const _0xd4f6fb of _0xbe8df0)this['focusTracker']['remove'](_0xd4f6fb['element']);});}}class f extends _0x17f52f{static get['pluginName'](){return'CommentsArchive';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}static get['requires'](){return[o,N];}constructor(_0x5c98cd){super(_0x5c98cd),this['archivedThreads']=new _0x3040b9();}['init'](){const _0x355551=this['context'],_0xfe6b43=_0x355551['plugins']['get'](o),_0x2c293b=_0x355551['plugins']['get'](N);this['listenTo'](_0xfe6b43,'addCommentThread',(_0x2787e7,{threadId:_0xdbd566})=>{const _0x966e62=_0xfe6b43['getCommentThread'](_0xdbd566);_0x966e62['archivedAt']&&this['archivedThreads']['add'](_0x966e62,this['_calculatePosition'](_0x966e62['archivedAt'])),this['listenTo'](_0x966e62,'change:archivedAt',(_0x36ce82,_0x4a9f9b,_0x3ea401)=>{_0x3ea401?this['archivedThreads']['has'](_0x966e62)||this['archivedThreads']['add'](_0x966e62,this['_calculatePosition'](_0x966e62['archivedAt'])):this['archivedThreads']['has'](_0x966e62)&&this['archivedThreads']['remove'](_0x966e62);});}),this['listenTo'](_0xfe6b43,'removeCommentThread',(_0x385f68,{threadId:_0x13e58d})=>{const _0x1de7b0=_0xfe6b43['getCommentThread'](_0x13e58d);this['stopListening'](_0x1de7b0),this['archivedThreads']['has'](_0x1de7b0)&&this['archivedThreads']['remove'](_0x1de7b0);},{'priority':'highest'}),this['listenTo'](_0x2c293b['collection'],'focus',(_0x41f3fb,_0x132f45)=>{_0x132f45['isVisible']||(_0x132f45['isActive']=!0x0,_0x2c293b['activate'](_0x132f45));});}['_calculatePosition'](_0x42d815){const _0x24846e=[...this['archivedThreads']]['findIndex'](_0x811345=>_0x811345['archivedAt']<_0x42d815);return _0x24846e>-0x1?_0x24846e:this['archivedThreads']['length'];}}class a extends _0x2ad286{['commentsArchiveView'];['annotationViews'];['_pendingThreads'];static get['pluginName'](){return'CommentsArchiveUI';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}static get['requires'](){return[f,_0x123aad];}constructor(_0x481e78){super(_0x481e78),this['annotationViews']=new _0x3d3c53(),this['_pendingThreads']=[];}['init'](){const _0x55361e=this['editor'],_0x203d2d=this['_hideDialogOnAnnotationEscape']['bind'](this);_0x55361e['ui']['componentFactory']['add']('commentsArchive',()=>this['_createCommentsArchiveButton'](_0xdf0cec,!0x0)),_0x55361e['ui']['componentFactory']['add']('menuBar:commentsArchive',()=>{const _0x38907e=this['_createCommentsArchiveButton'](_0x2444af);return _0x38907e['set']({'role':'menuitemcheckbox'}),_0x38907e;});const _0x49455c=_0x55361e['plugins']['get'](f),_0x58c874=_0x55361e['plugins']['get']('Annotations'),_0x48633f=_0x55361e['plugins']['get']('CommentsRepository');this['listenTo'](_0x49455c['archivedThreads'],'add',(_0x14dda5,_0x3b2abb)=>{const _0x5d82f7=_0x55361e['config']['get']('collaboration.channelId');if(!_0x5d82f7||_0x3b2abb['channelId']===_0x5d82f7){const _0x328bd7=_0x48633f['_threadToController']['get'](_0x3b2abb);if(!_0x328bd7)return void this['_pendingThreads']['push'](_0x3b2abb);const _0x1a5aff=this['_calculatePosition'](_0x3b2abb['archivedAt']),_0x157841=_0x58c874['getByInnerView'](_0x328bd7['view']);_0x157841['isVisible']&&_0x58c874['_visibleAnnotations']['remove'](_0x157841),this['annotationViews']['add'](_0x157841['view'],_0x1a5aff);}}),this['listenTo'](_0x58c874['collection'],'add',(_0x5e9f74,_0x2131c2)=>{const _0x4bacb7=this['_pendingThreads']['find'](_0x3f2996=>{const _0xfdf7ff=_0x48633f['_threadToController']['get'](_0x3f2996);return _0xfdf7ff&&_0x2131c2['innerView']===_0xfdf7ff['view'];});if(_0x4bacb7){const _0xed9270=this['_calculatePosition'](_0x4bacb7['archivedAt']);this['annotationViews']['add'](_0x2131c2['view'],_0xed9270),this['_pendingThreads']['splice'](this['_pendingThreads']['indexOf'](_0x4bacb7),0x1);}}),this['listenTo'](_0x49455c['archivedThreads'],'remove',(_0x36e061,_0x31ee39)=>{const _0x14220c=_0x55361e['config']['get']('collaboration.channelId');if(!_0x14220c||_0x31ee39['channelId']===_0x14220c){const _0x30e03a=_0x48633f['_threadToController']['get'](_0x31ee39),_0x5b8321=_0x58c874['getByInnerView'](_0x30e03a['view']);this['annotationViews']['remove'](_0x5b8321['view']),this['stopListening'](_0x5b8321['focusableElements']);}}),this['listenTo'](_0x58c874['collection'],'add',(_0x2d581a,_0x1aa264)=>{this['listenTo'](_0x1aa264,'escape',_0x203d2d);}),this['listenTo'](_0x58c874['collection'],'remove',(_0x2252ae,_0x39eda0)=>{this['stopListening'](_0x39eda0,'escape',_0x203d2d);});}['_calculatePosition'](_0x18aba6){const _0x2a8052=this['editor']['config']['get']('collaboration.channelId'),_0x5df4e1=[...this['editor']['plugins']['get'](f)['archivedThreads']]['filter'](_0x2dd841=>_0x2dd841['channelId']===_0x2a8052)['findIndex'](_0x322fdd=>_0x322fdd['archivedAt']<_0x18aba6);return _0x5df4e1<0x0||_0x5df4e1>this['annotationViews']['length']?this['annotationViews']['length']:_0x5df4e1-0x1;}['_toggleDialog'](){const _0x5e5928=this['editor'],_0x41ea9b=_0x5e5928['plugins']['get']('Dialog');this['commentsArchiveView']||(this['commentsArchiveView']=new tt(_0x5e5928['locale'],this['annotationViews'])),'commentsArchive'===_0x41ea9b['id']?_0x41ea9b['hide']():_0x41ea9b['show']({'id':'commentsArchive','title':S(_0x5e5928['locale'],'COMMENTS_ARCHIVE'),'icon':Z,'hasCloseButton':!0x0,'content':this['commentsArchiveView'],'position':_0x5aaf2f['EDITOR_TOP_SIDE']});}['_createCommentsArchiveButton'](_0x229495,_0x309763=!0x1){const _0xc1e642=this['editor']['locale'],_0x2d23a4=this['editor']['plugins']['get']('Dialog'),_0x332bb5=new _0x229495(_0xc1e642);return _0x332bb5['bind']('isEnabled')['to'](this,'isEnabled'),_0x332bb5['bind']('isOn')['to'](_0x2d23a4,'id',_0x4ab782=>'commentsArchive'===_0x4ab782),_0x332bb5['set']({'label':S(_0xc1e642,'COMMENTS_ARCHIVE'),'icon':Z,'isToggleable':!0x0}),_0x309763&&(_0x332bb5['tooltip']=!0x0),this['listenTo'](_0x332bb5,'execute',()=>this['_toggleDialog']()),_0x332bb5;}['_hideDialogOnAnnotationEscape']=_0x3992c8=>{const _0x39661f=_0x3992c8['source'];if(!this['annotationViews']['has'](_0x39661f['view']))return;const _0x594cc0=this['editor']['plugins']['get']('Dialog');_0x594cc0['isOpen']&&'commentsArchive'===_0x594cc0['id']&&(_0x594cc0['hide'](),_0x3992c8['stop']());};}class p extends _0x2ad286{static get['requires'](){return[o,r,i,f,a,s,e,n,c];}static get['pluginName'](){return'Comments';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}}export{d as Annotation,x as AnnotationCollection,T as AnnotationView,N as Annotations,M as AnnotationsUIs,is as BaseCommentThreadView,rs as BaseCommentView,re as Comment,oe as CommentThread,Ct as CommentThreadController,ie as CommentThreadInputView,vt as CommentThreadView,gt as CommentView,p as Comments,f as CommentsArchive,a as CommentsArchiveUI,te as CommentsListView,s as CommentsOnly,o as CommentsRepository,i as CommentsUI,P as EditorAnnotations,c as InlineAnnotations,n as NarrowSidebar,e as WideSidebar};