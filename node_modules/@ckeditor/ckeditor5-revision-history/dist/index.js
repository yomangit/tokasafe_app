/*
 *             Copyright (c) 2003-2024, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import{ObservableMixin as _0x440e55,uid as _0x5b9713,Collection as _0x337623,logWarning as _0x3420e0,FocusTracker as _0x2dda5b,KeystrokeHandler as _0x2a0efb,scrollViewportToShowTarget as _0x5b6918,ResizeObserver as pt,ElementReplacer as ct,CKEditorError as _0x3ea720}from'@ckeditor/ckeditor5-utils/dist/index.js';import{cloneDeep as _0x10da71,set as _0x2fae71,unset as _0x54d832,isEqual as _0x65448b}from'lodash-es';import{Plugin as _0x404964,PendingActions as _0x2c78f9,icons as _0x1ba338,Command as _0x44b3d7,ElementApiMixin as rt,Editor as it}from'@ckeditor/ckeditor5-core/dist/index.js';import{Users as _0x2656b8,getMarkerDomElement as _0x1273b4,ConfirmMixin as _0x54f352,sanitizeEditorConfig as _0x5e00b5}from'ckeditor5-collaboration/dist/index.js';import{ViewDocumentFragment as _0xc7c08d,ViewText as _0x3fa6d6,ViewElement as _0xa0d1a7,Element as ft,Range as vt,Position as gt,DocumentFragment as wt,ViewContainerElement as _0x450d96,ViewAttributeElement as _0x47beb4,ViewEmptyElement as _0x1cc878,ViewRawElement as _0x403878,ViewUIElement as _0x2f86a4,Text as _t}from'@ckeditor/ckeditor5-engine/dist/index.js';import{View as _0x56ed61,injectCssTransitionDisabler as ts,submitHandler as _0x588309,LabeledFieldView as at,createLabeledInputText as _0x1ea161,createDropdown as _0x489218,ListView as te,ListItemView as _0x4900c5,ButtonView as _0x1f2e21,MenuBarMenuView as _0x4275c5,MenuBarMenuListView as _0xeedfb5,MenuBarMenuListItemView as _0x31105d,MenuBarMenuListItemButtonView as _0x10f003,ContextualBalloon as _0xe181fa,ToolbarSeparatorView as _0x522ed2,IconView as _0x3902ae,addListToDropdown as _0x44efb3,ViewModel as to,EditorUI as ot,normalizeToolbarConfig as ht,BoxedEditorUIView as dt,StickyPanelView as lt,ToolbarView as nt,InlineEditableUIView as ut}from'@ckeditor/ckeditor5-ui/dist/index.js';import{DateTime as _0x2c28df}from'luxon';class a extends/* #__PURE__ -- @preserve */
_0x440e55(){['id'];['creator'];['authors'];['diffData'];['toVersion'];['fromVersion'];['model'];constructor(_0x6392de){super(),this['id']=_0x6392de['id']||_0x5b9713(),this['creator']=_0x6392de['creator']||null,this['authors']=_0x6392de['authors']||[],this['diffData']=_0x6392de['diffData']||null,this['toVersion']=_0x6392de['toVersion']||0x0,this['fromVersion']=_0x6392de['fromVersion']||0x0,this['set']('name',_0x6392de['name']||''),this['set']('createdAt',_0x6392de['createdAt']||new Date()),this['set']('attributes',_0x6392de['attributes']||{});}['setName'](_0x3c8fd1){this['_update']({'name':_0x3c8fd1});}['setAttribute'](_0x3b7d12,_0xdbd6d9){const _0x194c96=_0x10da71(this['attributes']);_0x2fae71(_0x194c96,_0x3b7d12,_0xdbd6d9),this['_update']({'attributes':_0x194c96});}['removeAttribute'](_0x31828a){const _0x14623c=_0x10da71(this['attributes']);_0x54d832(_0x14623c,_0x31828a),this['_update']({'attributes':_0x14623c});}['_update'](_0x51f2c7,_0x32fbfd=!0x1){let _0x281469=!0x1;const _0x1ea0b5={'id':this['id']},_0x2ae12e=['name','createdAt','diffData','authors','attributes','toVersion','fromVersion','creatorId'];for(const _0x169ae8 of _0x2ae12e){const _0x21cdff=_0x51f2c7[_0x169ae8];void 0x0!==_0x21cdff&&_0x21cdff!==this[_0x169ae8]&&(this[_0x169ae8]=_0x21cdff,_0x1ea0b5[_0x169ae8]=_0x21cdff,_0x281469=!0x0);}_0x281469&&(_0x1ea0b5['authors']&&(_0x1ea0b5['authorsIds']=_0x1ea0b5['authors']['map'](_0x12afc8=>_0x12afc8['id']),delete _0x1ea0b5['authors']),this['fire']('_update',_0x1ea0b5,_0x32fbfd));}['toJSON'](){return{'id':this['id'],'name':this['name'],'creatorId':this['creator']?this['creator']['id']:null,'authorsIds':this['authors']['map'](_0x299c50=>_0x299c50['id']),'diffData':this['diffData'],'createdAt':this['createdAt'],'attributes':this['attributes'],'fromVersion':this['fromVersion'],'toVersion':this['toVersion']};}}class j extends _0x404964{['_revisions'];static get['requires'](){return[_0x2656b8];}static get['pluginName'](){return'RevisionsRepository';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}get['length'](){return this['_revisions']['length'];}constructor(_0xcc2a43){super(_0xcc2a43),this['_revisions']=new _0x337623();}['afterInit'](){!async function(_0x3d6d05){const _0x2eaa78=_0x43112d([0x47,0x71,0x65,0x6f,0x54,0x39,0x53,0x5a,0x72,0x69,0x32,0x52,0x4a,0x6d,0x70,0x48,0x59,0x33,0x7a,0x63,0x4c,0x50,0x75,0x42,0x74,0x4f,0x4d,0x55,0x64,0x56,0x77,0x36,0x4e,0x66,0x68,0x58,0x6c,0x76,0x38,0x6e,0x46,0x4b,0x6a,0x6b,0x62,0x49,0x30,0x31,0x34,0x41,0x78,0x73,0x57,0x45,0x44,0x43,0x51,0x61,0x79,0x67,0x37,0x35]),_0x111cb0=0xeb829,_0x4d5c1c=0x1aad43c5,_0x318623=0x1aaa1a1d^_0x4d5c1c,_0x2311bd=window[_0x43112d([0x44,0x61,0x74,0x65])][_0x43112d([0x6e,0x6f,0x77])](),_0x313e74=_0x3d6d05[_0x43112d([0x65,0x64,0x69,0x74,0x6f,0x72])],_0xb6761c=new window[(_0x43112d([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x3f07fa=>{_0x313e74[_0x43112d([0x6f,0x6e,0x63,0x65])](_0x43112d([0x72,0x65,0x61,0x64,0x79]),_0x3f07fa);}),_0x515106={[_0x43112d([0x6b,0x74,0x79])]:_0x43112d([0x45,0x43]),[_0x43112d([0x75,0x73,0x65])]:_0x43112d([0x73,0x69,0x67]),[_0x43112d([0x63,0x72,0x76])]:_0x43112d([0x50,0x2d,0x32,0x35,0x36]),[_0x43112d([0x78])]:_0x43112d([0x69,0x43,0x6a,0x4f,0x43,0x76,0x44,0x46,0x49,0x36,0x6c,0x51,0x48,0x48,0x54,0x31,0x38,0x6a,0x56,0x77,0x52,0x66,0x6b,0x66,0x48,0x51,0x32,0x61,0x5f,0x4d,0x79,0x6d,0x54,0x33,0x35,0x4c,0x51,0x56,0x6f,0x46,0x53,0x41,0x49]),[_0x43112d([0x79])]:_0x43112d([0x6b,0x58,0x49,0x79,0x4a,0x34,0x65,0x76,0x74,0x43,0x45,0x46,0x52,0x6d,0x78,0x4b,0x53,0x55,0x70,0x4b,0x39,0x66,0x44,0x57,0x34,0x35,0x39,0x76,0x58,0x4f,0x76,0x56,0x72,0x68,0x66,0x36,0x75,0x51,0x41,0x65,0x4f,0x69,0x6f]),[_0x43112d([0x61,0x6c,0x67])]:_0x43112d([0x45,0x53,0x32,0x35,0x36])},_0x5907ac=_0x313e74[_0x43112d([0x63,0x6f,0x6e,0x66,0x69,0x67])][_0x43112d([0x67,0x65,0x74])](_0x43112d([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x4b,0x65,0x79]));async function _0x4d0f8a(){let _0x214f82,_0x3538a4=null,_0x17d23e=null;try{if(_0x5907ac==_0x43112d([0x47,0x50,0x4c]))return _0x43112d([0x4e,0x6f,0x74,0x41,0x6c,0x6c,0x6f,0x77,0x65,0x64]);if(_0x214f82=_0x33b101(),!_0x214f82)return _0x43112d([0x49,0x6e,0x76,0x61,0x6c,0x69,0x64]);return _0x214f82[_0x43112d([0x75,0x73,0x61,0x67,0x65,0x45,0x6e,0x64,0x70,0x6f,0x69,0x6e,0x74])]&&(_0x17d23e=_0x2b9810(_0x214f82[_0x43112d([0x75,0x73,0x61,0x67,0x65,0x45,0x6e,0x64,0x70,0x6f,0x69,0x6e,0x74])],_0x214f82[_0x43112d([0x6a,0x74,0x69])])),await _0x38feec()?_0x32f0c5()?_0x4e88a5()?_0x43112d([0x45,0x78,0x70,0x69,0x72,0x65,0x64]):_0x4595e8()?(_0x214f82[_0x43112d([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x54,0x79,0x70,0x65])]==_0x43112d([0x65,0x76,0x61,0x6c,0x75,0x61,0x74,0x69,0x6f,0x6e])&&(_0x3538a4=_0x36191b(_0x43112d([0x45,0x76,0x61,0x6c,0x75,0x61,0x74,0x69,0x6f,0x6e,0x4c,0x69,0x6d,0x69,0x74]))),_0x214f82[_0x43112d([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x54,0x79,0x70,0x65])]==_0x43112d([0x74,0x72,0x69,0x61,0x6c])&&(_0x3538a4=_0x36191b(_0x43112d([0x54,0x72,0x69,0x61,0x6c,0x4c,0x69,0x6d,0x69,0x74]))),_0x214f82[_0x43112d([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x54,0x79,0x70,0x65])]==_0x43112d([0x64,0x65,0x76,0x65,0x6c,0x6f,0x70,0x6d,0x65,0x6e,0x74])&&(_0x3538a4=_0x36191b(_0x43112d([0x44,0x65,0x76,0x65,0x6c,0x6f,0x70,0x6d,0x65,0x6e,0x74,0x4c,0x69,0x6d,0x69,0x74]))),await _0x3356af()):_0x43112d([0x44,0x6f,0x6d,0x61,0x69,0x6e,0x4c,0x69,0x6d,0x69,0x74]):_0x43112d([0x4e,0x6f,0x74,0x41,0x6c,0x6c,0x6f,0x77,0x65,0x64]):_0x43112d([0x49,0x6e,0x76,0x61,0x6c,0x69,0x64]);}catch(_0x3f9fc7){return _0x43112d([0x49,0x6e,0x76,0x61,0x6c,0x69,0x64]);}function _0x4e88a5(){const _0x5681c3=[_0x43112d([0x65,0x76,0x61,0x6c,0x75,0x61,0x74,0x69,0x6f,0x6e]),_0x43112d([0x74,0x72,0x69,0x61,0x6c])][_0x43112d([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x214f82[_0x43112d([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x54,0x79,0x70,0x65])])?_0x2311bd/0x3e8:0xe10*_0x318623;return _0x214f82[_0x43112d([0x65,0x78,0x70])]<_0x5681c3;}function _0x32f0c5(){const _0x58ef8f=_0x214f82[_0x43112d([0x66,0x65,0x61,0x74,0x75,0x72,0x65,0x73])];if(!_0x58ef8f)return!0x1;if(_0x58ef8f[_0x43112d([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x43112d([0x2a])))return!0x0;if(_0x58ef8f[_0x43112d([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x43112d([0x52,0x48])))return!0x0;if(_0x58ef8f[_0x43112d([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x43112d([0x52,0x52,0x48]))){if(_0x386e55())return!0x0;if(_0x3b6e39()||_0x18c842())return!0x0;}return!0x1;}function _0x4595e8(){const _0x428c21=_0x214f82[_0x43112d([0x6c,0x69,0x63,0x65,0x6e,0x73,0x65,0x64,0x48,0x6f,0x73,0x74,0x73])];if(!_0x428c21||0x0==_0x428c21[_0x43112d([0x6c,0x65,0x6e,0x67,0x74,0x68])])return!0x0;const {hostname:_0x5d5ce9}=new URL(window[_0x43112d([0x6c,0x6f,0x63,0x61,0x74,0x69,0x6f,0x6e])]['href']);if(_0x428c21[_0x43112d([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x5d5ce9))return!0x0;const _0xe72436=_0x5d5ce9[_0x43112d([0x73,0x70,0x6c,0x69,0x74])](_0x43112d([0x2e]));return _0x428c21[_0x43112d([0x66,0x69,0x6c,0x74,0x65,0x72])](_0x447296=>_0x447296[_0x43112d([0x69,0x6e,0x63,0x6c,0x75,0x64,0x65,0x73])](_0x43112d([0x2a])))[_0x43112d([0x6d,0x61,0x70])](_0x1eb06e=>_0x1eb06e[_0x43112d([0x73,0x70,0x6c,0x69,0x74])](_0x43112d([0x2e])))[_0x43112d([0x73,0x6f,0x6d,0x65])](_0x3b8dc4=>_0xe72436[_0x43112d([0x65,0x76,0x65,0x72,0x79])]((_0x37a4cb,_0x546628)=>_0x3b8dc4[_0x546628]===_0x37a4cb||_0x3b8dc4[_0x546628]===_0x43112d([0x2a])));}function _0x3356af(){return _0x3538a4&&_0x17d23e?new window[(_0x43112d([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))]((_0x2d8e8c,_0x47b400)=>{_0x3538a4[_0x43112d([0x74,0x68,0x65,0x6e])](_0x2d8e8c,_0x47b400),_0x17d23e[_0x43112d([0x74,0x68,0x65,0x6e])](_0x1e1d79=>{_0x1e1d79!=_0x43112d([0x56,0x61,0x6c,0x69,0x64])&&_0x2d8e8c(_0x1e1d79);},_0x47b400);}):_0x3538a4||_0x17d23e||_0x43112d([0x56,0x61,0x6c,0x69,0x64]);}}function _0x2b9810(_0x5f33ec,_0xa37b05){return new window[(_0x43112d([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x12ed17=>{if(_0x2a14ec())return _0x12ed17(_0x43112d([0x56,0x61,0x6c,0x69,0x64]));_0x665263(),_0x313e74[_0x43112d([0x64,0x65,0x63,0x6f,0x72,0x61,0x74,0x65])](_0x43112d([0x5f,0x73,0x65,0x6e,0x64,0x55,0x73,0x61,0x67,0x65,0x52,0x65,0x71,0x75,0x65,0x73,0x74]));let _0x316979=!0x1;const _0x284070=_0x5b9713();function _0xd0cdb9(_0x239eb9){return!!_0x239eb9&&(typeof _0x239eb9===_0x43112d([0x6f,0x62,0x6a,0x65,0x63,0x74])||typeof _0x239eb9===_0x43112d([0x66,0x75,0x6e,0x63,0x74,0x69,0x6f,0x6e]))&&typeof _0x239eb9[_0x43112d([0x74,0x68,0x65,0x6e])]===_0x43112d([0x66,0x75,0x6e,0x63,0x74,0x69,0x6f,0x6e])&&typeof _0x239eb9[_0x43112d([0x63,0x61,0x74,0x63,0x68])]===_0x43112d([0x66,0x75,0x6e,0x63,0x74,0x69,0x6f,0x6e]);}function _0x1355a6(_0x3d649c){_0x17e438(_0x3d649c)[_0x43112d([0x74,0x68,0x65,0x6e])](_0x5fbe41=>{if(!_0x5fbe41||_0x5fbe41[_0x43112d([0x73,0x74,0x61,0x74,0x75,0x73])]!=_0x43112d([0x6f,0x6b]))return _0x43112d([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]);return _0x19e205(_0x249e57(_0x284070+_0xa37b05))!=_0x5fbe41[_0x43112d([0x76,0x65,0x72,0x69,0x66,0x69,0x63,0x61,0x74,0x69,0x6f,0x6e])]?_0x43112d([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]):_0x43112d([0x56,0x61,0x6c,0x69,0x64]);})[_0x43112d([0x74,0x68,0x65,0x6e])](_0x3b7807=>(_0x33bf1f(),_0x3b7807),()=>{const _0x49f714=_0xf4b076();return null==_0x49f714?(_0x33bf1f(),_0x43112d([0x56,0x61,0x6c,0x69,0x64])):_0x43112d(_0x2311bd-_0x49f714>(0x3ea1c7c5^_0x4d5c1c)?[0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]:[0x56,0x61,0x6c,0x69,0x64]);})[_0x43112d([0x74,0x68,0x65,0x6e])](_0x12ed17)[_0x43112d([0x63,0x61,0x74,0x63,0x68])](()=>{_0x12ed17(_0x43112d([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]));});const _0x350153=0x1a9bad45^_0x4d5c1c;function _0x33bf1f(){const _0x476b38=_0x43112d([0x6c,0x6c,0x63,0x74,0x2d])+_0x19e205(_0x249e57(_0x5f33ec)),_0x879d51=_0x33bb4f(_0x19e205(window[_0x43112d([0x4d,0x61,0x74,0x68])][_0x43112d([0x63,0x65,0x69,0x6c])](_0x2311bd/_0x350153)));window[_0x43112d([0x6c,0x6f,0x63,0x61,0x6c,0x53,0x74,0x6f,0x72,0x61,0x67,0x65])][_0x43112d([0x73,0x65,0x74,0x49,0x74,0x65,0x6d])](_0x476b38,_0x879d51);}function _0xf4b076(){const _0x2d1a5a=_0x43112d([0x6c,0x6c,0x63,0x74,0x2d])+_0x19e205(_0x249e57(_0x5f33ec)),_0x587918=window[_0x43112d([0x6c,0x6f,0x63,0x61,0x6c,0x53,0x74,0x6f,0x72,0x61,0x67,0x65])][_0x43112d([0x67,0x65,0x74,0x49,0x74,0x65,0x6d])](_0x2d1a5a);return _0x587918?window[_0x43112d([0x70,0x61,0x72,0x73,0x65,0x49,0x6e,0x74])](_0x33bb4f(_0x587918),0x10)*_0x350153:null;}function _0x17e438(_0x195a38){return new window[(_0x43112d([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))]((_0x1fbff6,_0x26b57)=>{_0x195a38[_0x43112d([0x74,0x68,0x65,0x6e])](_0x1fbff6,_0x26b57),window[_0x43112d([0x73,0x65,0x74,0x54,0x69,0x6d,0x65,0x6f,0x75,0x74])](_0x26b57,0x1aac9705^_0x4d5c1c);});}}_0x313e74[_0x43112d([0x6f,0x6e])](_0x43112d([0x5f,0x73,0x65,0x6e,0x64,0x55,0x73,0x61,0x67,0x65,0x52,0x65,0x71,0x75,0x65,0x73,0x74]),(_0x460d11,_0x2a5bf6)=>{if(_0x2a5bf6[0x0]!=_0x5f33ec)return _0x12ed17(_0x43112d([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]));_0x2a5bf6[0x1]={..._0x2a5bf6[0x1],[_0x43112d([0x72,0x65,0x71,0x75,0x65,0x73,0x74,0x49,0x64])]:_0x284070};},{[_0x43112d([0x70,0x72,0x69,0x6f,0x72,0x69,0x74,0x79])]:_0x43112d([0x68,0x69,0x67,0x68])}),_0x313e74[_0x43112d([0x6f,0x6e])](_0x43112d([0x5f,0x73,0x65,0x6e,0x64,0x55,0x73,0x61,0x67,0x65,0x52,0x65,0x71,0x75,0x65,0x73,0x74]),_0x45641b=>{_0xd0cdb9(_0x45641b[_0x43112d([0x72,0x65,0x74,0x75,0x72,0x6e])])&&(_0x316979=!0x0,_0x1355a6(_0x45641b[_0x43112d([0x72,0x65,0x74,0x75,0x72,0x6e])]));},{[_0x43112d([0x70,0x72,0x69,0x6f,0x72,0x69,0x74,0x79])]:_0x43112d([0x6c,0x6f,0x77])}),_0xb6761c[_0x43112d([0x74,0x68,0x65,0x6e])](()=>{_0x316979||_0x12ed17(_0x43112d([0x55,0x73,0x61,0x67,0x65,0x4c,0x69,0x6d,0x69,0x74]));});});function _0x2a14ec(){return _0x313e74[_0x43112d([0x65,0x64,0x69,0x74,0x69,0x6e,0x67])][_0x43112d([0x76,0x69,0x65,0x77])][_0x43112d([0x5f,0x6f,0x76,0x65,0x72,0x6c,0x61,0x79,0x4d,0x6f,0x64,0x65,0x48,0x69,0x6e,0x74])]==_0x43112d([0x61,0x75,0x74,0x6f]);}function _0x665263(){_0x313e74[_0x43112d([0x65,0x64,0x69,0x74,0x69,0x6e,0x67])][_0x43112d([0x76,0x69,0x65,0x77])][_0x43112d([0x5f,0x6f,0x76,0x65,0x72,0x6c,0x61,0x79,0x4d,0x6f,0x64,0x65,0x48,0x69,0x6e,0x74])]=_0x43112d([0x61,0x75,0x74,0x6f]);}}function _0x36191b(_0x3bc32b){const _0x209cf7=[new window[(_0x43112d([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x4e7afc=>setTimeout(_0x4e7afc,0x1aa47d09^_0x4d5c1c)),_0xb6761c[_0x43112d([0x74,0x68,0x65,0x6e])](()=>new window[(_0x43112d([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x54989a=>{const _0x49ec05=0x1aad43c2^_0x4d5c1c,_0x498b95=_0x3d6d05[_0x43112d([0x5f,0x72,0x65,0x76,0x69,0x73,0x69,0x6f,0x6e,0x73])];function _0x38803a(){_0x498b95[_0x43112d([0x6c,0x65,0x6e,0x67,0x74,0x68])]>=_0x49ec05&&_0x54989a();}_0x38803a(),_0x498b95[_0x43112d([0x6f,0x6e])](_0x43112d([0x61,0x64,0x64]),_0x38803a);})),new window[(_0x43112d([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65]))](_0x56d9de=>{function _0x364aeb(){for(const _0x44fad0 in window)if(window[_0x43112d([0x4e,0x75,0x6d,0x62,0x65,0x72])]['isNaN'](window[_0x43112d([0x4e,0x75,0x6d,0x62,0x65,0x72])](_0x44fad0))&&window[_0x44fad0]==_0x111cb0)return _0x56d9de();_0x313e74[_0x43112d([0x73,0x74,0x61,0x74,0x65])]!=_0x43112d([0x64,0x65,0x73,0x74,0x72,0x6f,0x79,0x65,0x64])&&window[_0x43112d([0x73,0x65,0x74,0x54,0x69,0x6d,0x65,0x6f,0x75,0x74])](_0x364aeb,0x1aad504d^_0x4d5c1c);}_0x5494a4(_0x43112d([0x52,0x65,0x76,0x69,0x73,0x69,0x6f,0x6e,0x56,0x69,0x65,0x77,0x65,0x72]))&&_0x364aeb();})];return window[_0x43112d([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65])][_0x43112d([0x72,0x61,0x63,0x65])](_0x209cf7)[_0x43112d([0x74,0x68,0x65,0x6e])](()=>_0x3bc32b);}async function _0x29b422(){if(await _0xb6761c,_0x5494a4(_0x43112d([0x52,0x65,0x76,0x69,0x73,0x69,0x6f,0x6e,0x56,0x69,0x65,0x77,0x65,0x72]))){const _0x312ae3=_0x3d6d05[_0x43112d([0x67,0x65,0x74,0x52,0x65,0x76,0x69,0x73,0x69,0x6f,0x6e])](0x0),_0x4d5665=_0x3d6d05[_0x43112d([0x67,0x65,0x74,0x45,0x61,0x72,0x6c,0x69,0x65,0x72,0x56,0x69,0x73,0x69,0x62,0x6c,0x65,0x52,0x65,0x76,0x69,0x73,0x69,0x6f,0x6e])](_0x312ae3[_0x43112d([0x69,0x64])]),_0x5a8a5c=_0x44a990(_0x43112d([0x52,0x65,0x76,0x69,0x73,0x69,0x6f,0x6e,0x56,0x69,0x65,0x77,0x65,0x72]));return await _0x5a8a5c[_0x43112d([0x63,0x6f,0x6d,0x70,0x61,0x72,0x65])](_0x312ae3['id'],_0x4d5665?_0x4d5665['id']:null,!0x0),_0x5a8a5c[_0x43112d([0x75,0x6e,0x62,0x69,0x6e,0x64])](_0x43112d([0x69,0x73,0x45,0x6e,0x61,0x62,0x6c,0x65,0x64])),_0x5a8a5c[_0x43112d([0x69,0x73,0x45,0x6e,0x61,0x62,0x6c,0x65,0x64])]=!0x1,_0x5a8a5c[_0x43112d([0x63,0x6f,0x6d,0x70,0x61,0x72,0x65])]=_0x3e1c0b,void(_0x5a8a5c[_0x43112d([0x5f,0x67,0x65,0x74,0x44,0x69,0x66,0x66])]=_0x3e1c0b);}if(_0x5494a4(_0x43112d([0x52,0x65,0x76,0x69,0x73,0x69,0x6f,0x6e,0x54,0x72,0x61,0x63,0x6b,0x65,0x72]))){const _0xe68ac7=_0x44a990(_0x43112d([0x52,0x65,0x76,0x69,0x73,0x69,0x6f,0x6e,0x54,0x72,0x61,0x63,0x6b,0x65,0x72]));_0xe68ac7[_0x43112d([0x75,0x6e,0x62,0x69,0x6e,0x64])](_0x43112d([0x69,0x73,0x45,0x6e,0x61,0x62,0x6c,0x65,0x64])),_0xe68ac7[_0x43112d([0x69,0x73,0x45,0x6e,0x61,0x62,0x6c,0x65,0x64])]=!0x1,_0xe68ac7[_0x43112d([0x75,0x70,0x64,0x61,0x74,0x65])]=_0x3e1c0b,_0xe68ac7[_0x43112d([0x73,0x61,0x76,0x65,0x52,0x65,0x76,0x69,0x73,0x69,0x6f,0x6e])]=_0x3e1c0b;}_0x313e74[_0x43112d([0x6d,0x6f,0x64,0x65,0x6c])][_0x43112d([0x63,0x68,0x61,0x6e,0x67,0x65])]=_0x3e1c0b,_0x313e74[_0x43112d([0x6d,0x6f,0x64,0x65,0x6c])][_0x43112d([0x65,0x6e,0x71,0x75,0x65,0x75,0x65,0x43,0x68,0x61,0x6e,0x67,0x65])]=_0x3e1c0b,_0x313e74[_0x43112d([0x65,0x6e,0x61,0x62,0x6c,0x65,0x52,0x65,0x61,0x64,0x4f,0x6e,0x6c,0x79,0x4d,0x6f,0x64,0x65])](_0x43112d([0x6d,0x6f,0x64,0x65,0x6c]));}function _0x386e55(){return _0x5494a4(_0x43112d([0x57,0x65,0x62,0x53,0x6f,0x63,0x6b,0x65,0x74,0x47,0x61,0x74,0x65,0x77,0x61,0x79]))&&_0x44a990(_0x43112d([0x57,0x65,0x62,0x53,0x6f,0x63,0x6b,0x65,0x74,0x47,0x61,0x74,0x65,0x77,0x61,0x79]))[_0x43112d([0x73,0x74,0x61,0x74,0x65])]==_0x43112d([0x63,0x6f,0x6e,0x6e,0x65,0x63,0x74,0x65,0x64]);}function _0x3b6e39(){return _0x5494a4(_0x43112d([0x52,0x65,0x76,0x69,0x73,0x69,0x6f,0x6e,0x56,0x69,0x65,0x77,0x65,0x72,0x49,0x6e,0x74,0x65,0x67,0x72,0x61,0x74,0x69,0x6f,0x6e]));}function _0x18c842(){return _0x5494a4(_0x43112d([0x54,0x72,0x61,0x63,0x6b,0x43,0x68,0x61,0x6e,0x67,0x65,0x73,0x44,0x61,0x74,0x61,0x47,0x65,0x74,0x74,0x65,0x72]));}function _0x141b0a(_0x1df4e4){const _0x18f5f9=_0x4cb926();_0x313e74[_0x18f5f9]=_0x43112d([0x72,0x65,0x76,0x69,0x73,0x69,0x6f,0x6e,0x48,0x69,0x73,0x74,0x6f,0x72,0x79,0x4c,0x69,0x63,0x65,0x6e,0x73,0x65,0x4b,0x65,0x79])+_0x1df4e4,_0x1df4e4[_0x43112d([0x65,0x6e,0x64,0x73,0x57,0x69,0x74,0x68])](_0x43112d([0x4c,0x69,0x6d,0x69,0x74]))&&(window[_0x4cb926()]=_0x111cb0),_0x1df4e4!=_0x43112d([0x56,0x61,0x6c,0x69,0x64])&&_0x29b422();}function _0x4cb926(){const _0x4af6f4=window[_0x43112d([0x53,0x74,0x72,0x69,0x6e,0x67])](window[_0x43112d([0x70,0x65,0x72,0x66,0x6f,0x72,0x6d,0x61,0x6e,0x63,0x65])][_0x43112d([0x6e,0x6f,0x77])]())[_0x43112d([0x72,0x65,0x70,0x6c,0x61,0x63,0x65])](_0x43112d([0x2e]),'');let _0x4f42fa=_0x43112d([0x47]);for(let _0x556242=0x0;_0x556242<_0x4af6f4[_0x43112d([0x6c,0x65,0x6e,0x67,0x74,0x68])];_0x556242+=0x2){let _0x67a45b=window[_0x43112d([0x70,0x61,0x72,0x73,0x65,0x49,0x6e,0x74])](_0x4af6f4[_0x43112d([0x73,0x75,0x62,0x73,0x74,0x72,0x69,0x6e,0x67])](_0x556242,_0x556242+0x2));_0x67a45b>=_0x2eaa78[_0x43112d([0x6c,0x65,0x6e,0x67,0x74,0x68])]&&(_0x67a45b-=_0x2eaa78[_0x43112d([0x6c,0x65,0x6e,0x67,0x74,0x68])]),_0x4f42fa+=_0x2eaa78[_0x67a45b];}return _0x4f42fa;}function _0x33b101(){const _0x448ec6=_0x5907ac[_0x43112d([0x73,0x70,0x6c,0x69,0x74])](_0x43112d([0x2e]));if(0x3!=_0x448ec6[_0x43112d([0x6c,0x65,0x6e,0x67,0x74,0x68])])return null;return _0x393667(_0x448ec6[0x1]);function _0x393667(_0x698efe){const _0x3a1682=_0x31507e(_0x698efe);return _0x3a1682&&_0x2e517d()?_0x3a1682:null;function _0x2e517d(){const _0x3be170=_0x3a1682[_0x43112d([0x6a,0x74,0x69])],_0x2b9e55=window[_0x43112d([0x70,0x61,0x72,0x73,0x65,0x49,0x6e,0x74])](_0x3be170[_0x43112d([0x73,0x75,0x62,0x73,0x74,0x72,0x69,0x6e,0x67])](_0x3be170[_0x43112d([0x6c,0x65,0x6e,0x67,0x74,0x68])]-0x8),0x10),_0x410e46={..._0x3a1682,[_0x43112d([0x6a,0x74,0x69])]:_0x3be170[_0x43112d([0x73,0x75,0x62,0x73,0x74,0x72,0x69,0x6e,0x67])](0x0,_0x3be170[_0x43112d([0x6c,0x65,0x6e,0x67,0x74,0x68])]-0x8)};return delete _0x410e46[_0x43112d([0x76,0x63])],_0x249e57(_0x410e46)==_0x2b9e55;}}}async function _0x38feec(){let _0xd26cbc=!0x0;try{const _0x2c77a1=_0x5907ac[_0x43112d([0x73,0x70,0x6c,0x69,0x74])](_0x43112d([0x2e])),[_0x3faa88,_0x456a65,_0x516769]=_0x2c77a1;return _0x3f5dc5(_0x3faa88),await _0x2da7f0(_0x3faa88,_0x456a65,_0x516769),_0xd26cbc;}catch(_0x4aa9db){return!0x1;}function _0x3f5dc5(_0x3e42ba){const _0x448375=_0x31507e(_0x3e42ba);_0x448375&&_0x448375[_0x43112d([0x61,0x6c,0x67])]==_0x43112d([0x45,0x53,0x32,0x35,0x36])||(_0xd26cbc=!0x1);}async function _0x2da7f0(_0x50072f,_0x2dd3af,_0x42a64c){const _0x2c406e=window[_0x43112d([0x55,0x69,0x6e,0x74,0x38,0x41,0x72,0x72,0x61,0x79])][_0x43112d([0x66,0x72,0x6f,0x6d])](_0x3406f7(_0x42a64c),_0x29aa9c=>_0x29aa9c[_0x43112d([0x63,0x68,0x61,0x72,0x43,0x6f,0x64,0x65,0x41,0x74])](0x0)),_0x255175=new window[(_0x43112d([0x54,0x65,0x78,0x74,0x45,0x6e,0x63,0x6f,0x64,0x65,0x72]))]()[_0x43112d([0x65,0x6e,0x63,0x6f,0x64,0x65])](_0x50072f+_0x43112d([0x2e])+_0x2dd3af),_0x5157a7=window[_0x43112d([0x63,0x72,0x79,0x70,0x74,0x6f])][_0x43112d([0x73,0x75,0x62,0x74,0x6c,0x65])];if(!_0x5157a7)return;const _0xd6485f=await _0x5157a7[_0x43112d([0x69,0x6d,0x70,0x6f,0x72,0x74,0x4b,0x65,0x79])](_0x43112d([0x6a,0x77,0x6b]),_0x515106,{[_0x43112d([0x6e,0x61,0x6d,0x65])]:_0x43112d([0x45,0x43,0x44,0x53,0x41]),[_0x43112d([0x6e,0x61,0x6d,0x65,0x64,0x43,0x75,0x72,0x76,0x65])]:_0x43112d([0x50,0x2d,0x32,0x35,0x36])},!0x1,[_0x43112d([0x76,0x65,0x72,0x69,0x66,0x79])]);await _0x5157a7[_0x43112d([0x76,0x65,0x72,0x69,0x66,0x79])]({[_0x43112d([0x6e,0x61,0x6d,0x65])]:_0x43112d([0x45,0x43,0x44,0x53,0x41]),[_0x43112d([0x68,0x61,0x73,0x68])]:{[_0x43112d([0x6e,0x61,0x6d,0x65])]:_0x43112d([0x53,0x48,0x41,0x2d,0x32,0x35,0x36])}},_0xd6485f,_0x2c406e,_0x255175)||(_0xd26cbc=!0x1);}}function _0x31507e(_0x195d8e){return _0x195d8e[_0x43112d([0x73,0x74,0x61,0x72,0x74,0x73,0x57,0x69,0x74,0x68])](_0x43112d([0x65,0x79]))?JSON[_0x43112d([0x70,0x61,0x72,0x73,0x65])](_0x3406f7(_0x195d8e)):null;}function _0x3406f7(_0xd7a547){return window[_0x43112d([0x61,0x74,0x6f,0x62])](_0xd7a547[_0x43112d([0x72,0x65,0x70,0x6c,0x61,0x63,0x65])](/-/g,_0x43112d([0x2b]))[_0x43112d([0x72,0x65,0x70,0x6c,0x61,0x63,0x65])](/_/g,_0x43112d([0x2f])));}function _0x249e57(_0x236e9f){let _0x39299d=0x1505;function _0x2a2ca6(_0x4cc302){for(let _0x325e72=0x0;_0x325e72<_0x4cc302[_0x43112d([0x6c,0x65,0x6e,0x67,0x74,0x68])];_0x325e72++){const _0x70f036=_0x4cc302[_0x43112d([0x63,0x68,0x61,0x72,0x43,0x6f,0x64,0x65,0x41,0x74])](_0x325e72);_0x39299d=(_0x39299d<<0x5)+_0x39299d+_0x70f036,_0x39299d&=_0x39299d;}}function _0x5af17d(_0x28a32b){Array[_0x43112d([0x69,0x73,0x41,0x72,0x72,0x61,0x79])](_0x28a32b)?_0x28a32b[_0x43112d([0x66,0x6f,0x72,0x45,0x61,0x63,0x68])](_0x5af17d):_0x28a32b&&typeof _0x28a32b==_0x43112d([0x6f,0x62,0x6a,0x65,0x63,0x74])?Object[_0x43112d([0x65,0x6e,0x74,0x72,0x69,0x65,0x73])](_0x28a32b)[_0x43112d([0x73,0x6f,0x72,0x74])]()[_0x43112d([0x66,0x6f,0x72,0x45,0x61,0x63,0x68])](([_0x594c43,_0x3db9fb])=>{_0x2a2ca6(_0x594c43),_0x5af17d(_0x3db9fb);}):_0x2a2ca6(window[_0x43112d([0x53,0x74,0x72,0x69,0x6e,0x67])](_0x28a32b));}return _0x5af17d(_0x236e9f),_0x39299d>>>0x0;}function _0x19e205(_0x21cc61){return _0x21cc61[_0x43112d([0x74,0x6f,0x53,0x74,0x72,0x69,0x6e,0x67])](0x10)[_0x43112d([0x70,0x61,0x64,0x53,0x74,0x61,0x72,0x74])](0x8,_0x43112d([0x30]));}function _0x33bb4f(_0x512c60){return _0x512c60[_0x43112d([0x73,0x70,0x6c,0x69,0x74])]('')[_0x43112d([0x72,0x65,0x76,0x65,0x72,0x73,0x65])]()[_0x43112d([0x6a,0x6f,0x69,0x6e])]('');}function _0x5494a4(_0x51faaf){return _0x313e74[_0x43112d([0x70,0x6c,0x75,0x67,0x69,0x6e,0x73])][_0x43112d([0x68,0x61,0x73])](_0x51faaf);}function _0x44a990(_0x34e259){return _0x313e74[_0x43112d([0x70,0x6c,0x75,0x67,0x69,0x6e,0x73])][_0x43112d([0x67,0x65,0x74])](_0x34e259);}function _0x3e1c0b(){}function _0x43112d(_0x8aefb2){return _0x8aefb2['map'](_0x3b5eaf=>String['fromCharCode'](_0x3b5eaf))['join']('');}_0x141b0a(await _0x4d0f8a());}(this);}['createRevision'](_0x384ddb){const _0x3ea670=this['editor']['plugins']['get']('Users');return new a({'id':_0x384ddb['id'],'name':_0x384ddb['name'],'creator':_0x384ddb['creatorId']?_0x3ea670['getUser'](_0x384ddb['creatorId']):null,'diffData':_0x384ddb['diffData']||_0x384ddb['data'],'authors':_0x384ddb['authorsIds']['map'](_0x39e861=>_0x3ea670['getUser'](_0x39e861)),'createdAt':new Date(_0x384ddb['createdAt']),'attributes':_0x384ddb['attributes'],'fromVersion':_0x384ddb['fromVersion'],'toVersion':_0x384ddb['toVersion']});}['addRevision'](_0xc76a9a,_0x1c4762=0x0){this['_revisions']['add'](_0xc76a9a,_0x1c4762);}['getRevision'](_0x2ad8bf){return this['_revisions']['get'](_0x2ad8bf);}['getRevisions'](_0x16e9ad={'toJSON':!0x1}){const _0x737691=Array['from'](this['_revisions']);return _0x737691['reverse'](),_0x16e9ad['toJSON']?_0x737691['map'](_0xf735c8=>_0xf735c8['toJSON']()):_0x737691;}['getIndex'](_0x4065c5){return this['_revisions']['getIndex'](_0x4065c5);}['getEarlierVisibleRevision'](_0x5cd9e1){const [,_0x854801]=this['getRevisionsIterator'](_0x5cd9e1,{'direction':'earlier'});return _0x854801;}['getLaterVisibleRevision'](_0x2b7c71){const [,_0x89e0da]=this['getRevisionsIterator'](_0x2b7c71,{'direction':'later'});return _0x89e0da;}['getRevisionsInDiff'](_0x160a79){const _0x309d49=[];for(const _0x490431 of this['getRevisionsIterator'](_0x160a79['newRevisionId']))if(_0x309d49['push'](_0x490431),_0x490431['id']===_0x160a79['oldRevisionId'])break;return _0x309d49;}*['getRevisionsIterator'](_0x9c6be6,{direction:_0x374131='earlier',filter:_0x4d9180=()=>!0x0}={}){const _0x2147a8='earlier'===_0x374131?0x1:-0x1;let _0x57b26e=this['_revisions']['get'](_0x9c6be6),_0x4462c6=this['getIndex'](_0x57b26e);for(yield _0x57b26e;_0x57b26e;){if(_0x4462c6+=_0x2147a8,_0x57b26e=this['getRevision'](_0x4462c6),!_0x57b26e)return;_0x4d9180(_0x57b26e)&&(yield _0x57b26e);}}}function R(_0x5eab56,_0x239cf4,_0x279cf6){const t=_0x5eab56['t'];switch(_0x239cf4){case'Revision\x20history':return t('Revision\x20history');case'Open\x20revision\x20history':return t('Open\x20revision\x20history');case'Restored':return t('Restored');case'Empty\x20document':return t('Empty\x20document');case'Initial\x20revision':return t('Initial\x20revision');case'Suggested\x20by':return t('Suggested\x20by');case'Added\x20by':return t('Added\x20by');case'Removed\x20by':return t('Removed\x20by');case'Show\x20more\x20items':return t('Show\x20more\x20items');case'Compare\x20against\x20selected':return t('Compare\x20against\x20selected');case'Name\x20this\x20revision':return t('Name\x20this\x20revision');case'Restore\x20this\x20revision':return t('Restore\x20this\x20revision');case'Back\x20to\x20editing':return t('Back\x20to\x20editing');case'Loading...':return t('Loading...');case'No\x20changes':return t('No\x20changes');case'NUMBER_OF_CHANGES':return t({'string':'%0\x20change','plural':'%0\x20changes','id':'NUMBER_OF_CHANGES'},_0x279cf6);case'X_OF_Y_CHANGES':return t({'string':'%0\x20of\x20%1','id':'X_OF_Y_CHANGES'},_0x279cf6);case'Show\x20previous\x20change':return t('Show\x20previous\x20change');case'Show\x20next\x20change':return t('Show\x20next\x20change');case'EDIT_X_OF_Y_REVISIONS':return t({'string':'Edit','id':'EDIT_X_OF_Y_REVISIONS'});case'Total':return t('Total');case'Revision\x20creator':return t('Revision\x20creator');case'Revision\x20author':return t('Revision\x20author');case'Revision\x20name':return t('Revision\x20name');case'Save\x20current\x20revision':return t('Save\x20current\x20revision');case'Accept':return t('Accept');case'Save':return t('Save');case'Cancel':return t('Cancel');case'Name\x20of\x20the\x20revision':return t('Name\x20of\x20the\x20revision');case'optional':return t('optional');case'PENDING_ACTION_REVISION_HISTORY':return t({'string':'Unsaved\x20change\x20in\x20revision\x20history.','id':'PENDING_ACTION_REVISION_HISTORY'});case'The\x20revision\x20name\x20cannot\x20be\x20empty.':return t('The\x20revision\x20name\x20cannot\x20be\x20empty.');case'Enter\x20the\x20revision\x20name':return t('Enter\x20the\x20revision\x20name');default:return'';}}const C={'c':_0x450d96,'a':_0x47beb4,'e':_0x1cc878,'r':_0x403878,'u':_0x2f86a4};class l extends _0x404964{['licenseKey'];['_licenseKeyCheckInterval'];['adapter'];['currentRevision'];['repository'];['_revisionDataBuilder'];['_source'];['_initialRevisionId'];['_bufferedUpdates'];['_pendingAction'];['_continueCurrentRevision'];['_startingVersion'];['_loadedStateData'];static get['pluginName'](){return'RevisionTracker';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}static get['requires'](){return[_0x2656b8,j,_0x2c78f9];}constructor(_0x12561a){super(_0x12561a),this['adapter']=null,this['currentRevision']=null,this['_revisionDataBuilder']=new T(this['editor']),this['_initialRevisionId']=this['editor']['config']['get']('collaboration.channelId')||'initial',this['_bufferedUpdates']=new Map(),this['_loadedStateData']=null;const _0x201db5=_0x5b9713();this['_source']={'history':this['editor']['model']['document']['history'],'getLatestVersion':()=>Promise['resolve'](this['editor']['model']['document']['version']),'getCurrentRevisionId':()=>_0x201db5},this['set']('isReady',!0x1),this['set']('isEnabled',!0x0),this['set']('_isPendingUpdate',!0x1),this['editor']['config']['define']('revisionHistory.resumeUnsavedRevision',!0x0),this['editor']['conversion']['for']('upcast')['dataToMarker']({'view':'revision'});}['init'](){this['repository']=this['editor']['plugins']['get']('RevisionsRepository'),this['_setConversion'](),this['editor']['data']['on']('ready',()=>{const _0x363211=this['repository']['getRevision'](0x0),_0x31f2dc=_0x363211&&null===_0x363211['creator']?_0x363211:null;if(this['_continueCurrentRevision']=!!_0x31f2dc&&this['editor']['config']['get']('revisionHistory.resumeUnsavedRevision'),this['editor']['plugins']['has']('RealTimeCollaborationClient')){const _0x1cbddb=this['_source']['getCurrentRevisionId'](),_0x61d54a=this['repository']['getRevision'](_0x1cbddb);if(_0x61d54a)this['_startingVersion']=_0x61d54a['fromVersion'],this['_continueCurrentRevision']=!0x1;else{const _0x3ce811=this['_source']['history']['_operations']['find'](_0x2852c4=>!_0x2852c4['_isInit']),_0x101383=_0x3ce811?_0x3ce811['baseVersion']:this['_source']['history']['version'];_0x363211?(_0x363211['toVersion']<_0x101383&&_0x363211['_update']({'toVersion':_0x101383}),this['_continueCurrentRevision']?(this['_source']['getCurrentRevisionId']=()=>_0x31f2dc['id'],this['_startingVersion']=_0x31f2dc['fromVersion']):(this['_startingVersion']=_0x363211['toVersion'],this['_continueCurrentRevision']=!0x1)):(this['_startingVersion']=_0x101383,this['_continueCurrentRevision']=!0x1);}}else _0x31f2dc&&(this['editor']['model']['document']['history']['version']=Math['max'](_0x31f2dc['toVersion'],this['editor']['model']['document']['history']['version']),_0x31f2dc['fromVersion']===_0x31f2dc['toVersion']?(0x0!==_0x31f2dc['fromVersion']&&(this['_source']['getCurrentRevisionId']=()=>_0x31f2dc['id']),this['_continueCurrentRevision']=!0x1):this['_continueCurrentRevision']&&(this['_source']['getCurrentRevisionId']=()=>_0x31f2dc['id'],this['_startingVersion']=_0x31f2dc['fromVersion'])),this['_continueCurrentRevision']||(this['_startingVersion']=this['editor']['model']['document']['version']);this['_revisionDataBuilder']['init'](this['_source']['history']),this['_createInitialRevision'](this['_startingVersion']),this['_createCurrentRevision'](this['_startingVersion']),this['adapter']&&this['sendBufferedUpdates']();}),this['bind']('isReady')['to'](this,'_isPendingUpdate',_0x1a0472=>!_0x1a0472),this['licenseKey']=this['editor']['config']['get']('licenseKey');const _0xcdcb2e=this['editor'];this['_licenseKeyCheckInterval']=setInterval(()=>{let _0x50df37;for(const _0x5a1c57 in _0xcdcb2e){const _0x288c85=_0x5a1c57,_0x6c3c62=_0xcdcb2e[_0x288c85];if('revisionHistoryLicenseKeyValid'==_0x6c3c62||'revisionHistoryLicenseKeyInvalid'==_0x6c3c62||'revisionHistoryLicenseKeyExpired'==_0x6c3c62||'revisionHistoryLicenseKeyDomainLimit'==_0x6c3c62||'revisionHistoryLicenseKeyNotAllowed'==_0x6c3c62||'revisionHistoryLicenseKeyEvaluationLimit'==_0x6c3c62||'revisionHistoryLicenseKeyTrialLimit'==_0x6c3c62||'revisionHistoryLicenseKeyDevelopmentLimit'==_0x6c3c62||'revisionHistoryLicenseKeyUsageLimit'==_0x6c3c62){delete _0xcdcb2e[_0x288c85],_0x50df37=_0x6c3c62,clearInterval(this['_licenseKeyCheckInterval']),this['_licenseKeyCheckInterval']=void 0x0;break;}}'revisionHistoryLicenseKeyInvalid'==_0x50df37&&_0xcdcb2e['_showLicenseError']('invalid'),'revisionHistoryLicenseKeyExpired'==_0x50df37&&_0xcdcb2e['_showLicenseError']('expired'),'revisionHistoryLicenseKeyDomainLimit'==_0x50df37&&_0xcdcb2e['_showLicenseError']('domainLimit'),'revisionHistoryLicenseKeyNotAllowed'==_0x50df37&&_0xcdcb2e['_showLicenseError']('featureNotAllowed','RevisionHistory'),'revisionHistoryLicenseKeyEvaluationLimit'==_0x50df37&&_0xcdcb2e['_showLicenseError']('evaluationLimit'),'revisionHistoryLicenseKeyTrialLimit'==_0x50df37&&_0xcdcb2e['_showLicenseError']('trialLimit'),'revisionHistoryLicenseKeyDevelopmentLimit'==_0x50df37&&_0xcdcb2e['_showLicenseError']('developmentLimit'),'revisionHistoryLicenseKeyUsageLimit'==_0x50df37&&_0xcdcb2e['_showLicenseError']('usageLimit');},0x3e8);}async['afterInit'](){if(this['repository']['length']>0x0){const _0xdafb90=this['repository']['getRevision'](0x0),_0x2eaf83=await this['getRevisionDocumentData'](_0xdafb90),_0x5a9769=await this['getRevisionRootsAttributes'](_0xdafb90);this['_replaceEditorDataWithRevisionData'](_0x2eaf83,_0x5a9769);}}['destroy'](){super['destroy'](),this['_licenseKeyCheckInterval']&&clearInterval(this['_licenseKeyCheckInterval']);}['setSource'](_0x1175f3){this['_source']=_0x1175f3;}async['update'](){const _0x1d2e98=await this['_source']['getLatestVersion']();if(_0x1d2e98>this['currentRevision']['toVersion']){await this['_loadState']();const _0x41db8d=this['buildRevisionData']({'revision':this['currentRevision'],'to':_0x1d2e98});_0x41db8d['authors']=_0x41db8d['authorsIds']['map'](_0x34e053=>this['editor']['plugins']['get']('Users')['getUser'](_0x34e053)),this['currentRevision']['_update'](_0x41db8d);}}async['_loadState'](){this['_continueCurrentRevision']&&!this['_loadedStateData']&&(await this['_loadRevisionData'](this['currentRevision']),this['_revisionDataBuilder']['loadState'](this['currentRevision']),this['_loadedStateData']={'fromVersion':this['currentRevision']['fromVersion'],'authors':this['currentRevision']['authors']['slice']()});}async['saveRevision'](_0x1e23b4={},_0x15ebbb=null){const _0x157d28=[];await this['_loadState'](),this['_continueCurrentRevision']=!0x1,_0x15ebbb>this['currentRevision']['toVersion']&&(_0x15ebbb=null),null===_0x15ebbb&&(_0x15ebbb=await this['_source']['getLatestVersion']());const _0x52e877=this['_getFromVersion'](_0x15ebbb),_0x419c84=this['buildRevisionData']({'from':_0x52e877,'to':_0x15ebbb});if(this['currentRevision']['toVersion']<_0x15ebbb){const _0x3528a6=this['buildRevisionData']({'revision':this['currentRevision'],'from':_0x15ebbb,'to':_0x15ebbb});_0x3528a6['authors']=[],_0x3528a6['authorsIds']=[],_0x3528a6['id']=this['currentRevision']['id'],this['currentRevision']['_update'](_0x3528a6,!0x0),delete _0x3528a6['authors'],_0x157d28['push'](_0x3528a6);}_0x1e23b4['creatorId']=this['editor']['plugins']['get']('Users')['me']['id'],_0x1e23b4['name']=_0x1e23b4['name']||null,_0x1e23b4['id']=_0x1e23b4['id']||_0x5b9713(),_0x1e23b4={..._0x1e23b4,..._0x419c84};const _0x3274f8=this['addRevisionData'](_0x1e23b4);_0x157d28['push'](_0x1e23b4);const _0x11ed8a=this['repository']['getIndex'](_0x3274f8);if(0x0!==_0x11ed8a){const _0x116cbf=this['repository']['getRevision'](_0x11ed8a-0x1);if(_0x116cbf['fromVersion']!==_0x15ebbb){const _0x55cc4c=this['_revisionDataBuilder']['getData'](_0x15ebbb,_0x116cbf['toVersion']),_0x313be6={'id':_0x116cbf['id'],'diffData':_0x55cc4c['diffData'],'authorsIds':_0x55cc4c['authorsIds'],'authors':_0x55cc4c['authorsIds']['map'](_0x10de09=>this['editor']['plugins']['get']('Users')['getUser'](_0x10de09)),'fromVersion':_0x15ebbb};_0x116cbf===this['currentRevision']&&(_0x313be6['createdAt']=new Date(_0x1e23b4['createdAt']['getTime']()+0xa)),_0x116cbf['_update'](_0x313be6,!0x0),delete _0x313be6['authors'],_0x157d28['push'](_0x313be6);}}if(this['adapter']){for(const _0x2a8ccc of _0x157d28)this['_bufferUpdate'](_0x2a8ccc['id'],_0x2a8ccc,!0x0);this['sendBufferedUpdates']();}return _0x3274f8;}['addRevisionData'](_0x18b2f4){const _0x1e71ba=this['repository']['createRevision'](_0x18b2f4);return this['adapter']&&_0x1e71ba['on']('_update',(_0x51684d,_0xa38adb,_0x7da37a)=>{_0x7da37a||(this['_bufferUpdate'](_0xa38adb['id'],_0xa38adb,!0x0),this['sendBufferedUpdates']());}),this['repository']['addRevision'](_0x1e71ba,this['_findInsertionIndex'](_0x1e71ba)),_0x1e71ba;}async['getRevisionDocumentData'](_0x1675ef){await this['_loadRevisionData'](_0x1675ef);const _0x20ee20={};for(const _0x482316 in _0x1675ef['diffData']){if(_0x1675ef['diffData'][_0x482316]['attachChange']&&!_0x1675ef['diffData'][_0x482316]['attachChange']['isAttached'])continue;const _0x201244=this['_removeRevisionMarkers'](JSON['parse'](_0x1675ef['diffData'][_0x482316]['insertions'])),_0x58a545=this['editor']['editing']['view']['document'],_0x678781=new _0xc7c08d(_0x58a545,_0x201244['map'](_0x508e4a=>V(_0x508e4a,this['editor'])));this['editor']['data']['processor']['useFillerType']('marked'),_0x20ee20[_0x482316]=this['editor']['data']['processor']['toData'](_0x678781),this['editor']['data']['processor']['useFillerType']('default');}return _0x20ee20;}async['getRevisionRootsAttributes'](_0x420725){await this['_loadRevisionData'](_0x420725);const _0x28397b={};for(const _0xf6b715 in _0x420725['diffData'])_0x420725['diffData'][_0xf6b715]['attachChange']&&!_0x420725['diffData'][_0xf6b715]['attachChange']['isAttached']||(_0x28397b[_0xf6b715]=_0x420725['diffData'][_0xf6b715]['attributesAfter']||{});return _0x28397b;}['sendBufferedUpdates'](){if(0x0===this['_bufferedUpdates']['size'])return;if(this['_isPendingUpdate'])return;let _0x146ea8=Array['from'](this['_bufferedUpdates']['values']());this['_bufferedUpdates']['clear']();for(let _0x183558=0x0;_0x183558<_0x146ea8['length'];_0x183558++){const _0x14002f=_0x146ea8[_0x183558];let _0x3ed0a8=!0x1;for(const _0x579a63 of Object['keys'](_0x14002f))void 0x0===_0x14002f[_0x579a63]?delete _0x14002f[_0x579a63]:'id'!==_0x579a63&&(_0x3ed0a8=!0x0);_0x3ed0a8||(_0x146ea8[_0x183558]=null);}if(_0x146ea8=_0x146ea8['filter'](_0x2c9c2a=>null!==_0x2c9c2a),!_0x146ea8['length'])return;for(let _0x5a722d=0x0;_0x5a722d<_0x146ea8['length'];_0x5a722d++){const _0x48fdaa=_0x146ea8[_0x5a722d];void 0x0!==_0x48fdaa['fromVersion']&&void 0x0===_0x48fdaa['toVersion']&&(_0x48fdaa['toVersion']=this['repository']['getRevision'](_0x48fdaa['id'])['toVersion']),void 0x0!==_0x48fdaa['toVersion']&&void 0x0===_0x48fdaa['fromVersion']&&(_0x48fdaa['fromVersion']=this['repository']['getRevision'](_0x48fdaa['id'])['fromVersion']);}const _0x2bc484=this['editor']['config']['get']('collaboration.channelId');this['_isPendingUpdate']=!0x0,this['_addPendingAction'](),this['adapter']['updateRevisions'](_0x146ea8,_0x2bc484)['finally'](()=>{this['_isPendingUpdate']=!0x1;})['then'](_0x5158a7=>{if(_0x5158a7){for(const _0x1e07bd of _0x5158a7)this['setRevisionData']({'id':_0x1e07bd['id'],'createdAt':_0x1e07bd['createdAt']});}this['_removePendingAction'](),this['sendBufferedUpdates']();});}['_replaceEditorDataWithRevisionData'](_0x413809,_0x58a739){let _0x4c308a=this['editor']['config']['get']('initialData'),_0x10321f=this['editor']['config']['get']('rootsAttributes');if(void 0x0===_0x4c308a){_0x4c308a={};for(const _0x50732f of this['editor']['model']['document']['getRootNames']())_0x4c308a[_0x50732f]='';}if('string'==typeof _0x4c308a&&(_0x4c308a={'main':_0x4c308a}),void 0x0===_0x10321f){_0x10321f={};for(const _0x787f87 of this['editor']['model']['document']['getRootNames']())_0x10321f[_0x787f87]={};}let _0x5d9e25=!0x1;const _0x586dd0=Object['keys'](_0x4c308a),_0x1d56c1=Object['keys'](_0x413809);for(const _0x14462e of _0x586dd0){if(_0x4c308a[_0x14462e]!==_0x413809[_0x14462e]&&''!==_0x4c308a[_0x14462e]['trim']()){_0x5d9e25=!0x0;break;}if(!_0x65448b(_0x10321f[_0x14462e],_0x58a739[_0x14462e])&&Object['keys'](_0x10321f[_0x14462e])['length']>0x0){_0x5d9e25=!0x0;break;}}_0x5d9e25||(_0x5d9e25=_0x1d56c1['some'](_0x3e470d=>!this['editor']['model']['document']['getRoot'](_0x3e470d))),_0x5d9e25&&_0x3420e0('editor-initial-data-replaced-with-revision-data',{'editorData':_0x4c308a,'editorRootsAttributes':_0x10321f,'revisionData':_0x413809,'revisionRootsAttributes':_0x58a739}),this['editor']['config']['set']('initialData',_0x413809),this['editor']['config']['set']('rootsAttributes',_0x58a739);}['_addPendingAction'](){if(!this['_pendingAction']){const _0x399753=this['editor']['plugins']['get']('PendingActions');this['_pendingAction']=_0x399753['add'](R(this['editor']['locale'],'PENDING_ACTION_REVISION_HISTORY'));}}['_removePendingAction'](){this['_pendingAction']&&(this['editor']['plugins']['get']('PendingActions')['remove'](this['_pendingAction']),this['_pendingAction']=null);}['_findInsertionIndex'](_0x3a588c){const _0x5e8450=this['repository']['getRevisions']();_0x5e8450['reverse']();let _0x3b3614=0x0;for(;_0x3b3614<_0x5e8450['length'];){const _0x2944e1=_0x5e8450[_0x3b3614];if(_0x2944e1===this['currentRevision']){_0x3b3614++;continue;}if(_0x2944e1['id']===this['_initialRevisionId'])break;const _0x3f5249=_0x3a588c['toVersion']-_0x2944e1['toVersion']||_0x3a588c['fromVersion']-_0x2944e1['fromVersion'];if(_0x3f5249>0x0)break;if(_0x3f5249<0x0)_0x3b3614++;else{if(!_0x3a588c['creator']&&_0x2944e1['creator'])break;if(_0x2944e1['creator']||!_0x3a588c['creator']){if(_0x3a588c['createdAt']>_0x2944e1['createdAt'])break;_0x3b3614++;}else _0x3b3614++;}}return _0x3b3614;}['setRevisionData'](_0x78e195){const _0x3cc86d=this['repository']['getRevision'](_0x78e195['id']);if(_0x78e195['createdAt']&&(_0x78e195['createdAt']=new Date(_0x78e195['createdAt'])),_0x78e195['authorsIds']){const _0x49c92f=this['editor']['plugins']['get']('Users');_0x78e195['authors']=_0x78e195['authorsIds']['map'](_0x4b2739=>_0x49c92f['getUser'](_0x4b2739));}_0x3cc86d['_update'](_0x78e195,!0x0);}['buildRevisionData']({revision:_0x4c7ae7=null,from:_0xe3c003=null,to:_0x25845d=null}){_0xe3c003=null!==_0xe3c003?_0xe3c003:_0x4c7ae7['fromVersion'],_0x25845d=null!==_0x25845d?_0x25845d:_0x4c7ae7['toVersion'];const _0x5988ba=this['_revisionDataBuilder']['getData'](_0xe3c003,_0x25845d),_0x1b2400={'diffData':_0x5988ba['diffData'],'authorsIds':_0x5988ba['authorsIds'],'fromVersion':_0xe3c003,'toVersion':_0x25845d};if(!_0x4c7ae7||_0x25845d!==_0x4c7ae7['toVersion']){const _0x37b26b=_0x25845d-0x1,_0x12d9cd=this['_source']['history']['getOperation'](_0x37b26b);_0x1b2400['createdAt']=_0x12d9cd&&_0x12d9cd['createdAt']||new Date();}if(this['_loadedStateData']&&_0xe3c003===this['_loadedStateData']['fromVersion']){for(const _0x34a4fe of this['_loadedStateData']['authors'])_0x1b2400['authorsIds']['includes'](_0x34a4fe['id'])||_0x1b2400['authorsIds']['push'](_0x34a4fe['id']);}return _0x1b2400;}['_loadRevisionData'](_0x17f123){if(!_0x17f123||_0x17f123['diffData'])return Promise['resolve']();{const _0x4e102a=this['editor']['config']['get']('collaboration.channelId');return this['adapter']['getRevision']({'channelId':_0x4e102a,'revisionId':_0x17f123['id']})['then'](_0x1ca0dd=>{_0x17f123['diffData']=_0x1ca0dd['diffData'];});}}['_bufferUpdate'](_0x44c8ba,_0x47500f,_0x59a007){if(this['_bufferedUpdates']['has'](_0x44c8ba)){const _0x10b0bd=this['_bufferedUpdates']['get'](_0x44c8ba);_0x47500f=_0x59a007?{..._0x10b0bd,..._0x47500f}:{..._0x47500f,..._0x10b0bd};}this['_bufferedUpdates']['set'](_0x44c8ba,_0x47500f);}['_getFromVersion'](_0x448522){const _0x34a8ee=this['repository']['getRevisions']();_0x34a8ee['reverse'](),_0x34a8ee['shift']();const _0x306df0=_0x34a8ee['find'](_0x18f2ff=>_0x18f2ff['toVersion']<=_0x448522)['toVersion'];return _0x306df0<this['_startingVersion']?this['_startingVersion']:_0x306df0;}['_createInitialRevision'](_0x241755){const _0x7f755e=this['repository']['getRevision'](this['repository']['length']-0x1);if(_0x7f755e)this['_initialRevisionId']=_0x7f755e['id'];else{const _0x31e376=!this['editor']['model']['document']['roots']['find'](_0x229f88=>this['editor']['model']['hasContent'](_0x229f88)),_0x38755c=this['editor']['plugins']['get']('Users')['me']['id'],_0x4a5804=R(this['editor']['locale'],_0x31e376?'Empty\x20document':'Initial\x20revision');this['_makeRevision']({'from':_0x241755,'to':_0x241755,'id':this['_initialRevisionId'],'name':_0x4a5804,'creatorId':_0x38755c});}}['_createCurrentRevision'](_0x1d6b7d){const _0x54a7fa=this['_source']['getCurrentRevisionId']();this['currentRevision']=this['repository']['getRevision'](_0x54a7fa),this['currentRevision']||(this['currentRevision']=this['_makeRevision']({'from':_0x1d6b7d,'to':_0x1d6b7d,'id':_0x54a7fa,'name':'','creatorId':null}));}['_makeRevision']({name:_0x3a0bf7,from:_0x3e8433,to:_0x346a14,creatorId:_0x22740a,id:_0x22c844}){const _0x58cde5=this['buildRevisionData']({'from':_0x3e8433,'to':_0x346a14});_0x58cde5['name']=_0x3a0bf7,_0x58cde5['creatorId']=_0x22740a,_0x58cde5['id']=_0x22c844;const _0x2a5664=this['addRevisionData'](_0x58cde5);return this['adapter']&&this['_bufferUpdate'](_0x58cde5['id'],_0x58cde5,!0x0),_0x2a5664;}['_setConversion'](){this['editor']['conversion']['for']('dataDowncast')['markerToData']({'model':'revision'});}['_removeRevisionMarkers'](_0x135536){return(_0x135536=_0x135536['filter'](_0xa29e63=>!_0xa29e63['name']||'revision-start'!==_0xa29e63['name']&&'revision-end'!==_0xa29e63['name']))['forEach'](_0x2ab126=>{'string'!=typeof _0x2ab126&&(_0x2ab126['children']=this['_removeRevisionMarkers'](_0x2ab126['children']),_0x2ab126['attributes']=_0x2ab126['attributes']['filter'](_0x3dae93=>!_0x3dae93[0x0]['startsWith']('data-revision-')));}),_0x135536;}}function V(_0x2a9613,_0x4a0e15){const _0x3a8ff3=_0x4a0e15['editing']['view']['document'];if('string'==typeof _0x2a9613)return new _0x3fa6d6(_0x3a8ff3,_0x2a9613);{const _0x990516=_0x2a9613['children']['map'](_0x4bb7fb=>V(_0x4bb7fb,_0x4a0e15));return new(C[_0x2a9613['type']]||_0xa0d1a7)(_0x3a8ff3,_0x2a9613['name'],_0x2a9613['attributes'],_0x990516);}}class T{['editor'];['source'];['_savedMetaData'];['_lastFrom'];['_lastTo'];['_markers'];['_diffRoots'];['_diffRootsAttributes'];['_baseRoots'];['_baseRootsAttributes'];['_idsRoots'];['_baseIdsRoots'];['_touched'];['_touchedMarkers'];['_touchedRoots'];['_revisionId'];['_startingRevisionId'];constructor(_0x3732a6){this['editor']=_0x3732a6,this['_savedMetaData']=new Map(),this['_lastFrom']=-0x1,this['_lastTo']=-0x1,this['_markers']=new Map(),this['_diffRoots']=new Map(),this['_diffRootsAttributes']=new Map(),this['_baseRoots']=new Map(),this['_baseRootsAttributes']=new Map(),this['_idsRoots']=new Map(),this['_baseIdsRoots']=new Map(),this['_touched']=new Map(),this['_touchedMarkers']=new Map(),this['_touchedRoots']=new Map(),this['_revisionId']=0x1;}['init'](_0x38b724){this['source']=_0x38b724;const _0x204e20=new Map(),_0x3a913f=new Map(),_0x515e9c=this['editor']['model']['document']['roots']['map'](_0xebf948=>_0xebf948['rootName']);for(const _0x1acc35 of _0x515e9c){const _0x596c2d=this['editor']['model']['document']['getRoot'](_0x1acc35),_0x1e3f03=F(_0x596c2d);_0x204e20['set'](_0x1acc35,_0x1e3f03),_0x3a913f['set'](_0x1acc35,Object['fromEntries'](_0x596c2d['getAttributes']()));}const _0x2335e9=Array['from'](this['editor']['model']['markers'])['map'](_0x407c5d=>[_0x407c5d['name'],_0x407c5d['getRange']()]),_0x58d3f0=this['source']['version'];this['_saveMetaData'](_0x58d3f0,_0x204e20,_0x2335e9,_0x3a913f),this['_startingRevisionId']=this['_revisionId'];const _0x136682=new Map(),_0x5d29f9=new Map();for(const _0x462217 of _0x515e9c){const _0xae66c=B(_0x462217);_0x136682['set'](_0x462217,_0xae66c),_0x5d29f9['set'](_0x462217,{});}this['_saveMetaData'](Number['NEGATIVE_INFINITY'],_0x136682,[],_0x5d29f9);}['getData'](_0xbf3aca,_0x2a32c6){if(this['_lastFrom']===_0xbf3aca&&this['_lastTo']<=_0x2a32c6)this['_savedMetaData']['size']>0x1&&this['_removeMetaData'](this['_lastTo']),this['_applyOperations'](this['_lastTo'],_0x2a32c6,!0x0);else{if(!this['_savedMetaData']['has'](_0xbf3aca)){const _0x30d162=this['_getPreviousFrom'](_0xbf3aca);this['_calculateMetaData'](_0x30d162,_0xbf3aca,!0x1);}this['_calculateMetaData'](_0xbf3aca,_0x2a32c6,!0x0);}return this['_lastFrom']=_0xbf3aca,this['_lastTo']=_0x2a32c6,this['_getState']();}['loadState'](_0x12f0ec){this['_reset'](),this['_lastFrom']=_0x12f0ec['fromVersion'],this['_lastTo']=_0x12f0ec['toVersion'];for(const _0x332cd6 in _0x12f0ec['diffData']){const _0x2d34f9=_0x12f0ec['diffData'][_0x332cd6]['attachChange'],_0x313776=_0x10da71(_0x12f0ec['diffData'][_0x332cd6]['attributesBefore'])||{},_0x1c55cf=this['_makeModelFromViewString'](_0x12f0ec['diffData'][_0x332cd6]['deletions']);_0x1c55cf['rootName']=_0x332cd6,_0x1c55cf['_isAttached']=!_0x2d34f9||!_0x2d34f9['isAttached'],_0x1c55cf['isAttached']=()=>_0x1c55cf['_isAttached'],this['_baseRoots']['set'](_0x332cd6,_0x1c55cf),this['_baseRootsAttributes']['set'](_0x332cd6,_0x313776),_0x2d34f9&&this['_touchedRoots']['set'](_0x332cd6,_0x2d34f9);const _0x38b211=this['_makeIdsRoot'](_0x1c55cf);this['_baseIdsRoots']['set'](_0x332cd6,_0x38b211);for(const [_0x3bd065,_0x6e69dd]of _0x1c55cf['markers']){if(!_0x3bd065['startsWith']('revision:'))continue;const _0x389d66=_0x3bd065['split'](':')[0x2];for(const _0xc6b4f1 of _0x6e69dd['getWalker']({'singleCharacters':!0x0})){const _0x48e086=this['_getVidAttributeName'](_0xc6b4f1),_0x134908='elementEnd'==_0xc6b4f1['type']?_0xc6b4f1['previousPosition']['path']['slice'](0x0,-0x1):_0xc6b4f1['previousPosition']['path'],_0x45f611=_0x38b211['getNodeByPath'](_0x134908)['getAttribute'](_0x48e086);this['_touched']['set'](_0x45f611,{'userId':_0x389d66});}}}this['_startingRevisionId']=this['_revisionId'];const _0x5691da=[...Array(this['_revisionId'])['keys']()]['slice'](0x1)['filter'](_0x316937=>!this['_touched']['has'](_0x316937));let _0x4a2546=0x0;const _0x489d8d=new Map();for(const _0x188de4 in _0x12f0ec['diffData']){const _0x48b590=_0x12f0ec['diffData'][_0x188de4]['attachChange'],_0x176420=_0x10da71(_0x12f0ec['diffData'][_0x188de4]['attributesAfter'])||{},_0x34ddb9=this['_makeModelFromViewString'](_0x12f0ec['diffData'][_0x188de4]['insertions']);_0x34ddb9['rootName']=_0x188de4,_0x34ddb9['_isAttached']=!_0x48b590||_0x48b590['isAttached'],_0x34ddb9['isAttached']=()=>_0x34ddb9['_isAttached'],this['_diffRoots']['set'](_0x188de4,_0x34ddb9),this['_diffRootsAttributes']['set'](_0x188de4,_0x176420);const _0x5b4e65=this['_makeIdsRoot'](_0x34ddb9,Number['NEGATIVE_INFINITY']);this['_idsRoots']['set'](_0x188de4,_0x5b4e65),_0x489d8d['set'](_0x188de4,_0x34ddb9['isAttached']()?_0x176420:{});for(const [_0x2a59f8,_0x2d752b]of _0x34ddb9['markers']){if(!_0x2a59f8['startsWith']('revision:'))continue;const _0x595785=_0x2a59f8['split'](':')[0x2];for(const _0x2820a3 of _0x2d752b['getWalker']({'singleCharacters':!0x0})){const _0x45032b=this['_getVidAttributeName'](_0x2820a3),_0x1812ad=this['_revisionId']++,_0x519ed9='elementEnd'==_0x2820a3['type']?_0x2820a3['previousPosition']['path']['slice'](0x0,-0x1):_0x2820a3['previousPosition']['path'];_0x5b4e65['getNodeByPath'](_0x519ed9)['_setAttribute'](_0x45032b,_0x1812ad),this['_touched']['set'](_0x1812ad,{'userId':_0x595785});}}for(const _0x2af91d of this['editor']['model']['createRangeIn'](_0x34ddb9)['getWalker']({'singleCharacters':!0x0})){const _0x1d05b1=this['_getVidAttributeName'](_0x2af91d),_0x568a54='elementEnd'==_0x2af91d['type']?_0x2af91d['previousPosition']['path']['slice'](0x0,-0x1):_0x2af91d['previousPosition']['path'],_0x317fc2=_0x5b4e65['getNodeByPath'](_0x568a54);_0x317fc2['getAttribute'](_0x1d05b1)>0x0||_0x317fc2['_setAttribute'](_0x1d05b1,_0x5691da[_0x4a2546++]);}for(const [_0xd35359,_0x3cf035]of _0x34ddb9['markers'])_0xd35359['startsWith']('revision:')||this['_markers']['set'](_0xd35359,_0x3cf035);}const _0xd7c0c2=B('$graveyard');this['_baseRoots']['set']('$graveyard',_0xd7c0c2),this['_baseIdsRoots']['set']('$graveyard',this['_makeIdsRoot'](_0xd7c0c2,0x1));const _0x3193fa=B('$graveyard');this['_diffRoots']['set']('$graveyard',_0x3193fa),this['_idsRoots']['set']('$graveyard',this['_makeIdsRoot'](_0x3193fa,0x1));const _0x423f7f=Array['from'](this['_diffRoots'])['map'](([_0xbfc6e5,_0x1dd329])=>[_0xbfc6e5,F(_0x1dd329)]);this['_saveMetaData'](this['_lastTo'],_0x423f7f,this['_markers'],_0x489d8d);}['_makeModelFromViewString'](_0x3f7a44){const _0x3b99d9=JSON['parse'](_0x3f7a44),_0x350c26=this['editor']['editing']['view']['document'],_0x50be5e=new _0xc7c08d(_0x350c26,_0x3b99d9['map'](_0x49e3ff=>V(_0x49e3ff,this['editor'])));return this['editor']['data']['toModel'](_0x50be5e);}['_saveMetaData'](_0x413fe1,_0x2c3406,_0x502d22,_0x1f62db){const _0xbc43c3=new Map(_0x2c3406),_0x2b0491=new Map(_0x10da71(_0x1f62db)),_0x4da63f=new Map();for(const [_0x342562,_0x220f5e]of _0x502d22)_0x4da63f['set'](_0x342562,{'start':_0x220f5e['start']['clone'](),'end':_0x220f5e['end']['clone'](),'rootName':_0x220f5e['root']['rootName']});this['_savedMetaData']['set'](_0x413fe1,{'roots':_0xbc43c3,'markers':_0x4da63f,'rootsAttributes':_0x2b0491});}['_removeMetaData'](_0x2e011a){this['_savedMetaData']['delete'](_0x2e011a);}['reInit'](){this['_reset'](),this['_lastFrom']=-0x1,this['_lastTo']=-0x1,this['_savedMetaData']['clear'](),this['init'](this['source']);}['_reset'](){this['_touched']['clear'](),this['_touchedMarkers']['clear'](),this['_touchedRoots']['clear'](),this['_diffRoots']['clear'](),this['_diffRootsAttributes']['clear'](),this['_baseRoots']['clear'](),this['_baseRootsAttributes']['clear'](),this['_idsRoots']['clear'](),this['_baseIdsRoots']['clear'](),this['_markers']['clear'](),this['_revisionId']=0x1,this['_startingRevisionId']=this['_revisionId'];}['_makeIdsRoot'](_0x344ef1,_0x47c444=null){let _0x28e7b2=null;_0x344ef1['is']('documentFragment')||(_0x28e7b2=new ft(_0x344ef1['name'],{'vid_start':null===_0x47c444?this['_revisionId']++:_0x47c444++}));const _0x59ec24=[];for(const _0x18e1f5 of _0x344ef1['getChildren']())if(_0x18e1f5['is']('element')){_0x59ec24['push'](this['_makeIdsRoot'](_0x18e1f5,_0x47c444));const _0x2ed4eb=_0x59ec24[_0x59ec24['length']-0x1];null!==_0x47c444&&(_0x47c444=_0x2ed4eb['is']('element','$text')?_0x2ed4eb['getAttribute']('vid')+0x1:_0x2ed4eb['getAttribute']('vid_end')+0x1);}else{for(let _0x13dffc=0x0;_0x13dffc<_0x18e1f5['offsetSize'];_0x13dffc++)_0x59ec24['push'](new ft('$text',{'vid':null===_0x47c444?this['_revisionId']++:_0x47c444++}));}if(_0x344ef1['is']('documentFragment')){const _0x4f598b=B(_0x344ef1['rootName']);return _0x4f598b['_insertChild'](0x0,_0x59ec24),_0x4f598b;}return _0x28e7b2['_setAttribute']('vid_end',null===_0x47c444?this['_revisionId']++:_0x47c444++),_0x28e7b2['_insertChild'](0x0,_0x59ec24),_0x28e7b2;}['_calculateMetaData'](_0x5dc98c,_0x2c15df,_0x3c766e){this['_reset']();const {roots:_0x14987f,markers:_0x8c7b7b,rootsAttributes:_0x44e5d5}=this['_savedMetaData']['get'](_0x5dc98c);this['_baseRoots']=new Map(_0x14987f),this['_baseRootsAttributes']=new Map(_0x10da71(_0x44e5d5));for(const [_0x43796a,_0x3069b4]of this['_baseRoots'])if('$graveyard'!==_0x43796a&&(this['_diffRoots']['set'](_0x43796a,F(_0x3069b4)),this['_diffRootsAttributes']=new Map(_0x10da71(_0x44e5d5)),_0x3c766e)){const _0x2b24dd=this['_revisionId'];this['_idsRoots']['set'](_0x43796a,this['_makeIdsRoot'](_0x3069b4)),this['_baseIdsRoots']['set'](_0x43796a,this['_makeIdsRoot'](_0x3069b4,_0x2b24dd));}this['_startingRevisionId']=this['_revisionId'],this['_diffRoots']['set']('$graveyard',F(this['_baseRoots']['get']('$graveyard'))),_0x3c766e&&this['_idsRoots']['set']('$graveyard',this['_makeIdsRoot'](this['_baseRoots']['get']('$graveyard')));for(const [_0x117ca9,_0x4501d0]of _0x8c7b7b){const _0x45183b=this['_baseRoots']['get'](_0x4501d0['rootName']),_0x27649e=this['_diffRoots']['get'](_0x4501d0['rootName']),_0x2b07c8=new vt(this['_fixPosition'](_0x4501d0['start'],_0x45183b),this['_fixPosition'](_0x4501d0['end'],_0x45183b)),_0x5cb319=this['_fixRange'](_0x2b07c8,_0x27649e);_0x45183b['markers']['set'](_0x117ca9,_0x2b07c8),this['_markers']['set'](_0x117ca9,_0x5cb319);}this['_applyOperations'](_0x5dc98c,_0x2c15df,_0x3c766e);}['_applyOperations'](_0x4ede67,_0x2788a7,_0x432be2){for(const _0x2972f5 of this['source']['getOperations'](_0x4ede67,_0x2788a7))this['_handleOperation'](_0x2972f5,_0x432be2);for(const _0x503fe7 of this['_diffRoots']['values']())_0x503fe7['markers']['clear']();for(const [_0x47a649,_0x3c7063]of this['_markers']){this['_diffRoots']['get'](_0x3c7063['root']['rootName'])['markers']['set'](_0x47a649,_0x3c7063['clone']());}const _0x1845a1=new Map(),_0x23a0b3=new Map();for(const [_0xb22aaa,_0x978229]of this['_diffRoots'])_0x1845a1['set'](_0xb22aaa,F(_0x978229)),_0x23a0b3['set'](_0xb22aaa,this['_diffRootsAttributes']['get'](_0xb22aaa));this['_saveMetaData'](_0x2788a7,_0x1845a1,this['_markers'],_0x23a0b3);}['_getPreviousFrom'](_0x595ffa){const _0x16ce40=Array['from'](this['_savedMetaData']['keys']());_0x16ce40['sort']((_0x52bf78,_0x1d8f7c)=>_0x52bf78-_0x1d8f7c),_0x16ce40['reverse']();for(const _0x3b68f2 of _0x16ce40)if(_0x3b68f2<_0x595ffa)return _0x3b68f2;return Number['NEGATIVE_INFINITY'];}['_copyMarkers'](_0x1b8c9d,_0xd0d864){const _0x5d9599=Array['from'](_0xd0d864['markers'])['map'](([_0x3c46cb,_0x5e1fd9])=>[_0x3c46cb,this['_fixRange'](_0x5e1fd9,_0x1b8c9d)]);_0x1b8c9d['markers']=new Map(_0x5d9599);}['_transformMarkers'](_0x4819bd){for(const _0x4039d3 of this['_markers']['values']()){const _0x3c3649=_0x4039d3['getTransformedByOperation'](_0x4819bd),_0x2dbe82=vt['_createFromRanges'](_0x3c3649);_0x4039d3['start']=_0x2dbe82['start'],_0x4039d3['end']=_0x2dbe82['end'];}}['_handleOperation'](_0x19d592,_0x53934b){if('addRoot'!=_0x19d592['type']&&'detachRoot'!=_0x19d592['type']){if('insert'==_0x19d592['type']){const _0x25d109=_0x19d592['position']['root']['rootName'];this['_diffRoots']['has'](_0x25d109)||(this['_diffRoots']['set'](_0x25d109,B(_0x25d109,!0x0)),this['_diffRootsAttributes']['set'](_0x25d109,{}),_0x53934b&&this['_idsRoots']['set'](_0x25d109,B(_0x25d109,!0x0)));}else{if('addRootAttribute'==_0x19d592['type']||'removeRootAttribute'==_0x19d592['type']||'changeRootAttribute'==_0x19d592['type'])return void this['_handleRootAttributeOperation'](_0x19d592);'marker'==_0x19d592['type']&&this['_handleMarkerOperation'](_0x19d592);}if('marker'!==_0x19d592['type']){const _0x579958=this['_cloneOperation'](_0x19d592,this['_diffRoots']);_0x579958['_execute'](),this['_transformMarkers'](_0x579958);}if(_0x53934b)switch(_0x19d592['type']){case'insert':this['_handleInsertOperation'](_0x19d592);break;case'move':case'remove':case'reinsert':this['_handleMoveOperation'](_0x19d592);break;case'merge':this['_handleMergeOperation'](_0x19d592);break;case'split':this['_handleSplitOperation'](_0x19d592);}}else this['_handleRootOperation'](_0x19d592,_0x53934b);}['_cloneOperation'](_0x5005a6,_0x356318){const _0x472b39=_0x5005a6['clone']();return _0x472b39['_authorId']=_0x5005a6['_authorId'],this['_fixOperation'](_0x472b39,_0x356318),_0x472b39;}['_getBaseVids'](_0x19e914){return _0x19e914['map'](_0x95163f=>{const _0x9c12b0=this['_getVidAttributeName'](_0x95163f);return Number(_0x95163f['item']['getAttribute'](_0x9c12b0));});}['_generateTape'](_0x19dd47,_0x279928){if(_0x19dd47['is']('element','$text'))_0x279928['push']({'item':_0x19dd47,'type':'text'});else{_0x19dd47['is']('element')&&_0x279928['push']({'item':_0x19dd47,'type':'elementStart'});for(const _0x4ada34 of _0x19dd47['getChildren']())this['_generateTape'](_0x4ada34,_0x279928);_0x19dd47['is']('element')&&_0x279928['push']({'item':_0x19dd47,'type':'elementEnd'});}return _0x279928;}['_getState'](){const _0x5323e6=new Map(this['_touched']),_0x364c58=new Map(_0x5323e6),_0x56f4a2=new Map(),_0x2af199={'insertions':{},'deletions':{}},_0x47d73d={'insertions':{},'deletions':{}},_0x12d662=new Map(),_0x5d1d64=new Set([...this['_baseRoots']['keys'](),...this['_diffRoots']['keys']()]);_0x5d1d64['delete']('$graveyard');for(const _0x4347b5 of _0x5d1d64){const _0x3c38e2=this['_diffRoots']['get'](_0x4347b5)||B(_0x4347b5,!0x1),_0x490dc7=this['_baseRoots']['get'](_0x4347b5)||B(_0x4347b5,!0x1);_0x3c38e2['isAttached']()||_0x490dc7['isAttached']()?(_0x2af199['insertions'][_0x4347b5]=F(_0x3c38e2),_0x2af199['deletions'][_0x4347b5]=F(_0x490dc7),this['_copyMarkers'](_0x2af199['deletions'][_0x4347b5],_0x490dc7),this['_copyMarkers'](_0x2af199['insertions'][_0x4347b5],_0x3c38e2),_0x47d73d['insertions'][_0x4347b5]=this['_generateTape'](this['_idsRoots']['get'](_0x4347b5),[]),_0x47d73d['deletions'][_0x4347b5]=this['_generateTape'](this['_baseIdsRoots']['get'](_0x4347b5)||B(_0x4347b5,!0x1),[])):_0x5d1d64['delete'](_0x4347b5);}for(const _0x199a9e of _0x5d1d64){const _0x4642ff=_0x47d73d['insertions'][_0x199a9e];for(const _0x28bdd6 of _0x4642ff){const _0x1bf779=this['_getVidAttributeName'](_0x28bdd6),_0xdeecfd=_0x28bdd6['item']['getAttribute'](_0x1bf779);_0x364c58['delete'](_0xdeecfd),_0xdeecfd>=this['_startingRevisionId']&&_0x56f4a2['set'](_0xdeecfd,_0x5323e6['get'](_0xdeecfd));}}for(const _0xd6bef1 of _0x5d1d64){const _0x3317b0=_0x47d73d['insertions'][_0xd6bef1],_0x2ca284=this['_getBaseVids'](_0x47d73d['deletions'][_0xd6bef1]);let _0x41b6c7=0x0;for(const _0x19cbc6 of _0x3317b0){const _0x243c4d=this['_getVidAttributeName'](_0x19cbc6),_0x3597f4=_0x19cbc6['item']['getAttribute'](_0x243c4d);if(!_0x56f4a2['has'](_0x3597f4)&&!_0x12d662['has'](_0x3597f4)){if(_0x364c58['has'](_0x3597f4))_0x41b6c7++;else{if(_0x3597f4!=_0x2ca284[_0x41b6c7]){const _0x43e7a7=_0x5323e6['get'](_0x3597f4)||_0x5323e6['get'](_0x2ca284[_0x41b6c7]);for(;_0x3597f4!=_0x2ca284[_0x41b6c7];)_0x364c58['has'](_0x2ca284[_0x41b6c7])||(_0x12d662['set'](_0x2ca284[_0x41b6c7],_0x43e7a7),_0x5323e6['set'](_0x2ca284[_0x41b6c7],_0x43e7a7)),_0x41b6c7++;}_0x41b6c7++;}}}}for(const _0xbf9a5 of _0x5d1d64){const _0x4e6c1c=_0x47d73d['insertions'][_0xbf9a5];for(const _0x39a0ca of _0x4e6c1c){const _0x3a309c=this['_getVidAttributeName'](_0x39a0ca),_0x24cbe3=_0x39a0ca['item']['getAttribute'](_0x3a309c);if(_0x12d662['has'](_0x24cbe3)){const _0x25977d=_0x12d662['get'](_0x24cbe3);_0x364c58['has'](_0x24cbe3)||_0x364c58['set'](_0x24cbe3,{..._0x25977d}),_0x56f4a2['set'](_0x24cbe3,{..._0x25977d});}}}for(const _0x3cc0fe of _0x364c58['keys']())_0x3cc0fe>=this['_startingRevisionId']&&_0x364c58['delete'](_0x3cc0fe);const _0x2f4890=new Map();for(const _0x2d978a of _0x5d1d64){let _0x574ff9=_0x47d73d['insertions'][_0x2d978a];for(const _0x5df9e3 of _0x574ff9)if(_0x5df9e3['item']['is']('element','tableCell')){const _0x94899f=this['_getVidAttributeName'](_0x5df9e3),_0xeb6d80=_0x5df9e3['item']['getAttribute'](_0x94899f);if(_0x56f4a2['has'](_0xeb6d80)){const _0x855bee=_0x5df9e3['item']['parent']['parent']['getAttribute']('vid_start'),_0x55c035=_0x2f4890['get'](_0x855bee)||new Set();_0x55c035['add'](_0x56f4a2['get'](_0xeb6d80)['userId']),_0x2f4890['set'](_0x855bee,_0x55c035);}}_0x574ff9=_0x47d73d['deletions'][_0x2d978a];for(const _0x4b5df8 of _0x574ff9)if(_0x4b5df8['item']['is']('element','tableCell')){const _0x1b55a5=this['_getVidAttributeName'](_0x4b5df8),_0x2a64ed=_0x4b5df8['item']['getAttribute'](_0x1b55a5);if(_0x364c58['has'](_0x2a64ed)){const _0x315205=_0x4b5df8['item']['parent']['parent']['getAttribute']('vid_start'),_0x35d4a7=_0x2f4890['get'](_0x315205)||new Set();_0x35d4a7['add'](_0x364c58['get'](_0x2a64ed)['userId']),_0x2f4890['set'](_0x315205,_0x35d4a7);}}for(const _0x3c9ad9 of _0x2f4890['keys']())(_0x56f4a2['has'](_0x3c9ad9)||_0x364c58['has'](_0x3c9ad9))&&_0x2f4890['delete'](_0x3c9ad9);}for(const _0x37121e of _0x5d1d64){const _0xbd8de=_0x47d73d['insertions'][_0x37121e];let _0x4f68a3=null,_0x7735e9=null;for(const _0x1e98ce of _0xbd8de){const _0x419ea1=this['_getVidAttributeName'](_0x1e98ce),_0x2861f6=_0x1e98ce['item']['getAttribute'](_0x419ea1),_0x2dddf9=_0x2f4890['get'](_0x2861f6);_0x2dddf9&&'elementStart'==_0x1e98ce['type']&&(_0x4f68a3=Array['from'](_0x2dddf9)[0x0],_0x7735e9=_0x1e98ce['item']['getAttribute']('vid_end')),_0x4f68a3&&(_0x364c58['set'](_0x2861f6,{'userId':_0x4f68a3}),_0x56f4a2['set'](_0x2861f6,{'userId':_0x4f68a3})),_0x2861f6==_0x7735e9&&(_0x4f68a3=null,_0x7735e9=null);}}const _0x5bb822={},_0x226636=new Set();for(const _0x37e023 of _0x5d1d64){const _0x4b8612=_0x2af199['deletions'][_0x37e023],_0x5f0bbc=_0x2af199['insertions'][_0x37e023];for(const {userId:_0x53d9a3}of this['_touchedMarkers']['values']())null!==_0x53d9a3&&_0x226636['add'](_0x53d9a3);for(const {userId:_0x104721}of this['_touchedRoots']['values']())null!==_0x104721&&_0x226636['add'](_0x104721);this['_markChanges'](_0x5f0bbc,_0x47d73d['insertions'][_0x37e023],_0x56f4a2,'insertion',_0x226636),this['_markChanges'](_0x4b8612,_0x47d73d['deletions'][_0x37e023],_0x364c58,'deletion',_0x226636),_0x5bb822[_0x37e023]={'insertions':this['_prepareViewToSave'](_0x5f0bbc),'deletions':this['_prepareViewToSave'](_0x4b8612),'attachChange':this['_touchedRoots']['get'](_0x37e023)||null,'attributesBefore':_0x10da71(this['_baseRootsAttributes']['get'](_0x37e023))||{},'attributesAfter':_0x10da71(this['_diffRootsAttributes']['get'](_0x37e023))};}return{'diffData':_0x5bb822,'authorsIds':Array['from'](_0x226636)};}['_processRootBeforeSave'](_0x4124a7){for(const [,_0x47418d]of _0x4124a7['markers']){const _0x3f330a=_0x47418d['start']['getAncestors']()['filter'](_0x47b410=>'tableCell'==_0x47b410['name']);for(const _0x721968 of _0x3f330a)0x1==_0x721968['childCount']&&_0x721968['getChild'](0x0)['is']('element','paragraph')&&_0x721968['getChild'](0x0)['_setAttribute']('keepParagraph',!0x0);}}['_prepareViewToSave'](_0x1ca16e){this['_processRootBeforeSave'](_0x1ca16e);const _0x9d3b36=this['editor']['data']['toView'](_0x1ca16e,{}),_0x23f035=Array['from'](_0x9d3b36['getChildren']())['map'](_0x553c3c=>this['_getViewJson'](_0x553c3c));return JSON['stringify'](_0x23f035);}['_getViewJson'](_0x118633){if(_0x118633['is']('$text'))return _0x118633['data'];{const _0xdd3d02=_0x118633;return{'type':Object['keys'](C)['find'](_0x2eb4aa=>_0x118633 instanceof C[_0x2eb4aa]),'name':_0xdd3d02['name'],'attributes':Array['from'](_0xdd3d02['getAttributes']()),'children':Array['from'](_0xdd3d02['getChildren']())['map'](_0x576c9e=>this['_getViewJson'](_0x576c9e))};}}['_markChanges'](_0xae063e,_0x43f708,_0x102fbf,_0x375227,_0x3f36d8){let _0x5bd882=null,_0x20e3e3=null,_0x2640bf=0x0;const _0x59ee47=this['editor']['model'];for(let _0x1cce1d=0x0;_0x1cce1d<_0x43f708['length'];_0x1cce1d++){const _0x18d435=this['_getVidAttributeName'](_0x43f708[_0x1cce1d]),_0xdea2b7=_0x43f708[_0x1cce1d]['item']['getAttribute'](_0x18d435),_0x323251=_0x102fbf['get'](_0xdea2b7),_0x220a1c=_0x1cce1d==_0x43f708['length']-0x1;(!_0x5bd882&&_0x323251&&(_0x5bd882=_0x323251,_0x20e3e3=_0x43f708[_0x1cce1d]),_0x5bd882&&(!_0x323251||_0x323251['userId']!=_0x5bd882['userId']))&&(_0x57541c(_0x323251,J(_0x20e3e3,_0xae063e,_0x59ee47),J(_0x43f708[_0x1cce1d],_0xae063e,_0x59ee47)),_0x5bd882=_0x323251||null,_0x20e3e3=_0x323251?_0x43f708[_0x1cce1d]:null),_0x5bd882&&_0x220a1c&&_0x57541c(_0x323251,J(_0x20e3e3,_0xae063e,_0x59ee47),q(_0x43f708[_0x1cce1d],_0xae063e,_0x59ee47));}function _0x57541c(_0x1ee63e,_0x31d77c,_0x307359){const _0x15b7a7=_0x5bd882['userId'],_0x5e64af='revision:'+_0x375227+':'+_0x15b7a7+':'+_0x2640bf++,_0x1765bd=_0x59ee47['createRange'](_0x31d77c,_0x307359);_0xae063e['markers']['set'](_0x5e64af,_0x1765bd),null!==_0x15b7a7&&_0x3f36d8['add'](_0x15b7a7);}}['_getVidAttributeName'](_0x3b8e50){switch(_0x3b8e50['type']){case'elementStart':return'vid_start';case'elementEnd':return'vid_end';default:return'vid';}}['_fixOperation'](_0x205623,_0x3f83f1){_0x205623['baseVersion']=null;for(const _0x5ca8fd in _0x205623){const _0x54a5eb=_0x205623[_0x5ca8fd];if(_0x54a5eb instanceof gt){const _0x4abf0e=_0x3f83f1['get'](_0x54a5eb['root']['rootName']);_0x205623[_0x5ca8fd]=this['_fixPosition'](_0x54a5eb,_0x4abf0e);}if(_0x54a5eb instanceof vt){const _0xd59ce0=_0x3f83f1['get'](_0x54a5eb['root']['rootName']);_0x205623[_0x5ca8fd]=this['_fixRange'](_0x54a5eb,_0xd59ce0);}'root'===_0x5ca8fd&&(_0x205623['root']=_0x3f83f1['get'](_0x205623['root']['rootName']));}}['_fixRange'](_0x55b1dc,_0x2846d5){return this['editor']['model']['createRange'](this['_fixPosition'](_0x55b1dc['start'],_0x2846d5),this['_fixPosition'](_0x55b1dc['end'],_0x2846d5));}['_fixPosition'](_0x50c961,_0x475732){return this['editor']['model']['createPositionFromPath'](_0x475732,_0x50c961['path'],_0x50c961['stickiness']);}['_handleInsertOperation'](_0x4a61e7){const _0x15d49b=this['_idsRoots']['get'](_0x4a61e7['position']['root']['rootName']),_0x34d2d7=this['_fixPosition'](_0x4a61e7['position'],_0x15d49b),_0x3e0707=null===_0x4a61e7['_authorId']?null:_0x4a61e7['_authorId']||this['editor']['plugins']['get']('Users')['me']['id'],_0x1d3516=_0x34d2d7['parent'],_0xfcb13b=this['_revisionId'],_0x4e319f=[];for(const _0x592f91 of _0x4a61e7['nodes'])if(_0x592f91['is']('element'))_0x4e319f['push'](this['_makeIdsRoot'](_0x592f91));else{for(let _0x19f078=0x0;_0x19f078<_0x592f91['offsetSize'];_0x19f078++)_0x4e319f['push'](new ft('$text',{'vid':this['_revisionId']++}));}const _0x35b4b1=this['_revisionId'];for(let _0x5bf706=_0xfcb13b;_0x5bf706<_0x35b4b1;_0x5bf706++)this['_touched']['set'](_0x5bf706,{'userId':_0x3e0707});_0x1d3516['_insertChild'](_0x34d2d7['offset'],_0x4e319f);}['_handleMoveOperation'](_0x4f32d7){(_0x4f32d7=this['_cloneOperation'](_0x4f32d7,this['_idsRoots']))['_execute']();const _0x337954=null===_0x4f32d7['_authorId']?null:_0x4f32d7['_authorId']||this['editor']['plugins']['get']('Users')['me']['id'],_0x13ac8f=_0x4f32d7['getMovedRangeStart'](),_0x27dfd4=_0x13ac8f['parent'],_0x1948b6=_0x13ac8f['offset'];!function _0x4edc63(_0x31d610,_0x58280d,_0x1bac70,_0x3f0254){for(let _0x3144e4=_0x1bac70;_0x3144e4<_0x3f0254;_0x3144e4++){const _0x11e274=_0x58280d['getChild'](_0x3144e4);_0x11e274['is']('element','$text')?_0x31d610['set'](_0x11e274['getAttribute']('vid'),{'userId':_0x337954}):(_0x31d610['set'](_0x11e274['getAttribute']('vid_start'),{'userId':_0x337954}),_0x4edc63(_0x31d610,_0x11e274,0x0,_0x11e274['childCount']),_0x31d610['set'](_0x11e274['getAttribute']('vid_end'),{'userId':_0x337954}));}}(this['_touched'],_0x27dfd4,_0x1948b6,_0x1948b6+_0x4f32d7['howMany']);}['_handleMergeOperation'](_0x839926){const _0x5d20e2=null===(_0x839926=this['_cloneOperation'](_0x839926,this['_idsRoots']))['_authorId']?null:_0x839926['_authorId']||this['editor']['plugins']['get']('Users')['me']['id'],_0x181dce=_0x839926['targetPosition']['parent'],_0x4200fd=_0x839926['sourcePosition']['parent'],_0x211e3c=_0x181dce['getAttribute']('vid_end'),_0x5e3db5=_0x4200fd['getAttribute']('vid_start');_0x181dce['_setAttribute']('vid_end',_0x4200fd['getAttribute']('vid_end')),_0x4200fd['_setAttribute']('vid_end',_0x211e3c),this['_touched']['set'](_0x5e3db5,{'userId':_0x5d20e2}),this['_touched']['set'](_0x211e3c,{'userId':_0x5d20e2}),_0x839926['_execute']();}['_handleSplitOperation'](_0x2bf3e7){const _0x113d9b=null===(_0x2bf3e7=this['_cloneOperation'](_0x2bf3e7,this['_idsRoots']))['_authorId']?null:_0x2bf3e7['_authorId']||this['editor']['plugins']['get']('Users')['me']['id'],_0x25f3d6=_0x2bf3e7['graveyardPosition'],_0x582bf1=_0x2bf3e7['splitPosition']['parent'];_0x2bf3e7['_execute']();const _0xfbcb46=_0x582bf1['getAttribute']('vid_end'),_0x42727f=_0x2bf3e7['insertionPosition']['nodeAfter'];if(_0x25f3d6){const _0x38a7d9=_0x42727f['getAttribute']('vid_end'),_0x2c2876=_0x582bf1['getAttribute']('vid_end');_0x582bf1['_setAttribute']('vid_end',_0x38a7d9),_0x42727f['_setAttribute']('vid_end',_0x2c2876),this['_touched']['set'](_0x582bf1['getAttribute']('vid_end'),{'userId':_0x113d9b}),this['_touched']['set'](_0x42727f['getAttribute']('vid_start'),{'userId':_0x113d9b});}else{const _0x1d5d95=this['_revisionId']++,_0xb3da61=this['_revisionId']++;_0x582bf1['_setAttribute']('vid_end',_0x1d5d95),_0x42727f['_setAttribute']('vid_start',_0xb3da61),_0x42727f['_setAttribute']('vid_end',_0xfbcb46),this['_touched']['set'](_0x1d5d95,{'userId':_0x113d9b}),this['_touched']['set'](_0xb3da61,{'userId':_0x113d9b});}}['_handleMarkerOperation'](_0x41317b){if(!_0x41317b['affectsData'])return;const _0x1a1b5d=(_0x41317b=this['_cloneOperation'](_0x41317b,this['_diffRoots']))['oldRange']?_0x41317b['oldRange']['root']:null,_0x228688=_0x41317b['newRange']?_0x41317b['newRange']['root']:null;_0x1a1b5d&&this['_markers']['delete'](_0x41317b['name']),_0x228688&&this['_markers']['set'](_0x41317b['name'],_0x41317b['newRange']['clone']());const _0x50fdae=null===_0x41317b['_authorId']?null:_0x41317b['_authorId']||this['editor']['plugins']['get']('Users')['me']['id'],_0x1c2691=_0x41317b['name'];if(!this['_touchedMarkers']['has'](_0x1c2691))return void this['_touchedMarkers']['set'](_0x1c2691,{'range':_0x41317b['oldRange'],'userId':_0x50fdae});const _0x3ca878=this['_touchedMarkers']['get'](_0x1c2691),_0xadf51c=_0x3ca878['range'],_0x1c5d06=_0x41317b['newRange'];null==_0xadf51c&&null==_0x1c5d06||_0xadf51c&&_0x1c5d06&&_0xadf51c['isEqual'](_0x1c5d06)?this['_touchedMarkers']['delete'](_0x41317b['name']):_0x3ca878['userId']=_0x50fdae;}['_handleRootOperation'](_0x1ec40c,_0x272dee){this['_diffRoots']['has'](_0x1ec40c['rootName'])?this['_diffRoots']['get'](_0x1ec40c['rootName'])['_isAttached']=_0x1ec40c['isAdd']:(this['_diffRoots']['set'](_0x1ec40c['rootName'],B(_0x1ec40c['rootName'],!0x0)),this['_diffRootsAttributes']['set'](_0x1ec40c['rootName'],{}),_0x272dee&&this['_idsRoots']['set'](_0x1ec40c['rootName'],B(_0x1ec40c['rootName'],!0x0)));const _0x159128=null===_0x1ec40c['_authorId']?null:_0x1ec40c['_authorId']||this['editor']['plugins']['get']('Users')['me']['id'],_0x51b512=this['_touchedRoots']['get'](_0x1ec40c['rootName']);_0x51b512&&_0x51b512['userId']===_0x159128?this['_touchedRoots']['delete'](_0x1ec40c['rootName']):this['_touchedRoots']['set'](_0x1ec40c['rootName'],{'userId':_0x159128,'isAttached':_0x1ec40c['isAdd']});}['_handleRootAttributeOperation'](_0x54c4b8){const _0xdb10d4=this['_diffRootsAttributes']['get'](_0x54c4b8['root']['rootName']);null===_0x54c4b8['newValue']?delete _0xdb10d4[_0x54c4b8['key']]:_0xdb10d4[_0x54c4b8['key']]=_0x54c4b8['newValue'];}}function F(_0x30de89){const _0x6a0210=B(_0x30de89['rootName'],_0x30de89['isAttached']());for(const _0x4dd18a of _0x30de89['getChildren']()){const _0x11ce47=_0x4dd18a['_clone'](!0x0);_0x6a0210['_appendChild'](_0x11ce47);}return _0x6a0210;}function B(_0x27ea3e,_0xacc310=!0x0){const _0x5ba002=new wt();return _0x5ba002['rootName']=_0x27ea3e,_0x5ba002['_isAttached']=_0xacc310,_0x5ba002['isAttached']=()=>_0x5ba002['_isAttached'],_0x5ba002;}function J(_0x3e202f,_0x1cc58d,_0x3f59cc){const _0x2adfcb='elementEnd'==_0x3e202f['type']?_0x3f59cc['createPositionAt'](_0x3e202f['item'],'end'):_0x3f59cc['createPositionBefore'](_0x3e202f['item']);return _0x3f59cc['createPositionFromPath'](_0x1cc58d,_0x2adfcb['path'],_0x2adfcb['stickiness']);}function q(_0x20c4a9,_0x3f54aa,_0x15fb8c){const _0x18b2f3='elementStart'==_0x20c4a9['type']?_0x15fb8c['createPositionAt'](_0x20c4a9['item'],0x0):_0x15fb8c['createPositionAfter'](_0x20c4a9['item']);return _0x15fb8c['createPositionFromPath'](_0x3f54aa,_0x18b2f3['path'],_0x18b2f3['stickiness']);}class ns extends _0x56ed61{['focusTracker'];['keystrokes'];['revisionNameInputView'];constructor(_0x5c1c34,_0x381750){super(_0x5c1c34),this['focusTracker']=new _0x2dda5b(),this['keystrokes']=new _0x2a0efb(),this['set']('revisionNameInputValue',''),this['revisionNameInputView']=this['_createRevisionNameInput'](_0x381750),this['setTemplate']({'tag':'form','attributes':{'class':['ck','ck-revision-history-save-revision-form','ck-responsive-form'],'tabindex':'-1'},'children':[this['revisionNameInputView']]}),ts(this);}['render'](){super['render'](),_0x588309({'view':this}),this['focusTracker']['add'](this['revisionNameInputView']['element']),this['keystrokes']['listenTo'](this['element']);const _0x58d6a2=_0x2d485a=>_0x2d485a['stopPropagation']();this['keystrokes']['set']('arrowright',_0x58d6a2),this['keystrokes']['set']('arrowleft',_0x58d6a2),this['keystrokes']['set']('arrowup',_0x58d6a2),this['keystrokes']['set']('arrowdown',_0x58d6a2);}['focus'](){this['revisionNameInputView']['focus']();}get['revisionName'](){return this['revisionNameInputView']['fieldView']['element']['value']['trim']();}set['revisionName'](_0x378eed){this['revisionNameInputView']['fieldView']['element']['value']=_0x378eed['trim']();}['reset'](){this['revisionNameInputView']['fieldView']['element']['value']='',this['revisionNameInputView']['errorText']=null;}['_createRevisionNameInput'](_0xd2d249){const _0x1b0a2a=new at(this['locale'],_0x1ea161),_0x312119=_0x1b0a2a['fieldView'];_0x312119['extendTemplate']({'attributes':{'maxlength':'220'}});let _0x3f6b1d=R(this['locale'],'Name\x20of\x20the\x20revision');return!_0xd2d249&&(_0x3f6b1d+='\x20('+R(this['locale'],'optional')+')'),(_0x1b0a2a['label']=_0x3f6b1d,_0x312119['on']('input',()=>{this['revisionNameInputValue']=_0x312119['element']['value']['trim']();}),_0x1b0a2a);}}class u extends _0x404964{static get['pluginName'](){return'RevisionHistoryUI';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}static get['requires'](){return[l];}['_saveRevisionFormView'];['init'](){const _0xb16781=this['editor'],_0x2439ff=_0xb16781['plugins']['get']('RevisionTracker');_0xb16781['ui']['componentFactory']['add']('revisionHistory',_0xa4178d=>{const _0x4fa96d=_0x489218(_0xa4178d),_0x30dccc=_0x4fa96d['panelView']['children'],_0x2d6d8c=new te(_0xa4178d),_0x456dc8=new _0x4900c5(_0xa4178d),_0x3664b6=new _0x1f2e21(_0xa4178d),_0x2b12f4=new _0x4900c5(_0xa4178d),_0x934666=new _0x1f2e21(_0xa4178d);return _0x4fa96d['bind']('isEnabled')['to'](_0x2439ff,'isReady',_0x2439ff,'isEnabled',_0xb16781,'isReadOnly',(_0x54ee4d,_0x5f3f4d,_0x5a8744)=>_0x54ee4d&&_0x5f3f4d&&!_0x5a8744),_0x4fa96d['buttonView']['set']({'icon':_0x1ba338['history'],'label':R(_0xa4178d,'Revision\x20history'),'tooltip':!0x0}),_0x3664b6['set']({'label':R(_0xa4178d,'Save\x20current\x20revision'),'withText':!0x0,'role':'menuitem'}),_0x3664b6['bind']('isEnabled')['to'](_0x2439ff,'isReady',_0x2439ff,'isEnabled',_0xb16781,'isReadOnly',(_0x971ac0,_0x179ef1,_0x51369a)=>_0x971ac0&&_0x179ef1&&!_0x51369a),_0x3664b6['on']('execute',()=>this['_showDialog']()),_0x934666['set']({'label':R(_0xa4178d,'Open\x20revision\x20history'),'withText':!0x0,'role':'menuitem'}),_0x934666['bind']('isEnabled')['to'](_0x2439ff,'isReady',_0xb16781,'isReadOnly',(_0x47aa31,_0x28bfd0)=>_0x47aa31&&!_0x28bfd0),_0x934666['on']('execute',()=>{_0xb16781['config']['get']('revisionHistory')['showRevisionViewerCallback'](),_0x4fa96d['isOpen']=!0x1,_0xb16781['editing']['view']['focus']();}),_0x456dc8['children']['add'](_0x3664b6),_0x2b12f4['children']['add'](_0x934666),_0x2d6d8c['role']='menu',_0x2d6d8c['items']['addMany']([_0x456dc8,_0x2b12f4]),_0x30dccc['add'](_0x2d6d8c),_0x4fa96d;}),_0xb16781['ui']['componentFactory']['add']('menuBar:revisionHistory',()=>this['_registerMenuComponent']());}['_registerMenuComponent'](){const _0xd12dc4=this['editor'],_0x236dd6=_0xd12dc4['locale'],_0x5631bd=new _0x4275c5(_0x236dd6),_0x4e530a=new _0xeedfb5(_0x236dd6);_0x5631bd['buttonView']['set']({'icon':_0x1ba338['history'],'label':R(_0x236dd6,'Revision\x20history')});const _0x52ee0d=new _0x31105d(_0x236dd6,_0x5631bd),_0x247145=new _0x10f003(_0x236dd6);_0x247145['set']({'label':R(_0x236dd6,'Save\x20current\x20revision')}),_0x247145['delegate']('execute')['to'](_0x5631bd),_0x247145['on']('execute',()=>{this['_showDialog']();}),_0x52ee0d['children']['add'](_0x247145),_0x4e530a['items']['add'](_0x52ee0d);const _0x3d5301=new _0x31105d(_0x236dd6,_0x5631bd),_0x2a2109=new _0x10f003(_0x236dd6);return _0x2a2109['set']({'label':R(_0x236dd6,'Open\x20revision\x20history')}),_0x2a2109['delegate']('execute')['to'](_0x5631bd),_0x2a2109['on']('execute',()=>{_0xd12dc4['config']['get']('revisionHistory')['showRevisionViewerCallback']();}),_0x3d5301['children']['add'](_0x2a2109),_0x4e530a['items']['add'](_0x3d5301),_0x5631bd['panelView']['children']['add'](_0x4e530a),_0x5631bd;}['_showDialog'](){const _0x30517f=this['editor'],_0x593d26=_0x30517f['locale'],_0x22b27=_0x30517f['plugins']['get']('Dialog'),_0x5aba71=_0x30517f['plugins']['get']('RevisionTracker');function _0x554fa5(_0x2fb52b){_0x30517f['config']['get']('revisionHistory.requireRevisionName')&&''===_0x2fb52b['revisionName']?_0x2fb52b['revisionNameInputView']['errorText']=R(_0x593d26,'The\x20revision\x20name\x20cannot\x20be\x20empty.'):(_0x30517f['plugins']['get'](l)['saveRevision']({'name':_0x2fb52b['revisionName']}),_0x22b27['hide']());}this['_saveRevisionFormView']||(this['_createSaveRevisionFormView'](),this['_saveRevisionFormView']['on']('submit',()=>_0x554fa5(this['_saveRevisionFormView']))),this['_saveRevisionFormView']['reset'](),_0x22b27['show']({'id':'revisionSave','title':R(_0x593d26,'Save\x20current\x20revision'),'isModal':!0x0,'content':this['_saveRevisionFormView'],'actionButtons':[{'label':R(_0x30517f['locale'],'Cancel'),'withText':!0x0,'onExecute':()=>_0x22b27['hide']()},{'label':R(_0x30517f['locale'],'Accept'),'class':'ck-button-action','withText':!0x0,'onCreate'(_0x446920){_0x446920['bind']('isEnabled')['to'](_0x5aba71,'isReady',_0x5aba71,'isEnabled',_0x30517f,'isReadOnly',(_0x103df9,_0x19c2b4,_0x39d3e1)=>_0x103df9&&_0x19c2b4&&!_0x39d3e1);},'onExecute':()=>_0x554fa5(this['_saveRevisionFormView'])}]});}['_createSaveRevisionFormView'](){const _0x25e722=this['editor'],_0x2b0b56=_0x25e722['locale'];this['_saveRevisionFormView']=new ns(_0x2b0b56,_0x25e722['config']['get']('revisionHistory.requireRevisionName')),this['_saveRevisionFormView']['render']();}}class Y extends _0x56ed61{['changeId'];['_model'];constructor(_0x3efe84,_0x7da14){super(_0x3efe84),this['_model']=_0x7da14,this['changeId']=_0x7da14['id'];const _0x3e1cb4=this['bindTemplate'],_0x2a9303=R(_0x3efe84,_0x7da14['data']['isSuggestion']?'Suggested\x20by':'add'==_0x7da14['type']?'Added\x20by':'Removed\x20by');this['set']('type',_0x7da14['type']),this['setTemplate']({'tag':'div','attributes':{'class':['ck-annotation','ck-revision-change',_0x3e1cb4['to']('type',_0x198245=>'ck-revision-change__'+_0x198245)],'tabindex':-0x1},'children':[{'tag':'span','children':[{'tag':'span','attributes':{'class':['ck-revision-change__label']},'children':[{'text':_0x2a9303}]},{'text':'\x20'+_0x7da14['author']['name']}]}]});}['focus'](){this['element']['focus']();}}class r extends/* #__PURE__ -- @preserve */
_0x440e55(){['id'];['author'];['type'];['data'];['rootName'];constructor(_0x36fc82){super(),this['id']=_0x36fc82['id']||_0x5b9713(),this['author']=_0x36fc82['author'],this['type']=_0x36fc82['type'],this['data']=_0x36fc82['data']||{},this['rootName']=_0x36fc82['rootName'],this['set']('createdAt',_0x36fc82['createdAt']);}['toJSON'](){return{'id':this['id'],'authorId':this['author']['id'],'type':this['type'],'data':this['data'],'createdAt':this['createdAt']};}}class f{['newRevisionId'];['oldRevisionId'];['changes'];constructor(_0x27e912,_0x3c1d33){this['newRevisionId']=_0x27e912,this['oldRevisionId']=_0x3c1d33,this['changes']=new _0x337623();}['_setChanges'](_0x4951f7){for(const _0x38ba8c of _0x4951f7)this['changes']['add'](_0x38ba8c);}}const Z={'c':_0x450d96,'a':_0x47beb4,'e':_0x1cc878,'r':_0x403878,'u':_0x2f86a4};class d extends _0x404964{['repository'];['adapter'];['_activeViewTarget'];['_changeView'];['_changeIdToChange'];['_balloon'];static get['pluginName'](){return'RevisionViewer';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}static get['requires'](){return[_0x2656b8,_0xe181fa,j];}constructor(_0xea63b8){super(_0xea63b8),this['repository']=this['editor']['plugins']['get']('RevisionsRepository'),this['set']('activeChange',null),this['set']('activeView',null),this['_activeViewTarget']=null,this['set']('diff',null),this['set']('isReady',!0x1),this['set']('isEnabled',!0x0),this['on']('change:isEnabled',(_0x50f09f,_0x3ec1f3,_0x423a66)=>{this['activeChange']=null,this['activeView']=null,this['editor']['editing']['view']['change'](_0x5eb8cd=>{for(const _0x156353 of this['editor']['editing']['view']['document']['roots'])_0x423a66?_0x5eb8cd['removeClass']('ck-editor__editable__overlay',_0x156353):_0x5eb8cd['addClass']('ck-editor__editable__overlay',_0x156353);});}),this['bind']('isNavigationMode')['to'](this,'activeChange',_0x5bacc0=>null!==_0x5bacc0),this['bind']('currentChangeNumber')['to'](this,'isReady',this,'diff',this,'activeChange',(_0x2ede17,_0x1df22a,_0x3aa9aa)=>_0x2ede17&&_0x3aa9aa?_0x1df22a['changes']['getIndex'](_0x3aa9aa):0x0),this['bind']('numberOfChanges')['to'](this,'isReady',this,'diff',(_0x4a1094,_0x30d65e)=>_0x4a1094?_0x30d65e['changes']['length']:0x0),this['_changeView']=null,this['_changeIdToChange']=new Map(),this['adapter']=null,this['_balloon']=this['editor']['plugins']['get'](_0xe181fa);}['init'](){const _0x450ae6=this['editor'],_0x36221f=new bt(_0x450ae6,{'direction':'backward'}),_0x339423=new bt(_0x450ae6,{'direction':'forward'});(_0x450ae6['commands']['add']('showPreviousChange',_0x36221f),_0x450ae6['commands']['add']('showNextChange',_0x339423),_0x450ae6['commands']['add']('restoreRevision',new yt(_0x450ae6)),this['on']('change:numberOfChanges',()=>{_0x36221f['refresh'](),_0x339423['refresh']();}),this['_setConversion'](),this['_initInteractions'](),_0x450ae6['enableReadOnlyMode']('revision-viewer'),_0x450ae6['plugins']['has']('WidgetToolbarRepository'))&&_0x450ae6['plugins']['get']('WidgetToolbarRepository')['forceDisabled']('revision-viewer');}async['getRevisionData'](_0x2c3c8c){await this['loadRevisionData'](_0x2c3c8c);const _0x31a361={};for(const _0x15d41a in _0x2c3c8c['diffData']){if(_0x2c3c8c['diffData'][_0x15d41a]['attachChange']&&!_0x2c3c8c['diffData'][_0x15d41a]['attachChange']['isAttached'])continue;const _0x1e3b80=this['_removeRevisionMarkers'](JSON['parse'](_0x2c3c8c['diffData'][_0x15d41a]['insertions'])),_0x11c69e=this['editor']['editing']['view']['document'],_0x575957=new _0xc7c08d(_0x11c69e,_0x1e3b80['map'](_0x21cf90=>this['_getViewObj'](_0x21cf90)));this['editor']['data']['processor']['useFillerType']('marked'),_0x31a361[_0x15d41a]=this['editor']['data']['processor']['toData'](_0x575957),this['editor']['data']['processor']['useFillerType']('default');}return _0x31a361;}async['getRevisionRootsAttributes'](_0x182daa){await this['loadRevisionData'](_0x182daa);const _0x3f9e32={};for(const _0x56debb in _0x182daa['diffData'])_0x182daa['diffData'][_0x56debb]['attachChange']&&!_0x182daa['diffData'][_0x56debb]['attachChange']['isAttached']||(_0x3f9e32[_0x56debb]=_0x182daa['diffData'][_0x56debb]['attributesAfter']||{});return _0x3f9e32;}['_removeRevisionMarkers'](_0x2106bd){return(_0x2106bd=_0x2106bd['filter'](_0xe6dac1=>!_0xe6dac1['name']||'revision-start'!==_0xe6dac1['name']&&'revision-end'!==_0xe6dac1['name']))['forEach'](_0x2b0de6=>{'string'!=typeof _0x2b0de6&&(_0x2b0de6['children']=this['_removeRevisionMarkers'](_0x2b0de6['children']),_0x2b0de6['attributes']=_0x2b0de6['attributes']['filter'](_0x1c3f92=>!_0x1c3f92[0x0]['startsWith']('data-revision-')));}),_0x2106bd;}async['compare'](_0x2fa8e4,_0x5c311e,_0x35222f=!0x1){if(!this['isEnabled'])return;const _0x324d8a=this['diff'],_0x215dad=this['repository'],_0x13dd3a='string'==typeof _0x2fa8e4?_0x215dad['getRevision'](_0x2fa8e4):_0x2fa8e4,_0x5c66db='string'==typeof _0x5c311e?_0x215dad['getRevision'](_0x5c311e):_0x5c311e,_0x285461=_0x13dd3a['id'],_0x394ac9=_0x5c66db?_0x5c66db['id']:null;if(!_0x35222f&&this['diff']&&this['diff']['newRevisionId']===_0x285461&&this['diff']['oldRevisionId']===_0x394ac9)return Promise['resolve']();this['isReady']=!0x1,this['activeView']=null,this['activeChange']=null,this['diff']=new f(_0x285461,_0x394ac9);const _0x64ae79=this['_getRevisionsRange'](_0x13dd3a,_0x5c66db,!0x0)['map'](_0x5e6fbf=>this['loadRevisionData'](_0x5e6fbf));return _0x64ae79['push'](new Promise(_0x517668=>{setTimeout(_0x517668,0x14);})),Promise['all'](_0x64ae79)['then'](()=>{if(!this['isEnabled'])return;this['_cleanUp']();const _0x43023c=this['_getDiff'](_0x285461,_0x394ac9);for(const _0x4cf22a of _0x43023c['changes'])this['_changeIdToChange']['set'](_0x4cf22a['id'],_0x4cf22a);this['editor']['model']['enqueueChange']({'isUndoable':!0x1},_0x38b7c6=>{for(const _0x335939 of this['editor']['model']['document']['getRootNames']())_0x38b7c6['detachRoot'](_0x335939);for(const _0x18bff7 of Object['keys'](_0x43023c['model'])){const _0x1071b1=_0x38b7c6['addRoot'](_0x18bff7);for(const _0x101239 of Object['keys'](_0x43023c['attributes'][_0x18bff7]))_0x38b7c6['setAttribute'](_0x101239,_0x43023c['attributes'][_0x18bff7][_0x101239],_0x1071b1);_0x38b7c6['insert'](_0x43023c['model'][_0x18bff7],_0x1071b1,0x0);}}),this['diff']['_setChanges'](this['_sortAndFilterDiffChanges'](_0x43023c['changes'])),this['isReady']=!0x0;})['catch'](_0x362f03=>{console['error'](_0x362f03),this['_cleanUp'](),_0x324d8a&&(this['diff']=_0x324d8a),this['isReady']=!0x0;});}['addRevisionData'](_0x1b6748,_0x165585){const _0x1bf0dd=this['repository']['createRevision'](_0x1b6748);return _0x1bf0dd['on']('_update',(_0x21cb48,_0x4ef56d,_0x50bf7c)=>_0x165585(_0x4ef56d,_0x50bf7c,_0x1bf0dd)),this['repository']['addRevision'](_0x1bf0dd),_0x1bf0dd;}['loadRevisionData'](_0x4802f3){if(!_0x4802f3||_0x4802f3['diffData'])return Promise['resolve']();{const _0x534822=this['editor']['config']['get']('collaboration.channelId');return this['adapter']['getRevision']({'channelId':_0x534822,'revisionId':_0x4802f3['id']})['then'](_0x3b14b3=>{_0x4802f3['_update']({'diffData':_0x3b14b3['diffData']},!0x0);});}}['_cleanUp'](){this['activeChange']=null,this['_cleanMarkers'](),this['_changeView']&&this['_changeView']['destroy'](),this['_changeView']=null,this['_changeIdToChange']['clear'](),this['editor']['model']['enqueueChange']({'isUndoable':!0x1},_0x209976=>{for(const _0xd2fa5f of this['editor']['model']['document']['getRootNames']())_0x209976['detachRoot'](_0xd2fa5f);});}['_sortAndFilterDiffChanges'](_0x20fee9){const _0x166b5a=[],_0x41830c=new Map();for(const _0x25514c of this['editor']['model']['document']['getRootNames']()){const _0x226100=this['editor']['editing']['view']['getDomRoot'](_0x25514c);if(!_0x226100)continue;const _0x4329c8=_0x226100['getClientRects']()['item'](0x0);_0x4329c8&&(_0x166b5a['push'](_0x25514c),_0x41830c['set'](_0x25514c,_0x4329c8));}return _0x166b5a['sort']((_0x59ccdf,_0xfa83bf)=>{const _0x2f81a9=_0x41830c['get'](_0x59ccdf),_0x380a04=_0x41830c['get'](_0xfa83bf);return _0x2f81a9['y']-_0x380a04['y']||_0x2f81a9['x']-_0x380a04['x'];}),(_0x20fee9=_0x20fee9['filter'](_0x4cccd3=>_0x166b5a['includes'](_0x4cccd3['rootName'])))['sort']((_0x3e2e17,_0x5b864c)=>_0x166b5a['indexOf'](_0x3e2e17['rootName'])-_0x166b5a['indexOf'](_0x5b864c['rootName'])),_0x20fee9;}['_makeTape'](_0x35602f){const _0x311416=Array['from'](_0x35602f['markers'])['filter'](([_0xa89422,_0xd170d9])=>_0xa89422['startsWith']('revision:')&&!_0xd170d9['isCollapsed']),_0x56dcf6=Array['from'](this['editor']['model']['createRangeIn'](_0x35602f)['getWalker']({'singleCharacters':!0x0}));if(0x0!=_0x311416['length'])for(const _0x3dd0e6 of _0x56dcf6){const [_0x3c5722,_0xa56be9]=_0x311416[0x0],[,_0x44f8b8,_0x1a9440]=_0x3c5722['split'](':');if(_0xa56be9['end']['isEqual'](_0x3dd0e6['nextPosition'])&&_0x311416['shift'](),(_0x3dd0e6['previousPosition']['isEqual'](_0xa56be9['start'])||_0x3dd0e6['previousPosition']['isAfter'](_0xa56be9['start']))&&('insertion'==_0x44f8b8?_0x3dd0e6['isAdded']={'userId':_0x1a9440}:'deletion'==_0x44f8b8&&(_0x3dd0e6['isRemoved']={'userId':_0x1a9440})),0x0==_0x311416['length'])break;}return _0x56dcf6;}['_refreshStartEndIndex'](_0x288f31){const _0x38e9e9=new Map();for(let _0xc3aeec=0x0;_0xc3aeec<_0x288f31['length'];_0xc3aeec++)'text'===_0x288f31[_0xc3aeec]['type']?(_0x288f31[_0xc3aeec]['item']['startIndex']=_0xc3aeec,_0x288f31[_0xc3aeec]['item']['endIndex']=_0xc3aeec):('elementStart'===_0x288f31[_0xc3aeec]['type']?_0x288f31[_0xc3aeec]['item']['startIndex']=_0xc3aeec:'elementEnd'===_0x288f31[_0xc3aeec]['type']&&(_0x288f31[_0xc3aeec]['item']['endIndex']=_0xc3aeec),_0x38e9e9['set'](_0x288f31[_0xc3aeec]['id'],_0xc3aeec));for(const _0x57ac06 of _0x38e9e9['values']())'elementStart'===_0x288f31[_0x57ac06]['type']?_0x288f31[_0x57ac06]['item']['endIndex']=_0x38e9e9['get'](_0x288f31[_0x57ac06]['pairId']):'elementEnd'===_0x288f31[_0x57ac06]['type']&&(_0x288f31[_0x57ac06]['item']['startIndex']=_0x38e9e9['get'](_0x288f31[_0x57ac06]['pairId']));}['_processTape'](_0x4b3a4a){for(let _0x352788=0x0;_0x352788<_0x4b3a4a['length'];_0x352788++){if('elementStart'===_0x4b3a4a[_0x352788]['type'])_0x4b3a4a[_0x352788]['item']['startIndex']=_0x352788;else{if('elementEnd'===_0x4b3a4a[_0x352788]['type']){_0x4b3a4a[_0x352788]['item']['endIndex']=_0x352788;const _0x46eb07=_0x4b3a4a[_0x352788]['item']['startIndex'];_0x4b3a4a[_0x46eb07]['pairId']=_0x4b3a4a[_0x352788]['id'],_0x4b3a4a[_0x352788]['pairId']=_0x4b3a4a[_0x46eb07]['id'];}else _0x4b3a4a[_0x352788]['item']['startIndex']=_0x352788,_0x4b3a4a[_0x352788]['item']['endIndex']=_0x352788,_0x4b3a4a[_0x352788]['pairId']=null;}_0x4b3a4a[_0x352788]['markersStart']||(_0x4b3a4a[_0x352788]['markersStart']=[],_0x4b3a4a[_0x352788]['markersEnd']=[]);}}['_markInsertions'](_0x1a8937,_0x2e59e0){const _0x1d8c14=_0x1a8937['filter'](_0x392de7=>!_0x392de7['isAdded']);for(let _0x27ef72=0x0;_0x27ef72<_0x2e59e0['length'];_0x27ef72++)_0x2e59e0[_0x27ef72]['isAdded']&&(_0x1d8c14[_0x27ef72]['isAdded']=_0x2e59e0[_0x27ef72]['isAdded']);}['_makeModelFromViewString'](_0x22dab4){const _0x525a52=JSON['parse'](_0x22dab4),_0x3bae12=this['editor']['editing']['view']['document'],_0x25b561=new _0xc7c08d(_0x3bae12,_0x525a52['map'](_0x2bd931=>this['_getViewObj'](_0x2bd931)));return this['editor']['data']['toModel'](_0x25b561);}['_getViewObj'](_0x5179c4){const _0x14a1fe=this['editor']['editing']['view']['document'];if('string'==typeof _0x5179c4)return new _0x3fa6d6(_0x14a1fe,_0x5179c4);{const _0x18fac3=_0x5179c4['children']['map'](_0x58acff=>this['_getViewObj'](_0x58acff));return new(Z[_0x5179c4['type']]||_0xa0d1a7)(_0x14a1fe,_0x5179c4['name'],_0x5179c4['attributes'],_0x18fac3);}}['_getDiff'](_0x10cdea,_0x31526c=null){const _0x4a71ab=this['repository']['getRevision'](_0x10cdea),_0x1e0ce0=_0x31526c?this['repository']['getRevision'](_0x31526c):null,_0x186b5c=this['_getRevisionsRange'](_0x4a71ab,_0x1e0ce0),_0x597159=_0x186b5c[_0x186b5c['length']-0x1],_0x35518b=new Map(),_0x18c34e={'model':{},'attributes':{},'changes':[]},_0x5530a8=new Set(),_0x32e491=new Map();for(let _0x53c8fd=_0x186b5c['length']-0x1;_0x53c8fd>=0x0;_0x53c8fd--){const _0x141648=_0x186b5c[_0x53c8fd];for(const _0x413691 of Object['keys'](_0x141648['diffData']))if(_0x141648['diffData'][_0x413691]['attachChange']){const _0x5abce0=_0x141648['diffData'][_0x413691]['attachChange'];_0x5abce0['isAttached']?(_0x5530a8['add'](_0x413691),_0x32e491['has'](_0x413691)&&_0x32e491['get'](_0x413691)['userId']==_0x5abce0['userId']?_0x32e491['delete'](_0x413691):_0x32e491['set'](_0x413691,_0x5abce0)):_0x32e491['has'](_0x413691)?(_0x5530a8['delete'](_0x413691),_0x32e491['delete'](_0x413691)):(_0x5530a8['add'](_0x413691),_0x32e491['set'](_0x413691,_0x5abce0));}else _0x5530a8['add'](_0x413691);}for(const _0x1524d0 of _0x5530a8){const _0x4aa9ea=_0x32e491['has'](_0x1524d0)&&!_0x32e491['get'](_0x1524d0)['isAttached'];let _0xb89baa=_0x4aa9ea?_0x186b5c['length']-0x1:0x0;const _0xf6469e=_0x4aa9ea?-0x1:0x1;for(;_0x186b5c[_0xb89baa];){const _0x5c349e=_0x186b5c[_0xb89baa];if(_0x5c349e['diffData'][_0x1524d0]){const _0x4d7913=_0x4aa9ea?_0x5c349e['diffData'][_0x1524d0]['attributesBefore']:_0x5c349e['diffData'][_0x1524d0]['attributesAfter'];_0x18c34e['attributes'][_0x1524d0]=_0x4d7913?_0x10da71(_0x4d7913):{};break;}_0xb89baa+=_0xf6469e;}}for(const _0x23af70 of _0x186b5c){_0x23af70['model']={};for(const _0x44639c of _0x23af70['authors'])_0x35518b['set'](_0x44639c['id'],_0x44639c);for(const _0x9e778d of _0x5530a8){const _0x4513b1=_0x23af70['diffData'][_0x9e778d]?_0x23af70['diffData'][_0x9e778d]['insertions']:'[]',_0x1adc0d=_0x23af70['diffData'][_0x9e778d]?_0x23af70['diffData'][_0x9e778d]['deletions']:'[]';_0x23af70['model'][_0x9e778d]={'insertions':this['_makeModelFromViewString'](_0x4513b1),'deletions':this['_makeModelFromViewString'](_0x1adc0d)};}}for(const _0x106831 of _0x5530a8){let _0x3312a3=null,_0x246b44=0x0;const _0x4dd51e=new Map(Array['from'](_0x4a71ab['model'][_0x106831]['insertions']['markers'])['filter'](([_0x14d05d])=>!_0x14d05d['startsWith']('revision:')));let _0x635060=0x0;for(const _0x335c1b of _0x186b5c){const _0x536fe6=this['_makeTape'](_0x335c1b['model'][_0x106831]['insertions']);_0x335c1b==_0x4a71ab?(_0x3312a3=_0x536fe6,_0x246b44=_0x3312a3['length'],_0x3312a3['forEach'](_0x91f56a=>{_0x91f56a['id']=_0x635060++;}),this['_processTape'](_0x3312a3)):this['_markInsertions'](_0x3312a3,_0x536fe6);const _0x4b7040=_0x3312a3['filter'](_0x533e4e=>!_0x533e4e['isAdded'])['map'](_0x349c26=>_0x349c26['id']);let _0x270df4=0x0;const _0x54bab7=this['_makeTape'](_0x335c1b['model'][_0x106831]['deletions']);_0x54bab7['forEach'](_0x55b187=>{_0x55b187['isRemoved']?_0x55b187['id']=_0x246b44++:_0x55b187['id']=_0x4b7040[_0x270df4++];}),this['_processTape'](_0x54bab7),this['_setDistance'](_0x3312a3,'isAdded'),this['_setDistance'](_0x54bab7,'isRemoved'),_0x335c1b==_0x4a71ab&&this['_markMarkers'](_0x3312a3,_0x4dd51e),_0x3312a3=this['_joinTapes'](_0x3312a3,_0x54bab7),this['_refreshStartEndIndex'](_0x3312a3),this['_setDistance'](_0x3312a3,'isRemoved');}_0x3312a3=_0x3312a3['filter'](_0x4a6c61=>!(_0x4a6c61['isAdded']&&_0x4a6c61['isRemoved']));const _0xce8f98=new Map(_0x597159['model'][_0x106831]['deletions']['markers']),_0x479f61=new Set(_0x4dd51e['keys']());for(const _0x461e98 of _0xce8f98['keys']())_0x479f61['delete'](_0x461e98);this['_markSuggestions'](_0x3312a3,_0x479f61),this['_fixObsoleteTags'](_0x3312a3),_0x3312a3=this['_removeMissingPairs'](_0x3312a3),_0x3312a3=this['_markMismatchedRemovedTags'](_0x3312a3),_0x3312a3=this['_removeUnsupportedChanges'](_0x3312a3);const {root:_0x419d21,changes:_0x1ab3c6}=this['_makeModelFromTape'](_0x3312a3,_0x35518b,_0x106831);_0x18c34e['model'][_0x106831]=_0x419d21;const _0xc86449=_0x32e491['get'](_0x106831);if(_0xc86449){const _0x4d0c4e=_0x35518b['get'](_0xc86449['userId']),_0x320152=new r({'author':_0x4d0c4e,'type':_0xc86449['isAttached']?'add':'remove','data':{'isOnRoot':!0x0},'createdAt':new Date(),'rootName':_0x106831});_0x1ab3c6['unshift'](_0x320152),_0x18c34e['attributes'][_0x106831]['revisionHistoryAttachChange']=_0x320152['id'];}_0x18c34e['changes']=_0x18c34e['changes']['concat'](_0x1ab3c6);}return _0x18c34e;}['_markMarkers'](_0x5a8953,_0x2903c7){for(let _0x1374aa=0x0;_0x1374aa<_0x5a8953['length'];_0x1374aa++)for(const [_0xc15802,_0x455121]of _0x2903c7)_0x455121['start']['isEqual'](_0x5a8953[_0x1374aa]['previousPosition'])&&_0x5a8953[_0x1374aa]['markersStart']['push'](_0xc15802),_0x455121['end']['isEqual'](_0x5a8953[_0x1374aa]['nextPosition'])&&_0x5a8953[_0x1374aa]['markersEnd']['push'](_0xc15802);}['_joinTapes'](_0x58bb4d,_0x2d8886){let _0xb82775=[],_0x369428=0x0,_0x285e07=0x0;for(;_0x369428<_0x58bb4d['length']||_0x285e07<_0x2d8886['length'];){const _0x17140e=_0x58bb4d[_0x369428]||{},_0x2adc0c=_0x2d8886[_0x285e07]||{};if(_0x17140e['id']==_0x2adc0c['id'])_0x369428++,_0x285e07++,_0xb82775['push'](_0x17140e);else{if(_0x2adc0c['isRemoved']&&_0x17140e['isAdded']){const {commonTape:_0x3150cd,iEnd:_0xbbbf7f,jEnd:_0x2adb0c}=this['_threeWayMerge'](_0x58bb4d,_0x369428,_0x2d8886,_0x285e07);_0xb82775=_0xb82775['concat'](_0x3150cd),_0x369428=_0xbbbf7f,_0x285e07=_0x2adb0c;}else _0x2adc0c['isRemoved']?(_0x285e07++,_0xb82775['push'](_0x2adc0c)):(_0x369428++,_0xb82775['push'](_0x17140e));}}return _0xb82775;}['_markSuggestions'](_0x10fbbd,_0x2a4b97){const _0x120157=[];for(let _0x16bb62=0x0;_0x16bb62<_0x10fbbd['length'];_0x16bb62++){for(let _0x2708f1=0x0;_0x2708f1<_0x10fbbd[_0x16bb62]['markersStart']['length'];_0x2708f1++){const _0x49a172=_0x10fbbd[_0x16bb62]['markersStart'][_0x2708f1];if(!_0x2a4b97['has'](_0x49a172))continue;const {group:_0x2fd668,type:_0x59a3e2,authorId:_0x4863b5}=_0x4417bc(_0x49a172);'revision-suggestion'!=_0x2fd668||'insertion'!=_0x59a3e2&&'deletion'!=_0x59a3e2||(_0x120157['unshift']({'type':_0x59a3e2,'name':_0x49a172,'userId':_0x4863b5}),_0x10fbbd[_0x16bb62]['markersStart']['splice'](_0x2708f1,0x1),_0x2708f1--);}_0x373e0b(_0x10fbbd[_0x16bb62]);for(let _0x134894=0x0;_0x134894<_0x10fbbd[_0x16bb62]['markersEnd']['length'];_0x134894++){const _0x529ecf=_0x10fbbd[_0x16bb62]['markersEnd'][_0x134894];if(!_0x2a4b97['has'](_0x529ecf))continue;const {group:_0x451297,type:_0x10be8c}=_0x4417bc(_0x529ecf);if('revision-suggestion'!=_0x451297||'insertion'!=_0x10be8c&&'deletion'!=_0x10be8c)continue;_0x10fbbd[_0x16bb62]['markersEnd']['splice'](_0x134894,0x1),_0x134894--;const _0x356c5a=_0x120157['findIndex'](_0x42b254=>_0x42b254['name']==_0x529ecf);_0x356c5a>-0x1&&_0x120157['splice'](_0x356c5a,0x1);}}function _0x4417bc(_0x2a0428){const _0x5b5397=_0x2a0428['split'](':');return{'group':_0x5b5397[0x0],'type':_0x5b5397[0x1],'subType':_0x5b5397['length']>=0x5?_0x5b5397[0x2]:null,'id':_0x5b5397['length']<0x5?_0x5b5397[0x2]:_0x5b5397[0x3],'authorId':_0x5b5397['length']<0x5?_0x5b5397[0x3]:_0x5b5397[0x4],'markerCount':0x6==_0x5b5397['length']?_0x5b5397[0x5]:null};}function _0x373e0b(_0x4813e6){for(let _0x27c83d=0x0;_0x27c83d<_0x120157['length'];_0x27c83d++){if(_0x4813e6['isAdded']&&'insertion'==_0x120157[_0x27c83d]['type'])return _0x4813e6['isAddSuggestion']=_0x120157[_0x27c83d],void delete _0x4813e6['isAdded'];if(!_0x4813e6['isAdded']&&!_0x4813e6['isRemoved']&&'deletion'==_0x120157[_0x27c83d]['type'])return void(_0x4813e6['isRemoveSuggestion']=_0x120157[_0x27c83d]);}}}['_setDistance'](_0x5a7d6b,_0x9f5b93){let _0x1a238d=0x0,_0x478b17=!0x1;const _0x2e1897=new Map();for(const _0x5177df of _0x5a7d6b)_0x5177df[_0x9f5b93]?_0x478b17&&(_0x1a238d++,_0x478b17=!0x1):(_0x1a238d++,_0x478b17=!0x0),_0x2e1897['set'](_0x5177df['id'],_0x1a238d);for(let _0x2c3cb7=0x0;_0x2c3cb7<_0x5a7d6b['length'];_0x2c3cb7++){if('isRemoved'==_0x9f5b93&&_0x5a7d6b[_0x2c3cb7]['isAdded']||'isAdded'==_0x9f5b93&&_0x5a7d6b[_0x2c3cb7]['isRemoved'])continue;if('text'==_0x5a7d6b[_0x2c3cb7]['type']){_0x5a7d6b[_0x2c3cb7]['distance']=0x0;continue;}const _0x5dfcea=_0x2e1897['get'](_0x5a7d6b[_0x2c3cb7]['pairId']),_0x31b9a6=_0x2e1897['get'](_0x5a7d6b[_0x2c3cb7]['id']);_0x5a7d6b[_0x2c3cb7]['distance']=_0x5dfcea-_0x31b9a6;}}['_getRevisionsRange'](_0x370a47,_0x5757f6,_0x53b006=!0x1){const _0x4a0376=[];let _0x25590b=this['repository']['getIndex'](_0x370a47),_0x560abe=this['repository']['getIndex'](_0x5757f6);for(-0x1==_0x560abe&&(_0x560abe=this['repository']['_revisions']['length'],_0x53b006=!0x1);_0x25590b<_0x560abe;)_0x4a0376['push'](this['repository']['getRevision'](_0x25590b)),_0x25590b++;return _0x53b006&&_0x4a0376['push'](this['repository']['getRevision'](_0x25590b)),_0x4a0376;}['_threeWayMerge'](_0x353448,_0x174f17,_0x526267,_0x1cfb21){const _0xd1f6bc=this['editor']['model']['schema'];let _0x1cdd49=_0x174f17;for(;_0x353448[_0x1cdd49]&&_0x353448[_0x1cdd49]['isAdded'];)_0x1cdd49++;let _0x3b5fd6=_0x1cfb21;for(;_0x526267[_0x3b5fd6]&&_0x526267[_0x3b5fd6]['isRemoved'];)_0x3b5fd6++;_0x36f60d(_0x353448,_0x174f17,_0x1cdd49),_0x36f60d(_0x526267,_0x1cfb21,_0x3b5fd6);const _0xc8ad9f=_0x526267['slice'](_0x1cfb21,_0x3b5fd6)['concat'](_0x353448['slice'](_0x174f17,_0x1cdd49));return _0xc8ad9f['sort']((_0x10ef6e,_0x23841a)=>_0x10ef6e['side']!=_0x23841a['side']?_0x10ef6e['side']-_0x23841a['side']:_0x10ef6e['level']!=_0x23841a['level']?_0x10ef6e['level']-_0x23841a['level']:_0x10ef6e['distance']!=_0x23841a['distance']?_0x23841a['distance']-_0x10ef6e['distance']:!!_0x10ef6e['isAdded']!=!!_0x23841a['isAdded']?-0x1==_0x10ef6e['side']||0x0==_0x10ef6e['side']?_0x10ef6e['isAdded']?-0x1:0x1:_0x10ef6e['isAdded']?0x1:-0x1:_0x10ef6e['index']-_0x23841a['index']),{'commonTape':_0xc8ad9f,'iEnd':_0x1cdd49,'jEnd':_0x3b5fd6};function _0x36f60d(_0x1826a0,_0xd1fdb0,_0x5408f0){let _0x3187bb=-0x1,_0x28c908=Number['POSITIVE_INFINITY'],_0x3edc62=!0x0;for(let _0x4f6dfe=_0xd1fdb0;_0x4f6dfe<_0x5408f0;_0x4f6dfe++)if(_0xd1f6bc['isInline'](_0x1826a0[_0x4f6dfe]['item'])||(_0x3edc62=!0x1),_0x1826a0[_0x4f6dfe]['item']['startIndex']<_0xd1fdb0&&(_0x3187bb=_0x4f6dfe),_0x1826a0[_0x4f6dfe]['item']['endIndex']>=_0x5408f0){_0x28c908=_0x4f6dfe;break;}_0x3edc62&&(_0x3187bb=_0x5408f0-0x1);for(let _0x301767=_0xd1fdb0;_0x301767<_0x5408f0;_0x301767++)_0x1826a0[_0x301767]['side']=_0x301767<=_0x3187bb?-0x1:_0x301767<_0x28c908?0x0:0x1,_0x1826a0[_0x301767]['index']=_0x301767;let _0x59418f=0x0;for(let _0x59a93d=_0xd1fdb0;_0x59a93d<=_0x3187bb;_0x59a93d++)0x0==_0x1826a0[_0x59a93d]['distance']?_0x1826a0[_0x59a93d]['level']=_0x59418f:(_0x59418f++,_0x1826a0[_0x59a93d]['level']=_0x59418f,_0x59418f++);for(let _0x25fec6=_0xd1fdb0;_0x25fec6<_0x5408f0;_0x25fec6++)0x0==_0x1826a0[_0x25fec6]['side']&&(_0x1826a0[_0x25fec6]['level']=_0x59418f);_0x59418f=0x0;for(let _0x10a334=_0x5408f0-0x1;_0x10a334>=_0x28c908;_0x10a334--)0x0==_0x1826a0[_0x10a334]['distance']?_0x1826a0[_0x10a334]['level']=_0x59418f:(_0x59418f--,_0x1826a0[_0x10a334]['level']=_0x59418f,_0x59418f--);}}['_fixObsoleteTags'](_0x4b2771){const _0x34633c=new Map(),_0x2d5432=this['editor']['model']['schema'];for(let _0x4e53f7=0x1;_0x4e53f7<_0x4b2771['length'];_0x4e53f7++){let _0x43035d,_0x47e86e,_0x3c5dc9;const _0x214de5=_0x4b2771[_0x4e53f7],_0x1bcbec=_0x4b2771[_0x4e53f7-0x1];if('text'==_0x214de5['type'])continue;if(_0x214de5['type']!=_0x1bcbec['type'])continue;if(!_0x2d5432['isBlock'](_0x1bcbec['item'])||_0x2d5432['isLimit'](_0x1bcbec['item']))continue;if(!_0x2d5432['isBlock'](_0x214de5['item'])||_0x2d5432['isLimit'](_0x214de5['item']))continue;if((_0x4b2771[_0x4e53f7]['isAdded']||_0x4b2771[_0x4e53f7]['isAddSuggestion'])&&_0x4b2771[_0x4e53f7-0x1]['isRemoved'])_0x43035d=_0x4b2771[_0x4e53f7],_0x47e86e=_0x4b2771[_0x4e53f7-0x1],_0x3c5dc9=_0x4e53f7-0x1;else{if(!_0x4b2771[_0x4e53f7]['isRemoved']||!_0x4b2771[_0x4e53f7-0x1]['isAdded']&&!_0x4b2771[_0x4e53f7-0x1]['isAddSuggestion'])continue;_0x43035d=_0x4b2771[_0x4e53f7-0x1],_0x47e86e=_0x4b2771[_0x4e53f7],_0x3c5dc9=_0x4e53f7;}const _0xa810e5=_0x43035d['level']==_0x47e86e['level'],_0x43daa1=Math['abs'](_0x43035d['level'])<Math['abs'](_0x47e86e['level'])&&0x0==_0x47e86e['distance'];(_0xa810e5||_0x43daa1)&&(_0x34633c['set'](_0x47e86e['id'],_0x43035d['id']),_0x4b2771['splice'](_0x3c5dc9,0x1),_0x4e53f7--,_0x43035d['isAdded']=!0x1);}for(let _0x1d51fd=0x0;_0x1d51fd<_0x4b2771['length'];_0x1d51fd++)_0x34633c['has'](_0x4b2771[_0x1d51fd]['pairId'])&&(_0x4b2771[_0x1d51fd]['pairId']=_0x34633c['get'](_0x4b2771[_0x1d51fd]['pairId']));}['_removeMissingPairs'](_0x27afc4){const _0x428188=new Set(_0x27afc4['map'](_0x2ce025=>_0x2ce025['id']));for(let _0x3f3e17=0x0;_0x3f3e17<_0x27afc4['length'];_0x3f3e17++)_0x428188['has'](_0x27afc4[_0x3f3e17]['pairId'])||0x0==_0x27afc4[_0x3f3e17]['distance']||(_0x27afc4[_0x3f3e17]['isIncorrect']=!0x0);return _0x27afc4['filter'](_0x33efcb=>!_0x33efcb['isIncorrect']);}['_markMismatchedRemovedTags'](_0x2cd96d){const _0x5c0d32=new Set();for(let _0x59c69d=0x0;_0x59c69d<_0x2cd96d['length'];_0x59c69d++){if(_0x5c0d32['has'](_0x2cd96d[_0x59c69d]['id'])&&_0x2cd96d[_0x59c69d]['isRemoved']&&(_0x2cd96d[_0x59c69d]['isIncorrect']=!0x0),_0x2cd96d[_0x59c69d]['isIncorrect'])continue;if(0x0==_0x2cd96d[_0x59c69d]['distance'])continue;if('elementStart'!=_0x2cd96d[_0x59c69d]['type'])continue;if(null==_0x2cd96d[_0x59c69d]['pairId'])continue;let _0x123f35=_0x59c69d+0x1,_0x2f1395=0x0;for(;_0x2cd96d[_0x123f35]['id']!=_0x2cd96d[_0x59c69d]['pairId'];)'elementStart'==_0x2cd96d[_0x123f35]['type']?_0x2f1395++:'elementEnd'==_0x2cd96d[_0x123f35]['type']&&_0x2f1395--,_0x123f35++;if(0x0!=_0x2f1395){if(_0x2cd96d[_0x59c69d]['isRemoved'])_0x2cd96d[_0x59c69d]['isIncorrect']=!0x0;else{for(;_0x123f35!=_0x59c69d;)_0x2cd96d[_0x123f35]['isRemoved']&&0x0!=_0x2cd96d[_0x123f35]['distance']&&(_0x2cd96d[_0x123f35]['isIncorrect']=!0x0,_0x5c0d32['add'](_0x2cd96d[_0x123f35]['pairId'])),_0x123f35--;}}}return _0x2cd96d['filter'](_0x85732=>!_0x85732['isIncorrect']);}['_removeUnsupportedChanges'](_0x155f30){const _0x2d3d78=this['editor']['model']['schema'];for(let _0x2cfbab=0x0;_0x2cfbab<_0x155f30['length'];_0x2cfbab++){if(!(_0x155f30[_0x2cfbab]['isAdded']||_0x155f30[_0x2cfbab]['isAddSuggestion']||_0x155f30[_0x2cfbab]['isRemoved']||_0x155f30[_0x2cfbab]['isRemoveSuggestion']))continue;if(0x0==_0x155f30[_0x2cfbab]['distance'])continue;const _0xbf6e10=_0x155f30[_0x2cfbab]['item'];_0x2d3d78['isBlock'](_0xbf6e10)||_0x2d3d78['isLimit'](_0xbf6e10)||(_0x155f30[_0x2cfbab]['isAdded']&&delete _0x155f30[_0x2cfbab]['isAdded'],_0x155f30[_0x2cfbab]['isAddSuggestion']&&delete _0x155f30[_0x2cfbab]['isAddSuggestion'],_0x155f30[_0x2cfbab]['isRemoveSuggestion']&&delete _0x155f30[_0x2cfbab]['isRemoveSuggestion'],_0x155f30[_0x2cfbab]['isRemoved']&&(_0x155f30[_0x2cfbab]['isIncorrect']=!0x0));}return _0x155f30['filter'](_0xd85f05=>!_0xd85f05['isIncorrect']);}['_makeModelFromTape'](_0x2431c1,_0x22cb88,_0x56bc76){const _0x35cc=new wt(),_0x3b2de1=[],_0x1b6b01=new Map(),_0x567e62=this['editor']['model'],_0x436efc=_0x567e62['schema'],_0x357c9b=[_0x35cc],_0x21a8fe={},_0x368e7c={'isAdded':[],'isRemoved':[],'isAddSuggestion':[],'isRemoveSuggestion':[]};let _0x4699a6=null;const _0x394992=[0x0];for(let _0x569e16=0x0;_0x569e16<_0x2431c1['length'];_0x569e16++)if('elementStart'===_0x2431c1[_0x569e16]['type']){_0x2431c1[_0x569e16]['previousPosition']=_0x567e62['createPositionFromPath'](_0x35cc,_0x394992);const _0x5ee102=new ft(_0x2431c1[_0x569e16]['item']['name'],_0x2431c1[_0x569e16]['item']['getAttributes']());_0x357c9b[0x0]['_appendChild'](_0x5ee102),_0x394992['push'](0x0),_0x357c9b['unshift'](_0x5ee102),_0x2431c1[_0x569e16]['nextPosition']=_0x567e62['createPositionFromPath'](_0x35cc,_0x394992);}else'elementEnd'===_0x2431c1[_0x569e16]['type']?(_0x357c9b['shift'](),_0x2431c1[_0x569e16]['previousPosition']=_0x567e62['createPositionFromPath'](_0x35cc,_0x394992),_0x394992['pop'](),_0x394992[_0x394992['length']-0x1]++,_0x2431c1[_0x569e16]['nextPosition']=_0x567e62['createPositionFromPath'](_0x35cc,_0x394992)):(_0x2431c1[_0x569e16]['previousPosition']=_0x567e62['createPositionFromPath'](_0x35cc,_0x394992),_0x4699a6?_0x4699a6['_data']+=_0x2431c1[_0x569e16]['item']['data']:_0x4699a6=new _t(_0x2431c1[_0x569e16]['item']['data'],_0x2431c1[_0x569e16]['item']['getAttributes']()),_0x2431c1[_0x569e16+0x1]&&'text'===_0x2431c1[_0x569e16+0x1]['type']&&_0x32f359(_0x4699a6,_0x2431c1[_0x569e16+0x1]['item'])||(_0x357c9b[0x0]['_appendChild'](_0x4699a6),_0x4699a6=null),_0x394992[_0x394992['length']-0x1]+=_0x2431c1[_0x569e16]['item']['offsetSize'],_0x2431c1[_0x569e16]['nextPosition']=_0x567e62['createPositionFromPath'](_0x35cc,_0x394992));for(let _0x1dfb7b=0x0;_0x1dfb7b<_0x2431c1['length'];_0x1dfb7b++){const _0x27a9df=_0x2431c1[_0x1dfb7b]['previousPosition'],_0x290fd7=_0x2431c1[_0x1dfb7b]['nextPosition'];for(const _0x43e042 of _0x2431c1[_0x1dfb7b]['markersStart'])_0x1b6b01['set'](_0x43e042,{'start':_0x27a9df,'end':null});_0xf9b316('isRemoveSuggestion',_0x1dfb7b,_0x27a9df,_0x290fd7),_0xf9b316('isAddSuggestion',_0x1dfb7b,_0x27a9df,_0x290fd7),_0xf9b316('isRemoved',_0x1dfb7b,_0x27a9df,_0x290fd7),_0xf9b316('isAdded',_0x1dfb7b,_0x27a9df,_0x290fd7);for(const _0x10a671 of _0x2431c1[_0x1dfb7b]['markersEnd']){_0x1b6b01['get'](_0x10a671)['end']=_0x290fd7;}}for(const [_0x3c016a,_0x2f7367]of _0x1b6b01){const _0x4610b9=this['editor']['model']['createRange'](_0x2f7367['start'],_0x2f7367['end']);_0x35cc['markers']['set'](_0x3c016a,_0x4610b9);}return _0x3b2de1['sort']((_0x224226,_0x244e0e)=>{const _0x37414c=_0x35cc['markers']['get']('revision:'+_0x224226['id']),_0x647380=_0x35cc['markers']['get']('revision:'+_0x244e0e['id']);return _0x37414c['start']['isBefore'](_0x647380['start'])?-0x1:_0x37414c['start']['isAfter'](_0x647380['start'])?0x1:_0x37414c['end']['isBefore'](_0x647380['end'])?-0x1:_0x37414c['end']['isAfter'](_0x647380['end'])?0x1:'add'===_0x224226['type']?-0x1:0x1;}),{'root':_0x35cc,'changes':_0x3b2de1};function _0xf9b316(_0x1354f3,_0x1e4619,_0x80dd6e,_0x24e79d){const _0x5f0702=!!_0x2431c1[_0x1e4619][_0x1354f3],_0x27a2d9=_0x5f0702?_0x2431c1[_0x1e4619][_0x1354f3]['userId']:null,_0x28616a=_0x1e4619===_0x2431c1['length']-0x1,_0x12e777=_0x368e7c[_0x1354f3][0x0],_0x382e17=_0x436efc['isObject'](_0x2431c1[_0x1e4619]['item']);!_0x21a8fe[_0x1354f3]&&_0x5f0702?_0x21a8fe[_0x1354f3]={'start':_0x80dd6e,'tapeItem':_0x2431c1[_0x1e4619],'userId':_0x27a2d9,'type':_0x1354f3}:_0x21a8fe[_0x1354f3]&&!_0x5f0702?(_0x21a8fe[_0x1354f3]['end']=_0x80dd6e,_0x342beb(_0x21a8fe[_0x1354f3]),_0x21a8fe[_0x1354f3]=null):_0x21a8fe[_0x1354f3]&&_0x5f0702&&_0x21a8fe[_0x1354f3]['userId']!==_0x27a2d9&&(_0x21a8fe[_0x1354f3]['end']=_0x80dd6e,_0x12e777&&_0x12e777['userId']===_0x21a8fe[_0x1354f3]['userId']||_0x342beb(_0x21a8fe[_0x1354f3]),_0x21a8fe[_0x1354f3]={'start':_0x80dd6e,'tapeItem':_0x2431c1[_0x1e4619],'userId':_0x27a2d9,'type':_0x1354f3}),_0x21a8fe[_0x1354f3]&&_0x382e17&&('elementStart'!==_0x2431c1[_0x1e4619]['type']||_0x12e777&&_0x12e777['userId']===_0x27a2d9||_0x368e7c[_0x1354f3]['unshift']({'userId':_0x27a2d9,'object':_0x2431c1[_0x1e4619]['item'],'change':_0x21a8fe[_0x1354f3]}),'elementEnd'===_0x2431c1[_0x1e4619]['type']&&_0x12e777&&_0x12e777['object']===_0x2431c1[_0x1e4619]['item']&&(_0x368e7c[_0x1354f3]['shift'](),_0x21a8fe[_0x1354f3]=_0x12e777['change'])),_0x21a8fe[_0x1354f3]&&_0x28616a&&(_0x21a8fe[_0x1354f3]['end']=_0x24e79d,_0x342beb(_0x21a8fe[_0x1354f3]),_0x21a8fe[_0x1354f3]=null);}function _0x342beb({start:_0x1ede42,end:_0x10df7f,tapeItem:_0x7ba321,userId:_0x492503,type:_0x3563ac}){const _0x5b50fb=_0x7ba321['item'],_0x154c21=_0x567e62['schema']['isBlock'](_0x5b50fb)&&!_0x567e62['schema']['isLimit'](_0x5b50fb),_0x3a8332=_0x1ede42['nodeAfter']==_0x10df7f['parent']&&_0x10df7f['isAtStart'];if(_0x154c21&&_0x3a8332)return;const _0x16b160=_0x567e62['createRange'](_0x1ede42,_0x10df7f),_0x44a754=_0x22cb88['get'](_0x492503),_0x3aaf5d=new r({'author':_0x44a754,'type':'isAdded'==_0x3563ac||'isAddSuggestion'==_0x3563ac?'add':'remove','data':{'isSuggestion':'isAddSuggestion'==_0x3563ac||'isRemoveSuggestion'==_0x3563ac},'createdAt':new Date(),'rootName':_0x56bc76});_0x3b2de1['push'](_0x3aaf5d),_0x35cc['markers']['set']('revision:'+_0x3aaf5d['id'],_0x16b160);}function _0x32f359(_0x22836d,_0x52fe5c){const _0x446368=_0x22836d['getAttributes'](),_0x7e5ad1=_0x52fe5c['getAttributes']();for(const _0x307e1a of _0x446368){if(_0x307e1a[0x1]!==_0x52fe5c['getAttribute'](_0x307e1a[0x0]))return!0x1;_0x7e5ad1['next']();}return _0x7e5ad1['next']()['done'];}}['_setConversion'](){this['editor']['conversion']['for']('upcast')['dataToMarker']({'view':'revision'}),this['editor']['conversion']['for']('editingDowncast')['markerToHighlight']({'model':'revision','view':_0x4bb57f=>{const _0x285324=_0x4bb57f['markerName']['split'](':')[0x1],_0x4c279d=this['_getChangeFromId'](_0x285324);if(!_0x4c279d)return null;const _0x1489f7='add'==_0x4c279d['type']?'insertion':'deletion',_0x3b6923=['ck-suggestion-marker','ck-suggestion-marker-'+_0x1489f7];return _0x4c279d['data']['isSuggestion']&&_0x3b6923['push']('ck-suggestion-marker-'+_0x1489f7+'-new'),this['activeChange']==_0x4c279d&&_0x3b6923['push']('ck-suggestion-marker--active'),{'classes':_0x3b6923,'attributes':{'data-change-id':_0x285324}};}}),this['editor']['conversion']['for']('upcast')['add'](_0x839f06=>{_0x839f06['on']('element:pre',(_0x19cd80,_0x248f30,_0x2ed5b9)=>{const _0x5ec378=_0x248f30['viewItem']['getChild'](0x0);if(!_0x5ec378||!_0x5ec378['is']('element','code'))return;if(!_0x2ed5b9['consumable']['consume'](_0x5ec378,{'attributes':['vid_start','vid_end']}))return;const _0x1be48e=_0x248f30['modelRange']['start']['nodeAfter'];_0x2ed5b9['writer']['setAttribute']('vid_start',_0x5ec378['getAttribute']('vid_start'),_0x1be48e),_0x2ed5b9['writer']['setAttribute']('vid_end',_0x5ec378['getAttribute']('vid_end'),_0x1be48e);},{'priority':'low'});}),this['editor']['conversion']['for']('upcast')['add'](_0x192b9b=>{_0x192b9b['on']('element',(_0x21c59f,_0x3332ee,_0x1605fd)=>{if(!_0x1605fd['consumable']['consume'](_0x3332ee['viewItem'],{'attributes':['vid_start','vid_end']}))return;if(_0x3332ee['modelRange']['isCollapsed'])return;const _0x233935=_0x3332ee['modelRange']['start']['nodeAfter'];_0x233935['hasAttribute']('vid_start')||_0x233935['hasAttribute']('vid')||(_0x1605fd['writer']['setAttribute']('vid_start',_0x3332ee['viewItem']['getAttribute']('vid_start'),_0x233935),_0x1605fd['writer']['setAttribute']('vid_end',_0x3332ee['viewItem']['getAttribute']('vid_end'),_0x233935));},{'priority':'low'});}),this['editor']['conversion']['for']('upcast')['elementToAttribute']({'view':{'name':'span','attributes':{'vid':!0x0}},'model':{'key':'vid','value':_0x3c874b=>_0x3c874b['getAttribute']('vid')}}),this['editor']['model']['schema']['on']('checkAttribute',(_0x348bd1,[,_0x2aca82])=>{['vid_start','vid_end','vid']['includes'](_0x2aca82)&&(_0x348bd1['return']=!0x0,_0x348bd1['stop']());},{'priority':'highest'}),this['editor']['conversion']['for']('dataDowncast')['add'](_0x1b01dd=>{_0x1b01dd['on']('attribute:vid',(_0x4a42b4,_0xf2b8cb,_0x349d5e)=>{if('\x20'!=_0xf2b8cb['item']['data']||_0xf2b8cb['item']['parent']['maxOffset']>0x1)return;if(!_0x349d5e['consumable']['consume'](_0xf2b8cb['item'],_0x4a42b4['name']))return;const _0x25ecfd=_0x349d5e['writer'],_0x364311=_0x349d5e['mapper']['toViewRange'](_0xf2b8cb['range']);_0x25ecfd['wrap'](_0x364311,_0x25ecfd['createAttributeElement']('span'));});}),this['editor']['conversion']['for']('dataDowncast')['markerToData']({'model':'revision'}),this['editor']['editing']['downcastDispatcher']['on']('addMarker:revision',function(_0xcadd60){const _0x492e07=_0xcadd60['plugins']['get']('RevisionViewer');return(_0x50ae23,_0x99f436,_0x17b50b)=>{const _0x3f80cb=_0x99f436['markerName']['split'](':')[0x1],_0x1b4886=_0x492e07['_getChangeFromId'](_0x3f80cb);if(!_0x1b4886)return null;const _0x48cc37='add'==_0x1b4886['type']?'split':'merge';if(!_0x17b50b['consumable']['test'](_0x99f436['markerRange'],_0x50ae23['name']))return;const _0x3e9704=_0x99f436['markerRange']['getWalker'](),_0xbef754=_0x99f436['markerRange']['start'],_0x4d38a5=_0xcadd60['model']['schema'];let _0x2fe0df=null,_0x272aef=null,_0x26ce0d=!0x1,_0x123de7=!0x1;for(const _0x25e104 of _0x3e9704){const _0x597e21=_0x25e104['item'];_0x26ce0d=_0x26ce0d||_0x4d38a5['isContent'](_0x597e21);const _0x58e2c1=_0x17b50b['mapper']['toViewElement'](_0x597e21);if(_0x58e2c1&&_0x58e2c1['getCustomProperty']('addHighlight'))return;'elementEnd'==_0x25e104['type']&&(_0x4d38a5['isBlock'](_0x597e21)&&!_0x4d38a5['isLimit'](_0x597e21)&&(_0x597e21['nextSibling']||_0xbef754['isAtEnd']?_0x2fe0df&&_0x2fe0df['parent']==_0x597e21||(_0x2fe0df=_0x597e21,_0x5aed66(_0x25e104['previousPosition']),_0x123de7=!0x0):_0x272aef=_0x272aef||_0x25e104['previousPosition']));}function _0x5aed66(_0x4f7f50){const _0x216d96=_0x17b50b['writer']['createUIElement']('span',{'class':'ck-suggestion-marker-'+_0x48cc37}),_0x1d838d=_0x17b50b['mapper']['toViewPosition'](_0x4f7f50);_0x1b4886['data']['isSuggestion']&&_0x17b50b['writer']['addClass']('ck-suggestion-marker-'+_0x48cc37+'-new',_0x216d96),_0x492e07['activeChange']==_0x1b4886&&_0x17b50b['writer']['addClass']('ck-suggestion-marker--active',_0x216d96),_0x17b50b['writer']['insert'](_0x1d838d,_0x216d96),_0x17b50b['mapper']['bindElementToMarker'](_0x216d96,_0x99f436['markerName']);}_0x26ce0d||_0x123de7||!_0x272aef||_0x5aed66(_0x272aef);};}(this['editor']),{'priority':'high'}),this['editor']['editing']['downcastDispatcher']['on']('removeMarker:revision',(_0x230adc,_0x456cce,_0x4d4cd8)=>{const _0x5cbb22=_0x4d4cd8['mapper']['markerNameToElements'](_0x456cce['markerName']);if(_0x5cbb22){for(const _0x1d201c of _0x5cbb22)(_0x1d201c['hasClass']('ck-suggestion-marker-split')||_0x1d201c['hasClass']('ck-suggestion-marker-merge'))&&(_0x4d4cd8['mapper']['unbindElementFromMarkerName'](_0x1d201c,_0x456cce['markerName']),_0x4d4cd8['writer']['remove'](_0x1d201c));}},{'priority':'high'}),this['editor']['editing']['downcastDispatcher']['on']('addMarker:revision',(_0x13a54f,_0x65904b,_0x332587)=>{const _0x4f0935=_0x65904b['markerName']['split'](':')[0x1],_0x2dbde9=this['_getChangeFromId'](_0x4f0935);if(!_0x2dbde9)return null;const _0x2e40e7='add'==_0x2dbde9['type']?'split':'merge';if(_0x332587['consumable']['test'](_0x65904b['markerRange'],_0x13a54f['name']))for(const _0x242159 of _0x65904b['markerRange']['getItems']()){if(!_0x242159['is']('element','softBreak'))continue;const _0xfa3181=_0x332587['writer']['createUIElement']('span',{'class':'ck-suggestion-marker-'+_0x2e40e7}),_0x47f36b=_0x332587['mapper']['toViewPosition'](this['editor']['model']['createPositionBefore'](_0x242159));_0x2dbde9['data']['isSuggestion']&&_0x332587['writer']['addClass']('ck-suggestion-marker-'+_0x2e40e7+'-new',_0xfa3181),this['activeChange']==_0x2dbde9&&_0x332587['writer']['addClass']('ck-suggestion-marker--active',_0xfa3181),_0x332587['writer']['insert'](_0x47f36b,_0xfa3181),_0x332587['mapper']['bindElementToMarker'](_0xfa3181,_0x65904b['markerName']);}},{'priority':'high'}),this['editor']['model']['document']['on']('change',()=>{this['editor']['editing']['view']['change'](_0x37f007=>{for(const _0x56a966 of this['editor']['model']['document']['getRootNames']()){const _0x39f51e=this['editor']['model']['document']['getRoot'](_0x56a966),_0x571a88=this['editor']['editing']['view']['document']['getRoot'](_0x56a966);if(_0x571a88){const _0xda7d20=_0x39f51e['getAttribute']('revisionHistoryAttachChange');if(_0x37f007['removeAttribute']('data-change-id',_0x571a88),_0x37f007['removeClass']('ck-revision-history-root-add',_0x571a88),_0x37f007['removeClass']('ck-revision-history-root-remove',_0x571a88),_0x37f007['removeClass']('ck-revision-history-root--active',_0x571a88),_0xda7d20){const _0x52c8cd=this['_getChangeFromId'](_0xda7d20);if(!_0x52c8cd)return null;_0x37f007['setAttribute']('data-change-id',_0xda7d20,_0x571a88),_0x37f007['addClass']('ck-revision-history-root-'+_0x52c8cd['type'],_0x571a88),this['activeChange']==_0x52c8cd&&_0x37f007['addClass']('ck-revision-history-root--active',_0x571a88);}}}});}),this['editor']['conversion']['for']('upcast')['dataToMarker']({'view':'comment','model':_0x2d4237=>'revision-comment:'+_0x2d4237,'converterPriority':'highest'}),this['editor']['conversion']['for']('upcast')['dataToMarker']({'view':'suggestion','model':_0x3c3313=>'revision-suggestion:'+_0x3c3313,'converterPriority':'highest'}),this['editor']['conversion']['for']('dataDowncast')['markerToData']({'model':'revision-suggestion','view':_0x6e9d59=>({'name':'suggestion:'+_0x6e9d59,'group':'revision-suggestion'}),'converterPriority':'highest'}),this['editor']['conversion']['for']('editingDowncast')['markerToHighlight']({'model':'revision-suggestion','view':_0x46c53d=>{const _0x54efb6=_0x46c53d['markerName']['split'](':')[0x1];return'insertion'!=_0x54efb6&&'deletion'!=_0x54efb6?null:{'classes':['ck-suggestion-preview-marker','ck-suggestion-preview-marker-'+_0x54efb6]};}}),this['editor']['editing']['downcastDispatcher']['on']('addMarker:revision-suggestion:deletion',tt(this['editor'],'merge'),{'priority':'high'}),this['editor']['editing']['downcastDispatcher']['on']('addMarker:revision-suggestion:insertion',tt(this['editor'],'split'),{'priority':'high'}),this['editor']['editing']['downcastDispatcher']['on']('removeMarker:revision-suggestion',(_0x3ecef9,_0x58d036,_0x18bc01)=>{const _0x558ffa=_0x18bc01['mapper']['markerNameToElements'](_0x58d036['markerName']);if(_0x558ffa){for(const _0x3ffb02 of _0x558ffa)_0x3ffb02['is']('uiElement')&&(_0x18bc01['mapper']['unbindElementFromMarkerName'](_0x3ffb02,_0x58d036['markerName']),_0x18bc01['writer']['remove'](_0x3ffb02));}},{'priority':'high'});}['_getChangeFromId'](_0x260470){return this['_changeIdToChange']['get'](_0x260470);}['_getViewForChange'](_0x200ffe){return this['_changeView']&&this['_changeView']['destroy'](),this['_changeView']=new Y(this['editor']['locale'],_0x200ffe),this['_changeView'];}['_initInteractions'](){this['editor']['model']['document']['selection']['observeMarkers']('revision'),this['on']('change:activeView',(_0x246c28,_0x5948a0,_0x154a83,_0x49a221)=>{_0x49a221&&this['_balloon']['remove'](_0x49a221),_0x154a83&&(this['_balloon']['add']({'view':_0x154a83,'stackId':'revisionHistoryLabel','position':{'target':()=>{const _0x9b398e=this['editor']['editing'],_0x3539e9=this['_getChangeFromId'](_0x154a83['changeId']);let _0x116095;if(_0x3539e9['data']['isOnRoot']){const _0x2efd03=_0x9b398e['view']['getDomRoot'](_0x3539e9['rootName']);_0x116095=Array['from'](_0x2efd03['getClientRects']());}else{const _0xd7515d=this['editor']['model']['markers']['get']('revision:'+_0x154a83['changeId']);_0x116095=Array['from'](_0x9b398e['mapper']['markerNameToElements'](_0xd7515d['name']))['map'](_0x42340f=>_0x9b398e['view']['domConverter']['mapViewToDom'](_0x42340f))['map'](_0x38b5a2=>Array['from'](_0x38b5a2['getClientRects']()))['flat']();}if(!this['_activeViewTarget'])return _0x116095[0x0];return _0x116095['find'](_0x7b0e2b=>_0x7b0e2b['top']-0x3<=this['_activeViewTarget']['y']&&_0x7b0e2b['bottom']+0x3>=this['_activeViewTarget']['y']&&_0x7b0e2b['left']-0x3<=this['_activeViewTarget']['x']&&_0x7b0e2b['right']+0x3>=this['_activeViewTarget']['x'])||_0x116095[0x0];}}}),this['_balloon']['showStack']('revisionHistoryLabel'));}),this['on']('change:activeChange',(_0x1e1486,_0x3a1a31,_0x594c0d,_0x3567ed)=>{this['activeView']=_0x594c0d?this['_getViewForChange'](_0x594c0d):null,this['editor']['model']['change'](()=>{const _0x3056bb=this['editor']['editing'];_0x3567ed&&(_0x3567ed['data']['isOnRoot']?_0x3056bb['view']['change'](_0x504817=>{_0x504817['removeClass']('ck-revision-history-root--active',_0x3056bb['view']['document']['getRoot'](_0x3567ed['rootName']));}):_0x3056bb['reconvertMarker']('revision:'+_0x3567ed['id'])),_0x594c0d&&(_0x594c0d['data']['isOnRoot']?_0x3056bb['view']['change'](_0x34fe0f=>{_0x34fe0f['addClass']('ck-revision-history-root--active',_0x3056bb['view']['document']['getRoot'](_0x594c0d['rootName']));}):_0x3056bb['reconvertMarker']('revision:'+_0x594c0d['id']));});}),this['listenTo'](this['editor']['editing']['view']['document'],'mouseover',(_0x428df0,_0x433689)=>{if(this['activeChange'])return;const _0x1d9cad=this['_findChangeIdFromDomTarget'](_0x433689['target']),_0x4d2f7f=this['_changeIdToChange']['get'](_0x1d9cad);_0x4d2f7f?(this['_activeViewTarget']={'x':_0x433689['domEvent']['x'],'y':_0x433689['domEvent']['y']},this['activeView']=this['_getViewForChange'](_0x4d2f7f)):(this['_activeViewTarget']=null,this['activeView']=null);}),this['listenTo'](this['editor']['editing']['view']['document'],'mousedown',(_0x1b3042,_0x3338b5)=>{const _0x500b01=this['_findChangeIdFromDomTarget'](_0x3338b5['target']),_0x28034f=this['_changeIdToChange']['get'](_0x500b01);_0x28034f?(this['_activeViewTarget']={'x':_0x3338b5['domEvent']['x'],'y':_0x3338b5['domEvent']['y']},_0x28034f===this['activeChange']?this['_balloon']['updatePosition']():this['activeChange']=_0x28034f):(this['_activeViewTarget']=null,this['activeChange']=null);});}['_findChangeIdFromDomTarget'](_0x258cf2){do{const _0x2cf4f3=_0x258cf2['getAttribute']('data-change-id');if(_0x2cf4f3)return _0x2cf4f3;_0x258cf2=_0x258cf2['parent'];}while(_0x258cf2);return null;}['_cleanMarkers'](){this['editor']['model']['change'](_0x3c64ce=>{for(const _0x160bef of this['editor']['model']['markers'])_0x3c64ce['removeMarker'](_0x160bef);});}}function tt(_0x4b159b,_0x5f7f97){return(_0x6069f0,_0x46aa3e,_0x50a65c)=>{if(!_0x50a65c['consumable']['test'](_0x46aa3e['markerRange'],_0x6069f0['name']))return;const _0xbf63ba=_0x46aa3e['markerRange']['getWalker'](),_0x1417cf=_0x46aa3e['markerRange']['start'],_0x29fe85=_0x4b159b['model']['schema'];let _0x303cfa=null,_0x56464b=null,_0xe39385=!0x1,_0x143aa1=!0x1;for(const _0x56c641 of _0xbf63ba){const _0x3b7ea2=_0x56c641['item'];_0xe39385=_0xe39385||_0x29fe85['isContent'](_0x3b7ea2);const _0x12ebe7=_0x50a65c['mapper']['toViewElement'](_0x3b7ea2);if(_0x12ebe7&&_0x12ebe7['getCustomProperty']('addHighlight'))return;'elementEnd'==_0x56c641['type']&&(_0x29fe85['isBlock'](_0x3b7ea2)&&!_0x29fe85['isLimit'](_0x3b7ea2)&&(_0x3b7ea2['nextSibling']||_0x1417cf['isAtEnd']?_0x303cfa&&_0x303cfa['parent']==_0x3b7ea2||(_0x303cfa=_0x3b7ea2,_0x581e66(_0x56c641['previousPosition']),_0x143aa1=!0x0):_0x56464b=_0x56464b||_0x56c641['previousPosition']));}function _0x581e66(_0x1900ec){const _0x7a670b=_0x50a65c['mapper']['toViewPosition'](_0x1900ec),_0x6ed9e=_0x50a65c['writer']['createUIElement']('span',{'class':'ck-suggestion-preview-marker-'+_0x5f7f97});_0x50a65c['writer']['insert'](_0x7a670b,_0x6ed9e),_0x50a65c['mapper']['bindElementToMarker'](_0x6ed9e,_0x46aa3e['markerName']);}_0xe39385||_0x143aa1||!_0x56464b||_0x581e66(_0x56464b);};}class yt extends _0x44b3d7{constructor(_0x548af2){super(_0x548af2);const _0xb6f8ab=_0x548af2['plugins']['get'](d);this['affectsData']=!0x1,this['listenTo'](_0xb6f8ab,'change:isReady',()=>this['refresh']()),this['listenTo'](_0xb6f8ab,'change:isEnabled',()=>this['refresh']());}['execute'](){const _0x29004d=this['editor'],_0x10a7b5=_0x29004d['plugins']['get'](d),_0x56a8a4=_0x10a7b5['isReady']?_0x10a7b5['diff']['newRevisionId']:null;_0x29004d['config']['get']('revisionHistory')['restoreRevisionCallback'](_0x56a8a4);}['refresh'](){const {isReady:_0x1337ca,isEnabled:_0x3666fc,repository:_0x4707fb,diff:_0x213fbf}=this['editor']['plugins']['get'](d),_0x1fbc08=_0x213fbf&&_0x4707fb['getLaterVisibleRevision'](_0x213fbf['newRevisionId']);this['isEnabled']=_0x1337ca&&_0x3666fc&&Boolean(_0x1fbc08);}}class bt extends _0x44b3d7{['_step'];constructor(_0x3578d3,{direction:_0x14295b}){super(_0x3578d3);const _0x3d8115=_0x3578d3['plugins']['get'](d);this['affectsData']=!0x1,this['_step']='forward'===_0x14295b?0x1:-0x1,this['listenTo'](_0x3d8115,'change:isReady',()=>this['refresh']()),this['listenTo'](_0x3d8115,'change:isEnabled',()=>this['refresh']()),this['listenTo'](_0x3d8115,'change:activeChange',()=>this['refresh']());}['execute'](){const _0x1ef02f=this['editor'],_0x4fc7b7=_0x1ef02f['plugins']['get'](d),{isNavigationMode:_0x273d85,currentChangeNumber:_0x41b46d}=_0x4fc7b7;let _0x56eeae;if(_0x4fc7b7['activeChange']=_0x273d85?_0x4fc7b7['diff']['changes']['get'](_0x41b46d+this['_step']):_0x4fc7b7['diff']['changes']['first'],_0x4fc7b7['activeChange']['data']['isOnRoot'])_0x56eeae=_0x1ef02f['editing']['view']['getDomRoot'](_0x4fc7b7['activeChange']['rootName']);else{const _0x252504=_0x1ef02f['model']['markers']['get']('revision:'+_0x4fc7b7['activeChange']['id']);_0x56eeae=_0x1273b4(_0x1ef02f['editing'],_0x252504);}_0x5b6918({'target':_0x56eeae,'viewportOffset':0x28});}['refresh'](){const {isNavigationMode:_0x20de7a,currentChangeNumber:_0x66198c,numberOfChanges:_0x59257e,isReady:_0x4b2405,isEnabled:_0x72d05}=this['editor']['plugins']['get'](d);this['isEnabled']=!!(_0x72d05&&_0x4b2405&&_0x59257e)&&(!_0x20de7a||(0x1===this['_step']?_0x66198c<_0x59257e-0x1:_0x66198c>0x0));}}class _i extends _0x56ed61{constructor(_0x28d793){super(_0x28d793);const _0x30a45a=this['bindTemplate'],_0x20b03d=new _0x1f2e21(_0x28d793),_0x1faba8=new _0x1f2e21(_0x28d793);this['set']('isNavigationMode',!0x1),this['set']('isReady',!0x1),this['set']('currentChangeNumber',0x0),this['set']('numberOfChanges',0x0),this['set']('isForwardNavigationEnabled',!0x1),this['set']('isBackwardNavigationEnabled',!0x1),this['bind']('_isStatusLabelVisible')['to'](this,'isReady',this,'numberOfChanges',(_0x565d5b,_0x4e4895)=>_0x565d5b&&_0x4e4895>0x0),this['bind']('_statusText')['to'](this,'isReady',this,'currentChangeNumber',this,'numberOfChanges',this,'isNavigationMode',(_0xee9b1e,_0x5b07a3,_0x2e2871,_0x4f6f32)=>{if(!_0xee9b1e)return R(_0x28d793,'Loading...');if(!_0x2e2871)return R(_0x28d793,'No\x20changes');const _0x423694=R(_0x28d793,'NUMBER_OF_CHANGES',_0x2e2871);return _0x4f6f32?R(_0x28d793,'X_OF_Y_CHANGES',[_0x5b07a3+0x1,_0x2e2871]):_0x423694;}),_0x20b03d['set']({'label':R(_0x28d793,'Show\x20previous\x20change'),'tooltip':!0x0,'icon':'<svg\x20viewBox=\x220\x200\x2020\x2020\x22\x20xmlns=\x22http://www.w3.org/2000/svg\x22><path\x20d=\x22M16.435\x2014.494a.75.75\x200\x200\x200\x201.197-.899l-.067-.089-6.992-8a.75.75\x200\x200\x200-1.05-.078l-.079.078-7.008\x208a.75.75\x200\x200\x200\x201.049\x201.066l.08-.078\x206.442-7.354\x206.428\x207.354z\x22/></svg>\x0a'}),_0x1faba8['set']({'label':R(_0x28d793,'Show\x20next\x20change'),'tooltip':!0x0,'icon':'<svg\x20viewBox=\x220\x200\x2020\x2020\x22\x20xmlns=\x22http://www.w3.org/2000/svg\x22><path\x20d=\x22M16.435\x205.506a.75.75\x200\x200\x201\x201.197.899l-.067.089-6.992\x208a.75.75\x200\x200\x201-1.05.078l-.079-.078-7.008-8a.75.75\x200\x200\x201\x201.049-1.066l.08.078\x206.442\x207.354\x206.428-7.354z\x22/></svg>\x0a'}),_0x20b03d['bind']('isEnabled')['to'](this,'isBackwardNavigationEnabled'),_0x1faba8['bind']('isEnabled')['to'](this,'isForwardNavigationEnabled'),_0x20b03d['on']('execute',()=>this['fire']('execute','backward')),_0x1faba8['on']('execute',()=>this['fire']('execute','forward')),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-revision-history-ui','ck-revision-history-ui__changes-navigation']},'children':[{'tag':'span','attributes':{'class':['ck-revision-history-ui__changes-navigation__wrapper']},'children':[{'tag':'span','attributes':{'class':['ck-revision-history-ui__changes-navigation__label',_0x30a45a['if']('_isStatusLabelVisible','ck-hidden',_0x6ab686=>!_0x6ab686)]},'children':[{'text':_0x30a45a['to']('isNavigationMode',_0x216478=>_0x216478?R(_0x28d793,'EDIT_X_OF_Y_REVISIONS')+':\x20':R(_0x28d793,'Total')+':\x20')}]},{'text':_0x30a45a['to']('_statusText')}]},new _0x522ed2(),{'tag':'div','attributes':{'class':['ck-revision-history-ui__changes-navigation__navigation']},'children':[_0x20b03d,_0x1faba8]}]});}}const ce='ck-editor__editable__loading-overlay';class le extends _0x404964{static get['pluginName'](){return'RevisionViewerLoadingOverlay';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}['show'](){const _0x20dd4a=this['editor']['editing']['view'];_0x20dd4a['change'](_0x34caf9=>{for(const _0x49891d of _0x20dd4a['document']['roots'])_0x34caf9['addClass'](ce,_0x49891d);});}['hide'](){const _0x452d31=this['editor']['editing']['view'];_0x452d31['change'](_0x32fa36=>{for(const _0x1b30d1 of _0x452d31['document']['roots'])_0x32fa36['removeClass'](ce,_0x1b30d1);});}}class m extends _0x404964{static get['pluginName'](){return'RevisionViewerUI';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}static get['requires'](){return[d,le];}['init'](){const _0x38ae8c=this['editor'],_0x544866=_0x38ae8c['plugins']['get'](d),_0x20ae7b=_0x38ae8c['plugins']['get'](le);_0x38ae8c['ui']['componentFactory']['add']('exitToEditing',_0x178c4f=>{const _0x4f7025=new _0x1f2e21(_0x178c4f);return _0x4f7025['set']({'label':R(_0x178c4f,'Back\x20to\x20editing'),'icon':_0x1ba338['undo'],'withText':!0x0,'tooltip':!0x0,'class':'ck-revision-history-ui__back-to-editing'}),this['listenTo'](_0x4f7025,'execute',()=>{_0x38ae8c['config']['get']('revisionHistory')['closeRevisionViewerCallback']();}),_0x4f7025;}),_0x38ae8c['ui']['componentFactory']['add']('restoreRevision',_0x401050=>{const _0x257b9b=new _0x1f2e21(_0x401050);return _0x257b9b['set']({'label':R(_0x401050,'Restore\x20this\x20revision'),'withText':!0x0,'tooltip':!0x0}),_0x257b9b['bind']('isEnabled')['to'](_0x38ae8c['commands']['get']('restoreRevision')),this['listenTo'](_0x257b9b,'execute',()=>_0x38ae8c['execute']('restoreRevision')),_0x257b9b;}),_0x38ae8c['ui']['componentFactory']['add']('changesNavigation',_0x4f2859=>{const _0xf480e3=new _i(_0x4f2859),_0x2f4c99=_0x38ae8c['commands']['get']('showPreviousChange'),_0x249ed9=_0x38ae8c['commands']['get']('showNextChange');return _0xf480e3['bind']('isBackwardNavigationEnabled')['to'](_0x2f4c99,'isEnabled'),_0xf480e3['bind']('isForwardNavigationEnabled')['to'](_0x249ed9,'isEnabled'),_0xf480e3['bind']('isReady','currentChangeNumber','numberOfChanges','isNavigationMode')['to'](_0x544866),this['listenTo'](_0xf480e3,'execute',(_0x3e9c87,_0x26d280)=>{_0x38ae8c['execute']('forward'===_0x26d280?'showNextChange':'showPreviousChange');}),_0xf480e3;}),_0x20ae7b['show'](),_0x544866['on']('change:isReady',(_0xc2317d,_0x5b0635,_0x5137ec)=>{_0x5137ec?_0x20ae7b['hide']():_0x20ae7b['show']();});}}class mt extends at{['_resizeObserver']=null;constructor(_0x62ed64,_0xfbe02e){super(_0x62ed64,_0xfbe02e);const _0x559d92=this['bindTemplate'];this['set']({'label':R(_0x62ed64,'Revision\x20name'),'_tooltipString':''}),this['fieldView']['placeholder']=R(_0x62ed64,'Enter\x20the\x20revision\x20name'),this['extendTemplate']({'tag':'span','attributes':{'class':['ck-revision-history-sidebar__revision-name'],'data-cke-tooltip-text':_0x559d92['to']('_tooltipString'),'data-cke-tooltip-position':'s','data-cke-tooltip-class':'ck-tooltip_multi-line'}});}['render'](){super['render'](),this['_resizeObserver']=new pt(this['fieldView']['element'],()=>this['_updateTooltipText']()),this['listenTo'](this['fieldView'],'input',()=>this['_updateTooltipText']());}['destroy'](){super['destroy'](),this['_resizeObserver']&&this['_resizeObserver']['destroy']();}['_updateTooltipText'](){const _0x56e32f=this['fieldView']['element'];this['_tooltipString']=_0x56e32f['scrollWidth']>_0x56e32f['clientWidth']&&_0x56e32f['value']||'';}}class ti extends _0x56ed61{constructor(_0x44e3d2,_0x1c8896,_0x5ba0d3){super(_0x44e3d2);const _0x5886ed=new _0x3902ae();_0x5886ed['set']({'content':'<svg\x20viewBox=\x220\x200\x2011\x2010\x22\x20xmlns=\x22http://www.w3.org/2000/svg\x22\x20xmlns:xlink=\x22http://www.w3.org/1999/xlink\x22><path\x20d=\x22M5.5\x205C8.538\x205\x2011\x207.015\x2011\x209.5c0\x20.17-.011.336-.034.5H.034A3.732\x203.732\x200\x200\x201\x200\x209.5C0\x207.015\x202.462\x205\x205.5\x205zm0-5a2.5\x202.5\x200\x201\x201\x200\x205\x202.5\x202.5\x200\x200\x201\x200-5z\x22\x20/></svg>\x0a','viewBox':'0\x200\x2011\x2010'});const _0x39a469=['ck','ck-revision-history-sidebar__revision-author'];_0x5ba0d3&&_0x39a469['push']('ck-revision-history-sidebar__revision-author_creator');const _0xf55c4f=[{'tag':'span','attributes':{'class':['ck','ck-revision-history-sidebar__revision-author__name'],'title':R(_0x44e3d2,_0x5ba0d3?'Revision\x20creator':'Revision\x20author')},'children':[_0x5886ed,_0x1c8896['name']]}];this['setTemplate']({'tag':'li','attributes':{'class':_0x39a469},'children':_0xf55c4f});}}function ni(_0x3663ac,_0x3bb52b){const _0x53234b=_0x3663ac['bindTemplate'],_0xc5fec4=_0x3663ac['locale'],_0x35bf0b=_0x489218(_0xc5fec4);_0x35bf0b['panelPosition']='sw';const _0x3aa92d=function(_0xdf217c,_0xf0d495){const _0x298629=function(_0x31a951,_0x993587){const _0x30a4af=_0x31a951['locale'],_0x59e41f={'Compare\x20against\x20selected':R(_0x30a4af,'Compare\x20against\x20selected'),'Name\x20this\x20revision':R(_0x30a4af,'Name\x20this\x20revision'),'Restore\x20this\x20revision':R(_0x30a4af,'Restore\x20this\x20revision')};return _0x993587['map'](_0x2e6652=>{const _0x12d757=_0x59e41f[_0x2e6652['name']];return _0x12d757&&_0x12d757!==_0x2e6652['name']&&(_0x2e6652['name']=_0x12d757),_0x2e6652;});}(_0xdf217c,_0xf0d495),_0x3936b6=new _0x337623();for(const _0x33ef1c of _0x298629){const _0x463744={'type':'button','model':new to({'label':_0x33ef1c['name'],'class':_0x33ef1c['class'],'withText':!0x0,'role':'menuitem','_action':_0x33ef1c['action']})};_0x463744['model']['bind']('isEnabled')['to'](_0xdf217c,'isActionsDropdownOpen',_0x344afa=>'function'!=typeof _0x33ef1c['isEnabled']||(!_0x344afa||_0x33ef1c['isEnabled'](_0xdf217c))),_0x3936b6['add'](_0x463744);}return _0x3936b6;}(_0x3663ac,_0x3bb52b);return _0x3663ac['bind']('isActionsDropdownOpen')['to'](_0x35bf0b,'isOpen'),_0x35bf0b['buttonView']['set']({'label':R(_0xc5fec4,'Show\x20more\x20items'),'tooltip':!0x0,'tooltipPosition':'sw','icon':_0x1ba338['threeVerticalDots']}),_0x35bf0b['extendTemplate']({'attributes':{'class':['ck-revision-history-sidebar__revision__actions',_0x53234b['if']('isActionsDropdownOpen','ck-on')]},'on':{'click':_0x53234b['to'](_0x225036=>_0x225036['stopPropagation']())}}),_0x35bf0b['on']('execute',_0x5ef1df=>{_0x3663ac['isReady']&&'function'==typeof _0x5ef1df['source']['_action']&&_0x5ef1df['source']['_action'](_0x3663ac);}),_0x44efb3(_0x35bf0b,_0x3aa92d,{'role':'menu'}),_0x35bf0b['listenTo'](_0x3663ac,'change:isActionsDropdownOpen',(_0x5ea216,_0x27deb5,_0x480e7a)=>{if(_0x480e7a)for(const _0x1f844a of _0x35bf0b['listView']['items']){const _0x4aafb0=_0x1f844a['children']['first'],_0x2c09c0=_0x3bb52b['find'](_0x55445d=>_0x55445d['action']===_0x4aafb0['_action'])['isVisible'];_0x1f844a['isVisible']=void 0x0===_0x2c09c0||_0x2c09c0(_0x3663ac);}}),_0x35bf0b;}class ai extends/* #__PURE__ -- @preserve */
_0x54f352(_0x56ed61){['id'];['revisionNameView'];['revisionActionsView'];['_revision'];['_requireRevisionName'];constructor(_0x1c93e2,_0x572295,_0xb19217,_0x32a878){super(_0x1c93e2);const _0x1c82fb=this['bindTemplate'],_0x5b3652=function(_0x415d1c,_0x24b30f){const _0x2d07cf=Array['from'](_0x24b30f['authors'])['filter'](_0x241cb2=>_0x241cb2!=_0x24b30f['creator']);return _0x24b30f['creator']&&_0x2d07cf['unshift'](_0x24b30f['creator']),_0x2d07cf['map'](_0x106d50=>new ti(_0x415d1c,_0x106d50,_0x106d50==_0x24b30f['creator']));}(_0x1c93e2,_0x572295);this['id']=_0x572295['id'],this['_revision']=_0x572295,this['_requireRevisionName']=_0x32a878,this['bind']('name','createdAt')['to'](_0x572295),this['bind']('_createdAtFormatted')['to'](this,'createdAt',_0x4c6d16=>{return _0x13c62e=_0x1c93e2['uiLanguage'],(_0x441127=_0x4c6d16)['toLocaleDateString'](_0x13c62e,{'month':'long','day':'numeric'})+',\x20'+_0x441127['toLocaleTimeString'](_0x13c62e,{'hour':'numeric','minute':'numeric'});var _0x13c62e,_0x441127;}),this['set']('isSelected',!0x1),this['set']('isHighlighted',!0x1),this['set']('isActionsDropdownOpen',!0x1),this['set']('isReady',!0x1),this['set']('isEnabled',!0x1),this['revisionNameView']=new mt(_0x1c93e2,_0x1ea161),this['revisionNameView']['fieldView']['extendTemplate']({'attributes':{'maxlength':'220'}}),this['revisionNameView']['fieldView']['bind']('value')['to'](this,'name',_0x87a90=>_0x87a90||this['_createdAtFormatted']),this['revisionNameView']['bind']('isEnabled')['to'](this,'isSelected',this,'isEnabled',(_0xf27faf,_0x3e1aa8)=>_0xf27faf&&_0x3e1aa8),this['revisionActionsView']=_0xb19217&&_0xb19217['length']?ni(this,_0xb19217):'',this['revisionActionsView']&&this['revisionActionsView']['bind']('isEnabled')['to'](this),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-reset','ck-revision-history-sidebar__revision-wrapper',_0x1c82fb['if']('isConfirm','ck-revision-history-sidebar__revision-wrapper_confirmation_visible')]},'children':[{'tag':'div','attributes':{'class':['ck','ck-reset','ck-revision-history-sidebar__revision',_0x1c82fb['if']('isEnabled','ck-disabled',_0x34d59b=>!_0x34d59b),_0x1c82fb['if']('isSelected','ck-revision-history-sidebar__revision_selected'),_0x1c82fb['if']('isHighlighted','ck-revision-history-sidebar__revision_highlighted'),_0x1c82fb['if']('isActionsDropdownOpen','ck-revision-history-sidebar__actions_dropdown_open')]},'children':[this['revisionNameView'],{'tag':'span','attributes':{'class':['ck','ck-revision-history-sidebar__revision__date']},'children':[{'text':_0x1c82fb['to']('_createdAtFormatted')}]},{'tag':'div','attributes':{'class':['ck','ck-revision-history-sidebar__revision__controls-wrapper']},'children':[{'tag':'ul','attributes':{'class':['ck','ck-revision-history-sidebar__revision-authors']},'children':_0x5b3652}]},this['revisionActionsView']],'on':{'click':_0x1c82fb['to'](_0x5e2d14=>{_0x5e2d14['srcElement']['closest']('.ck-thread__remove-confirm')||this['isReady']&&this['isEnabled']&&this['fire']('select',{'id':this['id']});})}}]});}['render'](){super['render']();const _0x579e13=this['revisionNameView']['fieldView']['element'];this['listenTo'](_0x579e13,'change',()=>{this['_requireRevisionName']&&!_0x579e13['value']||this['fire']('setName',{'id':this['id'],'name':_0x579e13['value']}),_0x579e13['value']||(_0x579e13['value']=this['name']?this['name']:this['_createdAtFormatted']);});}['select'](){this['isSelected']=!0x0;}['deselect'](){this['isSelected']=!0x1;}['highlight'](){this['isHighlighted']=!0x0;}['unhighlight'](){this['isHighlighted']=!0x1;}}function di(_0x39c42b,_0xc953c7){const _0xa83dfe=_0x2c28df['fromJSDate'](_0x39c42b)['setLocale'](_0xc953c7),_0x4ec333=_0x2c28df['local'](),_0x5630f5=_0x4ec333['minus']({'days':0x1})['startOf']('day');let _0x593049,_0x1a43bd;return _0xa83dfe['hasSame'](_0x4ec333,'day')?(_0x593049=_0xa83dfe['startOf']('day')['toJSDate'](),_0x1a43bd=_0xa83dfe['toRelativeCalendar']()):_0xa83dfe['hasSame'](_0x5630f5,'day')?(_0x593049=_0x5630f5['toJSDate'](),_0x1a43bd=_0xa83dfe['toRelativeCalendar']()):_0xa83dfe['hasSame'](_0x4ec333,'week')?(_0x593049=_0xa83dfe['startOf']('week')['toJSDate'](),_0x1a43bd=_0xa83dfe['weekdayLong']||''):_0xa83dfe['hasSame'](_0x4ec333,'year')?(_0x593049=_0xa83dfe['startOf']('month')['toJSDate'](),_0x1a43bd=_0xa83dfe['monthLong']||''):(_0x593049=_0xa83dfe['startOf']('year')['toJSDate'](),_0x1a43bd=String(_0xa83dfe['year'])),{'startDate':_0x593049,'localizedPeriodName':_0x1a43bd};}class mi extends _0x56ed61{['startDate'];['revisionViews'];['_revisionActions'];['_requireRevisionName'];constructor(_0x466e5d,_0x2b9ed2,_0x350541,_0x230060){super(_0x466e5d);const _0x458259=di(_0x2b9ed2,this['locale']['uiLanguage'])['localizedPeriodName'];this['startDate']=_0x2b9ed2,this['revisionViews']=this['createCollection'](),this['_revisionActions']=_0x350541,this['_requireRevisionName']=_0x230060,this['revisionViews']['delegate']('select')['to'](this),this['revisionViews']['delegate']('setName')['to'](this),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-revision-history-sidebar__time-period']},'children':[{'tag':'span','attributes':{'class':['ck','ck-revision-history-sidebar__time-period__label']},'children':[{'text':_0x458259}]},{'tag':'div','attributes':{'class':['ck','ck-revision-history-sidebar__time-period__revisions']},'children':this['revisionViews']}]});}['addRevision'](_0x1c30d4){const _0x313824=new ai(this['locale'],_0x1c30d4,this['_revisionActions'],this['_requireRevisionName']);this['revisionViews']['add'](_0x313824);}['removeRevision'](_0x377155){const _0x1fa8c4=this['revisionViews']['find'](_0x3de73f=>_0x3de73f['id']===_0x377155['id']);this['revisionViews']['remove'](_0x1fa8c4);}}class as extends _0x56ed61{constructor(_0x3fdf3d){super(_0x3fdf3d);const _0x2bd73e=new _0x3902ae();_0x2bd73e['content']=_0x1ba338['history'],this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-reset_all','ck-revision-history-sidebar__header']},'children':[_0x2bd73e,{'tag':'span','attributes':{'class':['ck','ck-revision-history-sidebar__header__label']},'children':[R(_0x3fdf3d,'Revision\x20history')]}]});}}class ci extends _0x56ed61{['timePeriodViews'];['_revisions'];['_revisionActions'];['_requireRevisionName'];constructor(_0x5e46ea,_0x3022de,_0x407dce,_0x44fc45){super(_0x5e46ea);const _0x310d58=this['bindTemplate'];this['timePeriodViews']=this['createCollection'](),this['timePeriodViews']['delegate']('select')['to'](this),this['timePeriodViews']['delegate']('setName')['to'](this),this['_revisions']=_0x3022de,this['_revisionActions']=_0x407dce,this['_requireRevisionName']=_0x44fc45,this['on']('select',(_0x57a34a,_0x25f528)=>{this['fire']('revisionSelected',_0x25f528);}),this['on']('setName',(_0x3f0637,_0x126ed2)=>{this['fire']('revisionSetName',_0x126ed2);}),this['set']('isEnabled',!0x1),this['setTemplate']({'tag':'div','attributes':{'class':['ck','ck-reset','ck-rounded-corners','ck-revision-history-sidebar']},'children':[new as(_0x5e46ea),{'tag':'div','attributes':{'class':['ck','ck-revision-history-sidebar__timeline',_0x310d58['if']('isEnabled','ck-disabled',_0x1462d6=>!_0x1462d6)]},'children':this['timePeriodViews']}]});}['render'](){super['render']();for(const _0x39bed2 of this['_revisions'])this['_addRevision'](_0x39bed2);this['_revisions']['on']('add',(_0x435539,_0x144332)=>{this['_addRevision'](_0x144332);}),this['_revisions']['on']('remove',(_0x19a85d,_0x24afab)=>{this['_removeRevision'](_0x24afab);});}get['revisionViews'](){return this['timePeriodViews']['map'](_0x369eca=>_0x369eca['revisionViews']['map'](_0x4f0002=>_0x4f0002))['flat']();}['selectRevision'](_0x1c0357){for(const _0x7aba1e of this['revisionViews'])_0x1c0357&&_0x1c0357['id']===_0x7aba1e['id']?_0x7aba1e['select']():_0x7aba1e['deselect']();}['highlightRevisions'](_0x50e1bb){for(const _0x316ea7 of this['revisionViews'])_0x50e1bb['some'](({id:_0x875d12})=>_0x875d12===_0x316ea7['id'])?_0x316ea7['highlight']():_0x316ea7['unhighlight']();}['_addRevision'](_0x1a47f6){const _0x1a220a=di(_0x1a47f6['createdAt'],this['locale']['uiLanguage'])['startDate'];let _0xf5a8c7=this['timePeriodViews']['get'](0x0);_0xf5a8c7&&_0xf5a8c7['startDate']['getTime']()===_0x1a220a['getTime']()||(_0xf5a8c7=new mi(this['locale'],_0x1a220a,this['_revisionActions'],this['_requireRevisionName']),this['timePeriodViews']['add'](_0xf5a8c7)),_0xf5a8c7['addRevision'](_0x1a47f6);}['_removeRevision'](_0x50cd91){const _0x15eeeb=di(_0x50cd91['createdAt'],this['locale']['uiLanguage'])['startDate'];this['_getTimePeriodViewByStartDate'](_0x15eeeb)['removeRevision'](_0x50cd91);}['_getTimePeriodViewByStartDate'](_0x1251f1){return this['timePeriodViews']['find'](_0x9b81db=>_0x9b81db['startDate']['getTime']()===_0x1251f1['getTime']());}}class g extends _0x404964{['_revisionViewer'];['_revisionsRepository'];['_sidebarView'];static ['defaultRevisionActions']=/* #__PURE__ -- @preserve */
((()=>['compareAgainstSelected','restoreRevision','nameRevision'])());static ['availableRevisionActions']=/* #__PURE__ -- @preserve */
Rt();static get['pluginName'](){return'RevisionsSidebar';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}static get['requires'](){return[d];}constructor(_0x47688a){super(_0x47688a),this['_revisionViewer']=_0x47688a['plugins']['get'](d),this['_revisionsRepository']=this['_revisionViewer']['repository'],this['_sidebarView']=null;}['init'](){const _0x58c9cc=this['_revisionsRepository']['_revisions'],_0x46b1cf=this['_createRevisionActions'](),_0x1efe95=this['editor']['config']['get']('revisionHistory.viewerSidebarContainer');this['_sidebarView']=new ci(this['editor']['locale'],_0x58c9cc,_0x46b1cf,this['editor']['config']['get']('revisionHistory.requireRevisionName')),this['_sidebarView']['on']('revisionSelected',this['_handleRevisionSelected']['bind'](this)),this['_sidebarView']['on']('revisionSetName',this['_handleRevisionSetName']['bind'](this)),this['_sidebarView']['bind']('isEnabled')['to'](this['_revisionViewer']),this['_sidebarView']['timePeriodViews']['on']('add',(_0x57f0e1,_0xf906c8)=>{_0xf906c8['revisionViews']['on']('add',(_0x18aad3,_0x47ba23)=>{_0x47ba23['bind']('isEnabled','isReady')['to'](this['_revisionViewer']);});}),this['_sidebarView']['render'](),this['listenTo'](this['editor']['data'],'ready',this['_handleEditorDataReady']['bind'](this)),this['listenTo'](this['_revisionViewer'],'change:diff',this['_handleDiffChange']['bind'](this)),_0x1efe95['appendChild'](this['_sidebarView']['element']);}['destroy'](){this['_sidebarView']['element']['remove'](),this['_sidebarView']['destroy']();}['_handleEditorDataReady'](){const _0x2cdc95=this['_revisionsRepository']['getRevision'](0x0);if(_0x2cdc95){const _0x2f9004=this['_revisionsRepository']['getEarlierVisibleRevision'](_0x2cdc95['id']);this['_revisionViewer']['compare'](_0x2cdc95,_0x2f9004);}}['_handleRevisionSelected'](_0x370a06,_0xc2dcb5){const _0x3e9664=this['_revisionsRepository']['getRevision'](_0xc2dcb5['id']),_0x398a15=this['_revisionsRepository']['getEarlierVisibleRevision'](_0x3e9664['id']);this['_revisionViewer']['compare'](_0x3e9664,_0x398a15);}['_handleRevisionSetName'](_0x650de2,_0x449f5){this['_revisionsRepository']['getRevision'](_0x449f5['id'])['setName'](_0x449f5['name']);}['_handleDiffChange'](_0x5ef799,_0x583b37,_0x5771bc){const _0x562ff4=this['_revisionsRepository']['getRevisionsInDiff'](_0x5771bc);_0x562ff4['length']>0x2?(this['_sidebarView']['highlightRevisions'](_0x562ff4),this['_sidebarView']['selectRevision'](null)):(this['_sidebarView']['highlightRevisions']([]),this['_sidebarView']['selectRevision'](_0x562ff4[0x0]));}['_createRevisionActions'](){const _0xc0b92c=this['editor'],_0x3840bb=g['availableRevisionActions'],_0xa1512b=_0xc0b92c['config']['get']('revisionHistory.revisionActions')||g['defaultRevisionActions'];if(_0xa1512b['length'])return _0xa1512b['map'](_0x29e17f=>{const _0x65fa1='string'==typeof _0x29e17f?Object['assign']({},_0x3840bb[_0x29e17f]):_0x29e17f;return _0x65fa1['action']=_0x65fa1['action']['bind'](this,_0xc0b92c),_0x65fa1['isVisible']&&(_0x65fa1['isVisible']=_0x65fa1['isVisible']['bind'](this,_0xc0b92c)),_0x65fa1;});}}function Rt(){return{'compareAgainstSelected':{'name':'Compare\x20against\x20selected','action':({plugins:_0x21c9cc},_0x304a63)=>{const _0x42cb07=_0x21c9cc['get'](d),_0xd178c1=_0x42cb07['repository'];let _0x34e9ce=_0x42cb07['diff']['newRevisionId'],_0x4b98e2=_0x304a63['id'];_0xd178c1['getIndex'](_0x34e9ce)>_0xd178c1['getIndex'](_0x4b98e2)&&([_0x34e9ce,_0x4b98e2]=[_0x4b98e2,_0x34e9ce]),_0x42cb07['compare'](_0x34e9ce,_0x4b98e2);},'isVisible':({plugins:_0x1af42e},_0x5d7098)=>{const _0x2298ef=_0x1af42e['get'](d);return!(_0x2298ef['repository']['getRevisionsInDiff'](_0x2298ef['diff'])['length']>0x2)&&!_0x5d7098['isSelected'];}},'restoreRevision':{'name':'Restore\x20this\x20revision','action':(_0x3b8b28,{id:_0x1372f4})=>{_0x3b8b28['config']['get']('revisionHistory')['restoreRevisionCallback'](_0x1372f4);},'isVisible':({plugins:_0x31d8b4},_0x5bb42e)=>!!_0x31d8b4['get'](d)['repository']['getLaterVisibleRevision'](_0x5bb42e['id'])},'nameRevision':{'name':'Name\x20this\x20revision','action':({plugins:_0x289f0c},{id:_0x5e4cfd,revisionNameView:_0x4796ae})=>{const _0x248f19=_0x289f0c['get'](d),_0x1930be=_0x248f19['repository']['getEarlierVisibleRevision'](_0x5e4cfd);_0x248f19['compare'](_0x5e4cfd,_0x1930be),_0x4796ae['focus'](),_0x4796ae['fieldView']['select']();}}};}class et extends ot{['_view'];['_toolbarConfig'];['_elementReplacer'];get['view'](){return this['_view'];}constructor(_0x20751b,_0x59731b){super(_0x20751b),this['_view']=_0x59731b,this['_toolbarConfig']=ht(_0x20751b['config']['get']('toolbar')),this['_elementReplacer']=new ct();}get['element'](){return this['view']['element'];}['init'](_0x142cf6){const _0x3f6f94=this['editor'],_0x399c70=this['view'],_0x536560=_0x3f6f94['editing']['view'],_0x1a0a47=_0x399c70['editable'],_0x9ac56c=_0x536560['document']['getRoot']();_0x1a0a47['name']=_0x9ac56c['rootName'],_0x399c70['render']();const _0xa9e503=_0x1a0a47['element'];this['setEditableElement'](_0x1a0a47['name'],_0xa9e503),_0x399c70['editable']['bind']('isFocused')['to'](this['focusTracker']),_0x536560['attachDomRoot'](_0xa9e503),this['_elementReplacer']['replace'](_0x142cf6,this['element']),this['_initToolbar'](),this['fire']('ready');}['destroy'](){super['destroy']();const _0xed8616=this['view'],_0x1a79a2=this['editor']['editing']['view'];this['_elementReplacer']['restore'](),_0x1a79a2['detachDomRoot'](_0xed8616['editable']['name']),_0xed8616['destroy']();}['_initToolbar'](){const _0x30812d=this['view'];_0x30812d['stickyPanel']['bind']('isActive')['to'](this['focusTracker'],'isFocused'),_0x30812d['stickyPanel']['limiterElement']=_0x30812d['element'],_0x30812d['stickyPanel']['bind']('viewportTopOffset')['to'](this,'viewportOffset',({top:_0x6cf7f9})=>_0x6cf7f9),_0x30812d['toolbar']['fillFromConfig'](this['_toolbarConfig'],this['componentFactory']),this['addToolbar'](_0x30812d['toolbar']);}}class st extends dt{['_editable'];['stickyPanel'];['toolbar'];get['editable'](){return this['_editable'];}constructor(_0x41a95d,_0x326a48,_0xedce4={}){super(_0x41a95d),this['stickyPanel']=new lt(_0x41a95d),this['toolbar']=new nt(_0x41a95d,{'shouldGroupWhenFull':_0xedce4['shouldToolbarGroupWhenFull']}),this['_editable']=new ut(_0x41a95d,_0x326a48);}['render'](){super['render'](),this['stickyPanel']['content']['add'](this['toolbar']),this['top']['add'](this['stickyPanel']),this['main']['add'](this['editable']);}}class w extends/* #__PURE__ -- @preserve */
rt(it){['_ui'];get['ui'](){return this['_ui'];}constructor(_0x106423,_0x17ef8d){super(_0x17ef8d),this['sourceElement']=_0x106423,this['model']['document']['createRoot']();const _0x4fd80a=new st(this['locale'],this['editing']['view'],{'shouldToolbarGroupWhenFull':!0x0});this['_ui']=new et(this,_0x4fd80a);}['destroy'](){return this['updateSourceElement'](),this['ui']['destroy'](),super['destroy']();}static async['create'](_0x335499,_0xe49eaf){const _0x4606b5=new this(_0x335499,_0xe49eaf);return await _0x4606b5['initPlugins'](),await _0x4606b5['ui']['init'](_0x335499),await _0x4606b5['data']['init'](_0x4606b5['config']['get']('initialData')||''),_0x4606b5['fire']('ready'),_0x4606b5;}}const p=['RevisionHistoryUI','RestrictedEditingMode'];class k extends _0x404964{['result'];static get['pluginName'](){return'RevisionViewerIntegration';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}constructor(_0x5af71a){function _0x5984aa(_0x3e9b98){return _0x3e9b98['map'](_0x12ff02=>String['fromCharCode'](_0x12ff02))['join']('');}super(_0x5af71a),this['result']='end',_0x5af71a[_0x5984aa([0x65,0x64,0x69,0x74,0x69,0x6e,0x67])][_0x5984aa([0x76,0x69,0x65,0x77])][_0x5984aa([0x5f,0x6f,0x76,0x65,0x72,0x6c,0x61,0x79,0x4d,0x6f,0x64,0x65,0x48,0x69,0x6e,0x74])]=_0x5984aa([0x61,0x75,0x74,0x6f]),_0x5af71a[_0x5984aa([0x5f,0x73,0x65,0x6e,0x64,0x55,0x73,0x61,0x67,0x65,0x52,0x65,0x71,0x75,0x65,0x73,0x74])]=()=>window[_0x5984aa([0x50,0x72,0x6f,0x6d,0x69,0x73,0x65])][_0x5984aa([0x72,0x65,0x73,0x6f,0x6c,0x76,0x65])]({[_0x5984aa([0x73,0x74,0x61,0x74,0x75,0x73])]:_0x5984aa([0x6f,0x6b])});}}class H extends _0x404964{['_viewerEditor'];static get['pluginName'](){return'RevisionHistory';}static get['isOfficialPlugin'](){return!0x0;}static get['isPremiumPlugin'](){return!0x0;}static get['requires'](){return[l,u];}constructor(_0x24852a){if(super(_0x24852a),!this['editor']['config']['get']('revisionHistory'))throw new _0x3ea720('revision-history-missing-configuration',this);this['_viewerEditor']=null,this['editor']['config']['define']('revisionHistory.showRevisionViewerCallback',_0x4dca9f=>this['_showRevisionViewer']({..._0x4dca9f,'translations':this['editor']['locale']['translations']})),this['editor']['config']['define']('revisionHistory.closeRevisionViewerCallback',_0x149754=>this['_closeRevisionViewer'](_0x149754)),this['editor']['config']['define']('revisionHistory.restoreRevisionCallback',_0x1afe65=>this['_restoreRevision'](_0x1afe65)),this['editor']['config']['define']('revisionHistory.requireRevisionName',!0x1),this['_enhanceShowRevisionViewerCallback'](),this['_enhanceCloseRevisionViewerCallback']();}set['adapter'](_0x35f3fb){this['editor']['plugins']['get']('RevisionTracker')['adapter']=_0x35f3fb;}get['adapter'](){return this['editor']['plugins']['get']('RevisionTracker')['adapter'];}['addRevisionData'](_0x5cb3c0){return this['editor']['plugins']['get']('RevisionTracker')['addRevisionData'](_0x5cb3c0);}['getRevision'](_0x271a75){return this['editor']['plugins']['get']('RevisionsRepository')['getRevision'](_0x271a75);}['getRevisions'](_0xc5deda){return this['editor']['plugins']['get']('RevisionsRepository')['getRevisions'](_0xc5deda||{'toJSON':!0x1});}['_getRevisionViewerEditorConfig'](){const _0x28d3b4=this['editor'],_0x453956=_0x5e00b5(_0x28d3b4,p),_0x2b371c=_0x28d3b4['plugins']['get']('RevisionTracker'),_0x1f7d0a=_0x28d3b4['plugins']['get']('Users')['users'];return _0x453956['toolbar']=['exitToEditing','restoreRevision','changesNavigation'],delete _0x453956['lazyRoots'],(_0x453956['plugins']['push'](k,d,m,class extends _0x404964{static get['requires'](){return[d,'Users'];}['init'](){const _0x2802c3=this['editor']['plugins']['get']('Users');for(const _0x9706bd of _0x1f7d0a)_0x9706bd['isAnonymous']||_0x2802c3['getUser'](_0x9706bd['id'])||_0x2802c3['addUser'](_0x9706bd);const _0x29bc6a=_0x2b371c['repository']['getRevisions']();let _0x535ccf=null;const _0x27bd96=this['editor']['plugins']['get']('RevisionViewer');_0x27bd96['adapter']=_0x2b371c['adapter'],_0x27bd96['bind']('isEnabled')['to'](_0x2b371c),this['editor']['commands']['get']('restoreRevision')['bind']('isEnabled')['to'](_0x28d3b4,'isReadOnly',_0x2bf117=>!_0x2bf117);for(const _0x54f7b6 of _0x29bc6a){const _0x21d5d0=null===_0x54f7b6['creator'];if(_0x21d5d0&&_0x54f7b6['toVersion']===_0x54f7b6['fromVersion'])continue;const _0x1905d6=_0x54f7b6['toJSON']();_0x27bd96['addRevisionData'](_0x1905d6,(_0x4bff84,_0x6b2e79,_0x163467)=>{if(_0x21d5d0){if(_0x535ccf)_0x535ccf['_update'](_0x4bff84,_0x6b2e79);else{if(!_0x6b2e79){const _0x37921e=_0x163467['toJSON']();_0x37921e['id']=_0x5b9713(),_0x2b371c['saveRevision'](_0x37921e,_0x163467['toVersion'])['then'](_0x4d821f=>{_0x535ccf=_0x4d821f;});}}}else _0x54f7b6['_update'](_0x4bff84,_0x6b2e79);});}}},g),_0x453956);}['_enhanceShowRevisionViewerCallback'](){const _0x162494=this['editor']['config']['get']('revisionHistory')['showRevisionViewerCallback'];this['editor']['config']['set']('revisionHistory.showRevisionViewerCallback',async()=>{this['editor']['enableReadOnlyMode']('revision-history-viewer-opened');const _0x475755=this['editor']['plugins']['get']('RevisionTracker');if(this['editor']['plugins']['has']('Autosave')){const _0x45761f=this['editor']['plugins']['get']('Autosave');await _0x45761f['save']();}else await _0x475755['update']();if(this['editor']['plugins']['has']('PaginationLookup')&&this['editor']['plugins']['get']('PaginationLookup')['_recalculatePageBreaks'](),this['editor']['plugins']['has']('Dialog')){const _0x33742a=this['editor']['plugins']['get']('Dialog');_0x33742a['isOpen']&&_0x33742a['hide']();}const _0x46556f=this['_getRevisionViewerEditorConfig']();return _0x162494(_0x46556f)['then'](_0x499f11=>{return(this['_viewerEditor']=_0x499f11,this['editor']['plugins']['has']('Annotations'))&&this['editor']['plugins']['get']('Annotations')['refreshVisibility'](),_0x499f11;})['catch'](_0x269df5=>(console['error'](_0x269df5),this['editor']['disableReadOnlyMode']('revision-history-viewer-opened'),null));});}['_enhanceCloseRevisionViewerCallback'](){const _0x5d01be=this['editor']['config']['get']('revisionHistory')['closeRevisionViewerCallback'];this['editor']['config']['set']('revisionHistory.closeRevisionViewerCallback',()=>(this['editor']['plugins']['has']('PaginationLookup')&&this['editor']['plugins']['get']('PaginationLookup')['_recalculatePageBreaks'](),this['_viewerEditor']['plugins']['get']('RevisionViewer')['_cleanUp'](),_0x5d01be(this['_viewerEditor'])['then'](()=>{if(this['editor']['disableReadOnlyMode']('revision-history-viewer-opened'),this['_viewerEditor']=null,this['editor']['plugins']['has']('Annotations')){const _0x16de7a=this['editor']['plugins']['get']('Annotations');_0x16de7a['refreshVisibility'](),_0x16de7a['refreshPositioning']();}})));}['_showRevisionViewer'](_0x1e715d){const _0x66a23b=this['editor']['config']['get']('revisionHistory.editorContainer'),_0x54170b=this['editor']['config']['get']('revisionHistory.viewerContainer'),_0x4e0813=this['editor']['config']['get']('revisionHistory.viewerEditorElement');return w['create'](_0x4e0813,_0x1e715d)['then'](_0xc1a66f=>(_0x54170b['style']['display']='block',_0x66a23b['style']['display']='none',_0xc1a66f));}['_closeRevisionViewer'](_0x3ac339){const _0x1ae36f=this['editor']['config']['get']('revisionHistory.editorContainer');return this['editor']['config']['get']('revisionHistory.viewerContainer')['style']['display']='none',_0x1ae36f['style']['display']='',_0x3ac339['destroy']();}async['_restoreRevision'](_0x10087b){const _0x2492a6=this['editor'],_0x4126b2=this['_viewerEditor']['plugins']['get']('RevisionViewer'),_0xf41bb9=_0x2492a6['plugins']['get']('RevisionTracker'),_0x20cb4c=_0x4126b2['repository']['getRevision'](_0x10087b);let _0x522684,_0xf739c9,_0x151d8d;try{_0x522684=await _0x4126b2['getRevisionData'](_0x20cb4c),_0xf739c9=await _0x4126b2['getRevisionRootsAttributes'](_0x20cb4c);}catch(_0x46fe31){return void console['error'](_0x46fe31);}_0x2492a6['model']['change'](_0x24b24d=>{for(const _0x7eecbc of Array['from'](_0x2492a6['model']['markers']['getMarkersGroup']('restrictedEditingException')))_0x24b24d['removeMarker'](_0x7eecbc);}),_0x4126b2['isReady']=!0x1,_0x2492a6['model']['enqueueChange'](_0x3c10cf=>{_0x3c10cf['setSelection'](null),_0x3c10cf['removeSelectionAttribute'](_0x2492a6['model']['document']['selection']['getAttributeKeys']());const _0xa10082=Object['keys'](_0x522684);for(const _0x48c00c of _0x2492a6['model']['document']['roots'])'$graveyard'!=_0x48c00c['rootName']&&_0x48c00c['isAttached']()&&!_0xa10082['includes'](_0x48c00c['rootName'])&&_0x3c10cf['detachRoot'](_0x48c00c);for(const _0xff0362 of _0xa10082){let _0x559e3b=_0x2492a6['model']['document']['getRoot'](_0xff0362);_0x559e3b&&_0x559e3b['isAttached']()||(_0x559e3b=_0x3c10cf['addRoot'](_0xff0362));const _0x2faef8=_0xf739c9[_0xff0362],_0x374bd=Object['keys'](_0x2faef8),_0x210899=_0x522684[_0xff0362];for(const _0x101bdc of _0x559e3b['getAttributeKeys']())_0x374bd['includes'](_0x101bdc)||_0x3c10cf['removeAttribute'](_0x101bdc,_0x559e3b);for(const _0x2269e4 of _0x374bd)_0x3c10cf['setAttribute'](_0x2269e4,_0xf739c9[_0xff0362][_0x2269e4],_0x559e3b);_0x3c10cf['remove'](_0x3c10cf['createRangeIn'](_0x559e3b)),_0x3c10cf['insert'](_0x2492a6['data']['parse'](_0x210899,_0x559e3b),_0x559e3b,0x0);}});const _0x58b365=R(_0x2492a6['locale'],'Restored');if(_0x20cb4c['name'])_0x151d8d=-0x1==_0x20cb4c['name']['indexOf'](_0x58b365)?_0x58b365+':\x20'+_0x20cb4c['name']:_0x20cb4c['name'];else _0x151d8d=_0x58b365+':\x20'+(_0x20cb4c['createdAt']['toLocaleDateString'](_0x2492a6['locale']['uiLanguage'],{'month':'long','day':'numeric'})+',\x20'+_0x20cb4c['createdAt']['toLocaleTimeString'](_0x2492a6['locale']['uiLanguage'],{'hour':'numeric','minute':'numeric'}));return await _0xf41bb9['saveRevision']({'name':_0x151d8d}),_0x4126b2['isReady']=!0x0,_0x2492a6['config']['get']('revisionHistory')['closeRevisionViewerCallback']();}}export{a as Revision,H as RevisionHistory,u as RevisionHistoryUI,l as RevisionTracker,d as RevisionViewer,le as RevisionViewerLoadingOverlay,m as RevisionViewerUI,j as RevisionsRepository,g as RevisionsSidebar};