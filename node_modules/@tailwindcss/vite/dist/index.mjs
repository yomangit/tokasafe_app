var B=(o,e)=>(e=Symbol[o])?e:Symbol.for("Symbol."+o),I=o=>{throw TypeError(o)};var R=(o,e,s)=>{if(e!=null){typeof e!="object"&&typeof e!="function"&&I("Object expected");var t,d;s&&(t=e[B("asyncDispose")]),t===void 0&&(t=e[B("dispose")],s&&(d=t)),typeof t!="function"&&I("Object not disposable"),d&&(t=function(){try{d.call(this)}catch(h){return Promise.reject(h)}}),o.push([s,t,e])}else s&&o.push([s]);return e},y=(o,e,s)=>{var t=typeof SuppressedError=="function"?SuppressedError:function(u,m,f,g){return g=Error(f),g.name="SuppressedError",g.error=u,g.suppressed=m,g},d=u=>e=s?new t(u,e,"An error was suppressed during disposal"):(s=!0,u),h=u=>{for(;u=o.pop();)try{var m=u[1]&&u[1].call(u[2]);if(u[0])return Promise.resolve(m).then(h,f=>(d(f),h()))}catch(f){d(f)}if(s)throw e};return h()};import{compile as q,env as z,Features as b,Instrumentation as U,normalizePath as M}from"@tailwindcss/node";import{clearRequireCache as $}from"@tailwindcss/node/require-cache";import{Scanner as T}from"@tailwindcss/oxide";import{Features as P,transform as J}from"lightningcss";import K from"node:fs/promises";import S from"node:path";var v=z.DEBUG,L=/[?&](raw|url)\b/,W=["tailwind-merge"];function N(){let o=[],e=null,s=!1,t=!1,d=new E(()=>new Set),h=new T({}),u=new E(i=>{let r=e.createResolver({...e.resolve,extensions:[".css"],mainFields:["style"],conditions:["style","development|production"],tryIndex:!1,preferRelative:!0});function l(a,p){return r(a,p,!0,s)}let c=e.createResolver(e.resolve);function n(a,p){return c(a,p,!0,s)}return new G(i,()=>d,e.base,l,n)});function m(i,r,l,c){for(let a of W)if(i.includes(`.vite/deps/${a}.js`)||i.includes(`/node_modules/${a}/`))return;let n=!1;for(let a of h.scanFiles([{content:r,extension:l}]))n=!0,d.get(i).add(a);n&&f(c)}function f(i){for(let r of o){let l=[];for(let[c,n]of u.entries()){let a=r.moduleGraph.getModuleById(c);if(!a){i||u.delete(c);continue}u.get(c).requiresRebuild=!1,r.moduleGraph.invalidateModule(a),l.push({type:`${a.type}-update`,path:a.url,acceptedPath:a.url,timestamp:Date.now()})}l.length>0&&r.hot.send({type:"update",updates:l})}}async function g(i,r,l){let c=i.lastContent,n=await i.generate(c,r,l);if(n===!1)return;v&&l.start("Optimize CSS");let a=O(n,{minify:t});return v&&l.end("Optimize CSS"),a}async function C(i,r,l){let c={...i,getCombinedSourcemap:()=>{throw new Error("getCombinedSourcemap not implemented")}};for(let n of e.plugins){if(!n.transform||n.name.startsWith("@tailwindcss/"))continue;if(n.name.startsWith("vite:")&&n.name!=="vite:css"&&n.name!=="vite:css-post"&&n.name!=="vite:vue")continue;if(n.name==="ssr-styles")continue;let a="handler"in n.transform?n.transform.handler:n.transform;try{let p=await a.call(c,l,r);if(!p)continue;typeof p=="string"?l=p:p.code&&(l=p.code)}catch{console.error(`Error running ${n.name} on Tailwind CSS output. Skipping.`)}}return l}return[{name:"@tailwindcss/vite:scan",enforce:"pre",configureServer(i){o.push(i)},async configResolved(i){e=i,t=e.build.cssMinify!==!1,s=e.build.ssr!==!1&&e.build.ssr!==void 0},transformIndexHtml(i,{path:r}){m(r,i,"html",s)},transform(i,r,l){let c=_(r);A(r)||m(r,i,c,l?.ssr??!1)}},{name:"@tailwindcss/vite:generate:serve",apply:"serve",enforce:"pre",async transform(i,r,l){var p=[];try{if(!A(r))return;let c=R(p,new U);c.start("[@tailwindcss/vite] Generate CSS (serve)");let n=u.get(r);l?.ssr||await Promise.all(o.map(F=>F.waitForRequestsIdle(r)));let a=await n.generate(i,F=>this.addWatchFile(F),c);if(!a)return u.delete(r),i;return{code:a}}catch(w){var D=w,x=!0}finally{y(p,D,x)}}},{name:"@tailwindcss/vite:generate:build",apply:"build",enforce:"pre",async transform(i,r){var a=[];try{if(!A(r))return;let l=R(a,new U);l.start("[@tailwindcss/vite] Generate CSS (build)");let c=u.get(r);let n=await c.generate(i,x=>this.addWatchFile(x),l);if(!n)return u.delete(r),i;return{code:n}}catch(p){var w=p,D=!0}finally{y(a,w,D)}},async renderStart(){var r=[];try{let i=R(r,new U);i.start("[@tailwindcss/vite] (render start)");for(let[a,p]of u.entries()){let w=await g(p,()=>{},i);if(!w){u.delete(a);continue}await C(this,a,w)}}catch(l){var c=l,n=!0}finally{y(r,c,n)}}}]}function _(o){let[e]=o.split("?",2);return S.extname(e).slice(1)}function A(o){return o.includes("/.vite/")?void 0:(_(o)==="css"||o.includes("&lang.css"))&&!L.test(o)}function O(o,{file:e="input.css",minify:s=!1}={}){function t(d){return J({filename:e,code:d,minify:s,sourceMap:!1,drafts:{customMedia:!0},nonStandard:{deepSelectorCombinator:!0},include:P.Nesting,exclude:P.LogicalProperties|P.DirSelector|P.LightDark,targets:{safari:16<<16|1024,ios_saf:16<<16|1024,firefox:8388608,chrome:7274496},errorRecovery:!0}).code}return t(t(Buffer.from(o))).toString()}function V(o){return S.resolve(o.replace(/\?.*$/,""))}var E=class extends Map{constructor(s){super();this.factory=s}get(s){let t=super.get(s);return t===void 0&&(t=this.factory(s,this),this.set(s,t)),t}},G=class{constructor(e,s,t,d,h){this.id=e;this.getSharedCandidates=s;this.base=t;this.customCssResolver=d;this.customJsResolver=h}lastContent="";compiler;requiresRebuild=!0;scanner;candidates=new Set;dependencies=new Set;basePath=null;overwriteCandidates=null;async generate(e,s,t){this.lastContent=e;let d=V(this.id),h=S.dirname(S.resolve(d));if(!this.compiler||!this.scanner||this.requiresRebuild){$(Array.from(this.dependencies)),this.dependencies=new Set([V(d)]),v&&t.start("Setup compiler"),this.compiler=await q(e,{base:h,shouldRewriteUrls:!0,onDependency:f=>{s(f),this.dependencies.add(f)},customCssResolver:this.customCssResolver,customJsResolver:this.customJsResolver}),v&&t.end("Setup compiler");let m=(this.compiler.root==="none"?[]:this.compiler.root===null?[]:[this.compiler.root]).concat(this.compiler.globs);this.scanner=new T({sources:m})}if(!(this.compiler.features&(b.AtApply|b.JsPluginCompat|b.ThemeFunction|b.Utilities)))return!1;if(!this.overwriteCandidates||this.compiler.features&b.Utilities){v&&t.start("Scan for candidates");for(let m of this.scanner.scan())this.candidates.add(m);v&&t.end("Scan for candidates")}if(this.compiler.features&b.Utilities){for(let m of this.scanner.files)s(m);for(let m of this.scanner.globs){if(m.pattern[0]==="!")continue;let f=S.relative(this.base,m.base);f[0]!=="."&&(f="./"+f),f=M(f),s(S.posix.join(f,m.pattern));let g=this.compiler.root;if(g!=="none"&&g!==null){let C=M(S.resolve(g.base,g.pattern));if(!await K.stat(C).then(r=>r.isDirectory(),()=>!1))throw new Error(`The path given to \`source(\u2026)\` must be a directory but got \`source(${C})\` instead.`);this.basePath=C}else g===null&&(this.basePath=null)}}this.requiresRebuild=!0,v&&t.start("Build CSS");let u=this.compiler.build(this.overwriteCandidates?this.overwriteCandidates:[...this.sharedCandidates(),...this.candidates]);return v&&t.end("Build CSS"),u}sharedCandidates(){if(!this.compiler)return new Set;if(this.compiler.root==="none")return new Set;let e=/^[A-Z]:/,s=d=>this.basePath===null||d.startsWith(this.basePath)?!0:e.test(d)?!1:!d.startsWith("/"),t=new Set;for(let[d,h]of this.getSharedCandidates())if(s(d))for(let u of h)t.add(u);return t}};export{N as default};
